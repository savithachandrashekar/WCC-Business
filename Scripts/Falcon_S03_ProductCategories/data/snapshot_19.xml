<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="19">
  <HTTPTask id="275" hostname="t.contentsquare.net" path="/uxa/9d25aca9-e352-4895-bbbd-ccebc9786c07.js" url="https://t.contentsquare.net/uxa/9d25aca9-e352-4895-bbbd-ccebc9786c07.js" ip="13.249.64.87" port="443" connectionId="17" origin="Primary" frame="1" startDateTime="2021-05-07T11:17:31.079+00:00" startTime="1975550515" endTime="1975550515">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Host" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dC5jb250ZW50c3F1YXJlLm5ldA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IiBOb3QgQTtCcmFuZCI7dj0iOTkiLCAiQ2hyb21pdW0iO3Y9IjkwIiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjkwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-mobile" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PzA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzkwLjAuNDQzMC45MyBTYWZhcmkvNTM3LjM2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY29ycw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9wcHNzdXBwb3J0LWl0Z2xsYmg3LmluYy5ocC5jb20vdXMtZW4vcHJvZHVjdHM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC91eGEvOWQyNWFjYTktZTM1Mi00ODk1LWJiYmQtY2NlYmM5Nzg2YzA3LmpzIEhUVFAvMS4xDQpIb3N0OiB0LmNvbnRlbnRzcXVhcmUubmV0DQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpzZWMtY2gtdWE6ICIgTm90IEE7QnJhbmQiO3Y9Ijk5IiwgIkNocm9taXVtIjt2PSI5MCIsICJHb29nbGUgQ2hyb21lIjt2PSI5MCINCnNlYy1jaC11YS1tb2JpbGU6ID8wDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTAuMC40NDMwLjkzIFNhZmFyaS81MzcuMzYNCkFjY2VwdDogKi8qDQpTZWMtRmV0Y2gtU2l0ZTogY3Jvc3Mtc2l0ZQ0KU2VjLUZldGNoLU1vZGU6IG5vLWNvcnMNClNlYy1GZXRjaC1EZXN0OiBzY3JpcHQNClJlZmVyZXI6IGh0dHBzOi8vcHBzc3VwcG9ydC1pdGdsbGJoNy5pbmMuaHAuY29tL3VzLWVuL3Byb2R1Y3RzDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>54396</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PXV0Zi04</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NTQzOTY=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAwNCBNYXkgMjAyMSAxNToxNzozMiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAwNCBNYXkgMjAyMSAxNToxNToxNCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ImRhOTExOTVmNTViMTRjZDdkYmY2NTVlZmYzYzgxMDIyIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="x-amz-server-side-encryption" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QUVTMjU2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT05MDA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QW1hem9uUzM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Cache" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SGl0IGZyb20gY2xvdWRmcm9udA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Via" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MS4xIDBiY2QwZTM3OWM5Y2Y4YTc3ZTY1NTBlMGM3MGNmYWY5LmNsb3VkZnJvbnQubmV0IChDbG91ZEZyb250KQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Amz-Cf-Pop" index="13">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>REZXNTMtQzE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Amz-Cf-Id" index="14">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>d3FGT3RQUndUSldoTEtnMllpenRVaExIczdhd25PampsUzdoWnpKTnBTVVdiRnVTcEJOOE1nPT0=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Age" index="15">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MjQ0Njgx</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7Y2hhcnNldD11dGYtOA0KQ29udGVudC1MZW5ndGg6IDU0Mzk2DQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpEYXRlOiBUdWUsIDA0IE1heSAyMDIxIDE1OjE3OjMyIEdNVA0KTGFzdC1Nb2RpZmllZDogVHVlLCAwNCBNYXkgMjAyMSAxNToxNToxNCBHTVQNCkVUYWc6ICJkYTkxMTk1ZjU1YjE0Y2Q3ZGJmNjU1ZWZmM2M4MTAyMiINCngtYW16LXNlcnZlci1zaWRlLWVuY3J5cHRpb246IEFFUzI1Ng0KQ2FjaGUtQ29udHJvbDogbWF4LWFnZT05MDANCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpTZXJ2ZXI6IEFtYXpvblMzDQpYLUNhY2hlOiBIaXQgZnJvbSBjbG91ZGZyb250DQpWaWE6IDEuMSAwYmNkMGUzNzljOWNmOGE3N2U2NTUwZTBjNzBjZmFmOS5jbG91ZGZyb250Lm5ldCAoQ2xvdWRGcm9udCkNClgtQW16LUNmLVBvcDogREZXNTMtQzENClgtQW16LUNmLUlkOiB3cUZPdFBSd1RKV2hMS2cyWWl6dFVoTEhzN2F3bk9qamxTN2haekpOcFNVV2JGdVNwQk44TWc9PQ0KQWdlOiAyNDQ2ODENCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>dmFyIENTX0NPTkY9eyJwcm9qZWN0SWQiOjEyNTUsInN0YXR1cyI6MSwiaG9zdG5hbWVzIjpbImhwLmNvbSIsImhwc2hvcHBpbmcuaW4iLCJvbWVuLmNvbSJdLCJjcm9zc0RvbWFpblRyYWNraW5nIjoxLCJjcm9zc0RvbWFpblNpbmdsZUlmcmFtZVRyYWNraW5nIjoxLCJjb25zZW50UmVxdWlyZWQiOjEsImFsbG93U3ViZG9tYWlucyI6MSwidmlzaXRvckNvb2tpZVRpbWVvdXQiOjM0MTY0MDAwMDAwLCJzYW1wbGVSYXRlIjoxMDAsInJlcGxheVJlY29yZGluZ1JhdGUiOjAsInZhbGlkYXRpb25SYXRlIjoxMCwibGFzdFRyYWNraW5nRHJhdyI6MTU4OTM4MDA5OCwidHJhY2tlckRvbWFpbiI6ImMuY29udGVudHNxdWFyZS5uZXQiLCJyZWNvcmRpbmdEb21haW4iOiJyLmNvbnRlbnRzcXVhcmUubmV0IiwidXNlTWFsa2FQaXBlbGluZSI6MCwiZWQiOiJsLmNvbnRlbnRzcXVhcmUubmV0L2xvZy93ZWIiLCJlTWVyY2hhbmRpc2luZ0VuYWJsZWQiOjAsIm1vdXNlTW92ZUhlYXRtYXBFbmFibGVkIjoxLCJhdXRvSW5zaWdodHNFbmFibGVkIjowLCJqc0Vycm9yc0VuYWJsZWQiOjEsImFwaUVycm9yc0VuYWJsZWQiOjAsInNlY3VyZUNvb2tpZXNFbmFibGVkIjowLCJ0cmlnZ2VyU2Vzc2lvblJlcGxheUVuYWJsZWQiOjAsInRyaWdnZXJTZXNzaW9uUmVwbGF5UmVnZXgiOm51bGwsImR5bmFtaWNJZFJlZ2V4IjoiXltcXGR8YS16XXsxMX0tW1xcZF17MX0kIiwid2hpdGVsaXN0ZWRBdHRyaWJ1dGVzIjpbXSwicmVwbGF5UmVjb3JkaW5nVW5tYXNrZWRVcmxSZWdleCI6bnVsbCwicmVwbGF5UmVjb3JkaW5nTWFza2VkVXJsUmVnZXgiOm51bGwsInRhZ0RlcGxveW1lbnRNb2RlIjoiRFVBTF9DT0xMRUNUSU9OIiwiZXhwZXJpbWVudGFsIjpudWxsLCJpZnJhbWVzVHJhY2tpbmciOjAsImR1YWxDb2xsZWN0aW9uVGFnRG9tYWluIjoiY29udGVudHNxdWFyZS5uZXQiLCJwdGNEb21haW4iOiJjdC5jb250ZW50c3F1YXJlLm5ldCIsInB0Y1BhcnRpdGlvbiI6bnVsbCwicHRjR3VpZCI6IjlkMjVhY2E5LWUzNTItNDg5NS1iYmJkLWNjZWJjOTc4NmMwNyJ9OyFmdW5jdGlvbih0KXt2YXIgZT17fTtmdW5jdGlvbiByKG4pe2lmKGVbbl0pcmV0dXJuIGVbbl0uZXhwb3J0czt2YXIgaT1lW25dPXtpOm4sbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gdFtuXS5jYWxsKGkuZXhwb3J0cyxpLGkuZXhwb3J0cyxyKSxpLmw9ITAsaS5leHBvcnRzfXIubT10LHIuYz1lLHIuZD1mdW5jdGlvbih0LGUsbil7ci5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2VudW1lcmFibGU6ITAsZ2V0Om59KX0sci5yPWZ1bmN0aW9uKHQpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LHIudD1mdW5jdGlvbih0LGUpe2lmKDEmZSYmKHQ9cih0KSksOCZlKXJldHVybiB0O2lmKDQmZSYmIm9iamVjdCI9PXR5cGVvZiB0JiZ0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtpZihyLnIobiksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOnR9KSwyJmUmJiJzdHJpbmciIT10eXBlb2YgdClmb3IodmFyIGkgaW4gdClyLmQobixpLGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfS5iaW5kKG51bGwsaSkpO3JldHVybiBufSxyLm49ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIHQuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gdH07cmV0dXJuIHIuZChlLCJhIixlKSxlfSxyLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LHIucD0iIixyKHIucz0yKX0oW2Z1bmN0aW9uKHQsZSxyKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGZ1bmN0aW9uKHQpe3QuQ29udGVudFNxdWFyZT0iQ09OVEVOVFNRVUFSRSIsdC5Mb2FkZWRCeUNsaWNrdGFsZT0iTE9BREVEX0JZX0NMSUNLVEFMRSIsdC5Mb2FkQ2xpY2t0YWxlUHRjPSJMT0FEX0NMSUNLVEFMRV9QVEMiLHQuRHVhbENvbGxlY3Rpb25SZXZpZXc9IkRVQUxfQ09MTEVDVElPTl9SRVZJRVciLHQuRHVhbENvbGxlY3Rpb249IkRVQUxfQ09MTEVDVElPTiJ9KGUuVGFnRGVwbG95bWVudE1vZGV8fChlLlRhZ0RlcGxveW1lbnRNb2RlPXt9KSl9LGZ1bmN0aW9uKHQsZSxyKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPS8oQGltcG9ydFxzK3VybFxzKlwoXHMqKFsiJ10pPyhbXiInKV0rKShcMilccypcKSl8KEBpbXBvcnRccysoWyInXSkoW14iJ10rKVw2KXwodXJsXHMqXChccyooWyInXSk/KFteIicpXSspKFw5KVxzKlwpKS9nO2Z1bmN0aW9uIGkodCxlKXtyZXR1cm4gdC5yZXBsYWNlKG4sKGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLHI9MDtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbcl09YXJndW1lbnRzW3JdO3ZhciBuPXRbM118fHRbN10saT10WzEwXSxvPShufHxpKS50cmltKCkscz1uPyJAaW1wb3J0ICI6IiI7cmV0dXJuIHMrInVybCgiK2UobykrIikifSkpfWUucmVwbGFjZUluPWksZS5leHRyYWN0RnJvbT1mdW5jdGlvbih0KXt2YXIgZT1bXTtyZXR1cm4gaSh0LChmdW5jdGlvbih0KXtyZXR1cm4gZS5wdXNoKHQpLHR9KSksZX19LGZ1bmN0aW9uKHQsZSxyKXsidXNlIHN0cmljdCI7ci5yKGUpO3ZhciBuPXt9O3IucihuKSxyLmQobiwiZ2V0IiwoZnVuY3Rpb24oKXtyZXR1cm4gWH0pKSxyLmQobiwiZ2V0UmVxdWVzdFBhcmFtZXRlcnMiLChmdW5jdGlvbigpe3JldHVybiBKfSkpO3ZhciBpPXt9O3IucihpKSxyLmQoaSwiZ2V0UmVxdWVzdFBhcmFtZXRlcnMiLChmdW5jdGlvbigpe3JldHVybiBSbn0pKTt2YXIgbz17bm9kZUZ1bmN0aW9uczpbImNoaWxkTm9kZXMiLCJoYXNDaGlsZE5vZGVzIiwicGFyZW50Tm9kZSJdLGNvbnN0cnVjdG9yczp7RGF0ZToiY3NEYXRlIixKU09OOiJjc0pTT04iLEFycmF5OiJjc0FycmF5IixTdHJpbmc6ImNzU3RyaW5nIixVUkw6ImNzVVJMIn19O2Z1bmN0aW9uIHModCxlKXt2YXIgcj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgcixuPXQ7biYmIShyPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobixlKSk7KW49T2JqZWN0LmdldFByb3RvdHlwZU9mKG4pO3JldHVybiByfSh0LGUpO3JldHVybihudWxsPT1yP3ZvaWQgMDpyLmdldCk/ci5nZXQ6KG51bGw9PXI/dm9pZCAwOnIudmFsdWUpP3IudmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tlXX19ZnVuY3Rpb24gYSh0KXtPYmplY3Qua2V5cyhvLmNvbnN0cnVjdG9ycykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7d2luZG93W28uY29uc3RydWN0b3JzW2VdXT10W2VdfSkpLG8ubm9kZUZ1bmN0aW9ucy5mb3JFYWNoKChmdW5jdGlvbihlKXt3aW5kb3dbImNzTm9kZSIrZV09cyh0Lk5vZGUucHJvdG90eXBlLGUpfSkpfXRyeXshZnVuY3Rpb24oKXthKHdpbmRvdyk7dmFyIHQ9ZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTt0LmlkPSJjcy1uYXRpdmUtZnJhbWUiLHQubmFtZT0iY3MtbmF0aXZlLWZyYW1lIix0LnN0eWxlLmRpc3BsYXk9Im5vbmUiLHQuc2V0QXR0cmlidXRlKCJ0aXRsZSIsIkludGVudGlvbmFsbHkgYmxhbmsiKTt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjcy1uYXRpdmUtZnJhbWUtaG9sZGVyIik7cmV0dXJuIGUuc3R5bGUuZGlzcGxheT0ibm9uZSIsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKSxlLmlubmVySFRNTD10Lm91dGVySFRNTCx3aW5kb3cuZnJhbWVzWyJjcy1uYXRpdmUtZnJhbWUiXX0oKTt0JiYod2luZG93LkNTUHVyZVdpbmRvdz10LGEod2luZG93LkNTUHVyZVdpbmRvdykpfSgpfWNhdGNoKHQpe3dpbmRvdy5DU1Byb3RlY3RuYXRpdmVGdW5jdGlvbnNFcnJvcnM9SlNPTi5zdHJpbmdpZnkodCl9ZnVuY3Rpb24gYyh0KXtyZXR1cm4gY3NTdHJpbmcucHJvdG90eXBlLnJlcGxhY2UuY2FsbCh0LC8oWyM7JiwuKyp+JzoiIV4kW1xdKCk8PT58LyU/QGB7fVxcIF0pL2csIlxcJDEiKX1mdW5jdGlvbiB1KHQpe3JldHVybiB0Lm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREV9ZnVuY3Rpb24gcCh0KXtyZXR1cm4gdC5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFfWZ1bmN0aW9uIGwodCl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiB1KHQpJiYibGluayI9PT10LmxvY2FsTmFtZX0odCkmJiJzdHlsZXNoZWV0Ij09PXQucmVsfWZ1bmN0aW9uIGgodCl7cmV0dXJuIHUodCkmJiJpbWciPT09dC5sb2NhbE5hbWV9ZnVuY3Rpb24gZih0KXtyZXR1cm4gdSh0KSYmInN0eWxlIj09PXQubG9jYWxOYW1lfWZ1bmN0aW9uIGQodCl7cmV0dXJuIHUodCkmJiJpbnB1dCI9PT10LmxvY2FsTmFtZX1mdW5jdGlvbiB5KHQpe3JldHVybiB1KHQpJiYic2NyaXB0Ij09PXQubG9jYWxOYW1lfWZ1bmN0aW9uIHYodCl7c3dpdGNoKHQubm9kZVR5cGUpe2Nhc2UgTm9kZS5ET0NVTUVOVF9OT0RFOmNhc2UgTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fWZ1bmN0aW9uIG0odCl7Zm9yKHZhciBlPXQscj1bZV07bnVsbCE9PWNzTm9kZXBhcmVudE5vZGUuYXBwbHkoZSk7KWU9Y3NOb2RlcGFyZW50Tm9kZS5hcHBseShlKSxjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwocixlKTtyZXR1cm4gZyhlKSYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHIsImRldGFjaGVkIikse2FuY2VzdG9yczpyLHNlbGVjdGlvblJvb3Q6ZX19ZnVuY3Rpb24gZyh0KXtyZXR1cm4gYi5pc1ZhbGlkRWxlbWVudCh0KX1mdW5jdGlvbiBTKHQpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpfXZhciBFPVsvXGR7NH0vLC9eZW1iZXJcZCskL107ZnVuY3Rpb24gdyh0LGUscixuKXt2YXIgaT1mdW5jdGlvbih0KXtyZXR1cm4gYyhjc1N0cmluZy5wcm90b3R5cGUudG9Mb3dlckNhc2UuY2FsbCh0LmxvY2FsTmFtZSkpfSh0KTtpZihmdW5jdGlvbih0LGUpe3ZhciByPUModCk7cmV0dXJuIHImJmNzU3RyaW5nLnByb3RvdHlwZS5tYXRjaC5jYWxsKHIsL15bXHctXSskLykmJlIoImRhdGEtY3Mtb3ZlcnJpZGUtaWQiLHIsZSl9KHQscikpcmV0dXJue2hhc1VuaXF1ZUlkZW50aWZpZXI6ITAsZWxlbWVudFNlbGVjdG9yOmkrJ1tkYXRhLWNzLW92ZXJyaWRlLWlkPSInK0ModCkrJyJdJ307dmFyIG89ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoImlkIik7cmV0dXJuIGU/YyhlKTplfSh0KTtyZXR1cm4gZnVuY3Rpb24odCxlLHIsbil7cmV0dXJuIGUmJiFmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9PUModCl9KHQpJiYhZnVuY3Rpb24odCxlLHIpe3JldHVybiB0Lmhhc0F0dHJpYnV0ZSgiZGF0YS1jcy1keW5hbWljLWlkIil8fGZ1bmN0aW9uKHQsZSl7dmFyIHI9ITE7dCYmZSYmKHI9ZS50ZXN0KHQpKTtyZXR1cm4gdCYmKGNzQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChFLChmdW5jdGlvbihlKXtyZXR1cm4gZS50ZXN0KHQpfSkpfHxyKX0oZSxyKX0odCxlLG4pJiZmdW5jdGlvbih0LGUpe3JldHVybiB0JiZSKCJpZCIsdCxlKX0oZSxyKX0odCxvLHIsbik/e2hhc1VuaXF1ZUlkZW50aWZpZXI6ITAsZWxlbWVudFNlbGVjdG9yOmkrIiMiK299OntoYXNVbmlxdWVJZGVudGlmaWVyOiExLGVsZW1lbnRTZWxlY3RvcjppKyI6ZXEoIitmdW5jdGlvbih0LGUpe2lmKCJkZXRhY2hlZCI9PT10fHw5PT09dC5ub2RlVHlwZSlyZXR1cm4gMDt2YXIgcj1jc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChTKGNzTm9kZWNoaWxkTm9kZXMuYXBwbHkodCkpLChmdW5jdGlvbih0KXtyZXR1cm4gMT09PXQubm9kZVR5cGUmJmNzU3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZS5jYWxsKHQubG9jYWxOYW1lKT09PWNzU3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZS5jYWxsKGUubG9jYWxOYW1lKX0pKTtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHIsZSl9KGUsdCkrIikifX1mdW5jdGlvbiBDKHQpe3JldHVybiB0LmdldEF0dHJpYnV0ZSgiZGF0YS1jcy1vdmVycmlkZS1pZCIpfWZ1bmN0aW9uIFIodCxlLHIpe3RyeXtyZXR1cm4gMT09PXIucXVlcnlTZWxlY3RvckFsbCgiWyIrdCsnPSInK2UrJyJdJykubGVuZ3RofWNhdGNoKHQpe2lmKCJTeW50YXhFcnJvciIhPT10Lm5hbWUpdGhyb3cgdH1yZXR1cm4hMX12YXIgYjtmdW5jdGlvbiBUKHQsZSxyLG4pe3ZhciBpPWNzQXJyYXkucHJvdG90eXBlLnNoaWZ0LmNhbGwodCk7aWYoMD09PXQubGVuZ3RoKXJldHVybiBBKGkscixuKTt2YXIgbz13KGksdFswXSxlLG4pLHM9by5lbGVtZW50U2VsZWN0b3IsYT1vLmhhc1VuaXF1ZUlkZW50aWZpZXI7aWYoIXImJmEpcmV0dXJuIiIrQSh0W3QubGVuZ3RoLTFdLHIsbikrczt2YXIgYz1UKHQsZSxyLG4pO3JldHVybihjP2MrIj4iOiIiKStzfWZ1bmN0aW9uIEEodCxlLHIpe2lmKCJkZXRhY2hlZCI9PT10KXJldHVybiJ8ZGV0YWNoZWR8IjtpZih0Lmhvc3Qpe3ZhciBuPW0odC5ob3N0KTtyZXR1cm4gVChuLmFuY2VzdG9ycyxuLnNlbGVjdGlvblJvb3QsZSxyKSsifHNoYWRvdy1yb290fCJ9cmV0dXJuIDExPT09dC5ub2RlVHlwZT8ifGZyYWdtZW50fCI6IiJ9ZnVuY3Rpb24gaygpe3JldHVybiBNYXRoLmZsb29yKEQubm93KCkvMWUzKX1mdW5jdGlvbiBQKCl7fWZ1bmN0aW9uIE8odCxlKXtyZXR1cm4gMD09PWNzU3RyaW5nLnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKHQsZSwwKX1mdW5jdGlvbiBfKHQsZSl7cmV0dXJuLTEhPT1jc1N0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHQsZSx0Lmxlbmd0aC1lLmxlbmd0aCl9IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuISF0JiYibG9jYWxOYW1lImluIHQmJiJnZXRBdHRyaWJ1dGUiaW4gdCYmImhhc0F0dHJpYnV0ZSJpbiB0JiYicGFyZW50Tm9kZSJpbiB0fWZ1bmN0aW9uIHIodCl7cmV0dXJuIHQmJiJqcXVlcnkiaW4gdCYmMT09PXQubGVuZ3RoP3RbMF06dH10LklOVkFMSURfRUxFTUVOVD0iSU5WQUxJRF9FTEVNRU5UIix0LmlzVmFsaWRFbGVtZW50PWUsdC5nZXRFbGVtZW50UGF0aD1mdW5jdGlvbihuLGkpe3ZhciBvPXZvaWQgMD09PWk/e306aSxzPW8uZnVsbFBhdGgsYT12b2lkIDAhPT1zJiZzLGM9by5keW5hbWljSWRSZWdleCx1PXZvaWQgMD09PWM/bnVsbDpjLHA9cihuKTtpZihwPT09ZG9jdW1lbnQpcmV0dXJuIiI7aWYoIWUocCkpcmV0dXJuIHQuSU5WQUxJRF9FTEVNRU5UO3ZhciBsPW0ocCk7cmV0dXJuIFQobC5hbmNlc3RvcnMsbC5zZWxlY3Rpb25Sb290LGEsdSl9LHQuZ2V0RWxlbWVudFBhdGhBbmRGaXJzdEFuY2hvclBhcmVudD1mdW5jdGlvbihuLGkpe3ZhciBvPXZvaWQgMD09PWk/e306aSxzPW8uZnVsbFBhdGgsYT12b2lkIDAhPT1zJiZzLGM9by5keW5hbWljSWRSZWdleCxwPXZvaWQgMD09PWM/bnVsbDpjLGw9cihuKTtpZihsPT09ZG9jdW1lbnQpcmV0dXJue3BhdGg6IiIsZmlyc3RBbmNob3JQYXJlbnQ6bnVsbH07aWYoIWUobCkpcmV0dXJue3BhdGg6dC5JTlZBTElEX0VMRU1FTlQsZmlyc3RBbmNob3JQYXJlbnQ6bnVsbH07dmFyIGg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHI9dCxuPVtyXSxpPW51bGw7bnVsbCE9PWNzTm9kZXBhcmVudE5vZGUuYXBwbHkocik7KW51bGw9PT1pJiYodShlPXIpJiYiYSI9PT1lLmxvY2FsTmFtZSkmJihpPXIpLGNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChuLGNzTm9kZXBhcmVudE5vZGUuYXBwbHkocikpLHI9Y3NOb2RlcGFyZW50Tm9kZS5hcHBseShyKTtyZXR1cm4gZyhyKSYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKG4sImRldGFjaGVkIikse2ZpcnN0QW5jaG9yUGFyZW50OmksYW5jZXN0b3JzOm4sc2VsZWN0aW9uUm9vdDpyfX0obCksZj1oLmZpcnN0QW5jaG9yUGFyZW50O3JldHVybntwYXRoOlQoaC5hbmNlc3RvcnMsaC5zZWxlY3Rpb25Sb290LGEscCksZmlyc3RBbmNob3JQYXJlbnQ6Zn19fShifHwoYj17fSkpLHdpbmRvdy5DU1BhdGhDb21wdXRhdGlvbj13aW5kb3cuQ1NQYXRoQ29tcHV0YXRpb258fGI7ZnVuY3Rpb24gSSh0KXtyZXR1cm4gTigpPHR9ZnVuY3Rpb24gTigpe3JldHVybiBNYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKS8xMDB9dmFyIE0sTCxEPXtub3c6ZnVuY3Rpb24oKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIHBlcmZvcm1hbmNlJiZwZXJmb3JtYW5jZS5ub3c/cGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCtNYXRoLnJvdW5kKHBlcmZvcm1hbmNlLm5vdygpKTpjc0RhdGUubm93KCl9fSx4PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnRyYWNrZXJEb21haW49dC50cmFja2VyRG9tYWluLHRoaXMubG9nZ2VyRG9tYWluPXQuZWQsdGhpcy5taW5Mb2dMZXZlbD10LmxvZ0xldmVsLHRoaXMucHJvamVjdElkPXQucHJvamVjdElkLHRoaXMuc3RhdHVzPXQuc3RhdHVzLHRoaXMuaG9zdG5hbWVzPXQuaG9zdG5hbWVzLHRoaXMuaWZyYW1lc1RyYWNraW5nPSEhdC5pZnJhbWVzVHJhY2tpbmcsdGhpcy5jcm9zc0RvbWFpblRyYWNraW5nPSEhdC5jcm9zc0RvbWFpblRyYWNraW5nLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVUcmFja2luZz0hIXQuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVUcmFja2luZyx0aGlzLmNvbnNlbnRSZXF1aXJlZD0hIXQuY29uc2VudFJlcXVpcmVkLHRoaXMuYWxsb3dTdWJkb21haW5zPSEhdC5hbGxvd1N1YmRvbWFpbnMsdGhpcy52aXNpdG9yQ29va2llVGltZW91dD10LnZpc2l0b3JDb29raWVUaW1lb3V0fHwzNDE2NGU2LHRoaXMuc2FtcGxlUmF0ZT10LnNhbXBsZVJhdGUsdGhpcy5yZXBsYXlSZWNvcmRpbmdSYXRlPXQucmVwbGF5UmVjb3JkaW5nUmF0ZSx0aGlzLnZhbGlkYXRpb25SYXRlPXQudmFsaWRhdGlvblJhdGUsdGhpcy5sYXN0VHJhY2tpbmdEcmF3PXQubGFzdFRyYWNraW5nRHJhd3x8MSx0aGlzLnVzZUh0dHBzPSEwLHRoaXMucmVjb3JkaW5nRG9tYWluPXQucmVjb3JkaW5nRG9tYWluLHRoaXMuZU1lcmNoYW5kaXNpbmdFbmFibGVkPXQuZU1lcmNoYW5kaXNpbmdFbmFibGVkLHRoaXMubW91c2VNb3ZlSGVhdG1hcEVuYWJsZWQ9dC5tb3VzZU1vdmVIZWF0bWFwRW5hYmxlZCx0aGlzLmF1dG9JbnNpZ2h0c0VuYWJsZWQ9dC5hdXRvSW5zaWdodHNFbmFibGVkLHRoaXMuanNFcnJvcnNFbmFibGVkPXQuanNFcnJvcnNFbmFibGVkLHRoaXMuYXBpRXJyb3JzRW5hYmxlZD10LmFwaUVycm9yc0VuYWJsZWQsdGhpcy50cmlnZ2VyU2Vzc2lvblJlcGxheUVuYWJsZWQ9dC50cmlnZ2VyU2Vzc2lvblJlcGxheUVuYWJsZWQsdGhpcy50cmlnZ2VyU2Vzc2lvblJlcGxheVJlZ2V4PXRoaXMuYnVpbGRSZWdleEZyb21Db25maWd1cmF0aW9uKHQudHJpZ2dlclNlc3Npb25SZXBsYXlSZWdleCksdGhpcy5tZXRyaWNSYXRlPXZvaWQgMD09PXQubWV0cmljUmF0ZT8wOnQubWV0cmljUmF0ZSx0aGlzLmR5bmFtaWNJZFJlZ2V4PXQuZHluYW1pY0lkUmVnZXg/bmV3IFJlZ0V4cCh0LmR5bmFtaWNJZFJlZ2V4KTpudWxsLHRoaXMud2hpdGVsaXN0ZWRBdHRyaWJ1dGVzPXQud2hpdGVsaXN0ZWRBdHRyaWJ1dGVzfHxbXSx0aGlzLnJlcGxheVJlY29yZGluZ1VubWFza2VkVXJsUmVnZXg9dGhpcy5idWlsZFJlZ2V4RnJvbUNvbmZpZ3VyYXRpb24odC5yZXBsYXlSZWNvcmRpbmdVbm1hc2tlZFVybFJlZ2V4KSx0aGlzLnJlcGxheVJlY29yZGluZ01hc2tlZFVybFJlZ2V4PXRoaXMuYnVpbGRSZWdleEZyb21Db25maWd1cmF0aW9uKHQucmVwbGF5UmVjb3JkaW5nTWFza2VkVXJsUmVnZXgpLHRoaXMudGFnRGVwbG95bWVudE1vZGU9dC50YWdEZXBsb3ltZW50TW9kZSx0aGlzLmR1YWxDb2xsZWN0aW9uVGFnRG9tYWluPXQuZHVhbENvbGxlY3Rpb25UYWdEb21haW58fG51bGwsdGhpcy5wdGNEb21haW49dC5wdGNEb21haW58fG51bGwsdGhpcy5wdGNHdWlkPXQucHRjR3VpZHx8bnVsbCx0aGlzLnNlY3VyZUNvb2tpZXNFbmFibGVkPSEhdC5zZWN1cmVDb29raWVzRW5hYmxlZCx0aGlzLnB0Y1NoYTUxMj10LnB0Y1NoYTUxMnx8bnVsbCx0aGlzLnB0Y1NuYXBzaG90UGF0aD10LnB0Y1NuYXBzaG90UGF0aHx8bnVsbCx0aGlzLmVtaXREZWJ1Z0V2ZW50cz0hMSx0aGlzLnVzZU1hbGthUGlwZWxpbmU9dC51c2VNYWxrYVBpcGVsaW5lLHRoaXMubWFsa2FRdW90YVNlcnZpY2VEb21haW49dC5tYWxrYVF1b3RhU2VydmljZURvbWFpbnx8bnVsbCx0aGlzLm1hbGthUmVjb3JkaW5nRG9tYWluPXQubWFsa2FSZWNvcmRpbmdEb21haW58fG51bGx9cmV0dXJuIHQucHJvdG90eXBlLmdldFRyYWNrZXJVcmk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm90b2NvbCgpKyI6Ly8iK3RoaXMudHJhY2tlckRvbWFpbn0sdC5wcm90b3R5cGUuZ2V0UmVjb3JkaW5nVXJpPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvdG9jb2woKSsiOi8vIisodGhpcy51c2VNYWxrYVBpcGVsaW5lJiZ0aGlzLm1hbGthUmVjb3JkaW5nRG9tYWluP3RoaXMubWFsa2FSZWNvcmRpbmdEb21haW46dGhpcy5yZWNvcmRpbmdEb21haW4pfSx0LnByb3RvdHlwZS5nZXRRdW90YVNlcnZpY2VVcmk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm90b2NvbCgpKyI6Ly8iK3RoaXMubWFsa2FRdW90YVNlcnZpY2VEb21haW59LHQucHJvdG90eXBlLmdldExvZ2dlclVyaT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3RvY29sKCkrIjovLyIrdGhpcy5sb2dnZXJEb21haW59LHQucHJvdG90eXBlLnByb3RvY29sPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXNlSHR0cHM/Imh0dHBzIjoiaHR0cCJ9LHQucHJvdG90eXBlLmlzUHJvamVjdEFjdGl2ZT1mdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5zdGF0dXN9LHQucHJvdG90eXBlLnByb2Nlc3NPcHRpb25PdmVycmlkZXM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0JiZ0LmZvckVhY2gmJnQuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIHI9dFswXSxuPXQuc2xpY2UoMSk7aWYoInNldE9wdGlvbiI9PT1yKXt2YXIgaT1uWzBdLG89blsxXTtlLnNldE92ZXJyaWRhYmxlRmllbGQoaSxvKX19KSl9LHQucHJvdG90eXBlLnNldE92ZXJyaWRhYmxlRmllbGQ9ZnVuY3Rpb24odCxlKXsidHJhY2tlckRvbWFpbiI9PT10JiYodGhpcy50cmFja2VyRG9tYWluPWUpLCJyZWNvcmRpbmdEb21haW4iPT09dCYmKHRoaXMucmVjb3JkaW5nRG9tYWluPWUpLCJsb2dnZXJEb21haW4iPT09dCYmKHRoaXMubG9nZ2VyRG9tYWluPWUpLCJtaW5Mb2dMZXZlbCI9PT10JiYodGhpcy5taW5Mb2dMZXZlbD1lKSwidXNlSHR0cHMiPT09dCYmKHRoaXMudXNlSHR0cHM9ISFlKX0sdC5wcm90b3R5cGUuYnVpbGRSZWdleEZyb21Db25maWd1cmF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0P25ldyBSZWdFeHAoIl4iK3QrIiQiKTpudWxsfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybntwaWQ6IiIrdGhpcy5wcm9qZWN0SWR9fSx0LnByb3RvdHlwZS51cGRhdGVEeW5hbWljRmllbGRzPWZ1bmN0aW9uKHQsZSl7ImVtaXREZWJ1Z0V2ZW50cyI9PT10JiYodGhpcy5lbWl0RGVidWdFdmVudHM9ZSksIm1pbkxvZ0xldmVsIj09PXQmJih0aGlzLm1pbkxvZ0xldmVsPWUpfSx0fSgpLHE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy53aW5kb3c9dCx0aGlzLmNvbmY9ZX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuaW5JZnJhbWVDb250ZXh0PXRoaXMud2luZG93LnNlbGYhPT10aGlzLndpbmRvdy50b3AsdGhpcy5jb25mLmlmcmFtZXNUcmFja2luZyYmdGhpcy5pbklmcmFtZUNvbnRleHQ/dGhpcy50b3BXaW5kb3dUcmFja2VyPSExOnRoaXMudG9wV2luZG93VHJhY2tlcj0hMH0sdC5wcm90b3R5cGUuaXNJbklmcmFtZUNvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbklmcmFtZUNvbnRleHR9LHQucHJvdG90eXBlLmlzVG9wV2luZG93VHJhY2tlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRvcFdpbmRvd1RyYWNrZXJ9LHR9KCk7IWZ1bmN0aW9uKHQpe3QuZGVidWc9ImRlYnVnIix0Lndhcm49Indhcm4iLHQuZXJyb3I9ImVycm9yIix0LmNyaXRpY2FsPSJjcml0aWNhbCJ9KE18fChNPXt9KSksZnVuY3Rpb24odCl7dC50b1F1ZXJ5PWZ1bmN0aW9uKHQpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5qb2luLmNhbGwoY3NBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoT2JqZWN0LmtleXModCksKGZ1bmN0aW9uKGUpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoZSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh0W2VdKX0pKSwiJiIpfX0oTHx8KEw9e30pKTt2YXIgVSxWPWZ1bmN0aW9uKCl7cmV0dXJuKFY9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHI9MSxuPWFyZ3VtZW50cy5sZW5ndGg7cjxuO3IrKylmb3IodmFyIGkgaW4gZT1hcmd1bWVudHNbcl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJih0W2ldPWVbaV0pO3JldHVybiB0fSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxqPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuZG9tYWluVXJpPXQsdGhpcy5wYXRoPWUsdGhpcy5iZWZvcmVSZXF1ZXN0Q2FsbGJhY2tzPVtdLHRoaXMuYWZ0ZXJSZXF1ZXN0Q2FsbGJhY2tzPVtdfXJldHVybiB0LnByb3RvdHlwZS5zZXRSZXF1ZXN0UGFyYW1ldGVyc1Byb3ZpZGVycz1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt0aGlzLnJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzPXR9LHQucHJvdG90eXBlLmJlZm9yZT1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5iZWZvcmVSZXF1ZXN0Q2FsbGJhY2tzLHQpfSx0LnByb3RvdHlwZS5hZnRlcj1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5hZnRlclJlcXVlc3RDYWxsYmFja3MsdCl9LHQucHJvdG90eXBlLnJldHJpZXZlUGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzP2NzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKGNzQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMucmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnMsKGZ1bmN0aW9uKHQpe3JldHVybiB0LmdldFJlcXVlc3RQYXJhbWV0ZXJzKCl9KSksKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIFYoVih7fSx0KSxlKX0pKTp7fX0sdH0oKSx6PShVPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKFU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KSh0LGUpfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPXR9VSh0LGUpLHQucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KHIucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyByKX0pLEI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIpe3JldHVybiB0LmNhbGwodGhpcyxlLHIpfHx0aGlzfXJldHVybiB6KGUsdCksZS5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbigpe2NzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmJlZm9yZVJlcXVlc3RDYWxsYmFja3MsKGZ1bmN0aW9uKHQpe3JldHVybiB0KCl9KSk7dmFyIHQ9dGhpcy5yZXRyaWV2ZVBhcmFtZXRlcnMoKTt0aGlzLmFkZENhY2hlQnVzdGluZyh0KTt2YXIgZT1MLnRvUXVlcnkodCk7dGhpcy5nZW5lcmF0ZVBpeGVsKGUpLGNzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmFmdGVyUmVxdWVzdENhbGxiYWNrcywoZnVuY3Rpb24odCl7cmV0dXJuIHQoKX0pKX0sZS5wcm90b3R5cGUuZ2VuZXJhdGVQaXhlbD1mdW5jdGlvbih0KXt2YXIgZT1uZXcgd2luZG93LkltYWdlKDEsMSk7ZS5vbmxvYWQ9UCxlLm9uZXJyb3I9UCxlLnNyYz10aGlzLmRvbWFpblVyaSsodGhpcy5wYXRoPyIvIit0aGlzLnBhdGg6IiIpKyI/Iit0fSxlLnByb3RvdHlwZS5hZGRDYWNoZUJ1c3Rpbmc9ZnVuY3Rpb24odCl7dC5yPWNzU3RyaW5nLnByb3RvdHlwZS5zbGljZS5jYWxsKCIiK01hdGgucmFuZG9tKCksMiw4KX0sZX0oaiksSD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLnByb2plY3RDb25maWd1cmF0aW9uPXQsdGhpcy5iYXNpY0xvZ1JlcXVlc3RQYXJhbWV0ZXI9ZX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMucmVxdWVzdD1uZXcgQih0aGlzLnByb2plY3RDb25maWd1cmF0aW9uLmdldExvZ2dlclVyaSgpKSx0aGlzLnJlcXVlc3Quc2V0UmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnModGhpcyx0aGlzLmJhc2ljTG9nUmVxdWVzdFBhcmFtZXRlcil9LHQucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24odCl7dGhpcy5sb2c9dCx0aGlzLnJlcXVlc3Quc2VuZCgpfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybnthOnRoaXMubG9nLmFwcCxsOnRoaXMubG9nLmxldmVsLG06dGhpcy5sb2cubWVzc2FnZSxzOnRoaXMubG9nLnN0YWNrdHJhY2V9fSx0fSgpLEY9L1thLXpBLVowLTkuXyUrLV0rKD86QHwlNDApW2EtekEtWjAtOS4lLV9dKygoPzpcLnwlMltlRV0pW2EtekEtWjAtOS1dKykrL2csRz0vW2EtekEtWjAtOStfLV0oPzpAfCU0MCkvLFc9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS5hbm9ueW1pemU9ZnVuY3Rpb24odCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiZHLnRlc3QodCk/Y3NTdHJpbmcucHJvdG90eXBlLnJlcGxhY2UuY2FsbCh0LEYsIkNTX0FOT05ZTUlaRURfRU1BSUwiKTp0fSx0LnByb3RvdHlwZS5hbm9ueW1pemVGaWVsZHM9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzO3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZSwoZnVuY3Rpb24oZSl7dFtlXT1yLmFub255bWl6ZSh0W2VdKX0pKSx0fSx0fSgpO2Z1bmN0aW9uIFgoKXtyZXR1cm4iMTAuOC42In1mdW5jdGlvbiBKKCl7cmV0dXJue3Y6IjEwLjguNiJ9fXZhciBZLEs9ZnVuY3Rpb24oKXtyZXR1cm4oSz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLG49YXJndW1lbnRzLmxlbmd0aDtyPG47cisrKWZvcih2YXIgaSBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmKHRbaV09ZVtpXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LFE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy5waWk9ZX1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0UmVxdWVzdFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gSyhLKHtkOiIiK0Qubm93KCkscDp0aGlzLnBpaS5hbm9ueW1pemUod2luZG93LmxvY2F0aW9uLmhyZWYpLHU6bmF2aWdhdG9yLnVzZXJBZ2VudH0sdGhpcy5jb25maWd1cmF0aW9uLmdldFJlcXVlc3RQYXJhbWV0ZXJzKCkpLHt2OiIxMC44LjYifSl9LHR9KCk7IWZ1bmN0aW9uKHQpe3RbdC5kZWJ1Zz0wXT0iZGVidWciLHRbdC53YXJuPTFdPSJ3YXJuIix0W3QuZXJyb3I9Ml09ImVycm9yIix0W3QuY3JpdGljYWw9M109ImNyaXRpY2FsIn0oWXx8KFk9e30pKTt2YXIgWj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3ZhciBuO3RoaXMucGFyZW50TG9nQ29udGV4dD1lLHRoaXMucGlpPW5ldyBXLHRoaXMubWluTG9nTGV2ZWw9WVtNLndhcm5dLHRoaXMuaXNMb2dnaW5nQWN0aXZlPSExLHRoaXMubWluTG9nTGV2ZWw9WVt0Lm1pbkxvZ0xldmVsfHxNLndhcm5dO3ZhciBpPXQudmFsaWRhdGlvblJhdGU+PTA/dC52YWxpZGF0aW9uUmF0ZToxMDt0aGlzLmlzTG9nZ2luZ0FjdGl2ZT1JKGkpLHRoaXMucmVxdWVzdD1yfHxuZXcgSCh0LG5ldyBRKHQsdGhpcy5waWkpKSx0aGlzLmxvZ1RyYWNrPSgobj17fSlbTS5kZWJ1Z109W10sbltNLndhcm5dPVtdLG5bTS5lcnJvcl09W10sbltNLmNyaXRpY2FsXT1bXSxuKSx0aGlzLnNuaXBwZXRMb2dDb3VudGVyPXt9LHRoaXMucmVxdWVzdC5pbml0KCl9cmV0dXJuIHQucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24odCxlLHIpe2lmKHZvaWQgMD09PWUmJihlPSIiKSx2b2lkIDA9PT1yJiYocj1NLndhcm4pLHRoaXMuaXNMb2dnaW5nQWxsb3dlZChyLGUpKXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5sb2dUcmFja1tyXSxlfHwiIik7dmFyIG49e21lc3NhZ2U6dGhpcy5nZXRNZXNzYWdlKHQsZSksc3RhY2t0cmFjZTp0aGlzLmdldFN0YWNrdHJhY2UodCksYXBwOiJ1eGEiLGxldmVsOnJ9O3RoaXMucmVxdWVzdC5zZW5kKG4pfX0sdC5wcm90b3R5cGUuZ2V0TWVzc2FnZT1mdW5jdGlvbih0LGUpe3ZhciByPXQgaW5zdGFuY2VvZiBFcnJvcj90aGlzLnBpaS5hbm9ueW1pemUodC5tZXNzYWdlfHx0LnRvU3RyaW5nKCkpOnQ7cmV0dXJuIGUmJihyKz0iIEVycm9yQ29kZTogIitlKSxyfSx0LnByb3RvdHlwZS5nZXRTdGFja3RyYWNlPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRXJyb3I/KHQuc3RhY2t8fCJObyBzdGFja3RyYWNlIikrIiAiK3RoaXMuZ2V0Q29udGV4dCgpOnRoaXMuZ2V0Q29udGV4dCgpfSx0LnByb3RvdHlwZS5nZXRDb250ZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnRMb2dDb250ZXh0LmdldFZpc2l0b3JTZXJ2aWNlKCksZT1udWxsPT10P3ZvaWQgMDp0LmdldFZpc2l0b3IoKTtpZighZSlyZXR1cm4iTm8gY29udGV4dCI7dmFyIHI9dGhpcy5wYXJlbnRMb2dDb250ZXh0LmdldFNlc3Npb25TZXJ2aWNlKCksbj1yJiZyLmdldFNlc3Npb24oKSxpPXt1c2VySWQ6ZS5pZCxzZXNzaW9uTnVtYmVyOmUudmlzaXRzQ291bnQscGFnZU51bWJlcjpuJiZuLnBhZ2VOdW1iZXJ9O3JldHVybiBjc0pTT04uc3RyaW5naWZ5KGkpfSx0LnByb3RvdHlwZS5pc0xvZ2dpbmdBbGxvd2VkPWZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuaXNMb2dnaW5nQWN0aXZlfHxZW3RdPHRoaXMubWluTG9nTGV2ZWwpcmV0dXJuITE7aWYoMD09PShudWxsPT1lP3ZvaWQgMDplLmluZGV4T2YoInNuaXBwZXQtIiwwKSkpcmV0dXJuIHRoaXMuaXNMb2dnaW5nQWxsb3dlZEZvclNuaXBwZXRzKGUpO3ZhciByPXRoaXMubG9nVHJhY2tbdF07cmV0dXJuIShyLmxlbmd0aD49NSkmJighZXx8IWNzQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChyLChmdW5jdGlvbih0KXtyZXR1cm4gdD09PWV9KSkpfSx0LnByb3RvdHlwZS5pc0xvZ2dpbmdBbGxvd2VkRm9yU25pcHBldHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW4gdGhpcy5zbmlwcGV0TG9nQ291bnRlcj8hKHRoaXMuc25pcHBldExvZ0NvdW50ZXJbdF0+PTUpJiYodGhpcy5zbmlwcGV0TG9nQ291bnRlclt0XSs9MSwhMCk6KHRoaXMuc25pcHBldExvZ0NvdW50ZXJbdF09MSwhMCl9LHR9KCksJD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7ZnVuY3Rpb24gdHQodCl7cmV0dXJuICQuaHJlZj10LCQuaHJlZn1mdW5jdGlvbiBldCh0KXtpZighTyh0LCJodHRwOi8vIikmJiFPKHQsImh0dHBzOi8vIikpcmV0dXJuIiI7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO3JldHVybiBlLmhyZWY9dCxkZWNvZGVVUklDb21wb25lbnQoZS5ob3N0bmFtZSl9ZnVuY3Rpb24gcnQodCxlKXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGUsKGZ1bmN0aW9uKGUpe3JldHVybiBfKHQsIi4iK2UpfHx0PT09ZXx8IiI9PT1lfSkpfXZhciBudCxpdCxvdCxzdDshZnVuY3Rpb24odCl7dC5QYXJlbnQ9InBhcmVudCIsdC5DaGlsZD0iY2hpbGQifShudHx8KG50PXt9KSksZnVuY3Rpb24odCl7dC5EaXNjb3Zlcnk9ImRpc2NvdmVyeSIsdC5TdG9wPSJzdG9wIix0LkNoaWxkTG9nTWVzc2FnZT0iY2hpbGRMb2dNZXNzYWdlIix0LkFuYWx5c2lzRXZlbnQ9ImFuYWx5c2lzRXZlbnQiLHQuSmF2YXNjcmlwdEVycm9yPSJqYXZhc2NyaXB0RXJyb3IiLHQuQXBpRXJyb3I9ImFwaUVycm9yIix0LkVtZXJjaGFuZGlzaW5nTWVzc2FnZT0iZW1lcmNoYW5kaXNpbmdNZXNzYWdlIix0LkNvbW1hbmRzPSJjb21tYW5kcyJ9KGl0fHwoaXQ9e30pKSwoc3Q9b3R8fChvdD17fSkpLmJ1aWxkQmFzZU1lc3NhZ2U9ZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9e3R5cGU6dCxmcm9tOmUscGlkOnIsc2lnbmF0dXJlOiJDU19JRlJBTUVfTUVTU0FHRSJ9O3JldHVybiB2b2lkIDAhPT1uJiZuPj0wJiYoaS5pZD1uKSxpfSxzdC5pc01lc3NhZ2VWYWxpZD1mdW5jdGlvbih0LGUscixuKXt2YXIgaT1ldCh0Lm9yaWdpbik7cmV0dXJuISF0LmRhdGEmJiEhdC5kYXRhLnR5cGUmJiJDU19JRlJBTUVfTUVTU0FHRSI9PT10LmRhdGEuc2lnbmF0dXJlJiZ0LmRhdGEuZnJvbT09PWUmJnQuZGF0YS5waWQ9PT1yJiZydChpLG4pfSxzdC5zZW5kTWVzc2FnZT1mdW5jdGlvbih0LGUscil7dC5wb3N0TWVzc2FnZShyLGUpfTt2YXIgYXQsY3QsdXQscHQsbHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuY29uZmlndXJhdGlvbj10fXJldHVybiB0LnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKHQsZSxyKXt2b2lkIDA9PT1lJiYoZT0iIiksdm9pZCAwPT09ciYmKHI9TS53YXJuKTt2YXIgbj17bWVzc2FnZTp0LGVycm9yQ29kZTplLGxldmVsOnJ9LGk9b3QuYnVpbGRCYXNlTWVzc2FnZShpdC5DaGlsZExvZ01lc3NhZ2UsbnQuQ2hpbGQsdGhpcy5jb25maWd1cmF0aW9uLnByb2plY3RJZCk7aS5jb250ZW50PW4sb3Quc2VuZE1lc3NhZ2Uod2luZG93LnBhcmVudCwiKiIsaSl9LHR9KCksaHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS5zZXRDb250ZXh0PWZ1bmN0aW9uKHQsZSl7dGhpcy52aXNpdG9yU2VydmljZT10LHRoaXMuc2Vzc2lvblNlcnZpY2U9ZX0sdC5wcm90b3R5cGUuZ2V0VmlzaXRvclNlcnZpY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aXNpdG9yU2VydmljZX0sdC5wcm90b3R5cGUuZ2V0U2Vzc2lvblNlcnZpY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXNzaW9uU2VydmljZX0sdH0oKSxmdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQuc2V0U3RyYXRlZ3k9ZnVuY3Rpb24oZSl7dC5zdHJhdGVneT1lfSx0LmdldFN0cmF0ZWd5PWZ1bmN0aW9uKCl7cmV0dXJuIHQuc3RyYXRlZ3l9LHQuZGVidWc9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0iIiksdGhpcy5zdHJhdGVneS5zZW5kKHQsZSxNLmRlYnVnKX0sdC53YXJuPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9IiIpLHRoaXMuc3RyYXRlZ3kuc2VuZCh0LGUsTS53YXJuKX0sdC5lcnJvcj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSIiKSx0aGlzLnN0cmF0ZWd5LnNlbmQodCxlLE0uZXJyb3IpfSx0LmNyaXRpY2FsPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9IiIpLHRoaXMuc3RyYXRlZ3kuc2VuZCh0LGUsTS5jcml0aWNhbCl9LHQudHJ5VG9FeGVjdXRlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIG49W10saT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspbltpXT1hcmd1bWVudHNbaV07dHJ5e3JldHVybiBlLmFwcGx5KHZvaWQgMCxuKX1jYXRjaChlKXt0cnl7ci5lcnJvcihlLHQpfWNhdGNoKHQpe319fX0sdH0oKSxkdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyLG4pe3ZhciBpPXIudG9TdHJpbmcoKSxvPXR8fChlLmNvbnN0cnVjdG9yJiZlLmNvbnN0cnVjdG9yLm5hbWUpKyIuIitpLHM9bi52YWx1ZTtuLnZhbHVlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBmdC50cnlUb0V4ZWN1dGUobyxzLmJpbmQodGhpcykpLmFwcGx5KHZvaWQgMCx0KX19fTtmdW5jdGlvbiB5dCh0KXtyZXR1cm4gU3QodCkmJigibnVtYmVyIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBOdW1iZXIpJiYhaXNOYU4odCl9ZnVuY3Rpb24gdnQodCl7cmV0dXJuIHQ9PT1wYXJzZUludCh0LDEwKX1mdW5jdGlvbiBtdCh0KXtyZXR1cm4gU3QodCkmJigic3RyaW5nIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBjc1N0cmluZyl9ZnVuY3Rpb24gZ3QodCl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiB0fWZ1bmN0aW9uIFN0KHQpe3JldHVybiB2b2lkIDAhPT10fWZ1bmN0aW9uIEV0KHQpe3JldHVybiBTdCh0KSYmbnVsbCE9PXR9ZnVuY3Rpb24gd3QodCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHR9ZnVuY3Rpb24gQ3QodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBFbGVtZW50fSFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3ZhciBlPW5ldyBSZWdFeHAoIihefDspWyBdKiIrdCsiPShbXjtdKikiKS5leGVjKGRvY3VtZW50LmNvb2tpZSk7cmV0dXJuIGU/ZGVjb2RlVVJJQ29tcG9uZW50KGVbMl0pOm51bGx9ZnVuY3Rpb24gcihlLHIsaSxvLHMsYSl7dmFyIGM9ZW5jb2RlVVJJQ29tcG9uZW50KCIiK3IpLHU9aT09PXQuQ1VSUkVOVF9ET01BSU4/dm9pZCAwOmkscD1uKG8pLGw9ZSsiPSIrYysocD8iO2V4cGlyZXM9IitwLnRvVVRDU3RyaW5nKCk6IiIpKyI7cGF0aD0vIisoRXQodSk/Ijtkb21haW49Iit1OiIiKTtyZXR1cm4gU3QocykmJnMhPT11dC5Ob3RTZXQmJihsPWwrIjtTYW1lU2l0ZT0iK3MpLFN0KGEpJiZhPT09cHQuWWVzJiYobCs9IjtTZWN1cmUiKSxkb2N1bWVudC5jb29raWU9bCwhMH1mdW5jdGlvbiBuKHQpe3JldHVybiB5dCh0KT9uZXcgY3NEYXRlKEQubm93KCkrdCk6dH1mdW5jdGlvbiBpKHQsbil7ZSh0KSYmcih0LCIiLG4sLTEpLGUodCkmJnIodCwiIixuLC0xLHV0Lk5vbmUscHQuWWVzKX10LkNVUlJFTlRfRE9NQUlOPSJDVVJSRU5UX0RPTUFJTiIsdC5nZXQ9ZSx0LnNldD1yLHQudG9FeHBpcmVEYXRlPW4sdC5yZW1vdmU9aSx0LmlzQ29va2llUHJlc2VudD1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5jb29raWUubGVuZ3RoPjB9LHQuZ2V0Um9vdERvbWFpbj1mdW5jdGlvbih0LG4pe3ZhciBvPWUoIl9jc19yb290LWRvbWFpbiIpO2lmKG51bGwhPT1vJiYiMSIhPT1vKXJldHVybiBvO2Zvcih2YXIgcz1jc1N0cmluZy5wcm90b3R5cGUuc3BsaXQuY2FsbCh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUsIi4iKSxhPWNzQXJyYXkucHJvdG90eXBlLnBvcC5jYWxsKHMpO3MubGVuZ3RoJiYobnVsbD09PW98fCIxIj09PW8pOylyKCJfY3Nfcm9vdC1kb21haW4iLGE9Y3NBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKFtjc0FycmF5LnByb3RvdHlwZS5wb3AuY2FsbChzKSxhXSwiLiIpLGEsdm9pZCAwLHQsbiksbz1lKCJfY3Nfcm9vdC1kb21haW4iKTtyZXR1cm4gaSgiX2NzX3Jvb3QtZG9tYWluIixhKSxhfX0oYXR8fChhdD17fSkpLGZ1bmN0aW9uKHQpe3QuYnJvd3NlcklzU2FmYXJpVjEyPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IudmVuZG9yJiZjc1N0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHdpbmRvdy5uYXZpZ2F0b3IudmVuZG9yLCJBcHBsZSIpPi0xJiZ3aW5kb3cubmF2aWdhdG9yLmFwcFZlcnNpb24mJmNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwod2luZG93Lm5hdmlnYXRvci5hcHBWZXJzaW9uLCJWZXJzaW9uLzEyLiIpPi0xfX0oY3R8fChjdD17fSkpLGZ1bmN0aW9uKHQpe3QuTm9uZT0iTm9uZSIsdC5MYXg9IkxheCIsdC5Ob3RTZXQ9IlgifSh1dHx8KHV0PXt9KSksZnVuY3Rpb24odCl7dFt0Llllcz0xXT0iWWVzIix0W3QuTm89MF09Ik5vIn0ocHR8fChwdD17fSkpO3ZhciBSdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMudXJsU2VydmljZT1lLHRoaXMuY29va2llQ2hlY2tlcj1yLHRoaXMuc3VwcG9ydHNTYW1lU2l0ZT0hMSx0aGlzLnNhbWVTaXRlRmxhZz11dC5Ob3RTZXQsdGhpcy5zZWN1cmVGbGFnPXB0Lk5vLHRoaXMuY2FjaGVzPXt9fXJldHVybiB0LnByb3RvdHlwZS5nZXRTYW1lU2l0ZUZsYWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zYW1lU2l0ZUZsYWd9LHQucHJvdG90eXBlLmdldFNlY3VyZUZsYWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWN1cmVGbGFnfSx0LnByb3RvdHlwZS5nZXREb21haW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21haW59LHQucHJvdG90eXBlLmdldFJvb3REb21haW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290RG9tYWlufSx0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb21wdXRlU2FtZVNpdGVGbGFnKCksZT10aGlzLmNvbXB1dGVTZWN1cmVGbGFnKCk7dGhpcy5zdXBwb3J0c1NhbWVTaXRlPXRoaXMuY2hlY2tTYW1lU2l0ZUZyb21Db250ZXh0KHQsZSksdGhpcy5zdXBwb3J0c1NhbWVTaXRlPyh0aGlzLnNhbWVTaXRlRmxhZz10LHRoaXMuc2VjdXJlRmxhZz1lKTp0aGlzLmNvbmZpZ3VyYXRpb24uc2VjdXJlQ29va2llc0VuYWJsZWQmJiJodHRwczoiPT09dGhpcy51cmxTZXJ2aWNlLmdldFVybFByb3RvY29sKCkmJih0aGlzLnNlY3VyZUZsYWc9cHQuWWVzKSx0aGlzLnJvb3REb21haW49dGhpcy5jb21wdXRlUm9vdERvbWFpbigpLHRoaXMuZG9tYWluPXRoaXMuY29tcHV0ZURvbWFpbih0aGlzLnJvb3REb21haW4pfSx0LnByb3RvdHlwZS5jaGVja1NhbWVTaXRlRnJvbUNvbnRleHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4hY3QuYnJvd3NlcklzU2FmYXJpVjEyKCkmJihhdC5zZXQodC5DT09LSUVfVEVTVF9GT1JfU0FNRV9TSVRFLCJUZXN0IHNhbWUgc2l0ZSIsdC5DVVJSRU5UX0RPTUFJTix2b2lkIDAsZSxyKSwhIWF0LmdldCh0LkNPT0tJRV9URVNUX0ZPUl9TQU1FX1NJVEUpJiYoYXQucmVtb3ZlKHQuQ09PS0lFX1RFU1RfRk9SX1NBTUVfU0lURSx0LkNVUlJFTlRfRE9NQUlOKSwhMCkpfSx0LnByb3RvdHlwZS5jb21wdXRlU2FtZVNpdGVGbGFnPWZ1bmN0aW9uKCl7cmV0dXJuImh0dHA6Ij09PXRoaXMudXJsU2VydmljZS5nZXRVcmxQcm90b2NvbCgpP3V0LkxheDp0aGlzLmNvb2tpZUNoZWNrZXIuaXNTYW1lU2l0ZU5vbmVTZWN1cmVOZWVkZWQoKXx8dGhpcy5jb25maWd1cmF0aW9uLmNyb3NzRG9tYWluVHJhY2tpbmc/dXQuTm9uZTp1dC5MYXh9LHQucHJvdG90eXBlLmNvbXB1dGVTZWN1cmVGbGFnPWZ1bmN0aW9uKCl7cmV0dXJuImh0dHA6Ij09PXRoaXMudXJsU2VydmljZS5nZXRVcmxQcm90b2NvbCgpP3B0Lk5vOnRoaXMuY29uZmlndXJhdGlvbi5zZWN1cmVDb29raWVzRW5hYmxlZHx8dGhpcy5jb25maWd1cmF0aW9uLmNyb3NzRG9tYWluVHJhY2tpbmd8fHRoaXMuY29va2llQ2hlY2tlci5pc1NhbWVTaXRlTm9uZVNlY3VyZU5lZWRlZCgpP3B0LlllczpwdC5Ob30sdC5wcm90b3R5cGUuaXNTYW1lU2l0ZVN1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN1cHBvcnRzU2FtZVNpdGV9LHQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUscil7dmFyIG49YXQudG9FeHBpcmVEYXRlKHIpO2F0LnNldCh0LGUsdGhpcy5kb21haW4sbix0aGlzLmdldFNhbWVTaXRlRmxhZygpLHRoaXMuZ2V0U2VjdXJlRmxhZygpKX0sdC5wcm90b3R5cGUuc2V0V2l0aENhY2hlPWZ1bmN0aW9uKHQsZSxyKXt0aGlzLnNldCh0LGUsciksdGhpcy5jYWNoZXNbdF09e3ZhbHVlOmUsZXhwaXJlczpELm5vdygpK3J9fSx0LnByb3RvdHlwZS5nZXRXaXRoQ2FjaGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jYWNoZXNbdF07cmV0dXJuIGUmJkQubm93KCk8PWUuZXhwaXJlcz9lLnZhbHVlOnRoaXMuZ2V0KHQpfSx0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IFJlZ0V4cCgiKF58OylbIF0qIit0KyI9KFteO10qKSIpLmV4ZWMoZG9jdW1lbnQuY29va2llKTtyZXR1cm4gZT9kZWNvZGVVUklDb21wb25lbnQoZVsyXSk6bnVsbH0sdC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9ZXx8dGhpcy5kb21haW47YXQucmVtb3ZlKHQsciksZGVsZXRlIHRoaXMuY2FjaGVzW3RdfSx0LnByb3RvdHlwZS5jb21wdXRlUm9vdERvbWFpbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29va2llQ2hlY2tlci5pc1NhbWVTaXRlTm9uZVNlY3VyZU5lZWRlZCgpJiZ0aGlzLmlzU2FtZVNpdGVTdXBwb3J0ZWQoKSxlPXQ/dXQuTm9uZTp2b2lkIDAscj10P3B0Llllczp2b2lkIDA7cmV0dXJuIGF0LmdldFJvb3REb21haW4oZSxyKX0sdC5wcm90b3R5cGUuY29tcHV0ZURvbWFpbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb25maWd1cmF0aW9uLmFsbG93U3ViZG9tYWlucz90OmF0LkNVUlJFTlRfRE9NQUlOfSx0LkNVUlJFTlRfRE9NQUlOPSJDVVJSRU5UX0RPTUFJTiIsdC5DT09LSUVfVEVTVF9GT1JfU0FNRV9TSVRFPSJfY3Nfc2FtZV9zaXRlIix0fSgpLGJ0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmlmcmFtZUNvbnRleHQ9dCx0aGlzLmNvb2tpZUVuYWJsZWQ9ITEsdGhpcy51c2VTYW1lU2l0ZU5vbmVTZWN1cmVDb29raWU9ITF9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXtpZih0aGlzLmlmcmFtZUNvbnRleHQuaXNUb3BXaW5kb3dUcmFja2VyKCkmJiJjb29raWUiaW4gZG9jdW1lbnQpe2lmKCF0aGlzLmlmcmFtZUNvbnRleHQuaXNJbklmcmFtZUNvbnRleHQoKSYmYXQuaXNDb29raWVQcmVzZW50KCkpcmV0dXJuIHRoaXMuY29va2llRW5hYmxlZD0hMCx2b2lkKHRoaXMudXNlU2FtZVNpdGVOb25lU2VjdXJlQ29va2llPSExKTtpZihhdC5zZXQoIl9jc190IiwiMSIsYXQuQ1VSUkVOVF9ET01BSU4pLG51bGwhPT1hdC5nZXQoIl9jc190IikpcmV0dXJuIHRoaXMuY29va2llRW5hYmxlZD0hMCx0aGlzLnVzZVNhbWVTaXRlTm9uZVNlY3VyZUNvb2tpZT0hMSx2b2lkIGF0LnJlbW92ZSgiX2NzX3QiLGF0LkNVUlJFTlRfRE9NQUlOKTthdC5zZXQoIl9jc190IiwiMSIsYXQuQ1VSUkVOVF9ET01BSU4sdm9pZCAwLHV0Lk5vbmUscHQuWWVzKSxudWxsIT09YXQuZ2V0KCJfY3NfdCIpJiYodGhpcy5jb29raWVFbmFibGVkPSEwLHRoaXMudXNlU2FtZVNpdGVOb25lU2VjdXJlQ29va2llPSEwLGF0LnJlbW92ZSgiX2NzX3QiLGF0LkNVUlJFTlRfRE9NQUlOKSl9fSx0LnByb3RvdHlwZS5hcmVDb29raWVzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvb2tpZUVuYWJsZWR9LHQucHJvdG90eXBlLmlzU2FtZVNpdGVOb25lU2VjdXJlTmVlZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXNlU2FtZVNpdGVOb25lU2VjdXJlQ29va2llfSx0fSgpO3ZhciBUdCxBdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQuY2hlY2s9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09T2JqZWN0LmFzc2lnbnx8dGhpcy50cnlPYmplY3RBc3NpZ24oKX0sdC50cnlPYmplY3RBc3NpZ249ZnVuY3Rpb24oKXt0cnl7dmFyIHQ9e30sZT1PYmplY3QuYXNzaWduKHQse2E6MX0se2I6MixjOntkOjR9fSkscj17YToxLGI6MixjOntkOjR9fTtyZXR1cm4gY3NKU09OLnN0cmluZ2lmeShlKT09PWNzSlNPTi5zdHJpbmdpZnkocikmJmNzSlNPTi5zdHJpbmdpZnkodCk9PT1jc0pTT04uc3RyaW5naWZ5KHIpfWNhdGNoKHQpe3JldHVybiExfX0sdH0oKSxrdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLmNvb2tpZUNoZWNrZXI9ZX1yZXR1cm4gdC5wcm90b3R5cGUuY2FuVHJhY2s9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Jyb3dzaW5nQ29udGV4dFN1cHBvcnRlZCgpJiZ0aGlzLmNhblRyYWNrUHJvamVjdCgpJiZ0aGlzLmNvb2tpZUNoZWNrZXIuYXJlQ29va2llc0VuYWJsZWQoKSYmZnVuY3Rpb24oKXt2YXIgdD0iQ1NMb2NhbFN0b3JhZ2VUZXN0Ijt0cnl7cmV0dXJuIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHQsdCksbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odCksITB9Y2F0Y2godCl7cmV0dXJuITF9fSgpfSx0LnByb3RvdHlwZS5jYW5UcmFja0luSWZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCcm93c2luZ0NvbnRleHRTdXBwb3J0ZWQoKSYmdGhpcy5jYW5UcmFja1Byb2plY3QoKX0sdC5wcm90b3R5cGUuY2FuVHJhY2tQcm9qZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5pc1Byb2plY3RBY3RpdmUoKSYmcnQod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLHRoaXMuY29uZmlndXJhdGlvbi5ob3N0bmFtZXMpfSx0LnByb3RvdHlwZS5pc0Jyb3dzaW5nQ29udGV4dFN1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzRG9jUHJlcmVuZGVyZWQoKSYmdGhpcy5pc0Jyb3dzZXJTdXBwb3J0ZWQoKSYmQXQuY2hlY2soKX0sdC5wcm90b3R5cGUuaXNEb2NQcmVyZW5kZXJlZD1mdW5jdGlvbigpe3JldHVybiJ2aXNpYmlsaXR5U3RhdGUiaW4gZG9jdW1lbnQmJiJwcmVyZW5kZXIiPT09ZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlfSx0LnByb3RvdHlwZS5pc0Jyb3dzZXJTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4icGFnZVhPZmZzZXQiaW4gd2luZG93JiYicGFnZVlPZmZzZXQiaW4gd2luZG93JiYib25wYWdlaGlkZSJpbiB3aW5kb3cmJiJKU09OImluIHdpbmRvdyYmInBhcnNlImluIHdpbmRvdy5KU09OJiYic3RyaW5naWZ5ImluIHdpbmRvdy5KU09OJiYiYWRkRXZlbnRMaXN0ZW5lciJpbiB3aW5kb3cmJiJyZW1vdmVFdmVudExpc3RlbmVyImluIHdpbmRvdyYmIk5vZGUiaW4gd2luZG93JiYiZmlsdGVyImluIGNzQXJyYXkucHJvdG90eXBlJiYiZm9yRWFjaCJpbiBjc0FycmF5LnByb3RvdHlwZSYmInF1ZXJ5U2VsZWN0b3JBbGwiaW4gZG9jdW1lbnQmJiJub3ciaW4gRGF0ZSYmImtleXMiaW4gT2JqZWN0JiYicGVyZm9ybWFuY2UiaW4gd2luZG93fSx0fSgpOyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiB0LmdldCgiX2NzX2N2YXJzIil9dC5nZXQ9ZnVuY3Rpb24odCl7dmFyIHI9ZSh0KTtyZXR1cm4gbnVsbCE9PXI/d2luZG93LkpTT04ucGFyc2Uocik6bnVsbH0sdC5nZXRSYXc9ZSx0LnNldFJhdz1mdW5jdGlvbih0LGUscil7ZS5zZXQoIl9jc19jdmFycyIsdCksci5zZXRDb29raWUoIl9jc19jdmFycyIsdCl9LHQucmVtb3ZlPWZ1bmN0aW9uKHQsZSl7dC5kZWxldGUoIl9jc19jdmFycyIpLGUucmVtb3ZlQ29va2llKCJfY3NfY3ZhcnMiKX0sdC5pc1ZhbGlkQ3VzdG9tVmFyU3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdH19KFR0fHwoVHQ9e30pKTt2YXIgUHQsT3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyLG4saSxvKXt0aGlzLnZpc2l0b3JTZXJ2aWNlPXQsdGhpcy5zZXNzaW9uU2VydmljZT1lLHRoaXMuZXhjbHVzaW9uU2VydmljZT1yLHRoaXMuY29uZmlndXJhdGlvbj1uLHRoaXMuY29va2llU2VydmljZT1pLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlPW99cmV0dXJuIHQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybntleGNsdXNpb246dGhpcy5leGNsdXNpb25TZXJ2aWNlLmdldEFwcGxpZWRUcmFja2luZ0RyYXcoKSx2aXNpdG9yOnRoaXMudmlzaXRvclNlcnZpY2UuZ2V0VmlzaXRvcigpLHNlc3Npb246dGhpcy5zZXNzaW9uU2VydmljZS5nZXRTZXNzaW9uKCksY3ZhcnM6VHQuZ2V0UmF3KHRoaXMuY29va2llU2VydmljZSl9fSx0LnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXt0JiYodC5leGNsdXNpb24/dGhpcy5leGNsdWRlKCk6dGhpcy5pbmNsdWRlKHQpKX0sdC5wcm90b3R5cGUuZXhjbHVkZT1mdW5jdGlvbigpe3RoaXMuZXhjbHVzaW9uU2VydmljZS5leGNsdWRlKHRoaXMuY29uZmlndXJhdGlvbiksdGhpcy52aXNpdG9yU2VydmljZS5yZW1vdmVDdXJyZW50VmlzaXRvcigpLHRoaXMuc2Vzc2lvblNlcnZpY2UucmVtb3ZlQ3VycmVudFNlc3Npb24oKSxUdC5yZW1vdmUodGhpcy5jb29raWVTZXJ2aWNlLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlKX0sdC5wcm90b3R5cGUuaW5jbHVkZT1mdW5jdGlvbih0KXt0aGlzLmV4Y2x1c2lvblNlcnZpY2UucmVtb3ZlRXhjbHVzaW9uKCksdGhpcy52aXNpdG9yU2VydmljZS5zZXRWaXNpdG9yKHQudmlzaXRvciksdC5zZXNzaW9uP3RoaXMuc2Vzc2lvblNlcnZpY2Uuc2V0U2Vzc2lvbih0LnNlc3Npb24pOnRoaXMuc2Vzc2lvblNlcnZpY2UucmVtb3ZlQ3VycmVudFNlc3Npb24oKSx0LmN2YXJzP1R0LnNldFJhdyh0LmN2YXJzLHRoaXMuY29va2llU2VydmljZSx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZSk6VHQucmVtb3ZlKHRoaXMuY29va2llU2VydmljZSx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZSl9LHR9KCksX3Q9L14oKFthLXowLTlcLV0pKyhcLlswLTldKyl7Nn0pKFwuKE5vbmV8TGF4fFgpXC4oMHwxKSk/JC87IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbChbdC5pZCx0LmNyZWF0aW9uVGltZXN0YW1wLHQudmlzaXRzQ291bnQsdC5oaXRUaW1lc3RhbXAsdC5sYXN0VmlzaXRUaW1lc3RhbXAsdC5hcHBsaWVkVHJhY2tpbmdEcmF3LHQuZXhwaXJlcyx0LnNhbWVTaXRlLHQuc2VjdXJlZF0sIi4iKX1mdW5jdGlvbiByKHQpe3ZhciBlPWNzU3RyaW5nLnByb3RvdHlwZS5zcGxpdC5jYWxsKHQsIi4iKSxyPWVbMF0sbj1lWzFdLGk9ZVsyXSxvPWVbM10scz1lWzRdLGE9ZVs1XSxjPWVbNl0sdT1lWzddLHA9ZVs4XTtyZXR1cm57aWQ6cixjcmVhdGlvblRpbWVzdGFtcDpOdW1iZXIobiksdmlzaXRzQ291bnQ6TnVtYmVyKGkpLGhpdFRpbWVzdGFtcDpOdW1iZXIobyksbGFzdFZpc2l0VGltZXN0YW1wOk51bWJlcihzKSxhcHBsaWVkVHJhY2tpbmdEcmF3Ok51bWJlcihhKSxleHBpcmVzOk51bWJlcihjKSxzYW1lU2l0ZTp1fHx2b2lkIDAsc2VjdXJlZDpwP051bWJlcihwKTp2b2lkIDB9fXQuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0KCJfY3NfaWQiKTtyZXR1cm4gZT9yKGUpOm51bGx9LHQuc2V0PWZ1bmN0aW9uKHQscixuKXt2YXIgaT1uZXcgY3NEYXRlKHQuZXhwaXJlcyksbz1lKHQpO3Iuc2V0KCJfY3NfaWQiLG8saSksbi5zZXRDb29raWUoIl9jc19pZCIsbyxpKX0sdC5yZW1vdmU9ZnVuY3Rpb24odCxlLHIpe2UuZGVsZXRlKCJfY3NfaWQiLHQpLHIucmVtb3ZlQ29va2llKCJfY3NfaWQiKX0sdC50b1N0cmluZz1lLHQuZnJvbVN0cmluZz1yLHQuaXNWYWxpZFZpc2l0b3JTdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIF90LnRlc3QodCl9fShQdHx8KFB0PXt9KSk7dmFyIEl0LE50PS9eXGQrXC5bMDEzNVRdJC8sTXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5jb29raWVTZXJ2aWNlPXQsdGhpcy5jcm9zc0RvbWFpblNpbmdsZUlmcmFtZVNlcnZpY2U9ZX1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3ZhciByPXRoaXMuZ2V0UmF3U2Vzc2lvbihlKTtyZXR1cm4gdGhpcy5pc1ZhbGlkKHIpP3QuZnJvbVN0cmluZyhyKTpudWxsfSx0LnByb3RvdHlwZS5nZXRSYXdTZXNzaW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0P3RoaXMuY29va2llU2VydmljZS5nZXQoIl9jc19zIik6dGhpcy5jb29raWVTZXJ2aWNlLmdldFdpdGhDYWNoZSgiX2NzX3MiKX0sdC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MThlNSk7dmFyIHI9dGhpcy50b1N0cmluZyh0KTt0aGlzLmNvb2tpZVNlcnZpY2Uuc2V0V2l0aENhY2hlKCJfY3NfcyIscixlKSx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZS5zZXRDb29raWUoIl9jc19zIixyLGUpfSx0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7dGhpcy5jb29raWVTZXJ2aWNlLmRlbGV0ZSgiX2NzX3MiLHQpLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlLnJlbW92ZUNvb2tpZSgiX2NzX3MiKX0sdC5wcm90b3R5cGUuaXNWYWxpZD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9PWUmJnQuaXNWYWxpZFNlc3Npb25TdHJpbmcoZSl9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5qb2luLmNhbGwoW3QucGFnZU51bWJlcix0LnJlY29yZGluZ1N0YXRlXSwiLiIpfSx0LmZyb21TdHJpbmc9ZnVuY3Rpb24odCl7dmFyIGU9Y3NTdHJpbmcucHJvdG90eXBlLnNwbGl0LmNhbGwodCwiLiIpLHI9ZVswXTtyZXR1cm57cmVjb3JkaW5nU3RhdGU6ZVsxXSxwYWdlTnVtYmVyOnBhcnNlSW50KHIsMTApfX0sdC5pc1ZhbGlkU2Vzc2lvblN0cmluZz1mdW5jdGlvbih0KXtyZXR1cm4gTnQudGVzdCh0KX0sdH0oKTsoSXR8fChJdD17fSkpLmZyb21SYXc9ZnVuY3Rpb24odCl7cmV0dXJue2V4Y2x1c2lvbjpOdW1iZXIodC5fY3NfZXgpfHwwLHZpc2l0b3I6dC5fY3NfaWQ/UHQuZnJvbVN0cmluZyh0Ll9jc19pZCk6bnVsbCxzZXNzaW9uOnQuX2NzX3M/TXQuZnJvbVN0cmluZyh0Ll9jc19zKTpudWxsLGN2YXJzOnQuX2NzX2N2YXJzfHxudWxsfX07dmFyIEx0LER0PS9eWzAtOV0rJC8seHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt0aGlzLmxvY2F0aW9uPXQsdGhpcy5jb29raWVTZXJ2aWNlPWUsdGhpcy5jcm9zc0RvbWFpblNpbmdsZUlmcmFtZVNlcnZpY2U9cn1yZXR1cm4gdC5wcm90b3R5cGUuZXhjbHVkZT1mdW5jdGlvbih0KXt0aGlzLmNvb2tpZVNlcnZpY2Uuc2V0KCJfY3NfZXgiLGNzU3RyaW5nKHQubGFzdFRyYWNraW5nRHJhdyksMjU5MmU2KSx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZS5zZXRDb29raWUoIl9jc19leCIsIiIrdC5sYXN0VHJhY2tpbmdEcmF3LDI1OTJlNil9LHQucHJvdG90eXBlLnJlbW92ZUV4Y2x1c2lvbj1mdW5jdGlvbigpe3RoaXMuY29va2llU2VydmljZS5kZWxldGUoIl9jc19leCIpLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlLnJlbW92ZUNvb2tpZSgiX2NzX2V4Iil9LHQucHJvdG90eXBlLmlzRXhjbHVkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNFeGNsdXNpb25Db29raWUoKXx8dGhpcy5oYXNFeGNsdXNpb25JblVSTCgpfSx0LnByb3RvdHlwZS5oYXNFeGNsdXNpb25Db29raWU9ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuZ2V0QXBwbGllZFRyYWNraW5nRHJhdygpfSx0LnByb3RvdHlwZS5nZXRBcHBsaWVkVHJhY2tpbmdEcmF3PWZ1bmN0aW9uKCl7cmV0dXJuIE51bWJlcih0aGlzLmNvb2tpZVNlcnZpY2UuZ2V0KCJfY3NfZXgiKSl9LHQucHJvdG90eXBlLmhhc0V4Y2x1c2lvbkluVVJMPWZ1bmN0aW9uKCl7cmV0dXJuIGNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcy5sb2NhdGlvbi5ocmVmLCJfY3NfZXgiKT4wfSx0LmlzVmFsaWRFeGNsdXNpb25TdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIER0LnRlc3QodCl9LHR9KCk7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7dmFyIGU9WyJfY3NfZXgiLCJfY3NfaWQiLCJfY3NfcyIsIl9jc19jdmFycyJdO3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5ldmVyeS5jYWxsKE9iamVjdC5rZXlzKHQpLChmdW5jdGlvbih0KXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGUsdCk+PTB9KSl9dC5pc1Jhd0RvbWFpblN0YXRlPWUsdC5pc1ZhbGlkPWZ1bmN0aW9uKHQpe3JldHVybiEhZSh0KSYmKCghdC5fY3NfaWR8fFB0LmlzVmFsaWRWaXNpdG9yU3RyaW5nKHQuX2NzX2lkKSkmJighdC5fY3Nfc3x8TXQuaXNWYWxpZFNlc3Npb25TdHJpbmcodC5fY3NfcykpJiYoIXQuX2NzX2V4fHx4dC5pc1ZhbGlkRXhjbHVzaW9uU3RyaW5nKHQuX2NzX2V4KSkmJighdC5fY3NfY3ZhcnN8fFR0LmlzVmFsaWRDdXN0b21WYXJTdHJpbmcodC5fY3NfY3ZhcnMpKSl9fShMdHx8KEx0PXt9KSk7dmFyIHF0LFV0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMueGRmcmFtZU9wZW5lcj10LHRoaXMubG9jYXRpb249ZX1yZXR1cm4gdC5wcm90b3R5cGUucmV0cmlldmU9ZnVuY3Rpb24oZSxyKXt2YXIgbj10aGlzO3RoaXMuY2FsbGJhY2s9cix0aGlzLnJldHJpZXZlZFN0YXRlcz1bXSx0aGlzLnhkZnJhbWVPcmlnaW5zPWNzQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGUsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlzTm90Q3VycmVudEhvc3RuYW1lKHQpfSkpLHQuZ2V0WGRmcmFtZU9yaWdpbiksdGhpcy54ZGZyYW1lT3BlbmVyLm9uTWVzc2FnZSgoZnVuY3Rpb24odCl7bi5oYW5kbGVYZGZyYW1lTWVzc2FnZSh0KX0pKSx0aGlzLnhkZnJhbWVPcGVuZXIub25UaW1lb3V0KChmdW5jdGlvbigpe24uaGFuZGxlVGltZW91dCgpfSkpLHRoaXMueGRmcmFtZU9wZW5lci5zdGFydCgpLGNzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChjc0FycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0aGlzLnhkZnJhbWVPcmlnaW5zLHQuZ2V0WGRmcmFtZVVybCksKGZ1bmN0aW9uKHQpe3JldHVybiBuLnhkZnJhbWVPcGVuZXIub3Blbih0KX0pKX0sdC5wcm90b3R5cGUuaGFuZGxlWGRmcmFtZU1lc3NhZ2U9ZnVuY3Rpb24odCl7aWYodGhpcy5pc1hkZnJhbWVNZXNzYWdlKHQpKXt2YXIgZT10LmRhdGE7aWYoIUx0LmlzVmFsaWQoZSkpdGhyb3cgdGhpcy54ZGZyYW1lT3BlbmVyLnN0b3AoKSwiSW52YWxpZCBkb21haW4gc3RhdGU6ICIrY3NKU09OLnN0cmluZ2lmeSh0LmRhdGEpKyIgZnJvbSAiK3Qub3JpZ2luO2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLnJldHJpZXZlZFN0YXRlcyxlKX10aGlzLmFsbE1lc3NhZ2VzQXJlSW4oKSYmKHRoaXMueGRmcmFtZU9wZW5lci5zdG9wKCksdGhpcy5jYWxsYmFjayhjc0FycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0aGlzLnJldHJpZXZlZFN0YXRlcyxJdC5mcm9tUmF3KSkpfSx0LnByb3RvdHlwZS5oYW5kbGVUaW1lb3V0PWZ1bmN0aW9uKCl7ZnQud2FybigieGRmcmFtZTogYWxsIG1lc3NhZ2VzIG5vdCByZWNlaXZlZCIpfSx0LnByb3RvdHlwZS5pc1hkZnJhbWVNZXNzYWdlPWZ1bmN0aW9uKHQpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcy54ZGZyYW1lT3JpZ2lucyx0Lm9yaWdpbik+LTF9LHQucHJvdG90eXBlLmFsbE1lc3NhZ2VzQXJlSW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXRyaWV2ZWRTdGF0ZXMubGVuZ3RoPT09dGhpcy54ZGZyYW1lT3JpZ2lucy5sZW5ndGh9LHQucHJvdG90eXBlLmlzTm90Q3VycmVudEhvc3RuYW1lPWZ1bmN0aW9uKHQpe3JldHVybiFfKHRoaXMubG9jYXRpb24uaG9zdG5hbWUsdCl9LHQuZ2V0WGRmcmFtZU9yaWdpbj1mdW5jdGlvbih0KXtyZXR1cm4iaHR0cHM6Ly9jc3hkLiIrdH0sdC5nZXRYZGZyYW1lVXJsPWZ1bmN0aW9uKHQpe3JldHVybiB0KyIveGRmcmFtZS0xLjAuMC5odG1sIn0sdH0oKSxWdD1mdW5jdGlvbih0LGUscixuKXt2YXIgaSxvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09bj9uPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTpuO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLG4pO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKGk9dFthXSkmJihzPShvPDM/aShzKTpvPjM/aShlLHIscyk6aShlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSxqdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgdD10aGlzO3RoaXMuQUxMX01FU1NBR0VTX1JFQ0VJVkVEX1RJTUVPVVQ9M2UzLHRoaXMuc2NvcGVkSGFuZGxlTWVzc2FnZT1mdW5jdGlvbihlKXt0LmhhbmRsZU1lc3NhZ2UoZSl9fXJldHVybiB0LnByb3RvdHlwZS5vbk1lc3NhZ2U9ZnVuY3Rpb24odCl7dGhpcy5vbk1lc3NhZ2VDYWxsYmFjaz10fSx0LnByb3RvdHlwZS5vblRpbWVvdXQ9ZnVuY3Rpb24odCl7dGhpcy5vblRpbWVvdXRDYWxsYmFjaz10fSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHRoaXMuc2NvcGVkSGFuZGxlTWVzc2FnZSksdGhpcy50aW1lb3V0SWQ9d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5vblRpbWVvdXRDYWxsYmFjaygpfSksdGhpcy5BTExfTUVTU0FHRVNfUkVDRUlWRURfVElNRU9VVCl9LHQucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24odCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7cmV0dXJuIGUuc3JjPXQsZS5zdHlsZS5kaXNwbGF5PSJub25lIixlLnNldEF0dHJpYnV0ZSgidGl0bGUiLCJJbnRlbnRpb25hbGx5IGJsYW5rIiksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKSxlfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHRoaXMuc2NvcGVkSGFuZGxlTWVzc2FnZSksd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCksdGhpcy5vbk1lc3NhZ2VDYWxsYmFjaz1QLHRoaXMub25UaW1lb3V0Q2FsbGJhY2s9UH0sdC5wcm90b3R5cGUuaGFuZGxlTWVzc2FnZT1mdW5jdGlvbih0KXt0aGlzLm9uTWVzc2FnZUNhbGxiYWNrKHQpfSxWdChbZHQoIlhkZnJhbWVNZXNzYWdlIildLHQucHJvdG90eXBlLCJoYW5kbGVNZXNzYWdlIixudWxsKSx0fSgpLHp0PWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCksQnQ9ZnVuY3Rpb24odCxlLHIsbil7dmFyIGksbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP2U6bnVsbD09PW4/bj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUscik6bjtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZSh0LGUscixuKTtlbHNlIGZvcih2YXIgYT10Lmxlbmd0aC0xO2E+PTA7YS0tKShpPXRbYV0pJiYocz0obzwzP2kocyk6bz4zP2koZSxyLHMpOmkoZSxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIscyksc30sSHQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIpe3ZhciBuPXQuY2FsbCh0aGlzLGUscil8fHRoaXM7cmV0dXJuIG4uYWZ0ZXJSZXF1ZXN0RGF0YVJldHJpZXZlZENhbGxiYWNrcz1bXSxuLnJlcXVlc3RIZWFkZXJzPVtdLG4udGltZW91dD0wLG59cmV0dXJuIHp0KGUsdCksZS5wcm90b3R5cGUuc2V0Q29tcHJlc3Npb25PcHRpb25zPWZ1bmN0aW9uKHQsZSl7dGhpcy5jb21wcmVzc29yPXQsdGhpcy5jb21wcmVzc2lvbk91dHB1dFR5cGU9ZX0sZS5wcm90b3R5cGUuc2V0UmVxdWVzdFBheWxvYWRQcm92aWRlcj1mdW5jdGlvbih0KXt0aGlzLnJlcXVlc3RQYXlsb2FkUHJvdmlkZXI9dH0sZS5wcm90b3R5cGUuc2V0UmVxdWVzdEhlYWRlcj1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5yZXF1ZXN0SGVhZGVycyx0KX0sZS5wcm90b3R5cGUuYWZ0ZXJQcm92aWRlcnNDYWxsZWQ9ZnVuY3Rpb24odCl7Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMuYWZ0ZXJSZXF1ZXN0RGF0YVJldHJpZXZlZENhbGxiYWNrcyx0KX0sZS5wcm90b3R5cGUub25Mb2FkPWZ1bmN0aW9uKHQpe3RoaXMub25Mb2FkQ2FsbGJhY2s9dH0sZS5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbih0KXt0aGlzLm9uRXJyb3JDYWxsYmFjaz10fSxlLnByb3RvdHlwZS5vblRpbWVvdXQ9ZnVuY3Rpb24odCxlKXt0aGlzLnRpbWVvdXQ9dCx0aGlzLm9uVGltZW91dENhbGxiYWNrPWV9LGUucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2NzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmJlZm9yZVJlcXVlc3RDYWxsYmFja3MsKGZ1bmN0aW9uKHQpe3JldHVybiB0KCl9KSk7dmFyIGU9dGhpcy5yZXRyaWV2ZVBhcmFtZXRlcnMoKSxyPUwudG9RdWVyeShlKSxuPXRoaXMucmV0cmlldmVQYXlsb2FkKCk7Y3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuYWZ0ZXJSZXF1ZXN0RGF0YVJldHJpZXZlZENhbGxiYWNrcywoZnVuY3Rpb24odCl7cmV0dXJuIHQoKX0pKSx0aGlzLmNvbXByZXNzb3ImJnRoaXMuY29tcHJlc3Npb25PdXRwdXRUeXBlP3RoaXMuY29tcHJlc3Nvci5jb21wcmVzcyh0aGlzLmNvbXByZXNzaW9uT3V0cHV0VHlwZSxuLChmdW5jdGlvbihlKXt0LmRvU2VuZChyLGUpfSkpOnRoaXMuZG9TZW5kKHIsbil9LGUucHJvdG90eXBlLnJldHJpZXZlUGF5bG9hZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcXVlc3RQYXlsb2FkUHJvdmlkZXI/dGhpcy5yZXF1ZXN0UGF5bG9hZFByb3ZpZGVyLmdldFJlcXVlc3RQYXlsb2FkKCk6IiJ9LGUucHJvdG90eXBlLmRvU2VuZD1mdW5jdGlvbih0LGUpe3RoaXMuc2VuZFhNTEh0dHBSZXF1ZXN0KHQsZSksY3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuYWZ0ZXJSZXF1ZXN0Q2FsbGJhY2tzLChmdW5jdGlvbih0KXtyZXR1cm4gdCgpfSkpfSxlLnByb3RvdHlwZS5zZW5kWE1MSHR0cFJlcXVlc3Q9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzO2lmKG51bGwhPT13aW5kb3cuWE1MSHR0cFJlcXVlc3Qpe3ZhciBuPW5ldyBYTUxIdHRwUmVxdWVzdDtuLm9wZW4oIlBPU1QiLHRoaXMuZG9tYWluVXJpKyIvIit0aGlzLnBhdGgrIj8iK3QsITApO2Zvcih2YXIgaT0wLG89dGhpcy5yZXF1ZXN0SGVhZGVycztpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXTtuLnNldFJlcXVlc3RIZWFkZXIocy5uYW1lLHMudmFsdWUpfXRoaXMub25Mb2FkQ2FsbGJhY2smJihuLm9ubG9hZD1mdW5jdGlvbigpe3Iub25Mb2FkQ2FsbGJhY2sobil9KSx0aGlzLm9uRXJyb3JDYWxsYmFjayYmKG4ub25lcnJvcj1mdW5jdGlvbigpe3Iub25FcnJvckNhbGxiYWNrKCl9KSx0aGlzLnRpbWVvdXQmJnRoaXMub25UaW1lb3V0Q2FsbGJhY2smJihuLnRpbWVvdXQ9dGhpcy50aW1lb3V0LG4ub250aW1lb3V0PWZ1bmN0aW9uKCl7ci5vblRpbWVvdXRDYWxsYmFjaygpfSksbi5zZW5kKGUpfX0sQnQoW2R0KCJQT1NUIHJlcXVlc3QiKV0sZS5wcm90b3R5cGUsImRvU2VuZCIsbnVsbCksZX0oaik7IWZ1bmN0aW9uKHQpe3RbdC5NVVRBVElPTl9JTlNFUlQ9MV09Ik1VVEFUSU9OX0lOU0VSVCIsdFt0Lk1VVEFUSU9OX1JFTU9WRT0yXT0iTVVUQVRJT05fUkVNT1ZFIix0W3QuTVVUQVRJT05fQVRUUklCVVRFPTNdPSJNVVRBVElPTl9BVFRSSUJVVEUiLHRbdC5NVVRBVElPTl9DSEFSQUNURVJfREFUQT00XT0iTVVUQVRJT05fQ0hBUkFDVEVSX0RBVEEiLHRbdC5JTklUSUFMX0RPTT01XT0iSU5JVElBTF9ET00iLHRbdC5TQ1JPTEw9Nl09IlNDUk9MTCIsdFt0Lk1PVVNFX01PVkU9N109Ik1PVVNFX01PVkUiLHRbdC5DTElDSz04XT0iQ0xJQ0siLHRbdC5SRVNJWkU9OV09IlJFU0laRSIsdFt0LklOUFVUX0NIRUNLQUJMRT0xMF09IklOUFVUX0NIRUNLQUJMRSIsdFt0LklOUFVUX1NFTEVDVD0xMV09IklOUFVUX1NFTEVDVCIsdFt0LklOUFVUX1RFWFQ9MTJdPSJJTlBVVF9URVhUIix0W3QuSEFTSF9DSEFOR0U9MTNdPSJIQVNIX0NIQU5HRSIsdFt0LkNPTlNFTlRfR1JBTlRFRD0xNF09IkNPTlNFTlRfR1JBTlRFRCIsdFt0LkNPTlNFTlRfV0lUSERSQVdOPTE1XT0iQ09OU0VOVF9XSVRIRFJBV04iLHRbdC5NT1VTRV9PVkVSPTE2XT0iTU9VU0VfT1ZFUiIsdFt0LlZJU0lCSUxJVFlfQ0hBTkdFPTE3XT0iVklTSUJJTElUWV9DSEFOR0UiLHRbdC5TVFlMRVNIRUVUX1JVTEVfSU5TRVJUPTE4XT0iU1RZTEVTSEVFVF9SVUxFX0lOU0VSVCIsdFt0LlNUQVRJQ19SRVNPVVJDRV9VUkw9MTldPSJTVEFUSUNfUkVTT1VSQ0VfVVJMIix0W3QuUEVSRk9STUFOQ0VfVElNSU5HUz0yMF09IlBFUkZPUk1BTkNFX1RJTUlOR1MiLHRbdC5BVFRBQ0hfU0hBRE9XPTIyXT0iQVRUQUNIX1NIQURPVyIsdFt0LlNUWUxFU0hFRVRfQ1NTX1RFWFRfVVBEQVRFPTIzXT0iU1RZTEVTSEVFVF9DU1NfVEVYVF9VUERBVEUiLHRbdC5NT1VTRV9ET1dOPTI0XT0iTU9VU0VfRE9XTiIsdFt0Lk1PVVNFX1VQPTI1XT0iTU9VU0VfVVAiLHRbdC5KQVZBU0NSSVBUX0VSUk9SPTI2XT0iSkFWQVNDUklQVF9FUlJPUiIsdFt0LlBBR0VfRVZFTlQ9MjddPSJQQUdFX0VWRU5UIix0W3QuQVBJX0VSUk9SPTI4XT0iQVBJX0VSUk9SIn0ocXR8fChxdD17fSkpO2Z1bmN0aW9uIEZ0KHQsZSl7dm9pZCAwPT09ZSYmKGU9ITApLHQuYm91bmRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodC50eXBlLHQubGlzdGVuZXIsZSl9ZnVuY3Rpb24gR3QodCxlKXt2b2lkIDA9PT1lJiYoZT0hMCksdC5ib3VuZEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LnR5cGUsdC5saXN0ZW5lcixlKX12YXIgV3QsWHQsSnQ9ZnVuY3Rpb24oKXtyZXR1cm4oSnQ9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHI9MSxuPWFyZ3VtZW50cy5sZW5ndGg7cjxuO3IrKylmb3IodmFyIGkgaW4gZT1hcmd1bWVudHNbcl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJih0W2ldPWVbaV0pO3JldHVybiB0fSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxZdD1mdW5jdGlvbih0LGUscixuKXt2YXIgaSxvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09bj9uPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTpuO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLG4pO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKGk9dFthXSkmJihzPShvPDM/aShzKTpvPjM/aShlLHIscyk6aShlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSxLdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxyLG4pe3ZhciBpPXRoaXM7dGhpcy5zZWxlY3Rvcj1lLHRoaXMubm9kZUlkZW50aWZpZXI9cix0aGlzLnNlbnNpdGl2ZUNvbnRlbnQ9bix0aGlzLmRvY3VtZW50cz1bXSx0aGlzLm9uRXZlbnRDYWxsYmFja3M9W10sdGhpcy5ldmVudEhhbmRsZXJzPVt7dHlwZToiY2hhbmdlIixsaXN0ZW5lcjp0aGlzLnNlbGVjdG9yLm9uKHQud2hpdGVMaXN0ZWRDaGVja2FibGVJbnB1dHNTZWxlY3RvciwoZnVuY3Rpb24odCl7cmV0dXJuIGkuaW5wdXRDaGVja2FibGVMaXN0ZW5lcih0LnRhcmdldCl9KSl9LHt0eXBlOiJjaGFuZ2UiLGxpc3RlbmVyOnRoaXMuc2VsZWN0b3Iub24oInNlbGVjdCIsKGZ1bmN0aW9uKHQpe3JldHVybiBpLmlucHV0U2VsZWN0TGlzdGVuZXIodC50YXJnZXQpfSkpfSx7dHlwZToia2V5dXAiLGxpc3RlbmVyOnRoaXMuc2VsZWN0b3Iub24odC53aGl0ZUxpc3RlZFRleHRJbnB1dFNlbGVjdG9yLChmdW5jdGlvbih0KXtyZXR1cm4gaS5pbnB1dFRleHRMaXN0ZW5lcih0LnRhcmdldCl9KSl9LHt0eXBlOiJzY3JvbGwiLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3JldHVybiBpLnNjcm9sbExpc3RlbmVyKHQudGFyZ2V0KX19LHt0eXBlOiJtb3VzZW92ZXIiLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3JldHVybiBpLm1vdXNlT3Zlckxpc3RlbmVyKHQpfX0se3R5cGU6ImNsaWNrIixsaXN0ZW5lcjpmdW5jdGlvbih0KXtyZXR1cm4gaS5jbGlja0xpc3RlbmVyKHQpfX0se3R5cGU6Im1vdXNlZG93biIsbGlzdGVuZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGkubW91c2VEb3duTGlzdGVuZXIodCl9fSx7dHlwZToibW91c2V1cCIsbGlzdGVuZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGkubW91c2VVcExpc3RlbmVyKHQpfX1dLHRoaXMuaW5pdFN1YnNjcmliZXJzKCl9cmV0dXJuIHQucHJvdG90eXBlLmluaXRTdWJzY3JpYmVycz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5ub2RlSWRlbnRpZmllci5vbklkZW50aWZpZXJBZGRlZCgoZnVuY3Rpb24oZSl7dihlKSYmdC5iaW5kSGFuZGxlcnMoZSl9KSksdGhpcy5ub2RlSWRlbnRpZmllci5vbklkZW50aWZpZXJSZW1vdmVkKChmdW5jdGlvbihlKXt2KGUpJiZ0LnVuYmluZEhhbmRsZXJzKGUpfSkpfSx0LnByb3RvdHlwZS5vbkV2ZW50PWZ1bmN0aW9uKHQpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLm9uRXZlbnRDYWxsYmFja3MsKGZ1bmN0aW9uKGUpe2UuZGF0ZT1ELm5vdygpLHQoZSl9KSl9LHQucHJvdG90eXBlLnRyaWdnZXJDYWxsYmFja3M9ZnVuY3Rpb24odCl7Y3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMub25FdmVudENhbGxiYWNrcywoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCl9KSl9LHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VySW5pdGlhbEV2ZW50cygpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy51bmJpbmRBbGxIYW5kbGVycygpfSx0LnByb3RvdHlwZS5iaW5kSGFuZGxlcnM9ZnVuY3Rpb24odCl7LTE9PT1jc0FycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcy5kb2N1bWVudHMsdCkmJihjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5kb2N1bWVudHMsdCksY3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuZXZlbnRIYW5kbGVycywoZnVuY3Rpb24oZSl7cmV0dXJuIEZ0KEp0KHtib3VuZEVsZW1lbnQ6dH0sZSkpfSkpKX0sdC5wcm90b3R5cGUudW5iaW5kSGFuZGxlcnM9ZnVuY3Rpb24odCl7dGhpcy5kb2N1bWVudHM9Y3NBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodGhpcy5kb2N1bWVudHMsKGZ1bmN0aW9uKGUpe3JldHVybiBlIT09dH0pKSxjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5ldmVudEhhbmRsZXJzLChmdW5jdGlvbihlKXtyZXR1cm4gR3QoSnQoe2JvdW5kRWxlbWVudDp0fSxlKSl9KSl9LHQucHJvdG90eXBlLnVuYmluZEFsbEhhbmRsZXJzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5kb2N1bWVudHMsKGZ1bmN0aW9uKGUpe3JldHVybiB0LnVuYmluZEhhbmRsZXJzKGUpfSkpfSx0LnByb3RvdHlwZS50cmlnZ2VySW5pdGlhbEV2ZW50cz1mdW5jdGlvbigpe3RoaXMuaW5pdGlhbFRleHRJbnB1dExpc3RlbmVyKCksdGhpcy5pbml0aWFsU2Nyb2xsTGlzdGVuZXIoKSx0aGlzLmluaXRpYWxTZWxlY3RMaXN0ZW5lcigpLHRoaXMuaW5pdGlhbENoZWNrYWJsZUxpc3RlbmVyKCl9LHQucHJvdG90eXBlLmluaXRpYWxUZXh0SW5wdXRMaXN0ZW5lcj1mdW5jdGlvbigpe2Zvcih2YXIgZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHQud2hpdGVMaXN0ZWRUZXh0SW5wdXRTZWxlY3Rvcikscj0wO3I8ZS5sZW5ndGg7cis9MSl7dmFyIG49ZS5pdGVtKHIpO24udmFsdWUubGVuZ3RoPjAmJnRoaXMuaW5wdXRUZXh0TGlzdGVuZXIobil9fSx0LnByb3RvdHlwZS5pbml0aWFsU2Nyb2xsTGlzdGVuZXI9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSxlPTA7ZTx0Lmxlbmd0aDtlKz0xKXt2YXIgcj10W2VdLG49dGhpcy5nZXRTY3JvbGxQb3NpdGlvbihyKSxpPW4udG9wLG89bi5sZWZ0OzA9PT1pJiYwPT09b3x8dGhpcy5zY3JvbGxMaXN0ZW5lcihyKX19LHQucHJvdG90eXBlLmluaXRpYWxTZWxlY3RMaXN0ZW5lcj1mdW5jdGlvbigpe2Zvcih2YXIgdD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2VsZWN0IiksZT0wO2U8dC5sZW5ndGg7ZSs9MSl0aGlzLmlucHV0U2VsZWN0TGlzdGVuZXIodFtlXSl9LHQucHJvdG90eXBlLmluaXRpYWxDaGVja2FibGVMaXN0ZW5lcj1mdW5jdGlvbigpe2Zvcih2YXIgZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHQud2hpdGVMaXN0ZWRDaGVja2FibGVJbnB1dHNTZWxlY3Rvcikscj0wO3I8ZS5sZW5ndGg7cis9MSl0aGlzLmlucHV0Q2hlY2thYmxlTGlzdGVuZXIoZVtyXSl9LHQucHJvdG90eXBlLmdldFNjcm9sbFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0PT09ZG9jdW1lbnQ/e3RvcDp3aW5kb3cucGFnZVlPZmZzZXQsbGVmdDp3aW5kb3cucGFnZVhPZmZzZXR9Ont0b3A6dC5zY3JvbGxUb3AsbGVmdDp0LnNjcm9sbExlZnR9fSx0LnByb3RvdHlwZS5zY3JvbGxMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMubm9kZUlkZW50aWZpZXIuaWZJZGVudGlmaWVkKHQsKGZ1bmN0aW9uKHIpe2lmKCFlLnNlbnNpdGl2ZUNvbnRlbnQuaXNTZW5zaXRpdmVFbGVtZW50Tm9kZSh0KSl7dmFyIG49ZS5nZXRTY3JvbGxQb3NpdGlvbih0KTtlLnRyaWdnZXJDYWxsYmFja3Moe3R5cGU6cXQuU0NST0xMLGFyZ3M6W3Isbi5sZWZ0LG4udG9wXX0pfX0pKX0sdC5wcm90b3R5cGUubW91c2VPdmVyTGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLm5vZGVJZGVudGlmaWVyLmlmSWRlbnRpZmllZCh0LnRhcmdldCwoZnVuY3Rpb24odCl7ZS50cmlnZ2VyQ2FsbGJhY2tzKHt0eXBlOnF0Lk1PVVNFX09WRVIsYXJnczpbdF19KX0pKX0sdC5wcm90b3R5cGUuY2xpY2tMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMubm9kZUlkZW50aWZpZXIuaWZJZGVudGlmaWVkKHQudGFyZ2V0LChmdW5jdGlvbih0KXtlLnRyaWdnZXJDYWxsYmFja3Moe3R5cGU6cXQuQ0xJQ0ssYXJnczpbdF19KX0pKX0sdC5wcm90b3R5cGUubW91c2VEb3duTGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLm5vZGVJZGVudGlmaWVyLmlmSWRlbnRpZmllZCh0LnRhcmdldCwoZnVuY3Rpb24ocil7ZS50cmlnZ2VyQ2FsbGJhY2tzKHt0eXBlOnF0Lk1PVVNFX0RPV04sYXJnczpbcix0LmJ1dHRvbl19KX0pKX0sdC5wcm90b3R5cGUubW91c2VVcExpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5ub2RlSWRlbnRpZmllci5pZklkZW50aWZpZWQodC50YXJnZXQsKGZ1bmN0aW9uKHIpe2UudHJpZ2dlckNhbGxiYWNrcyh7dHlwZTpxdC5NT1VTRV9VUCxhcmdzOltyLHQuYnV0dG9uXX0pfSkpfSx0LnByb3RvdHlwZS5pbnB1dENoZWNrYWJsZUxpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5ub2RlSWRlbnRpZmllci5pZklkZW50aWZpZWQodCwoZnVuY3Rpb24ocil7ZS5zZW5zaXRpdmVDb250ZW50LmlzU2Vuc2l0aXZlRWxlbWVudE5vZGUodCl8fGUudHJpZ2dlckNhbGxiYWNrcyh7dHlwZTpxdC5JTlBVVF9DSEVDS0FCTEUsYXJnczpbcix0LmNoZWNrZWRdfSl9KSl9LHQucHJvdG90eXBlLmlucHV0U2VsZWN0TGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLm5vZGVJZGVudGlmaWVyLmlmSWRlbnRpZmllZCh0LChmdW5jdGlvbihyKXtlLnNlbnNpdGl2ZUNvbnRlbnQuaXNTZW5zaXRpdmVFbGVtZW50Tm9kZSh0KXx8ZS50cmlnZ2VyQ2FsbGJhY2tzKHt0eXBlOnF0LklOUFVUX1NFTEVDVCxhcmdzOltyLHQuc2VsZWN0ZWRJbmRleF19KX0pKX0sdC5wcm90b3R5cGUuaW5wdXRUZXh0TGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLm5vZGVJZGVudGlmaWVyLmlmSWRlbnRpZmllZCh0LChmdW5jdGlvbihyKXtlLnNlbnNpdGl2ZUNvbnRlbnQuaXNTZW5zaXRpdmVFbGVtZW50Tm9kZSh0KXx8ZS50cmlnZ2VyQ2FsbGJhY2tzKHt0eXBlOnF0LklOUFVUX1RFWFQsYXJnczpbcixjc1N0cmluZy5wcm90b3R5cGUucmVwbGFjZS5jYWxsKHQudmFsdWUsL1xTL2csIuKAoiIpXX0pfSkpfSx0LndoaXRlTGlzdGVkVGV4dElucHV0U2VsZWN0b3I9Y3NBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKFsidGV4dGFyZWEiLCJpbnB1dDpub3QoW3R5cGVdKSIsJ2lucHV0W3R5cGU9InRleHQiXScsJ2lucHV0W3R5cGU9ImVtYWlsIl0nLCdpbnB1dFt0eXBlPSJzZWFyY2giXScsJ2lucHV0W3R5cGU9InRlbCJdJywnaW5wdXRbdHlwZT0idXJsIl0nXSwiLCIpLHQud2hpdGVMaXN0ZWRDaGVja2FibGVJbnB1dHNTZWxlY3Rvcj1jc0FycmF5LnByb3RvdHlwZS5qb2luLmNhbGwoWydpbnB1dFt0eXBlPSJjaGVja2JveCJdJywnaW5wdXRbdHlwZT0icmFkaW8iXSddLCIsIiksWXQoW2R0KCJzY3JvbGwiKV0sdC5wcm90b3R5cGUsInNjcm9sbExpc3RlbmVyIixudWxsKSxZdChbZHQoIm1vdXNlT3ZlciIpXSx0LnByb3RvdHlwZSwibW91c2VPdmVyTGlzdGVuZXIiLG51bGwpLFl0KFtkdCgiY2xpY2siKV0sdC5wcm90b3R5cGUsImNsaWNrTGlzdGVuZXIiLG51bGwpLFl0KFtkdCgibW91c2Vkb3duIildLHQucHJvdG90eXBlLCJtb3VzZURvd25MaXN0ZW5lciIsbnVsbCksWXQoW2R0KCJtb3VzZXVwIildLHQucHJvdG90eXBlLCJtb3VzZVVwTGlzdGVuZXIiLG51bGwpLFl0KFtkdCgiY2hlY2thYmxlIildLHQucHJvdG90eXBlLCJpbnB1dENoZWNrYWJsZUxpc3RlbmVyIixudWxsKSxZdChbZHQoInNlbGVjdCIpXSx0LnByb3RvdHlwZSwiaW5wdXRTZWxlY3RMaXN0ZW5lciIsbnVsbCksWXQoW2R0KCJ0ZXh0IildLHQucHJvdG90eXBlLCJpbnB1dFRleHRMaXN0ZW5lciIsbnVsbCksdH0oKSxRdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3ZhciBuPXRoaXM7dGhpcy5tdXRhdGlvblNlcmlhbGl6ZXI9dCx0aGlzLm11dGF0aW9uT2JzZXJ2ZXI9ZSx0aGlzLnN0YXRpY1Jlc291cmNlVXJsVHJhY2tlcj1yLHRoaXMubXV0YXRpb25PYnNlcnZlci5vbkNoYXJhY3RlckRhdGFNdXRhdGlvbigoZnVuY3Rpb24odCl7cmV0dXJuIG4uY2hhcmFjdGVyRGF0YU11dGF0aW9uKHQpfSkpLHRoaXMubXV0YXRpb25PYnNlcnZlci5vbkF0dHJpYnV0ZXNNdXRhdGlvbigoZnVuY3Rpb24odCl7cmV0dXJuIG4uYXR0cmlidXRlc011dGF0aW9uKHQpfSkpLHRoaXMubXV0YXRpb25PYnNlcnZlci5vbkNoaWxkTGlzdE11dGF0aW9uKChmdW5jdGlvbih0KXtyZXR1cm4gbi5jaGlsZExpc3RNdXRhdGlvbih0KX0pKSx0aGlzLm11dGF0aW9uT2JzZXJ2ZXIub25BdHRhY2hTaGFkb3dNdXRhdGlvbigoZnVuY3Rpb24odCl7cmV0dXJuIG4uYXR0YWNoU2hhZG93RXZlbnQodCl9KSl9cmV0dXJuIHQucHJvdG90eXBlLm9uRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5vbkV2ZW50Q2FsbGJhY2s9dH0sdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLm11dGF0aW9uT2JzZXJ2ZXIuc3RhcnQoKSx0aGlzLnJlY29yZEluaXRpYWxEb20oKX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMubXV0YXRpb25PYnNlcnZlci5zdG9wKCl9LHQucHJvdG90eXBlLnJlY29yZEluaXRpYWxEb209ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm11dGF0aW9uU2VyaWFsaXplci5zZXJpYWxpemVEb2N1bWVudChkb2N1bWVudCk7dGhpcy5vbkV2ZW50Q2FsbGJhY2soe2FyZ3M6dCxkYXRlOkQubm93KCksdHlwZTpxdC5JTklUSUFMX0RPTX0pfSx0LnByb3RvdHlwZS5hdHRhY2hTaGFkb3dFdmVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm11dGF0aW9uU2VyaWFsaXplci5zZXJpYWxpemVBdHRhY2hTaGFkb3dFdmVudCh0KTtlJiZ0aGlzLm9uRXZlbnRDYWxsYmFjayh7YXJnczplLGRhdGU6dC5kYXRlLHR5cGU6cXQuQVRUQUNIX1NIQURPV30pfSx0LnByb3RvdHlwZS5hdHRyaWJ1dGVzTXV0YXRpb249ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5tdXRhdGlvblNlcmlhbGl6ZXIuc2VyaWFsaXplTXV0YXRpb25BdHRyaWJ1dGUodCk7ZSYmKHRoaXMub25FdmVudENhbGxiYWNrKHthcmdzOmUsZGF0ZTp0LmRhdGUsdHlwZTpxdC5NVVRBVElPTl9BVFRSSUJVVEV9KSx0aGlzLnN0YXRpY1Jlc291cmNlVXJsVHJhY2tlci5zY2FuQXR0cmlidXRlKHQudGFyZ2V0LHQuYXR0cmlidXRlTmFtZSkpfSx0LnByb3RvdHlwZS5jaGFyYWN0ZXJEYXRhTXV0YXRpb249ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5tdXRhdGlvblNlcmlhbGl6ZXIuc2VyaWFsaXplTXV0YXRpb25DaGFyYWN0ZXJEYXRhKHQpO2UmJih0aGlzLm9uRXZlbnRDYWxsYmFjayh7YXJnczplLGRhdGU6dC5kYXRlLHR5cGU6cXQuTVVUQVRJT05fQ0hBUkFDVEVSX0RBVEF9KSx0aGlzLnN0YXRpY1Jlc291cmNlVXJsVHJhY2tlci5zY2FuVGV4dCh0LnRhcmdldCkpfSx0LnByb3RvdHlwZS5jaGlsZExpc3RNdXRhdGlvbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLHI9dGhpcy5tdXRhdGlvblNlcmlhbGl6ZXIuc2VyaWFsaXplTXV0YXRpb25DaGlsZExpc3QodCk7aWYocil7dmFyIG49ci5yZW1vdmVkTm9kZXMsaT1yLmFkZGVkTm9kZXM7bi5mb3JFYWNoKChmdW5jdGlvbihyKXtlLm9uRXZlbnRDYWxsYmFjayh7YXJnczpyLGRhdGU6dC5kYXRlLHR5cGU6cXQuTVVUQVRJT05fUkVNT1ZFfSl9KSksaS5mb3JFYWNoKChmdW5jdGlvbihyKXtlLm9uRXZlbnRDYWxsYmFjayh7YXJnczpyLGRhdGU6dC5kYXRlLHR5cGU6cXQuTVVUQVRJT05fSU5TRVJUfSl9KSl9fSx0fSgpLFp0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnN0b3JhZ2VDaGFyc1VzZWQ9MCx0aGlzLm1heFN0b3JlZENoYXJzPTAsdGhpcy5tYXhTdG9yZWRDaGFycz10LzJ9cmV0dXJuIHQucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt0aGlzLnN0b3JhZ2VDaGFyc1VzZWQrPXQubGVuZ3RofSx0LnByb3RvdHlwZS5pc1RocmVzaG9sZFJlYWNoZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yYWdlQ2hhcnNVc2VkPnRoaXMubWF4U3RvcmVkQ2hhcnN9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5zdG9yYWdlQ2hhcnNVc2VkPTB9LHR9KCksJHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt2b2lkIDA9PT10JiYodD1bXSksdm9pZCAwPT09ZSYmKGU9e30pLHZvaWQgMD09PXImJihyPTUxMmUzKSx0aGlzLmV2ZW50cz10LHRoaXMucmVxdWVzdFBhcmFtZXRlcnM9ZSx0aGlzLnNpemVDb3VudGVyPW5ldyBadChyKX1yZXR1cm4gdC5wcm90b3R5cGUuYWRkRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5zaXplQ291bnRlci5hZGQoY3NKU09OLnN0cmluZ2lmeSh0KSksY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMuZXZlbnRzLHQpfSx0LnByb3RvdHlwZS5ldmVudHNDb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmV2ZW50cy5sZW5ndGh9LHQucHJvdG90eXBlLmNsZWFyRXZlbnRzPWZ1bmN0aW9uKCl7dGhpcy5zaXplQ291bnRlci5yZXNldCgpLHRoaXMuZXZlbnRzPVtdfSx0LnByb3RvdHlwZS5pc0Z1bGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplQ291bnRlci5pc1RocmVzaG9sZFJlYWNoZWQoKXx8dGhpcy5ldmVudHNDb3VudCgpPj0xMDB9LHQucHJvdG90eXBlLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0UmVxdWVzdFBhcmFtZXRlcnMoKTtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodGhpcy5yZXF1ZXN0UGFyYW1ldGVyc1tyXT1lW3JdKX0sdC5wcm90b3R5cGUuZ2V0RXZlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXZlbnRzfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGF5bG9hZD1mdW5jdGlvbigpe3JldHVybiBjc0pTT04uc3RyaW5naWZ5KHRoaXMuZXZlbnRzKX0sdC5wcm90b3R5cGUuZ2V0UmVxdWVzdFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXF1ZXN0UGFyYW1ldGVyc30sdH0oKSx0ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmluZGV4PTF9cmV0dXJuIHQucHJvdG90eXBlLmluY3JlbWVudD1mdW5jdGlvbigpe3RoaXMuaW5kZXgrPTF9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5pbmRleD0xfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybntyaToiIit0aGlzLmluZGV4fX0sdH0oKSxlZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24oZSxyKXt2YXIgbj10LnByZWZpeCsiLiIrZSxpPXQuY3JlYXRlRXZlbnQobix7ZGV0YWlsOnJ9KTtudWxsIT09aSYmZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChpKX0sdC5jcmVhdGVFdmVudD1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUmJihlPXt9KSwiZnVuY3Rpb24iPT10eXBlb2YgQ3VzdG9tRXZlbnQpcmV0dXJuIG5ldyBDdXN0b21FdmVudCh0LGUpO3ZhciByPXRoaXMudHJ5VG9DcmVhdGVDdXN0b21FdmVudCgpO2lmKG51bGw9PT1yKXJldHVybiBudWxsO3ZhciBuPWUuYnViYmxlcyxpPXZvaWQgMCE9PW4mJm4sbz1lLmNhbmNlbGFibGUscz12b2lkIDAhPT1vJiZvLGE9ZS5kZXRhaWw7cmV0dXJuIHIuaW5pdEN1c3RvbUV2ZW50KHQsaSxzLGEpLHJ9LHQudHJ5VG9DcmVhdGVDdXN0b21FdmVudD1mdW5jdGlvbigpe3RyeXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkN1c3RvbUV2ZW50Iil9Y2F0Y2godCl7cmV0dXJuIG51bGx9fSx0LnByZWZpeD0iY3MudHJhY2tpbmciLHR9KCkscmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5pc1N0YXJ0ZWQ9ITF9cmV0dXJuIHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5pc1N0YXJ0ZWR8fCh0aGlzLmlzU3RhcnRlZD0hMCx0aGlzLm9uU3RhcnQoKSl9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLmlzU3RhcnRlZCYmKHRoaXMuaXNTdGFydGVkPSExLHRoaXMub25TdG9wKCkpfSx0LnByb3RvdHlwZS5yZXN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5zdG9wKCksdGhpcy5zdGFydCgpfSx0fSgpLG5lPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCksaWU9ZnVuY3Rpb24oKXtyZXR1cm4oaWU9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHI9MSxuPWFyZ3VtZW50cy5sZW5ndGg7cjxuO3IrKylmb3IodmFyIGkgaW4gZT1hcmd1bWVudHNbcl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJih0W2ldPWVbaV0pO3JldHVybiB0fSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxvZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscixuLGksbyxzLGEsYyx1LHAsbCxoLGYsZCx5LHYpe3ZhciBtPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbS5jb25maWd1cmF0aW9uPWUsbS5yZWNvcmRpbmdSZXF1ZXN0PXIsbS5yZWNvcmRpbmdCYXRjaD1uLG0ucmVxdWVzdFBhcmFtZXRlcnM9aSxtLnJlcXVlc3RJbmRleD1vLG0uc3R5bGVTaGVldFJ1bGVUcmFja2VyPXMsbS5yZWNvcmRpbmdNdXRhdGlvbnNUcmFja2VyPWEsbS5yZWNvcmRpbmdQYWdlRXZlbnRzVHJhY2tlcj1jLG0ucmVjb3JkaW5nQnJvd3NlckV2ZW50c1RyYWNrZXI9dSxtLnNlc3Npb25SZW5ld2VyPXAsbS5zdGF0aWNSZXNvdXJjZVVybFRyYWNrZXI9bCxtLnJlY29yZGluZ1BlcmZvcm1hbmNlVGltaW5nc1RyYWNrZXI9aCxtLmphdmFTY3JpcHRFcnJvcnNUcmFja2VyPWYsbS5qYXZhU2NyaXB0RXJyb3JzQW5vbnltaXplcj1kLG0uYXBpRXJyb3JzVHJhY2tlcj15LG0uYXBpRXJyb3JzQW5vbnltaXplcj12LG0uamF2YVNjcmlwdEVycm9yc0NvdW50PTAsbS5hcGlFcnJvcnNDb3VudD0wLG0uZXZlbnRFbWl0dGVyPW5ldyBlZSxtLmNhblNlbmRFdmVudHM9ITAsbX1yZXR1cm4gbmUoZSx0KSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5iaW5kUmVjb3JkaW5nUmVxdWVzdCgpLHRoaXMuYmluZFRyYWNrZXJzKCl9LGUucHJvdG90eXBlLmJpbmRSZWNvcmRpbmdSZXF1ZXN0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnJlY29yZGluZ1JlcXVlc3Quc2V0UmVxdWVzdFBheWxvYWRQcm92aWRlcih0aGlzLnJlY29yZGluZ0JhdGNoKSx0aGlzLnJlY29yZGluZ1JlcXVlc3Quc2V0UmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnModGhpcy5yZWNvcmRpbmdCYXRjaCksdGhpcy5yZWNvcmRpbmdSZXF1ZXN0LmFmdGVyUHJvdmlkZXJzQ2FsbGVkKChmdW5jdGlvbigpe3QucmVjb3JkaW5nQmF0Y2guY2xlYXJFdmVudHMoKSx0LnJlcXVlc3RJbmRleC5pbmNyZW1lbnQoKSx0LnJlY29yZGluZ0JhdGNoLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyKHQucmVxdWVzdFBhcmFtZXRlcnMpfSkpfSxlLnByb3RvdHlwZS5iaW5kVHJhY2tlcnM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLHI9ZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvY2Vzc0V2ZW50KGUpfTt0aGlzLnN0eWxlU2hlZXRSdWxlVHJhY2tlci5vbkV2ZW50KHIpLHRoaXMucmVjb3JkaW5nTXV0YXRpb25zVHJhY2tlci5vbkV2ZW50KHIpLHRoaXMucmVjb3JkaW5nQnJvd3NlckV2ZW50c1RyYWNrZXIub25FdmVudChyKSx0aGlzLnJlY29yZGluZ1BhZ2VFdmVudHNUcmFja2VyLm9uRXZlbnQociksdGhpcy5zdGF0aWNSZXNvdXJjZVVybFRyYWNrZXIub25FdmVudChyKSx0aGlzLnJlY29yZGluZ1BlcmZvcm1hbmNlVGltaW5nc1RyYWNrZXIub25FdmVudChyKSx0aGlzLmphdmFTY3JpcHRFcnJvcnNUcmFja2VyLm9uRXZlbnQoKGZ1bmN0aW9uKG4pe3QuamF2YVNjcmlwdEVycm9yc0NvdW50PGUuTUFYX0pBVkFTQ1JJUFRfRVJST1JfQ09VTlQmJihyKHt0eXBlOnF0LkpBVkFTQ1JJUFRfRVJST1IsZGF0ZTpELm5vdygpLGFyZ3M6W3QuamF2YVNjcmlwdEVycm9yc0Fub255bWl6ZXIuYW5vbnltaXplKG4pXX0pLHQuamF2YVNjcmlwdEVycm9yc0NvdW50PXQuamF2YVNjcmlwdEVycm9yc0NvdW50KzEpfSkpLHRoaXMuYXBpRXJyb3JzVHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbihuKXt0LmFwaUVycm9yc0NvdW50PGUuTUFYX0FQSV9FUlJPUl9DT1VOVCYmKHIoe3R5cGU6cXQuQVBJX0VSUk9SLGRhdGU6RC5ub3coKSxhcmdzOlt0LmFwaUVycm9yc0Fub255bWl6ZXIuYW5vbnltaXplKG4pXX0pLHQuYXBpRXJyb3JzQ291bnQ9dC5hcGlFcnJvcnNDb3VudCsxKX0pKX0sZS5wcm90b3R5cGUuYmxvY2tTZW5kaW5nRXZlbnRzPWZ1bmN0aW9uKCl7dGhpcy5jYW5TZW5kRXZlbnRzPSExfSxlLnByb3RvdHlwZS5hbGxvd1NlbmRpbmdFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLmNhblNlbmRFdmVudHM9ITB9LGUucHJvdG90eXBlLnByb2Nlc3NFdmVudD1mdW5jdGlvbih0KXt0aGlzLnNlc3Npb25SZW5ld2VyLmlzU2Vzc2lvblZhbGlkKCkmJih0aGlzLnJlY29yZGluZ0JhdGNoLmFkZEV2ZW50KHQpLHRoaXMucmVjb3JkaW5nQmF0Y2guaXNGdWxsKCkmJnRoaXMucHVzaEV2ZW50cygpLHRoaXMuY29uZmlndXJhdGlvbi5lbWl0RGVidWdFdmVudHMmJnRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoInJlY29yZGluZ0V2ZW50IixpZShpZSh7fSx0KSx7dHlwZU5hbWU6cXRbdC50eXBlXX0pKSl9LGUucHJvdG90eXBlLm9uU3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLnJlY29yZGluZ0JhdGNoLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyKHRoaXMucmVxdWVzdFBhcmFtZXRlcnMpLHRoaXMucmVjb3JkaW5nUGVyZm9ybWFuY2VUaW1pbmdzVHJhY2tlci5zdGFydCgpLHRoaXMuc3R5bGVTaGVldFJ1bGVUcmFja2VyLnN0YXJ0KCksdGhpcy5yZWNvcmRpbmdNdXRhdGlvbnNUcmFja2VyLnN0YXJ0KCksdGhpcy5yZWNvcmRpbmdCcm93c2VyRXZlbnRzVHJhY2tlci5zdGFydCgpLHRoaXMucmVjb3JkaW5nUGFnZUV2ZW50c1RyYWNrZXIuc3RhcnQoKSx0aGlzLmNvbmZpZ3VyYXRpb24uanNFcnJvcnNFbmFibGVkJiZ0aGlzLmphdmFTY3JpcHRFcnJvcnNUcmFja2VyLnN0YXJ0KCksdGhpcy5jb25maWd1cmF0aW9uLmFwaUVycm9yc0VuYWJsZWQmJnRoaXMuYXBpRXJyb3JzVHJhY2tlci5zdGFydCgpLHRoaXMuY29uZmlndXJhdGlvbi5lbWl0RGVidWdFdmVudHMmJnRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoInJlcGxheVJlY29yZGluZ1N0YXJ0ZWQiKX0sZS5wcm90b3R5cGUub25TdG9wPWZ1bmN0aW9uKCl7dGhpcy5zdHlsZVNoZWV0UnVsZVRyYWNrZXIuc3RvcCgpLHRoaXMucmVjb3JkaW5nTXV0YXRpb25zVHJhY2tlci5zdG9wKCksdGhpcy5yZWNvcmRpbmdCcm93c2VyRXZlbnRzVHJhY2tlci5zdG9wKCksdGhpcy5yZWNvcmRpbmdQYWdlRXZlbnRzVHJhY2tlci5zdG9wKCksdGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlci5zdG9wKCksdGhpcy5hcGlFcnJvcnNUcmFja2VyLnN0b3AoKX0sZS5wcm90b3R5cGUuY2xlYXJTdGF0ZXM9ZnVuY3Rpb24oKXt0aGlzLnB1c2hFdmVudHMoKSx0aGlzLnJlcXVlc3RJbmRleC5yZXNldCgpLHRoaXMucmVjb3JkaW5nQmF0Y2guc2V0UmVxdWVzdFBhcmFtZXRlcnNGcm9tUHJvdmlkZXIodGhpcy5yZXF1ZXN0UGFyYW1ldGVycyksdGhpcy5qYXZhU2NyaXB0RXJyb3JzQ291bnQ9MCx0aGlzLmFwaUVycm9yc0NvdW50PTB9LGUucHJvdG90eXBlLnB1c2hFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLnJlY29yZGluZ0JhdGNoLmV2ZW50c0NvdW50KCk+MCYmdGhpcy5jYW5TZW5kRXZlbnRzJiYodGhpcy5pc1N0YXJ0ZWQ/dGhpcy5yZWNvcmRpbmdSZXF1ZXN0LnNlbmQoKTp0aGlzLnJlY29yZGluZ0JhdGNoLmNsZWFyRXZlbnRzKCkpfSxlLnByb3RvdHlwZS5jbGVhckV2ZW50cz1mdW5jdGlvbigpe3RoaXMucmVjb3JkaW5nQmF0Y2guY2xlYXJFdmVudHMoKX0sZS5wcm90b3R5cGUudHJpZ2dlclBhZ2VFdmVudD1mdW5jdGlvbih0KXt0aGlzLnJlY29yZGluZ0JhdGNoLmFkZEV2ZW50KHt0eXBlOnF0LlBBR0VfRVZFTlQsZGF0ZTpELm5vdygpLGFyZ3M6W3tldmVudE5hbWU6Y3NTdHJpbmcucHJvdG90eXBlLnNsaWNlLmNhbGwodCwwLGUuTUFYX1BBR0VfRVZFTlRfTEVOR1RIKX1dfSl9LGUucHJvdG90eXBlLnRyaWdnZXJDb25zZW50R3JhbnRlZD1mdW5jdGlvbigpe3RoaXMucmVjb3JkaW5nQmF0Y2guYWRkRXZlbnQoe2RhdGU6RC5ub3coKSx0eXBlOnF0LkNPTlNFTlRfR1JBTlRFRH0pfSxlLnByb3RvdHlwZS50cmlnZ2VyQ29uc2VudFdpdGhkcmF3bj1mdW5jdGlvbigpe3RoaXMucmVjb3JkaW5nQmF0Y2guYWRkRXZlbnQoe2RhdGU6RC5ub3coKSx0eXBlOnF0LkNPTlNFTlRfV0lUSERSQVdOfSl9LGUuTUFYX1BBR0VfRVZFTlRfTEVOR1RIPTI1NSxlLk1BWF9KQVZBU0NSSVBUX0VSUk9SX0NPVU5UPTIwLGUuTUFYX0FQSV9FUlJPUl9DT1VOVD0yMCxlfShyZSk7IWZ1bmN0aW9uKHQpe3QuUkVQTEFZX1JFQ09SRElOR19ESVNBQkxFRD0iMSIsdC5SRVBMQVlfUkVDT1JESU5HX0VOQUJMRUQ9IjMiLHQuVFJJR0dFUl9SRVBMQVlfUkVDT1JESU5HX0VOQUJMRUQ9IjUifShXdHx8KFd0PXt9KSksZnVuY3Rpb24odCl7dC5OT1RfUkVDT1JERUQ9IjAiLHQuVEVNUE9SQVJJTFlfUkVDT1JERUQ9IlQiLHQuUkFORE9NX1NBTVBMSU5HPSI1Iix0LlJBVElPX1VSTF9QVj0iNiIsdC5SQVRJT19VUkxfU0VTU0lPTj0iNyIsdC5FVFI9IjgifShYdHx8KFh0PXt9KSk7dmFyIHNlPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCksYWU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIsbixpKXt2YXIgbz10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG8ucmVjb3JkaW5nUmVjb3ZlcnlSZXF1ZXN0PWUsby5yZWNvcmRpbmdCYXRjaD1yLG8ucmVjb3ZlcnlTdG9yYWdlPW4sby5jb25maWd1cmF0aW9uPWksby5wYWdlQ2hhbmdlSGFuZGxlcj1mdW5jdGlvbigpe3RyeXt2YXIgdD1vLnJlY29yZGluZ0JhdGNoLmdldFJlcXVlc3RQYXJhbWV0ZXJzKCk7aWYoIW8uaGFzVmFsaWRSZWNvcmRpbmdUeXBlKHQucnQpfHwwPT09by5yZWNvcmRpbmdCYXRjaC5ldmVudHNDb3VudCgpKXJldHVybjtvLnJlY292ZXJ5U3RvcmFnZS5zYXZlKHttZXRhZGF0YTp0LGV2ZW50czpvLnJlY29yZGluZ0JhdGNoLmdldEV2ZW50cygpfSl9Y2F0Y2godCl7fX0sb31yZXR1cm4gc2UoZSx0KSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5hZGRQYWdlQ2hhbmdlTGlzdGVuZXIoKX0sZS5wcm90b3R5cGUub25TdG9wPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVQYWdlQ2hhbmdlTGlzdGVuZXIoKX0sZS5wcm90b3R5cGUucmVjb3Zlcj1mdW5jdGlvbigpe3RoaXMuc2VuZFBlcnNpc3RlZFJlY29yZGluZ3MoKX0sZS5wcm90b3R5cGUuc2VuZFBlcnNpc3RlZFJlY29yZGluZ3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5yZWNvdmVyeVN0b3JhZ2UucmVjb3ZlcigpLHI9ZS5yYXdCYXRjaGVzLG49ZS5yZWNvdmVyZWRTaXplO2lmKDAhPT1yLmxlbmd0aCl7dmFyIGk9Y3NBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoY3NBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwociwoZnVuY3Rpb24oZSl7dmFyIHI9ZS5tZXRhZGF0YTtyZXR1cm4gdC5oYXNWYWxpZFJlY29yZGluZ1R5cGUoci5ydCl9KSksKGZ1bmN0aW9uKGUpe3ZhciByPWUsbj1yLm1ldGFkYXRhLGk9ci5ldmVudHMsbz1uZXcgJHQoaSxuKTtyZXR1cm4gdC5yZWNvcmRpbmdSZWNvdmVyeVJlcXVlc3Quc2V0UmVxdWVzdFBheWxvYWRQcm92aWRlcihvKSx0LnJlY29yZGluZ1JlY292ZXJ5UmVxdWVzdC5zZXRSZXF1ZXN0UGFyYW1ldGVyc1Byb3ZpZGVycyhvKSx0LnJlY29yZGluZ1JlY292ZXJ5UmVxdWVzdC5zZW5kKCksZX0pKTtuPjEwNDg1NzYmJmZ0Lndhcm4oIlxuICAgICAgICBTaXplIG9mIGRhdGEgcmV0cmlldmVkIGZyb20gbG9jYWwgc3RvcmFnZSAiK24rIiBleGNlZWRzIDEwNDg1NzYuXG4gICAgICAgIE51bWJlciBvZiB0YWJzIHNhdmVkIGluIGxvY2FsIHN0b3JhZ2U6ICIraS5sZW5ndGgrIlxuICAgICAgIil9fSxlLnByb3RvdHlwZS5hZGRQYWdlQ2hhbmdlTGlzdGVuZXI9ZnVuY3Rpb24oKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicGFnZWhpZGUiLHRoaXMucGFnZUNoYW5nZUhhbmRsZXIpfSxlLnByb3RvdHlwZS5yZW1vdmVQYWdlQ2hhbmdlTGlzdGVuZXI9ZnVuY3Rpb24oKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicGFnZWhpZGUiLHRoaXMucGFnZUNoYW5nZUhhbmRsZXIpfSxlLnByb3RvdHlwZS5oYXNWYWxpZFJlY29yZGluZ1R5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIXRoaXMuY29uZmlndXJhdGlvbi51c2VNYWxrYVBpcGVsaW5lfHwhIXQmJnQhPT1YdC5URU1QT1JBUklMWV9SRUNPUkRFRH0sZX0ocmUpLGNlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixuLGksbyxzKXt0aGlzLmNvbnNlbnRTZXJ2aWNlPXQsdGhpcy5kb21TZXJpYWxpemVyPWUsdGhpcy5ub2RlSWRlbnRpZmllcj1yLHRoaXMuc2Vuc2l0aXZlQ29udGVudD1uLHRoaXMuYW5vbnltaXphdGlvbj1pLHRoaXMuY29uZmlndXJhdGlvbj1vLHRoaXMudXJsU2VydmljZT1zfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5yZXNldEFub255bWl6YXRpb24oKX0sdC5wcm90b3R5cGUuc2VyaWFsaXplRG9jdW1lbnQ9ZnVuY3Rpb24odCl7cGVyZm9ybWFuY2UubWFyaygiY3Mtc3RhcnQtc2VyaWFsaXplRG9jdW1lbnQiKTt2YXIgZT10aGlzLmRvbVNlcmlhbGl6ZXIuc2VyaWFsaXplKHQse2ZvcmNlQ2hpbGRyZW5TZXJpYWxpemF0aW9uOiEwLHdpdGhBbm9ueW1pemF0aW9uOnRoaXMudXNlQW5vbnltaXphdGlvbn0pO3JldHVybiBwZXJmb3JtYW5jZS5tYXJrKCJjcy1lbmQtc2VyaWFsaXplRG9jdW1lbnQiKSxwZXJmb3JtYW5jZS5tZWFzdXJlKCJjcy1tZWFzdXJlLXNlcmlhbGl6ZURvY3VtZW50IiwiY3Mtc3RhcnQtc2VyaWFsaXplRG9jdW1lbnQiLCJjcy1lbmQtc2VyaWFsaXplRG9jdW1lbnQiKSxbZV19LHQucHJvdG90eXBlLnNlcmlhbGl6ZU11dGF0aW9uQ2hhcmFjdGVyRGF0YT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiB0aGlzLm5vZGVJZGVudGlmaWVyLmlmSWRlbnRpZmllZCh0LnRhcmdldCwoZnVuY3Rpb24ocil7dmFyIG49dC50YXJnZXQuZGF0YTtpZihuIT09dC5vbGRWYWx1ZSlyZXR1cm5bcixuPWUuYW5vbnltaXplVGV4dElmTmVlZGVkKG4pXX0pKX0sdC5wcm90b3R5cGUuYW5vbnltaXplVGV4dElmTmVlZGVkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnVzZUFub255bWl6YXRpb24/dGhpcy5hbm9ueW1pemF0aW9uLmFub255bWl6ZVRleHQodCk6dH0sdC5wcm90b3R5cGUuc2VyaWFsaXplQXR0YWNoU2hhZG93RXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC50YXJnZXQscj10LnNoYWRvd1Jvb3Q7aWYodGhpcy5ub2RlSWRlbnRpZmllci5oYXNJZGVudGlmaWVyKGUpJiYhdGhpcy5ub2RlSWRlbnRpZmllci5oYXNJZGVudGlmaWVyKHIpKXJldHVyblt0aGlzLm5vZGVJZGVudGlmaWVyLmdldElkKGUpLHRoaXMuZG9tU2VyaWFsaXplci5zZXJpYWxpemUocildfSx0LnByb3RvdHlwZS5zZXJpYWxpemVNdXRhdGlvbkF0dHJpYnV0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLHI9dC50YXJnZXQsbj10LmF0dHJpYnV0ZU5hbWUsaT10LmF0dHJpYnV0ZU5hbWVzcGFjZTtyZXR1cm4gdGhpcy5ub2RlSWRlbnRpZmllci5pZklkZW50aWZpZWQodC50YXJnZXQsKGZ1bmN0aW9uKG8pe2lmKCFlLnNlbnNpdGl2ZUNvbnRlbnQuaXNTZW5zaXRpdmVBdHRyaWJ1dGVOYW1lKHIsbikpe3ZhciBzPXQudGFyZ2V0LmdldEF0dHJpYnV0ZU5TKGksbik7aWYocyE9PXQub2xkVmFsdWUpcmV0dXJuIHM9ZS5hbm9ueW1pemF0aW9uLmFub255bWl6ZUF0dHJpYnV0ZUlmTmVlZGVkKGUudXNlQW5vbnltaXphdGlvbixuLHMpLFtvLGksbixzXX19KSl9LHQucHJvdG90eXBlLnNlcmlhbGl6ZU11dGF0aW9uQ2hpbGRMaXN0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMubm9kZUlkZW50aWZpZXIuaWZJZGVudGlmaWVkKHQudGFyZ2V0LChmdW5jdGlvbihyKXtpZighZS5zZW5zaXRpdmVDb250ZW50LmlzU2Vuc2l0aXZlRWxlbWVudE5vZGUodC50YXJnZXQpKXJldHVybntyZW1vdmVkTm9kZXM6ZS5zZXJpYWxpemVSZW1vdmVkTm9kZXModCksYWRkZWROb2RlczplLnNlcmlhbGl6ZUFkZGVkTm9kZXModCxyKX19KSl9LHQucHJvdG90eXBlLnNlcmlhbGl6ZVJlbW92ZWROb2Rlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10scj0wO3I8dC5yZW1vdmVkTm9kZXMubGVuZ3RoO3IrPTEpe3ZhciBuPXRoaXMubm9kZUlkZW50aWZpZXIucG9wSWQodC5yZW1vdmVkTm9kZXNbcl0pO24mJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChlLFtuXSl9cmV0dXJuIGV9LHQucHJvdG90eXBlLnNlcmlhbGl6ZUFkZGVkTm9kZXM9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9W10sbj10Lm5leHRTaWJsaW5nP3RoaXMubm9kZUlkZW50aWZpZXIuaWZJZGVudGlmaWVkKHQubmV4dFNpYmxpbmcsKGZ1bmN0aW9uKHQpe3JldHVybiB0fSkpOm51bGwsaT0wO2k8dC5hZGRlZE5vZGVzLmxlbmd0aDtpKz0xKXt2YXIgbz10LmFkZGVkTm9kZXNbaV07aWYoIXRoaXMubm9kZUlkZW50aWZpZXIuaGFzSWRlbnRpZmllcihvKSl7dmFyIHM9dGhpcy5kb21TZXJpYWxpemVyLnNlcmlhbGl6ZShvLHt3aXRoQW5vbnltaXphdGlvbjp0aGlzLnVzZUFub255bWl6YXRpb259KTtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwocixbZSxuLHNdKX19cmV0dXJuIHJ9LHQucHJvdG90eXBlLnJlc2V0QW5vbnltaXphdGlvbj1mdW5jdGlvbigpe3RoaXMudXNlQW5vbnltaXphdGlvbj0hdGhpcy5jb25zZW50U2VydmljZS5pc0FsbG93ZWRCeUNvbnNlbnQoKSx0aGlzLnVzZUFub255bWl6YXRpb24/dGhpcy5jb25maWd1cmF0aW9uLnJlcGxheVJlY29yZGluZ1VubWFza2VkVXJsUmVnZXgmJnRoaXMuY29uZmlndXJhdGlvbi5yZXBsYXlSZWNvcmRpbmdVbm1hc2tlZFVybFJlZ2V4LnRlc3QodGhpcy51cmxTZXJ2aWNlLmdldFVybCgpKSYmKHRoaXMudXNlQW5vbnltaXphdGlvbj0hMSk6dGhpcy5jb25maWd1cmF0aW9uLnJlcGxheVJlY29yZGluZ01hc2tlZFVybFJlZ2V4JiZ0aGlzLmNvbmZpZ3VyYXRpb24ucmVwbGF5UmVjb3JkaW5nTWFza2VkVXJsUmVnZXgudGVzdCh0aGlzLnVybFNlcnZpY2UuZ2V0VXJsKCkpJiYodGhpcy51c2VBbm9ueW1pemF0aW9uPSEwKX0sdH0oKSx1ZT1mdW5jdGlvbih0LGUscixuKXt2YXIgaSxvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09bj9uPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTpuO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLG4pO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKGk9dFthXSkmJihzPShvPDM/aShzKTpvPjM/aShlLHIscyk6aShlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSxwZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3ZhciBuPXRoaXM7dGhpcy5tb25rZXlQYXRjaGVyPXQsdGhpcy5ub2RlSWRlbnRpZmllcj1lLHRoaXMuc3RhdGljUmVzb3VyY2VVcmxUcmFja2VyPXIsdGhpcy5jYW5UcmFja1J1bGVJbnNlcnRpb25zKCkmJih0aGlzLmluc2VydFJ1bGVJbnRlcmNlcHRvcj10aGlzLm1vbmtleVBhdGNoZXIuY3JlYXRlU3luY0Z1bmN0aW9uSW50ZXJjZXB0b3Ioe3RhcmdldDp3aW5kb3cuQ1NTU3R5bGVTaGVldC5wcm90b3R5cGUsbWV0aG9kTmFtZToiaW5zZXJ0UnVsZSIsaG9vazpmdW5jdGlvbih0KXt2YXIgZT10LmNvbnRleHQscj10LmFyZ3M7cmV0dXJuIG4uc2VuZEluc2VydGlvbihlLHIpfX0pKSx0aGlzLmNhblRyYWNrU3R5bGVEZWNsYXJhdGlvbkNoYW5nZXMoKSYmKHRoaXMuY3NzVGV4dEludGVyY2VwdG9yPXRoaXMubW9ua2V5UGF0Y2hlci5jcmVhdGVEZXNjcmlwdG9ySW50ZXJjZXB0b3Iod2luZG93LkNTU1N0eWxlRGVjbGFyYXRpb24ucHJvdG90eXBlLCJjc3NUZXh0IiwoZnVuY3Rpb24odCxlKXtyZXR1cm4gbi5zZXRTdHlsZURlY2xhcmF0aW9uQ3NzVGV4dCh0LGUpfSkpKX1yZXR1cm4gdC5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXt0aGlzLm9uRXZlbnRDYWxsYmFjaz10fSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuaW5zZXJ0UnVsZUludGVyY2VwdG9yJiZ0aGlzLmluc2VydFJ1bGVJbnRlcmNlcHRvci5hY3RpdmF0ZSgpLHRoaXMuY3NzVGV4dEludGVyY2VwdG9yJiZ0aGlzLmNzc1RleHRJbnRlcmNlcHRvci5hY3RpdmF0ZSgpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5pbnNlcnRSdWxlSW50ZXJjZXB0b3ImJnRoaXMuaW5zZXJ0UnVsZUludGVyY2VwdG9yLmRlYWN0aXZhdGUoKSx0aGlzLmNzc1RleHRJbnRlcmNlcHRvciYmdGhpcy5jc3NUZXh0SW50ZXJjZXB0b3IuZGVhY3RpdmF0ZSgpfSx0LnByb3RvdHlwZS5zZXRTdHlsZURlY2xhcmF0aW9uQ3NzVGV4dD1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMsbj10aGlzLmdldFN5bGVTaGVldCh0KTtuJiZuLm93bmVyTm9kZSYmdGhpcy5ub2RlSWRlbnRpZmllci5pZklkZW50aWZpZWQobi5vd25lck5vZGUsKGZ1bmN0aW9uKGkpe3ZhciBvPXIuaW5kZXhPZlJ1bGUobi5jc3NSdWxlcyx0LnBhcmVudFJ1bGUpO3Iub25FdmVudENhbGxiYWNrKHtkYXRlOkQubm93KCksdHlwZTpxdC5TVFlMRVNIRUVUX0NTU19URVhUX1VQREFURSxhcmdzOltpLG8sZV19KSxyLnN0YXRpY1Jlc291cmNlVXJsVHJhY2tlci5zY2FuQ3NzU3RyaW5nKGUpfSkpfSx0LnByb3RvdHlwZS5nZXRTeWxlU2hlZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnRSdWxlO3JldHVybiBlJiZlLnBhcmVudFN0eWxlU2hlZXR9LHQucHJvdG90eXBlLmluZGV4T2ZSdWxlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChjc0FycmF5LmZyb20odCksZSl9LHQucHJvdG90eXBlLmNhblRyYWNrUnVsZUluc2VydGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LkNTU1N0eWxlU2hlZXQmJndpbmRvdy5DU1NTdHlsZVNoZWV0LnByb3RvdHlwZSYmImZ1bmN0aW9uIj09dHlwZW9mIHdpbmRvdy5DU1NTdHlsZVNoZWV0LnByb3RvdHlwZS5pbnNlcnRSdWxlfSx0LnByb3RvdHlwZS5jYW5UcmFja1N0eWxlRGVjbGFyYXRpb25DaGFuZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5DU1NTdHlsZURlY2xhcmF0aW9uJiZ3aW5kb3cuQ1NTU3R5bGVEZWNsYXJhdGlvbi5wcm90b3R5cGUmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkNTU1N0eWxlRGVjbGFyYXRpb24ucHJvdG90eXBlLCJjc3NUZXh0Iil9LHQucHJvdG90eXBlLnNlbmRJbnNlcnRpb249ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLG49ZVswXSxpPWVbMV07dGhpcy5ub2RlSWRlbnRpZmllci5pZklkZW50aWZpZWQodC5vd25lck5vZGUsKGZ1bmN0aW9uKHQpe3Iub25FdmVudENhbGxiYWNrKHtkYXRlOkQubm93KCksdHlwZTpxdC5TVFlMRVNIRUVUX1JVTEVfSU5TRVJULGFyZ3M6U3QoaSk/W3QsbixpXTpbdCxuXX0pLHIuc3RhdGljUmVzb3VyY2VVcmxUcmFja2VyLnNjYW5Dc3NTdHJpbmcobil9KSl9LHVlKFtkdCgic3R5bGVTaGVldFJ1bGVUcmFja2VyLnNldFN0eWxlRGVjbGFyYXRpb25Dc3NUZXh0IildLHQucHJvdG90eXBlLCJzZXRTdHlsZURlY2xhcmF0aW9uQ3NzVGV4dCIsbnVsbCksdWUoW2R0KCJzdHlsZVNoZWV0UnVsZVRyYWNrZXIuc2VuZEluc2VydGlvbiIpXSx0LnByb3RvdHlwZSwic2VuZEluc2VydGlvbiIsbnVsbCksdH0oKSxsZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmJlZm9yZVNlcmlhbGl6ZT1mdW5jdGlvbih0LGUpe3JldHVybiB0fSx0LnByb3RvdHlwZS5iZWZvcmVTZXJpYWxpemVDaGlsZHJlbj1mdW5jdGlvbih0LGUscil7cmV0dXJuIGV9LHQucHJvdG90eXBlLmJlZm9yZVNlcmlhbGl6ZUF0dHJpYnV0ZXM9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBlfSx0LnByb3RvdHlwZS5zZXJpYWxpemVOb2RlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZX0sdC5wcm90b3R5cGUuc2VyaWFsaXplRWxlbWVudE5vZGU9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBlfSx0LnByb3RvdHlwZS5zZXJpYWxpemVBdHRyaWJ1dGU9ZnVuY3Rpb24odCxlLHIsbil7cmV0dXJuIHJ9LHQucHJvdG90eXBlLnNlcmlhbGl6ZVRleHROb2RlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZX0sdC5wcm90b3R5cGUuc2VyaWFsaXplQ29tbWVudE5vZGU9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBlfSx0LnByb3RvdHlwZS5zZXJpYWxpemVEb2N0eXBlTm9kZT1mdW5jdGlvbih0LGUscil7cmV0dXJuIGV9LHQucHJvdG90eXBlLnNlcmlhbGl6ZURvY3VtZW50Tm9kZT1mdW5jdGlvbih0LGUscil7cmV0dXJuIGV9LHQucHJvdG90eXBlLnNlcmlhbGl6ZVNoYWRvd1Jvb3ROb2RlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZX0sdH0oKSxoZT1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpLGZlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGUuaWRlbnRpZmllckFkZGVkSGFuZGxlcnM9W10sZS5pZGVudGlmaWVyUmVtb3ZlZEhhbmRsZXJzPVtdLGUuY3VycmVudENzSWQ9MSxlfXJldHVybiBoZShlLHQpLGUucHJvdG90eXBlLmJlZm9yZVNlcmlhbGl6ZT1mdW5jdGlvbih0LGUpe3JldHVybiBlLmZvcmNlQ2hpbGRyZW5TZXJpYWxpemF0aW9uJiZ0aGlzLnBvcElkKHQpLHR9LGUucHJvdG90eXBlLmJlZm9yZVNlcmlhbGl6ZUNoaWxkcmVuPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcztyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoZSwoZnVuY3Rpb24odCl7cmV0dXJuIXIuaGFzSWRlbnRpZmllcih0KX0pKX0sZS5wcm90b3R5cGUuc2VyaWFsaXplTm9kZT1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMuY3VycmVudENzSWQ7cmV0dXJuIHRoaXMuY3VycmVudENzSWQrPTEsdC5fX2NvbnRlbnRzcXVhcmVfaWRlbnRpZmllcj1yLGUuY3NJZD1yLHRoaXMubm90aWZ5U3Vic2NyaWJlcnModGhpcy5pZGVudGlmaWVyQWRkZWRIYW5kbGVycyx0KSxlfSxlLnByb3RvdHlwZS5pZklkZW50aWZpZWQ9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmhhc0lkZW50aWZpZXIodCkpcmV0dXJuIGUodGhpcy5nZXRJZCh0KSl9LGUucHJvdG90eXBlLmdldElkPWZ1bmN0aW9uKHQpe3JldHVybiB0Ll9fY29udGVudHNxdWFyZV9pZGVudGlmaWVyfSxlLnByb3RvdHlwZS5vbklkZW50aWZpZXJBZGRlZD1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5pZGVudGlmaWVyQWRkZWRIYW5kbGVycyx0KX0sZS5wcm90b3R5cGUub25JZGVudGlmaWVyUmVtb3ZlZD1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5pZGVudGlmaWVyUmVtb3ZlZEhhbmRsZXJzLHQpfSxlLnByb3RvdHlwZS5wb3BJZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldElkKHQpO2RlbGV0ZSB0Ll9fY29udGVudHNxdWFyZV9pZGVudGlmaWVyLHRoaXMubm90aWZ5U3Vic2NyaWJlcnModGhpcy5pZGVudGlmaWVyUmVtb3ZlZEhhbmRsZXJzLHQpO2Zvcih2YXIgcj10LmZpcnN0Q2hpbGQ7bnVsbCE9PXI7cj1yLm5leHRTaWJsaW5nKXRoaXMucG9wSWQocik7dmFyIG49dC5zaGFkb3dSb290O3JldHVybiBuJiZ0aGlzLnBvcElkKG4pLGV9LGUucHJvdG90eXBlLmhhc0lkZW50aWZpZXI9ZnVuY3Rpb24odCl7cmV0dXJuIl9fY29udGVudHNxdWFyZV9pZGVudGlmaWVyImluIHR9LGUucHJvdG90eXBlLm5vdGlmeVN1YnNjcmliZXJzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTAsbj10O3I8bi5sZW5ndGg7cisrKXsoMCxuW3JdKShlKX19LGV9KGxlKSxkZT1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpLHllPVsidmFsdWUiLCJjaGVja2VkIiwic3JjIiwiZGF0YSIsImFsdCJdLHZlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIHI9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLnBpaU1hc2tpbmdTZXJ2aWNlPWUscn1yZXR1cm4gZGUoZSx0KSxlLnByb3RvdHlwZS5iZWZvcmVTZXJpYWxpemVDaGlsZHJlbj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmlzU2Vuc2l0aXZlRWxlbWVudE5vZGUodCk/W106ZX0sZS5wcm90b3R5cGUuYmVmb3JlU2VyaWFsaXplQXR0cmlidXRlcz1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXM7cmV0dXJuIHRoaXMuaXNTZW5zaXRpdmVFbGVtZW50Tm9kZSh0KSYmKGNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChlLHRoaXMuY3JlYXRlU2Vuc2l0aXZlRWxlbWVudERpbWVuc2lvbnNBdHRyaWJ1dGUodCkpLHRoaXMuaXNEYXRhQ1NNYXNrTmVlZGVkKHQpJiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSxkb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoImRhdGEtY3MtbWFzayIpKSksY3NBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIXIuaXNTZW5zaXRpdmVBdHRyaWJ1dGUodCxlLm5hbWUsZS52YWx1ZSl9KSl9LGUucHJvdG90eXBlLmlzU2Vuc2l0aXZlRWxlbWVudE5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHUodCkmJih0aGlzLnBpaU1hc2tpbmdTZXJ2aWNlLmNoZWNrTm9kZU1hdGNoKHQpfHx5KHQpKX0sZS5wcm90b3R5cGUuaXNTZW5zaXRpdmVBdHRyaWJ1dGVOYW1lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucGlpTWFza2luZ1NlcnZpY2UuY2hlY2tBdHRyaWJ1dGVNYXRjaCh0LGUpfHx0aGlzLmlzU2Vuc2l0aXZlRWxlbWVudE5vZGUodCkmJi0xIT09Y3NBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHllLGUpfHx0aGlzLmlzU2Vuc2l0aXZlSW5wdXRWYWx1ZSh0LGUpfSxlLnByb3RvdHlwZS5pc1NlbnNpdGl2ZUF0dHJpYnV0ZT1mdW5jdGlvbih0LGUscil7cmV0dXJuIHRoaXMuaXNTZW5zaXRpdmVBdHRyaWJ1dGVOYW1lKHQsZSl8fHRoaXMuaXNTZW5zaXRpdmVJbWFnZSh0LGUscil9LGUucHJvdG90eXBlLmlzU2Vuc2l0aXZlSW5wdXRWYWx1ZT1mdW5jdGlvbih0LGUpe3JldHVybiBkKHQpJiYidmFsdWUiPT09ZSYmImJ1dHRvbiIhPT10LmdldEF0dHJpYnV0ZSgidHlwZSIpfSxlLnByb3RvdHlwZS5pc1NlbnNpdGl2ZUltYWdlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gaCh0KSYmInNyYyI9PT1lJiZPKHIsImRhdGE6Iil9LGUucHJvdG90eXBlLmlzRGF0YUNTTWFza05lZWRlZD1mdW5jdGlvbih0KXtyZXR1cm4heSh0KSYmIXQuaGFzQXR0cmlidXRlKCJkYXRhLWNzLW1hc2siKX0sZS5wcm90b3R5cGUuY3JlYXRlU2Vuc2l0aXZlRWxlbWVudERpbWVuc2lvbnNBdHRyaWJ1dGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxyPWRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZSgic3R5bGUiKTtyZXR1cm4gci52YWx1ZT0id2lkdGg6ICIrZS53aWR0aCsicHg7IGhlaWdodDogIitlLmhlaWdodCsicHg7IixyfSxlfShsZSk7ZnVuY3Rpb24gbWUoKXtyZXR1cm4gRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc3x8RWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yfHxFbGVtZW50LnByb3RvdHlwZS5tb3pNYXRjaGVzU2VsZWN0b3J8fEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yfHxFbGVtZW50LnByb3RvdHlwZS5vTWF0Y2hlc1NlbGVjdG9yfHxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3J9dmFyIGdlLFNlPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCksRWU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTAscj1hcmd1bWVudHMubGVuZ3RoO2U8cjtlKyspdCs9YXJndW1lbnRzW2VdLmxlbmd0aDt2YXIgbj1BcnJheSh0KSxpPTA7Zm9yKGU9MDtlPHI7ZSsrKWZvcih2YXIgbz1hcmd1bWVudHNbZV0scz0wLGE9by5sZW5ndGg7czxhO3MrKyxpKyspbltpXT1vW3NdO3JldHVybiBufSx3ZT1bImlkIiwiY2xhc3MiLCJzdHlsZSIsInNyYyIsInNyY3NldCIsInNpemVzIiwiaHJlZiIsInJlbCIsInR5cGUiLCJ3aWR0aCIsImhlaWdodCIsIm1lZGlhIiwiYWxpZ24iLCJkaXIiLCJiZ2NvbG9yIiwiY29sb3IiLCJib3JkZXIiLCJjb2xzcGFuIiwicm93c3BhbiIsImNvbHMiLCJyb3dzIiwic2l6ZSIsInN0YXJ0IiwiZGF0YS1jcy1vdmVycmlkZS1pZCJdLENlPS9bXlxzXS9nLFJlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4ucGlpPWUsbi5jb25maWd1cmF0aW9uPXIsbi5hbGxXaGl0ZWxpc3RlZEF0dHJpYnV0ZXM9W10sbn1yZXR1cm4gU2UoZSx0KSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5hbGxXaGl0ZWxpc3RlZEF0dHJpYnV0ZXM9RWUod2UsdGhpcy5jb25maWd1cmF0aW9uLndoaXRlbGlzdGVkQXR0cmlidXRlcyl9LGUucHJvdG90eXBlLmJlZm9yZVNlcmlhbGl6ZUNoaWxkcmVuPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4oZih0KXx8dGhpcy5pc1doaXRlbGlzdGVkRWxlbWVudCh0KSkmJihyLndpdGhBbm9ueW1pemF0aW9uPSExKSxlfSxlLnByb3RvdHlwZS5zZXJpYWxpemVOb2RlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZS5hbm9ueW1pemVkPXIud2l0aEFub255bWl6YXRpb24sZX0sZS5wcm90b3R5cGUuc2VyaWFsaXplQXR0cmlidXRlPWZ1bmN0aW9uKHQsZSxyLG4pe3IuYW5vbnltaXplZD1uLndpdGhBbm9ueW1pemF0aW9uO3ZhciBpPXRoaXMuYW5vbnltaXplQXR0cmlidXRlSWZOZWVkZWQobi53aXRoQW5vbnltaXphdGlvbixlLm5hbWUsZS52YWx1ZSk7cmV0dXJuIHIudmFsdWU9dGhpcy5waWlBbm9ueW1pemVBdHRyaWJ1dGVJZk5lZWRlZChlLm5hbWUsaSkscn0sZS5wcm90b3R5cGUuc2VyaWFsaXplVGV4dE5vZGU9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXQuZGF0YSxpPXIud2l0aEFub255bWl6YXRpb24/dGhpcy5hbm9ueW1pemVUZXh0KG4pOm47cmV0dXJuIGUuZGF0YT10aGlzLnBpaS5hbm9ueW1pemUoaSksZX0sZS5wcm90b3R5cGUuYW5vbnltaXplQXR0cmlidXRlSWZOZWVkZWQ9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0JiZudWxsIT09cj90aGlzLmlzV2hpdGVsaXN0ZWRBdHRyaWJ1dGUoZSk/cjoiIjpyfSxlLnByb3RvdHlwZS5waWlBbm9ueW1pemVBdHRyaWJ1dGVJZk5lZWRlZD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmlzV2hpdGVsaXN0ZWRBdHRyaWJ1dGUodCk/ZTp0aGlzLnBpaS5hbm9ueW1pemUoZSl9LGUucHJvdG90eXBlLmFub255bWl6ZVRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIGNzU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlLmNhbGwodCxDZSwiYSIpfSxlLnByb3RvdHlwZS5zZXRXaGl0ZWxpc3RlZEVsZW1lbnRzU2VsZWN0b3I9ZnVuY3Rpb24odCl7dGhpcy53aGl0ZWxpc3RlZEVsZW1lbnRzU2VsZWN0b3I9dH0sZS5wcm90b3R5cGUuaXNXaGl0ZWxpc3RlZEF0dHJpYnV0ZT1mdW5jdGlvbih0KXtyZXR1cm4tMSE9PWNzQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLmFsbFdoaXRlbGlzdGVkQXR0cmlidXRlcyx0KX0sZS5wcm90b3R5cGUuaXNXaGl0ZWxpc3RlZEVsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHUodCkmJih0Lmhhc0F0dHJpYnV0ZSgiZGF0YS1jcy1jYXB0dXJlIil8fHRoaXMuZWxlbWVudE1hdGNoZXNXaGl0ZWxpc3RlZFNlbGVjdG9ycyh0KSl9LGUucHJvdG90eXBlLmVsZW1lbnRNYXRjaGVzV2hpdGVsaXN0ZWRTZWxlY3RvcnM9ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLndoaXRlbGlzdGVkRWxlbWVudHNTZWxlY3RvciYmbWUoKS5jYWxsKHQsdGhpcy53aGl0ZWxpc3RlZEVsZW1lbnRzU2VsZWN0b3IpfSxlfShsZSksYmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMucHJlZml4U3RvcmFnZU5hbWU9dDt2YXIgZT1jc1N0cmluZy5wcm90b3R5cGUuc2xpY2UuY2FsbCgiIitNYXRoLnJhbmRvbSgpLDIsOCk7dGhpcy5zdG9yYWdlTmFtZT0iIit0aGlzLnByZWZpeFN0b3JhZ2VOYW1lK2V9cmV0dXJuIHQucHJvdG90eXBlLnNhdmU9ZnVuY3Rpb24odCl7bG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5zdG9yYWdlTmFtZSxjc0pTT04uc3RyaW5naWZ5KHQpKX0sdC5wcm90b3R5cGUucmVjb3Zlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT0wLHI9W107cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmdldFN0b3JhZ2VLZXlzKCksKGZ1bmN0aW9uKG4pe3ZhciBpPWxvY2FsU3RvcmFnZS5nZXRJdGVtKG4pO2lmKG51bGwhPT1pKXtlKz1pLmxlbmd0aDt2YXIgbz10LnBhcnNlU3RvcmVkSXRlbShpLG4pO28mJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChyLG8pLHQucmVtb3ZlSXRlbShuKX19KSkse3Jhd0JhdGNoZXM6cixyZWNvdmVyZWRTaXplOmV9fSx0LnByb3RvdHlwZS5nZXRTdG9yYWdlS2V5cz1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxsb2NhbFN0b3JhZ2UubGVuZ3RoO2UrPTEpe3ZhciByPWxvY2FsU3RvcmFnZS5rZXkoZSk7ciYmTyhyLHRoaXMucHJlZml4U3RvcmFnZU5hbWUpJiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodCxyKX1yZXR1cm4gdH0sdC5wcm90b3R5cGUucmVtb3ZlSXRlbT1mdW5jdGlvbih0KXtsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0KX0sdC5wcm90b3R5cGUucGFyc2VTdG9yZWRJdGVtPWZ1bmN0aW9uKHQsZSl7dHJ5e3JldHVybiBjc0pTT04ucGFyc2UodCl9Y2F0Y2gocil7cmV0dXJuIGZ0LmVycm9yKCJJbnZhbGlkIGl0ZW0gaW4gbG9jYWxTdG9yYWdlLihrZXk6IitlKyI7IHZhbHVlOiIrdCsiKSIpLG51bGx9fSx0fSgpLFRlPWZ1bmN0aW9uKCl7cmV0dXJuKFRlPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyPTEsbj1hcmd1bWVudHMubGVuZ3RoO3I8bjtyKyspZm9yKHZhciBpIGluIGU9YXJndW1lbnRzW3JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiYodFtpXT1lW2ldKTtyZXR1cm4gdH0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sQWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3RoaXMucmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnM9dH1yZXR1cm4gdC5wcm90b3R5cGUuYWRkUHJvdmlkZXI9ZnVuY3Rpb24odCl7Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMucmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnMsdCl9LHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMucmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnMsKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIFRlKFRlKHt9LGUuZ2V0UmVxdWVzdFBhcmFtZXRlcnMoKSksdCl9KSx7fSl9LHR9KCksa2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuYXN5bmNUYXNrRmFjdG9yeT10LHRoaXMudXNlckFjdGl2ZT0hMSx0aGlzLnBlbmRpbmdJbmFjdGl2aXR5PW51bGx9cmV0dXJuIHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy51c2VyQWN0aXZlPSEwLHRoaXMuY3JlYXRlUGVuZGluZ0luYWN0aXZpdHkoKX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMudXNlckFjdGl2ZT0hMSx0aGlzLmNsZWFyUGVuZGluZ0luYWN0aXZpdHkoKX0sdC5wcm90b3R5cGUudHJhY2tBY3Rpdml0eT1mdW5jdGlvbigpe3RoaXMudXNlckFjdGl2ZXx8KHRoaXMub25BY3Rpdml0eVJlc3VtZWRDYWxsYmFjaygpLHRoaXMudXNlckFjdGl2ZT0hMCksdGhpcy5jbGVhclBlbmRpbmdJbmFjdGl2aXR5KCksdGhpcy5jcmVhdGVQZW5kaW5nSW5hY3Rpdml0eSgpfSx0LnByb3RvdHlwZS5jcmVhdGVQZW5kaW5nSW5hY3Rpdml0eT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5wZW5kaW5nSW5hY3Rpdml0eT10aGlzLmFzeW5jVGFza0ZhY3RvcnkuY3JlYXRlKCJyZWNvcmRlZCB1c2VyIGluYWN0aXZlIiwoZnVuY3Rpb24oKXt0LnVzZXJBY3RpdmU9ITEsdC5jbGVhclBlbmRpbmdJbmFjdGl2aXR5KCksdC5vbkFjdGl2aXR5U3RvcHBlZENhbGxiYWNrKCl9KSw1ZTMpfSx0LnByb3RvdHlwZS5jbGVhclBlbmRpbmdJbmFjdGl2aXR5PWZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMucGVuZGluZ0luYWN0aXZpdHkmJih0aGlzLnBlbmRpbmdJbmFjdGl2aXR5LmNhbmNlbCgpLHRoaXMucGVuZGluZ0luYWN0aXZpdHk9bnVsbCl9LHQucHJvdG90eXBlLmlzVXNlckFjdGl2ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVzZXJBY3RpdmV9LHQucHJvdG90eXBlLm9uQWN0aXZpdHlTdG9wcGVkPWZ1bmN0aW9uKHQpe3RoaXMub25BY3Rpdml0eVN0b3BwZWRDYWxsYmFjaz10fSx0LnByb3RvdHlwZS5vbkFjdGl2aXR5UmVzdW1lZD1mdW5jdGlvbih0KXt0aGlzLm9uQWN0aXZpdHlSZXN1bWVkQ2FsbGJhY2s9dH0sdH0oKSxQZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3ZhciBuPXRoaXM7dGhpcy50YXNrTmFtZT10LHRoaXMudGFzaz1lLHRoaXMudGltZW91dD1yLHRoaXMudGltZW91dElkPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7bi5leGVjdXRlKCl9KSx0aGlzLnRpbWVvdXQpfXJldHVybiB0LnByb3RvdHlwZS5leGVjdXRlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztmdC50cnlUb0V4ZWN1dGUodGhpcy50YXNrTmFtZSwoZnVuY3Rpb24oKXt0LnRhc2soKX0pKSgpfSx0LnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SWQpfSx0fSgpLE9lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gbmV3IFBlKHQsZSxyKX0sdH0oKTshZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PVtuKCldO3JldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSxkb2N1bWVudC5ib2R5JiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodCxkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCxkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCksTWF0aC5tYXguYXBwbHkoTWF0aCx0KX1mdW5jdGlvbiByKCl7cmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aH1mdW5jdGlvbiBuKCl7cmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodH1mdW5jdGlvbiBpKCl7cmV0dXJuIHdpbmRvdy5pbm5lcldpZHRofWZ1bmN0aW9uIG8oKXtyZXR1cm4gc2NyZWVuLndpZHRofWZ1bmN0aW9uIHMoKXtyZXR1cm4gc2NyZWVuLmhlaWdodH10LmRvY3VtZW50SGVpZ2h0PWUsdC5kb2N1bWVudFdpZHRoPXIsdC53aW5kb3dIZWlnaHQ9bix0LndpbmRvd1dpZHRoPWksdC5zY3JlZW5XaWR0aD1vLHQuc2NyZWVuSGVpZ2h0PXMsdC53aW5kb3dPZmZzZXRYPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5wYWdlWE9mZnNldH0sdC53aW5kb3dPZmZzZXRZPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5wYWdlWU9mZnNldH0sdC5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybntkdzoiIityKCksZGg6IiIrZSgpLHd3OiIiK2koKSx3aDoiIituKCksc3c6IiIrbygpLHNoOiIiK3MoKX19fShnZXx8KGdlPXt9KSk7dmFyIF9lPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz9lOm51bGw9PT1uP249T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHIpOm47aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUodCxlLHIsbik7ZWxzZSBmb3IodmFyIGE9dC5sZW5ndGgtMTthPj0wO2EtLSkoaT10W2FdKSYmKHM9KG88Mz9pKHMpOm8+Mz9pKGUscixzKTppKGUscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHMpLHN9LEllPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3ZhciByPXRoaXM7dGhpcy5sb2NhdGlvbj10LHRoaXMucGlpPWUsdGhpcy5ldmVudEhhbmRsZXJzPVt7Ym91bmRFbGVtZW50OndpbmRvdyx0eXBlOiJyZXNpemUiLGxpc3RlbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHIucmVzaXplTGlzdGVuZXIoKX19LHtib3VuZEVsZW1lbnQ6d2luZG93LHR5cGU6Imhhc2hjaGFuZ2UiLGxpc3RlbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHIuaGFzaENoYW5nZUxpc3RlbmVyKCl9fSx7Ym91bmRFbGVtZW50OndpbmRvdyx0eXBlOiJtb3VzZW1vdmUiLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3JldHVybiByLm1vdXNlTW92ZUxpc3RlbmVyKHQpfX0se2JvdW5kRWxlbWVudDpkb2N1bWVudCx0eXBlOiJ2aXNpYmlsaXR5Y2hhbmdlIixsaXN0ZW5lcjpmdW5jdGlvbigpe3JldHVybiByLnZpc2liaWxpdHlDaGFuZ2VMaXN0ZW5lcigpfX1dfXJldHVybiB0LnByb3RvdHlwZS5vbkV2ZW50PWZ1bmN0aW9uKHQpe3RoaXMub25FdmVudENhbGxiYWNrPWZ1bmN0aW9uKGUpe2UuZGF0ZT1ELm5vdygpLHQoZSl9fSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuYmluZEhhbmRsZXJzKCksdGhpcy50cmlnZ2VySW5pdGlhbEV2ZW50cygpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy51bmJpbmRIYW5kbGVycygpfSx0LnByb3RvdHlwZS5iaW5kSGFuZGxlcnM9ZnVuY3Rpb24oKXtjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5ldmVudEhhbmRsZXJzLChmdW5jdGlvbih0KXtyZXR1cm4gRnQodCl9KSl9LHQucHJvdG90eXBlLnVuYmluZEhhbmRsZXJzPWZ1bmN0aW9uKCl7Y3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuZXZlbnRIYW5kbGVycywoZnVuY3Rpb24odCl7cmV0dXJuIEd0KHQpfSkpfSx0LnByb3RvdHlwZS50cmlnZ2VySW5pdGlhbEV2ZW50cz1mdW5jdGlvbigpe3RoaXMucmVzaXplTGlzdGVuZXIoKSx0aGlzLmhhc2hDaGFuZ2VMaXN0ZW5lcigpfSx0LnByb3RvdHlwZS5yZXNpemVMaXN0ZW5lcj1mdW5jdGlvbigpe3RoaXMub25FdmVudENhbGxiYWNrKHt0eXBlOnF0LlJFU0laRSxhcmdzOltnZS53aW5kb3dXaWR0aCgpLGdlLndpbmRvd0hlaWdodCgpXX0pfSx0LnByb3RvdHlwZS5oYXNoQ2hhbmdlTGlzdGVuZXI9ZnVuY3Rpb24oKXt0aGlzLm9uRXZlbnRDYWxsYmFjayh7dHlwZTpxdC5IQVNIX0NIQU5HRSxhcmdzOlt0aGlzLnBpaS5hbm9ueW1pemUodGhpcy5sb2NhdGlvbi5ocmVmKV19KX0sdC5wcm90b3R5cGUudmlzaWJpbGl0eUNoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKCl7dGhpcy5vbkV2ZW50Q2FsbGJhY2soe3R5cGU6cXQuVklTSUJJTElUWV9DSEFOR0UsYXJnczpbZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlXX0pfSx0LnByb3RvdHlwZS5tb3VzZU1vdmVMaXN0ZW5lcj1mdW5jdGlvbih0KXt0aGlzLm9uRXZlbnRDYWxsYmFjayh7dHlwZTpxdC5NT1VTRV9NT1ZFLGFyZ3M6W3QuY2xpZW50WCx0LmNsaWVudFldfSl9LF9lKFtkdCgicmVzaXplIildLHQucHJvdG90eXBlLCJyZXNpemVMaXN0ZW5lciIsbnVsbCksX2UoW2R0KCJoYXNoQ2hhbmdlIildLHQucHJvdG90eXBlLCJoYXNoQ2hhbmdlTGlzdGVuZXIiLG51bGwpLF9lKFtkdCgidmlzaWJpbGl0eUNoYW5nZSIpXSx0LnByb3RvdHlwZSwidmlzaWJpbGl0eUNoYW5nZUxpc3RlbmVyIixudWxsKSxfZShbZHQoIm1vdXNlTW92ZSIpXSx0LnByb3RvdHlwZSwibW91c2VNb3ZlTGlzdGVuZXIiLG51bGwpLHR9KCksTmU9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSxNZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscixuLGkpe3ZhciBvPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gby5yZWNvcmRpbmdQYWdlRXZlbnRzVHJhY2tlcj1lLG8ucmVjb3JkaW5nTXV0YXRpb25zVHJhY2tlcj1yLG8ucmVjb3JkaW5nQWN0aXZpdHlUcmFja2VyPW4sby5yZWNvcmRpbmdSZXF1ZXN0PWksby5yZWNvcmRpbmdSZXF1ZXN0RHVyaW5nSW5hY3Rpdml0eUNvdW50PTAsby5pc011dGF0aW9uVHJhY2tlclN0b3BwZWQ9ITEsb31yZXR1cm4gTmUoZSx0KSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnJlY29yZGluZ1BhZ2VFdmVudHNUcmFja2VyLm9uRXZlbnQoKGZ1bmN0aW9uKCl7dC5yZWNvcmRpbmdBY3Rpdml0eVRyYWNrZXIudHJhY2tBY3Rpdml0eSgpLHQucmVjb3JkaW5nUmVxdWVzdER1cmluZ0luYWN0aXZpdHlDb3VudD0wfSkpLHRoaXMucmVjb3JkaW5nUmVxdWVzdC5hZnRlcigoZnVuY3Rpb24oKXt0LnJlY29yZGluZ1JlcXVlc3REdXJpbmdJbmFjdGl2aXR5Q291bnQrPTEsdC5zdG9wTXV0YXRpb25UcmFja2VySWZOZWVkZWQoKX0pKSx0aGlzLnJlY29yZGluZ0FjdGl2aXR5VHJhY2tlci5vbkFjdGl2aXR5U3RvcHBlZCgoZnVuY3Rpb24oKXt0LnN0b3BNdXRhdGlvblRyYWNrZXJJZk5lZWRlZCgpfSkpLHRoaXMucmVjb3JkaW5nQWN0aXZpdHlUcmFja2VyLm9uQWN0aXZpdHlSZXN1bWVkKChmdW5jdGlvbigpe3QuaXNNdXRhdGlvblRyYWNrZXJTdG9wcGVkJiYodC5yZWNvcmRpbmdNdXRhdGlvbnNUcmFja2VyLnN0YXJ0KCksdC5pc011dGF0aW9uVHJhY2tlclN0b3BwZWQ9ITEpfSkpfSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5yZWNvcmRpbmdBY3Rpdml0eVRyYWNrZXIuc3RhcnQoKX0sZS5wcm90b3R5cGUub25TdG9wPWZ1bmN0aW9uKCl7dGhpcy5yZWNvcmRpbmdBY3Rpdml0eVRyYWNrZXIuc3RvcCgpfSxlLnByb3RvdHlwZS5zdG9wTXV0YXRpb25UcmFja2VySWZOZWVkZWQ9ZnVuY3Rpb24oKXshdGhpcy5pc011dGF0aW9uVHJhY2tlclN0b3BwZWQmJiF0aGlzLnJlY29yZGluZ0FjdGl2aXR5VHJhY2tlci5pc1VzZXJBY3RpdmUoKSYmdGhpcy5yZWNvcmRpbmdSZXF1ZXN0RHVyaW5nSW5hY3Rpdml0eUNvdW50Pj0yJiYodGhpcy5yZWNvcmRpbmdNdXRhdGlvbnNUcmFja2VyLnN0b3AoKSx0aGlzLmlzTXV0YXRpb25UcmFja2VyU3RvcHBlZD0hMCl9LGV9KHJlKSxMZT1yKDEpLERlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wLHI9YXJndW1lbnRzLmxlbmd0aDtlPHI7ZSsrKXQrPWFyZ3VtZW50c1tlXS5sZW5ndGg7dmFyIG49QXJyYXkodCksaT0wO2ZvcihlPTA7ZTxyO2UrKylmb3IodmFyIG89YXJndW1lbnRzW2VdLHM9MCxhPW8ubGVuZ3RoO3M8YTtzKyssaSsrKW5baV09b1tzXTtyZXR1cm4gbn07ZnVuY3Rpb24geGUodCl7dmFyIGU9Y3NTdHJpbmcucHJvdG90eXBlLnRyaW0uY2FsbCh0KTtpZigiIj09PXQpcmV0dXJuW107dmFyIHIsbj0ocj1lLGNzU3RyaW5nLnByb3RvdHlwZS5zcGxpdC5jYWxsKHIsL1xzKC4rKS8pKSxpPW5bMF0sbz1uWzFdO3JldHVybiBvPyhfKGksIiwiKXx8KG89ZnVuY3Rpb24odCl7cmV0dXJuIGNzU3RyaW5nLnByb3RvdHlwZS5zcGxpdC5jYWxsKHQsLywoLispLylbMV18fCIifShvKSksRGUoW3FlKGkpXSx4ZShvKSkpOltxZShpKV19ZnVuY3Rpb24gcWUodCl7cmV0dXJuIGNzU3RyaW5nLnByb3RvdHlwZS5zcGxpdC5jYWxsKHQsLywkLylbMF19dmFyIFVlLFZlPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCksamU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIFZlKGUsdCksZS5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXt0aGlzLm9uRXZlbnRDYWxsYmFjaz10fSxlLnByb3RvdHlwZS5zZXJpYWxpemVFbGVtZW50Tm9kZT1mdW5jdGlvbih0LGUscil7cmV0dXJuIHRoaXMuc2NhbkVsZW1lbnQodCksZX0sZS5wcm90b3R5cGUuYmVmb3JlU2VyaWFsaXplQ2hpbGRyZW49ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0aGlzLnNjYW5TdHlsZUVsZW1lbnQodCxlKSxlfSxlLnByb3RvdHlwZS5zY2FuRWxlbWVudD1mdW5jdGlvbih0KXt0aGlzLnNjYW5FbGVtZW50QXR0cmlidXRlcyh0KX0sZS5wcm90b3R5cGUuc2NhbkF0dHJpYnV0ZT1mdW5jdGlvbih0LGUpe3RoaXMuc2NhbkVsZW1lbnRBdHRyaWJ1dGVzKHQsZSl9LGUucHJvdG90eXBlLnNjYW5UZXh0PWZ1bmN0aW9uKHQpe3AodCkmJmNzTm9kZXBhcmVudE5vZGUuYXBwbHkodCkmJmYoY3NOb2RlcGFyZW50Tm9kZS5hcHBseSh0KSkmJnRoaXMuc2NhbkNzc1N0cmluZyh0LmRhdGEpfSxlLnByb3RvdHlwZS5zY2FuU3R5bGVFbGVtZW50PWZ1bmN0aW9uKHQsZSl7aWYoZih0KSlmb3IodmFyIHI9MCxuPWU7cjxuLmxlbmd0aDtyKyspe3ZhciBpPW5bcl07cChpKSYmdGhpcy5zY2FuQ3NzU3RyaW5nKGkuZGF0YSl9fSxlLnByb3RvdHlwZS5zY2FuRWxlbWVudEF0dHJpYnV0ZXM9ZnVuY3Rpb24odCxlKXt0aGlzLnNjYW5Dc3NMaW5rKHQsZSksdGhpcy5zY2FuSW1hZ2UodCxlKSx0aGlzLnNjYW5TdHlsZUF0dHJpYnV0ZSh0LGUpfSxlLnByb3RvdHlwZS5zY2FuQ3NzTGluaz1mdW5jdGlvbih0LGUpeyFsKHQpfHxlJiYiaHJlZiIhPT1lfHwhdC5ocmVmfHx0aGlzLm9uU3RhdGljUmVzb3VyY2VVcmwodC5ocmVmKX0sZS5wcm90b3R5cGUuc2NhbkltYWdlPWZ1bmN0aW9uKHQsZSl7aCh0KSYmKGUmJiJzcmMiIT09ZXx8IXQuc3JjfHx0aGlzLmlzRGF0YVVybCh0LnNyYyl8fG51bGw9PT10LmdldEF0dHJpYnV0ZSgic3JjIil8fHRoaXMuaXNIYXNoU3RhcnRVcmwodC5nZXRBdHRyaWJ1dGUoInNyYyIpKXx8dGhpcy5vblN0YXRpY1Jlc291cmNlVXJsKHQuc3JjKSxlJiYic3Jjc2V0IiE9PWV8fCF0LnNyY3NldHx8dGhpcy5zY2FuU3Jjc2V0KHQuc3Jjc2V0KSl9LGUucHJvdG90eXBlLnNjYW5TdHlsZUF0dHJpYnV0ZT1mdW5jdGlvbih0LGUpe2lmKCghZXx8InN0eWxlIj09PWUpJiZ0Lmhhc0F0dHJpYnV0ZSgic3R5bGUiKSl7dmFyIHI9dC5nZXRBdHRyaWJ1dGUoInN0eWxlIik7aWYoInN0cmluZyIhPXR5cGVvZiByKXRocm93IG5ldyBFcnJvcigiVW5leHBlY3RlZCBzdHlsZTogIit0Lm91dGVySFRNTCk7dGhpcy5zY2FuQ3NzU3RyaW5nKHIpfX0sZS5wcm90b3R5cGUuaXNIYXNoU3RhcnRVcmw9ZnVuY3Rpb24odCl7cmV0dXJuIE8odCwiIyIpfSxlLnByb3RvdHlwZS5pc0RhdGFVcmw9ZnVuY3Rpb24odCl7cmV0dXJuIE8odCwiZGF0YToiKX0sZS5wcm90b3R5cGUuc2NhbkNzc1N0cmluZz1mdW5jdGlvbih0KXt0aGlzLnByb2Nlc3NSYXdVcmxzKE9iamVjdChMZS5leHRyYWN0RnJvbSkodCkpfSxlLnByb3RvdHlwZS5zY2FuU3Jjc2V0PWZ1bmN0aW9uKHQpe3RoaXMucHJvY2Vzc1Jhd1VybHMoeGUodCkpfSxlLnByb3RvdHlwZS5wcm9jZXNzUmF3VXJscz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY3NBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoY3NBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoY3NBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodCwoZnVuY3Rpb24odCl7cmV0dXJuIWUuaXNEYXRhVXJsKHQpfSkpLChmdW5jdGlvbih0KXtyZXR1cm4hZS5pc0hhc2hTdGFydFVybCh0KX0pKSwoZnVuY3Rpb24odCl7cmV0dXJuIHR0KHQpfSkpLChmdW5jdGlvbih0KXtyZXR1cm4gZS5vblN0YXRpY1Jlc291cmNlVXJsKHQpfSkpfSxlLnByb3RvdHlwZS5vblN0YXRpY1Jlc291cmNlVXJsPWZ1bmN0aW9uKHQpe3RoaXMub25FdmVudENhbGxiYWNrKHtkYXRlOkQubm93KCksdHlwZTpxdC5TVEFUSUNfUkVTT1VSQ0VfVVJMLGFyZ3M6W3RdfSl9LGV9KGxlKTshZnVuY3Rpb24odCl7dC5SRVFVRVNUX1NUQVJUPSJyZXF1ZXN0U3RhcnQiLHQuRE9NX0lOVEVSQUNUSVZFPSJkb21JbnRlcmFjdGl2ZSJ9KFVlfHwoVWU9e30pKTt2YXIgemUsQmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMud2luZG93UGVyZm9ybWFuY2U9dC5wZXJmb3JtYW5jZX1yZXR1cm4gdC5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXt0aGlzLm9uRXZlbnRDYWxsYmFjaz10fSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuYXJlVGltaW5nc0F2YWlsYWJsZSgpJiZ0aGlzLnJlY29yZFBlcmZvcm1hbmNlVGltaW5ncygpfSx0LnByb3RvdHlwZS5yZWNvcmRQZXJmb3JtYW5jZVRpbWluZ3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFBlcmZvcm1hbmNlVGltaW5ncygpO3RoaXMub25FdmVudENhbGxiYWNrKHthcmdzOnQsZGF0ZTpELm5vdygpLHR5cGU6cXQuUEVSRk9STUFOQ0VfVElNSU5HU30pfSx0LnByb3RvdHlwZS5hcmVUaW1pbmdzQXZhaWxhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuISghdGhpcy53aW5kb3dQZXJmb3JtYW5jZXx8IXRoaXMud2luZG93UGVyZm9ybWFuY2UudGltaW5nKX0sdC5wcm90b3R5cGUuZ2V0UGVyZm9ybWFuY2VUaW1pbmdzPWZ1bmN0aW9uKCl7cmV0dXJuW3twZXJmb3JtYW5jZVRpbWluZzpVZS5SRVFVRVNUX1NUQVJULHRpbWVzdGFtcDp0aGlzLndpbmRvd1BlcmZvcm1hbmNlLnRpbWluZy5yZXF1ZXN0U3RhcnR9LHtwZXJmb3JtYW5jZVRpbWluZzpVZS5ET01fSU5URVJBQ1RJVkUsdGltZXN0YW1wOnRoaXMud2luZG93UGVyZm9ybWFuY2UudGltaW5nLmRvbUludGVyYWN0aXZlfV19LHR9KCksSGU9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSxGZT1mdW5jdGlvbih0LGUscixuKXt2YXIgaSxvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09bj9uPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTpuO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLG4pO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKGk9dFthXSkmJihzPShvPDM/aShzKTpvPjM/aShlLHIscyk6aShlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSxHZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscil7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLm1vbmtleVBhdGNoZXI9ZSxuLm5vZGVJZGVudGlmaWVyPXIsbn1yZXR1cm4gSGUoZSx0KSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5pbml0SW50ZXJjZXB0b3JzKCksdGhpcy5pbml0U3Vic2NyaWJlcnMoKSx0aGlzLmluaXRNdXRhdGlvbk9ic2VydmVyKCl9LGUucHJvdG90eXBlLmluaXRNdXRhdGlvbk9ic2VydmVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLm9ic2VydmVyPW5ldyBNdXRhdGlvbk9ic2VydmVyKChmdW5jdGlvbihlKXt0LmhhbmRsZU11dGF0aW9ucyhlKX0pKX0sZS5wcm90b3R5cGUuaW5pdEludGVyY2VwdG9ycz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5zdXBwb3J0QXR0YWNoU2hhZG93KCkmJih0aGlzLmF0dGFjaFNoYWRvd0ludGVyY2VwdG9yPXRoaXMubW9ua2V5UGF0Y2hlci5jcmVhdGVTeW5jRnVuY3Rpb25JbnRlcmNlcHRvcih7dGFyZ2V0OkVsZW1lbnQucHJvdG90eXBlLG1ldGhvZE5hbWU6ImF0dGFjaFNoYWRvdyIsaG9vazpmdW5jdGlvbihlKXt2YXIgcj1lLmNvbnRleHQsbj1lLnJlc3VsdDtyZXR1cm4gdC5oYW5kbGVBdHRhY2hTaGFkb3cocixuKX19KSksdGhpcy5zdXBwb3J0Q3JlYXRlU2hhZG93Um9vdCgpJiYodGhpcy5jcmVhdGVTaGFkb3dSb290SW50ZXJjZXB0b3I9dGhpcy5tb25rZXlQYXRjaGVyLmNyZWF0ZVN5bmNGdW5jdGlvbkludGVyY2VwdG9yKHt0YXJnZXQ6RWxlbWVudC5wcm90b3R5cGUsbWV0aG9kTmFtZToiY3JlYXRlU2hhZG93Um9vdCIsaG9vazpmdW5jdGlvbihlKXt2YXIgcj1lLmNvbnRleHQsbj1lLnJlc3VsdDtyZXR1cm4gdC5oYW5kbGVBdHRhY2hTaGFkb3cocixuKX19KSl9LGUucHJvdG90eXBlLmluaXRTdWJzY3JpYmVycz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5ub2RlSWRlbnRpZmllci5vbklkZW50aWZpZXJBZGRlZCgoZnVuY3Rpb24oZSl7dihlKSYmdC5vYnNlcnZlKGUpfSkpfSxlLnByb3RvdHlwZS5vbkNoaWxkTGlzdE11dGF0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuY2hpbGRMaXN0TXV0YXRpb25DYWxsYmFjaz10fSxlLnByb3RvdHlwZS5vbkNoYXJhY3RlckRhdGFNdXRhdGlvbj1mdW5jdGlvbih0KXt0aGlzLmNoYXJhY3RlckRhdGFNdXRhdGlvbkNhbGxiYWNrPXR9LGUucHJvdG90eXBlLm9uQXR0cmlidXRlc011dGF0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuYXR0cmlidXRlc011dGF0aW9uQ2FsbGJhY2s9dH0sZS5wcm90b3R5cGUub25BdHRhY2hTaGFkb3dNdXRhdGlvbj1mdW5jdGlvbih0KXt0aGlzLmF0dGFjaFNoYWRvd011dGF0aW9uQ2FsbGJhY2s9dH0sZS5wcm90b3R5cGUub2JzZXJ2ZT1mdW5jdGlvbih0KXtpZighdGhpcy5pc1N0YXJ0ZWQpdGhyb3cgbmV3IEVycm9yKCJNdXRhdGlvbk9ic2VydmVyU2VydmljZSBub3Qgc3RhcnRlZCIpO3RoaXMub2JzZXJ2ZXIub2JzZXJ2ZSh0LHtzdWJ0cmVlOiEwLGF0dHJpYnV0ZXM6ITAsY2hpbGRMaXN0OiEwLGNoYXJhY3RlckRhdGE6ITAsYXR0cmlidXRlT2xkVmFsdWU6ITAsY2hhcmFjdGVyRGF0YU9sZFZhbHVlOiEwfSl9LGUucHJvdG90eXBlLm9uU3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmF0dGFjaFNoYWRvd0ludGVyY2VwdG9yJiZ0aGlzLmF0dGFjaFNoYWRvd0ludGVyY2VwdG9yLmFjdGl2YXRlKCksdGhpcy5jcmVhdGVTaGFkb3dSb290SW50ZXJjZXB0b3ImJnRoaXMuY3JlYXRlU2hhZG93Um9vdEludGVyY2VwdG9yLmFjdGl2YXRlKCl9LGUucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbigpe3RoaXMuYXR0YWNoU2hhZG93SW50ZXJjZXB0b3ImJnRoaXMuYXR0YWNoU2hhZG93SW50ZXJjZXB0b3IuZGVhY3RpdmF0ZSgpLHRoaXMuY3JlYXRlU2hhZG93Um9vdEludGVyY2VwdG9yJiZ0aGlzLmNyZWF0ZVNoYWRvd1Jvb3RJbnRlcmNlcHRvci5kZWFjdGl2YXRlKCksdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCl9LGUucHJvdG90eXBlLnN1cHBvcnRBdHRhY2hTaGFkb3c9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LkVsZW1lbnQmJndpbmRvdy5FbGVtZW50LnByb3RvdHlwZSYmImZ1bmN0aW9uIj09dHlwZW9mIHdpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5hdHRhY2hTaGFkb3d9LGUucHJvdG90eXBlLnN1cHBvcnRDcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5FbGVtZW50JiZ3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUmJiJmdW5jdGlvbiI9PXR5cGVvZiB3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdH0sZS5wcm90b3R5cGUuaGFuZGxlTXV0YXRpb25zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1ELm5vdygpLHI9MDtyPHQubGVuZ3RoO3IrPTEpe3ZhciBuPXRbcl07c3dpdGNoKG4uZGF0ZT1lLG4udHlwZSl7Y2FzZSJhdHRyaWJ1dGVzIjp0aGlzLmF0dHJpYnV0ZXNNdXRhdGlvbkNhbGxiYWNrKG4pO2JyZWFrO2Nhc2UiY2hhcmFjdGVyRGF0YSI6dGhpcy5jaGFyYWN0ZXJEYXRhTXV0YXRpb25DYWxsYmFjayhuKTticmVhaztjYXNlImNoaWxkTGlzdCI6dGhpcy5jaGlsZExpc3RNdXRhdGlvbkNhbGxiYWNrKG4pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJtdXRhdGlvbiB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQiKX19fSxlLnByb3RvdHlwZS5oYW5kbGVBdHRhY2hTaGFkb3c9ZnVuY3Rpb24odCxlKXt0aGlzLmF0dGFjaFNoYWRvd011dGF0aW9uQ2FsbGJhY2soe3NoYWRvd1Jvb3Q6ZSxkYXRlOkQubm93KCksdGFyZ2V0OnR9KX0sRmUoW2R0KCJtdXRhdGlvbnMiKV0sZS5wcm90b3R5cGUsImhhbmRsZU11dGF0aW9ucyIsbnVsbCksZX0ocmUpLFdlPWZ1bmN0aW9uKCl7cmV0dXJuKFdlPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyPTEsbj1hcmd1bWVudHMubGVuZ3RoO3I8bjtyKyspZm9yKHZhciBpIGluIGU9YXJndW1lbnRzW3JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiYodFtpXT1lW2ldKTtyZXR1cm4gdH0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sWGU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTAscj1hcmd1bWVudHMubGVuZ3RoO2U8cjtlKyspdCs9YXJndW1lbnRzW2VdLmxlbmd0aDt2YXIgbj1BcnJheSh0KSxpPTA7Zm9yKGU9MDtlPHI7ZSsrKWZvcih2YXIgbz1hcmd1bWVudHNbZV0scz0wLGE9by5sZW5ndGg7czxhO3MrKyxpKyspbltpXT1vW3NdO3JldHVybiBufTshZnVuY3Rpb24odCl7dFt0LldlYkVsZW1lbnQ9MF09IldlYkVsZW1lbnQiLHRbdC5Nb2JpbGVWaWV3PTFdPSJNb2JpbGVWaWV3Iix0W3QuV2ViVmlld0NvbnRhaW5lcj0yXT0iV2ViVmlld0NvbnRhaW5lciJ9KHplfHwoemU9e30pKTt2YXIgSmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMucHJvY2Vzc29ycz10fXJldHVybiB0LnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIHI9V2Uoe30sZSksbj10Lm5vZGVUeXBlLGk9Y3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcy5wcm9jZXNzb3JzLChmdW5jdGlvbih0LGUpe3JldHVybiBlLmJlZm9yZVNlcmlhbGl6ZSh0LHIpfSksdCk7c3dpdGNoKG4pe2Nhc2UgTm9kZS5FTEVNRU5UX05PREU6cmV0dXJuIHRoaXMuc2VyaWFsaXplRWxlbWVudE5vZGUoaSxyKTtjYXNlIE5vZGUuVEVYVF9OT0RFOnJldHVybiB0aGlzLnNlcmlhbGl6ZVRleHROb2RlKGkscik7Y2FzZSBOb2RlLkNPTU1FTlRfTk9ERTpyZXR1cm4gdGhpcy5zZXJpYWxpemVDb21tZW50Tm9kZShpLHIpO2Nhc2UgTm9kZS5ET0NVTUVOVF9UWVBFX05PREU6cmV0dXJuIHRoaXMuc2VyaWFsaXplRG9jdHlwZU5vZGUoaSxyKTtjYXNlIE5vZGUuRE9DVU1FTlRfTk9ERTpyZXR1cm4gdGhpcy5zZXJpYWxpemVEb2N1bWVudE5vZGUoaSxyKTtjYXNlIE5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERTpyZXR1cm4gdGhpcy5zZXJpYWxpemVEb2N1bWVudEZyYWdtZW50Tm9kZShpLHIpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJzZXJpYWxpemF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgKG5vZGVUeXBlOiAiK24rIikiKX19LHQucHJvdG90eXBlLnNlcmlhbGl6ZUVsZW1lbnROb2RlPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbj1jc0FycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLnByb2Nlc3NvcnMsKGZ1bmN0aW9uKHIsbil7dmFyIGk9bi5zZXJpYWxpemVOb2RlKHQscixlKTtyZXR1cm4gbi5zZXJpYWxpemVFbGVtZW50Tm9kZSh0LGksZSl9KSx7YXR0cmlidXRlczpbXX0pOyhyPWNzQXJyYXkucHJvdG90eXBlLnB1c2gpLmNhbGwuYXBwbHkocixYZShbbi5hdHRyaWJ1dGVzXSx0aGlzLnNlcmlhbGl6ZUF0dHJpYnV0ZXModCxlKSkpO3ZhciBpPXQuc2hhZG93Um9vdDtyZXR1cm4gaSYmKG4uc2hhZG93Um9vdD10aGlzLnNlcmlhbGl6ZVNoYWRvd1Jvb3ROb2RlKGksZSkpLG4uY2hpbGRyZW49dGhpcy5zZXJpYWxpemVDaGlsZHJlbih0LGUpLG59LHQucHJvdG90eXBlLnNlcmlhbGl6ZUF0dHJpYnV0ZXM9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLG49Uyh0LmF0dHJpYnV0ZXMpO3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5tYXAuY2FsbChjc0FycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLnByb2Nlc3NvcnMsKGZ1bmN0aW9uKHIsbil7cmV0dXJuIG4uYmVmb3JlU2VyaWFsaXplQXR0cmlidXRlcyh0LHIsZSl9KSxuKSwoZnVuY3Rpb24obil7cmV0dXJuIHIuc2VyaWFsaXplQXR0cmlidXRlKHQsbixlKX0pKX0sdC5wcm90b3R5cGUuc2VyaWFsaXplQXR0cmlidXRlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcy5wcm9jZXNzb3JzLChmdW5jdGlvbihuLGkpe3JldHVybiBpLnNlcmlhbGl6ZUF0dHJpYnV0ZSh0LGUsbixyKX0pLHt9KX0sdC5wcm90b3R5cGUuc2VyaWFsaXplQ2hpbGRyZW49ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLG49Uyhjc05vZGVjaGlsZE5vZGVzLmFwcGx5KHQpKTtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoY3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcy5wcm9jZXNzb3JzLChmdW5jdGlvbihyLG4pe3JldHVybiBuLmJlZm9yZVNlcmlhbGl6ZUNoaWxkcmVuKHQscixlKX0pLG4pLChmdW5jdGlvbih0KXtyZXR1cm4gci5zZXJpYWxpemUodCxlKX0pKX0sdC5wcm90b3R5cGUuc2VyaWFsaXplVGV4dE5vZGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcy5wcm9jZXNzb3JzLChmdW5jdGlvbihyLG4pe3ZhciBpPW4uc2VyaWFsaXplTm9kZSh0LHIsZSk7cmV0dXJuIG4uc2VyaWFsaXplVGV4dE5vZGUodCxpLGUpfSkse30pfSx0LnByb3RvdHlwZS5zZXJpYWxpemVDb21tZW50Tm9kZT1mdW5jdGlvbih0LGUpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLnByb2Nlc3NvcnMsKGZ1bmN0aW9uKHIsbil7dmFyIGk9bi5zZXJpYWxpemVOb2RlKHQscixlKTtyZXR1cm4gbi5zZXJpYWxpemVDb21tZW50Tm9kZSh0LGksZSl9KSx7fSl9LHQucHJvdG90eXBlLnNlcmlhbGl6ZURvY3R5cGVOb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMucHJvY2Vzc29ycywoZnVuY3Rpb24ocixuKXt2YXIgaT1uLnNlcmlhbGl6ZU5vZGUodCxyLGUpO3JldHVybiBuLnNlcmlhbGl6ZURvY3R5cGVOb2RlKHQsaSxlKX0pLHt9KX0sdC5wcm90b3R5cGUuc2VyaWFsaXplRG9jdW1lbnROb2RlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9Y3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcy5wcm9jZXNzb3JzLChmdW5jdGlvbihyLG4pe3ZhciBpPW4uc2VyaWFsaXplTm9kZSh0LHIsZSk7cmV0dXJuIG4uc2VyaWFsaXplRG9jdW1lbnROb2RlKHQsaSxlKX0pLHt9KTtyZXR1cm4gci5jaGlsZHJlbj10aGlzLnNlcmlhbGl6ZUNoaWxkcmVuKHQsZSkscn0sdC5wcm90b3R5cGUuc2VyaWFsaXplU2hhZG93Um9vdE5vZGU9ZnVuY3Rpb24odCxlKXt2YXIgcj1jc0FycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLnByb2Nlc3NvcnMsKGZ1bmN0aW9uKHIsbil7dmFyIGk9bi5zZXJpYWxpemVOb2RlKHQscixlKTtyZXR1cm4gbi5zZXJpYWxpemVTaGFkb3dSb290Tm9kZSh0LGksZSl9KSx7fSk7cmV0dXJuIHIuY2hpbGRyZW49dGhpcy5zZXJpYWxpemVDaGlsZHJlbih0LGUpLHJ9LHQucHJvdG90eXBlLnNlcmlhbGl6ZURvY3VtZW50RnJhZ21lbnROb2RlPWZ1bmN0aW9uKHQsZSl7aWYodC5tb2RlKXJldHVybiB0aGlzLnNlcmlhbGl6ZVNoYWRvd1Jvb3ROb2RlKHQsZSk7dGhyb3cgbmV3IEVycm9yKCJOb3QgaW1wbGVtZW50ZWQgeWV0LiIpfSx0fSgpLFllPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCksS2U9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIFllKGUsdCksZS5wcm90b3R5cGUuYmVmb3JlU2VyaWFsaXplQ2hpbGRyZW49ZnVuY3Rpb24odCxlKXtpZihmKHQpKXt2YXIgcj10aGlzLmNzc1J1bGVzKHQpO3RoaXMuaXNFbXB0eVN0eWxlRWxlbWVudFdpdGhSdWxlcyh0LHIpJiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSx0aGlzLmNyZWF0ZVRleHROb2RlRnJvbVJ1bGVzKHIpKX1yZXR1cm4gZX0sZS5wcm90b3R5cGUuY3NzUnVsZXM9ZnVuY3Rpb24odCl7dHJ5e3ZhciBlPXQuc2hlZXQ7aWYoIWUpcmV0dXJuO3JldHVybiBlLmNzc1J1bGVzfHxlLnJ1bGVzfWNhdGNoKHQpe2lmKCJTZWN1cml0eUVycm9yIiE9PXQubmFtZSYmIkludmFsaWRBY2Nlc3NFcnJvciIhPT10Lm5hbWUpdGhyb3cgdDtyZXR1cm59fSxlLnByb3RvdHlwZS5pc0VtcHR5U3R5bGVFbGVtZW50V2l0aFJ1bGVzPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dC50ZXh0Q29udGVudHx8IiI7cmV0dXJuL15ccyokLy50ZXN0KHIpJiZ2b2lkIDAhPT1lJiYwIT09ZS5sZW5ndGh9LGUucHJvdG90eXBlLmNyZWF0ZVRleHROb2RlRnJvbVJ1bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPWNzQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbChjc0FycmF5LnByb3RvdHlwZS5tYXAuY2FsbChTKHQpLChmdW5jdGlvbih0KXtyZXR1cm4gdC5jc3NUZXh0fSkpLCIiKTtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSl9LGUucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5ub2RlVHlwZT10Lm5vZGVUeXBlLGUuZm9ybWF0PXplLldlYkVsZW1lbnQsZX0sZS5wcm90b3R5cGUuc2VyaWFsaXplRWxlbWVudE5vZGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5sb2NhbE5hbWU9dC5sb2NhbE5hbWUsZS5uYW1lc3BhY2VVUkk9dC5uYW1lc3BhY2VVUkksZX0sZS5wcm90b3R5cGUuc2VyaWFsaXplQXR0cmlidXRlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gci5uYW1lPWUubmFtZSxyLnZhbHVlPWUudmFsdWUsci5uYW1lc3BhY2VVUkk9bnVsbCE9PWUubmFtZXNwYWNlVVJJP2UubmFtZXNwYWNlVVJJOiIiLHJ9LGUucHJvdG90eXBlLnNlcmlhbGl6ZVRleHROb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZGF0YT10LmRhdGEsZX0sZS5wcm90b3R5cGUuc2VyaWFsaXplQ29tbWVudE5vZGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5kYXRhPXQuZGF0YSxlfSxlLnByb3RvdHlwZS5zZXJpYWxpemVEb2N0eXBlTm9kZT1mdW5jdGlvbih0LGUpe3JldHVybiBlLm5hbWU9dC5uYW1lLGUucHVibGljSWQ9dC5wdWJsaWNJZCxlLnN5c3RlbUlkPXQuc3lzdGVtSWQsZX0sZS5wcm90b3R5cGUuc2VyaWFsaXplRG9jdW1lbnROb2RlPWZ1bmN0aW9uKHQscil7cmV0dXJuIHIuYmFzZVVSST1lLmdldEJhc2VVUkkodCkscn0sZS5wcm90b3R5cGUuc2VyaWFsaXplU2hhZG93Um9vdE5vZGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5tb2RlPXQubW9kZSxlfSxlLmdldEJhc2VVUkk9ZnVuY3Rpb24odCl7dmFyIGU9dC5iYXNlVVJJO2lmKG51bGw9PWUpe3ZhciByPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJhc2UiKTtlPTAhPT1yLmxlbmd0aD9yWzBdLmhyZWY6dC5VUkx9cmV0dXJuIGV9LGV9KGxlKSxRZT0oZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMucHJvY2Vzc29ycz10fXQucHJvdG90eXBlLnVuc2VyaWFsaXplPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9PXQuZm9ybWF0JiZ0LmZvcm1hdCE9PXplLldlYkVsZW1lbnQpdGhyb3cgbmV3IEVycm9yKCJ1bnNlcmlhbGl6YXRpb24gaXMgbm90IHN1cHBvcnRlZCAoZm9ybWF0OiAiK3QuZm9ybWF0KyIpIik7dmFyIGU9dC5ub2RlVHlwZTtzd2l0Y2goZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpyZXR1cm4gdGhpcy51bnNlcmlhbGl6ZUVsZW1lbnROb2RlKHQpO2Nhc2UgTm9kZS5URVhUX05PREU6cmV0dXJuIHRoaXMudW5zZXJpYWxpemVUZXh0Tm9kZSh0KTtjYXNlIE5vZGUuQ09NTUVOVF9OT0RFOnJldHVybiB0aGlzLnVuc2VyaWFsaXplQ29tbWVudE5vZGUodCk7Y2FzZSBOb2RlLkRPQ1VNRU5UX1RZUEVfTk9ERTpyZXR1cm4gdGhpcy51bnNlcmlhbGl6ZURvY3R5cGVOb2RlKHQpO2Nhc2UgTm9kZS5ET0NVTUVOVF9OT0RFOnJldHVybiB0aGlzLnVuc2VyaWFsaXplRG9jdW1lbnROb2RlKHQpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJ1bnNlcmlhbGl6YXRpb24gaXMgbm90IHN1cHBvcnRlZCAobm9kZVR5cGU6ICIrZSsiKSIpfX0sdC5wcm90b3R5cGUudW5zZXJpYWxpemVTaGFkb3dSb290PWZ1bmN0aW9uKHQsZSl7dmFyIHI9Y3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcy5wcm9jZXNzb3JzLChmdW5jdGlvbihyLG4pe3ZhciBpPW4udW5zZXJpYWxpemVTaGFkb3dSb290KHQsZSxyKTtyZXR1cm4gbi51bnNlcmlhbGl6ZU5vZGUoZSxpKX0pLG51bGwpO3JldHVybiB0aGlzLnVuc2VyaWFsaXplQ2hpbGRyZW4ocixlLmNoaWxkcmVuKSxyfSx0LnByb3RvdHlwZS51bnNlcmlhbGl6ZUVsZW1lbnROb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPWNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMucHJvY2Vzc29ycywoZnVuY3Rpb24oZSxyKXt2YXIgbj1yLnVuc2VyaWFsaXplRWxlbWVudE5vZGUodCxlKTtyZXR1cm4gci51bnNlcmlhbGl6ZU5vZGUodCxuKX0pLG51bGwpO3JldHVybiB0aGlzLnVuc2VyaWFsaXplQXR0cmlidXRlcyhlLHQuYXR0cmlidXRlcyksdGhpcy51bnNlcmlhbGl6ZUNoaWxkcmVuKGUsdC5jaGlsZHJlbiksdC5zaGFkb3dSb290JiZ0aGlzLnVuc2VyaWFsaXplU2hhZG93Um9vdChlLHQuc2hhZG93Um9vdCksZX0sdC5wcm90b3R5cGUudW5zZXJpYWxpemVDaGlsZHJlbj1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXM7Y3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKFMoZSksKGZ1bmN0aW9uKGUpe3JldHVybiB0LmFwcGVuZENoaWxkKHIudW5zZXJpYWxpemUoZSkpfSkpfSx0LnByb3RvdHlwZS51bnNlcmlhbGl6ZUF0dHJpYnV0ZXM9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzO2NzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChTKGUpLChmdW5jdGlvbihlKXt0cnl7ci51bnNlcmlhbGl6ZUF0dHJpYnV0ZSh0LGUpfWNhdGNoKHQpe319KSl9LHQucHJvdG90eXBlLnVuc2VyaWFsaXplQXR0cmlidXRlPWZ1bmN0aW9uKHQsZSl7Y3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcy5wcm9jZXNzb3JzLChmdW5jdGlvbih0LHIpe3JldHVybiByLnVuc2VyaWFsaXplQXR0cmlidXRlKGUsdCl9KSx0KX0sdC5wcm90b3R5cGUudW5zZXJpYWxpemVUZXh0Tm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcy5wcm9jZXNzb3JzLChmdW5jdGlvbihlLHIpe3ZhciBuPXIudW5zZXJpYWxpemVUZXh0Tm9kZSh0LGUpO3JldHVybiByLnVuc2VyaWFsaXplTm9kZSh0LG4pfSksbnVsbCl9LHQucHJvdG90eXBlLnVuc2VyaWFsaXplQ29tbWVudE5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMucHJvY2Vzc29ycywoZnVuY3Rpb24oZSxyKXt2YXIgbj1yLnVuc2VyaWFsaXplQ29tbWVudE5vZGUodCxlKTtyZXR1cm4gci51bnNlcmlhbGl6ZU5vZGUodCxuKX0pLG51bGwpfSx0LnByb3RvdHlwZS51bnNlcmlhbGl6ZURvY3R5cGVOb2RlPWZ1bmN0aW9uKHQpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLnByb2Nlc3NvcnMsKGZ1bmN0aW9uKGUscil7dmFyIG49ci51bnNlcmlhbGl6ZURvY3R5cGVOb2RlKHQsZSk7cmV0dXJuIHIudW5zZXJpYWxpemVOb2RlKHQsbil9KSxudWxsKX0sdC5wcm90b3R5cGUudW5zZXJpYWxpemVEb2N1bWVudE5vZGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxyPWNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMucHJvY2Vzc29ycywoZnVuY3Rpb24oZSxyKXt2YXIgbj1yLnVuc2VyaWFsaXplRG9jdW1lbnROb2RlKHQsZSk7cmV0dXJuIHIudW5zZXJpYWxpemVOb2RlKHQsbil9KSxudWxsKTtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKFModC5jaGlsZHJlbiksKGZ1bmN0aW9uKHQpe3JldHVybiByLmFwcGVuZENoaWxkKGUudW5zZXJpYWxpemUodCkpfSkpLHJ9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUudW5zZXJpYWxpemVTaGFkb3dSb290PWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gcn0sdC5wcm90b3R5cGUudW5zZXJpYWxpemVOb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV9LHQucHJvdG90eXBlLnVuc2VyaWFsaXplRWxlbWVudE5vZGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZX0sdC5wcm90b3R5cGUudW5zZXJpYWxpemVBdHRyaWJ1dGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZX0sdC5wcm90b3R5cGUudW5zZXJpYWxpemVUZXh0Tm9kZT1mdW5jdGlvbih0LGUpe3JldHVybiBlfSx0LnByb3RvdHlwZS51bnNlcmlhbGl6ZUNvbW1lbnROb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV9LHQucHJvdG90eXBlLnVuc2VyaWFsaXplRG9jdHlwZU5vZGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZX0sdC5wcm90b3R5cGUudW5zZXJpYWxpemVEb2N1bWVudE5vZGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZX0sdH0oKSksWmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5kb21QYXJzZXI9bmV3IERPTVBhcnNlcn1yZXR1cm4gdC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmh0bWxTYW5pdGl6ZXIodCk7cmV0dXJuIHRoaXMucGFyc2VIdG1sRWxlbWVudCgiPCIrZSsiIC8+Iil9LHQucHJvdG90eXBlLmNyZWF0ZUF0dHJpYnV0ZT1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMuaHRtbFNhbml0aXplcih0KSxuPXRoaXMucGFyc2VIdG1sRWxlbWVudCgiPGRpdiAiK3IrJz0iIj48L2Rpdj4nKSxpPW4uZ2V0QXR0cmlidXRlTm9kZShyKTtyZXR1cm4gbi5yZW1vdmVBdHRyaWJ1dGVOb2RlKGkpLGkudmFsdWU9ZSxpfSx0LnByb3RvdHlwZS5wYXJzZUh0bWxFbGVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRvbVBhcnNlci5wYXJzZUZyb21TdHJpbmcodCwidGV4dC9odG1sIikuYm9keS5jaGlsZHJlblswXX0sdC5wcm90b3R5cGUuaHRtbFNhbml0aXplcj1mdW5jdGlvbih0KXtyZXR1cm4gY3NTdHJpbmcucHJvdG90eXBlLnJlcGxhY2UuY2FsbCh0LC9bXHM8PlwvXDBdL2csIiIpfSx0fSgpLCRlPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCksdHI9KGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIHI9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLmRvY3VtZW50PWUsci5kaXJ0eUVsZW1lbnRCdWlsZGVyPW5ldyBaZSxyfSRlKGUsdCksZS5wcm90b3R5cGUudW5zZXJpYWxpemVTaGFkb3dSb290PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUubW9kZSx0LmF0dGFjaFNoYWRvdyh7bW9kZToib3BlbiJ9KX0sZS5wcm90b3R5cGUudW5zZXJpYWxpemVFbGVtZW50Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFRhZ05hbWUodCkscj10Lm5hbWVzcGFjZVVSSTt0cnl7cmV0dXJuIHRoaXMuaXNYaHRtbE5hbWVzcGFjZShyKSYmZS5pbmRleE9mKCI6Iik+LTE/dGhpcy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpOnRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHIsZSl9Y2F0Y2godCl7c3dpdGNoKHQubmFtZSl7Y2FzZSJJbnZhbGlkQ2hhcmFjdGVyRXJyb3IiOnJldHVybiB0aGlzLmRpcnR5RWxlbWVudEJ1aWxkZXIuY3JlYXRlRWxlbWVudChlKTtkZWZhdWx0OnRocm93IHR9fX0sZS5wcm90b3R5cGUudW5zZXJpYWxpemVBdHRyaWJ1dGU9ZnVuY3Rpb24odCxlKXt0cnl7ZS5zZXRBdHRyaWJ1dGVOUyh0Lm5hbWVzcGFjZVVSSSx0Lm5hbWUsdC52YWx1ZSl9Y2F0Y2gocil7c3dpdGNoKHIubmFtZSl7Y2FzZSJOYW1lc3BhY2VFcnJvciI6ZS5zZXRBdHRyaWJ1dGUodC5uYW1lLHQudmFsdWUpO2JyZWFrO2Nhc2UiSW52YWxpZENoYXJhY3RlckVycm9yIjplLnNldEF0dHJpYnV0ZU5vZGUodGhpcy5kaXJ0eUVsZW1lbnRCdWlsZGVyLmNyZWF0ZUF0dHJpYnV0ZSh0Lm5hbWUsdC52YWx1ZSkpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgcn19cmV0dXJuIGV9LGUucHJvdG90eXBlLnVuc2VyaWFsaXplVGV4dE5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodC5kYXRhKX0sZS5wcm90b3R5cGUudW5zZXJpYWxpemVDb21tZW50Tm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kb2N1bWVudC5jcmVhdGVDb21tZW50KHQuZGF0YSl9LGUucHJvdG90eXBlLnVuc2VyaWFsaXplRG9jdHlwZU5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlRG9jdW1lbnRUeXBlKHQubmFtZSx0LnB1YmxpY0lkLHQuc3lzdGVtSWQpfSxlLnByb3RvdHlwZS51bnNlcmlhbGl6ZURvY3VtZW50Tm9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50KG51bGwsbnVsbCxudWxsKX0sZS5wcm90b3R5cGUuaXNYaHRtbE5hbWVzcGFjZT1mdW5jdGlvbih0KXtyZXR1cm4iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI9PT10fSxlLnByb3RvdHlwZS5pc1N2Z05hbWVzcGFjZT1mdW5jdGlvbih0KXtyZXR1cm4iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPT09dH0sZS5wcm90b3R5cGUuZ2V0VGFnTmFtZT1mdW5jdGlvbih0KXt2YXIgZT10LHI9ZS5sb2NhbE5hbWUsbj1lLnRhZ05hbWU7cmV0dXJuIHJ8fCh0aGlzLmlzU3ZnTmFtZXNwYWNlKHQubmFtZXNwYWNlVVJJKT9uOm4udG9Mb3dlckNhc2UoKSl9fShRZSksZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSksZXI9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTAscj1hcmd1bWVudHMubGVuZ3RoO2U8cjtlKyspdCs9YXJndW1lbnRzW2VdLmxlbmd0aDt2YXIgbj1BcnJheSh0KSxpPTA7Zm9yKGU9MDtlPHI7ZSsrKWZvcih2YXIgbz1hcmd1bWVudHNbZV0scz0wLGE9by5sZW5ndGg7czxhO3MrKyxpKyspbltpXT1vW3NdO3JldHVybiBufSxycj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3JldHVybiB0LmNhbGwodGhpcyxlcihbbmV3IEtlXSxlKSl8fHRoaXN9cmV0dXJuIHRyKGUsdCksZX0oSmUpO2Z1bmN0aW9uIG5yKCl7dmFyIHQsZT0odD1uZXcgRXJyb3IpLnN0YWNrP2NzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGNzU3RyaW5nLnByb3RvdHlwZS5zcGxpdC5jYWxsKHQuc3RhY2ssIlxuIiksKGZ1bmN0aW9uKHQpe3JldHVybiJFcnJvciIhPT10JiYtMT09PWNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwoY3NTdHJpbmcucHJvdG90eXBlLnRvTG93ZXJDYXNlLmNhbGwodCksInByb21pc2UgIikmJi0xPT09Y3NTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0LCJbbmF0aXZlIGNvZGVdIil9KSk6W107aWYoMD09PWUubGVuZ3RoKXJldHVybiIiO3ZhciByPWZ1bmN0aW9uKHQpe3JldHVybiB0Lmxlbmd0aD4wP2lyKHRbMF0pOiIifShlKTtyZXR1cm4iIj09PXJ8fDA9PT0oZT1mdW5jdGlvbih0LGUpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0LChmdW5jdGlvbih0KXtyZXR1cm4tMT09PWNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodCxlKX0pKX0oZSxyKSkubGVuZ3RoPyIiOmlyKGVbMF0pfWZ1bmN0aW9uIGlyKHQpe3ZhciBlLHI9IiI7ZT10O3ZhciBuPSgtMSE9PWNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZSwiQCIpP25ldyBSZWdFeHAoIkAoLispOihcXGQrKTooXFxkKykkIik6bmV3IFJlZ0V4cCgiXFwoKC4rKTooXFxkKyk6KFxcZCspXFwpIikpLmV4ZWModCk7cmV0dXJuIG4mJihyPW5bMV0pLHJ9dmFyIG9yPWZ1bmN0aW9uKCl7cmV0dXJuKG9yPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyPTEsbj1hcmd1bWVudHMubGVuZ3RoO3I8bjtyKyspZm9yKHZhciBpIGluIGU9YXJndW1lbnRzW3JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiYodFtpXT1lW2ldKTtyZXR1cm4gdH0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc3I9ZnVuY3Rpb24odCxlLHIsbil7cmV0dXJuIG5ldyhyfHwocj1Qcm9taXNlKSkoKGZ1bmN0aW9uKGksbyl7ZnVuY3Rpb24gcyh0KXt0cnl7YyhuLm5leHQodCkpfWNhdGNoKHQpe28odCl9fWZ1bmN0aW9uIGEodCl7dHJ5e2Mobi50aHJvdyh0KSl9Y2F0Y2godCl7byh0KX19ZnVuY3Rpb24gYyh0KXt2YXIgZTt0LmRvbmU/aSh0LnZhbHVlKTooZT10LnZhbHVlLGUgaW5zdGFuY2VvZiByP2U6bmV3IHIoKGZ1bmN0aW9uKHQpe3QoZSl9KSkpLnRoZW4ocyxhKX1jKChuPW4uYXBwbHkodCxlfHxbXSkpLm5leHQoKSl9KSl9LGFyPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixpLG8scz17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoMSZpWzBdKXRocm93IGlbMV07cmV0dXJuIGlbMV19LHRyeXM6W10sb3BzOltdfTtyZXR1cm4gbz17bmV4dDphKDApLHRocm93OmEoMSkscmV0dXJuOmEoMil9LCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJihvW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLG87ZnVuY3Rpb24gYShvKXtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKG8pe2lmKHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpO2Zvcig7czspdHJ5e2lmKHI9MSxuJiYoaT0yJm9bMF0/bi5yZXR1cm46b1swXT9uLnRocm93fHwoKGk9bi5yZXR1cm4pJiZpLmNhbGwobiksMCk6bi5uZXh0KSYmIShpPWkuY2FsbChuLG9bMV0pKS5kb25lKXJldHVybiBpO3N3aXRjaChuPTAsaSYmKG89WzImb1swXSxpLnZhbHVlXSksb1swXSl7Y2FzZSAwOmNhc2UgMTppPW87YnJlYWs7Y2FzZSA0OnJldHVybiBzLmxhYmVsKysse3ZhbHVlOm9bMV0sZG9uZTohMX07Y2FzZSA1OnMubGFiZWwrKyxuPW9bMV0sbz1bMF07Y29udGludWU7Y2FzZSA3Om89cy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlO2RlZmF1bHQ6aWYoIShpPXMudHJ5cywoaT1pLmxlbmd0aD4wJiZpW2kubGVuZ3RoLTFdKXx8NiE9PW9bMF0mJjIhPT1vWzBdKSl7cz0wO2NvbnRpbnVlfWlmKDM9PT1vWzBdJiYoIWl8fG9bMV0+aVswXSYmb1sxXTxpWzNdKSl7cy5sYWJlbD1vWzFdO2JyZWFrfWlmKDY9PT1vWzBdJiZzLmxhYmVsPGlbMV0pe3MubGFiZWw9aVsxXSxpPW87YnJlYWt9aWYoaSYmcy5sYWJlbDxpWzJdKXtzLmxhYmVsPWlbMl0scy5vcHMucHVzaChvKTticmVha31pWzJdJiZzLm9wcy5wb3AoKSxzLnRyeXMucG9wKCk7Y29udGludWV9bz1lLmNhbGwodCxzKX1jYXRjaCh0KXtvPVs2LHRdLG49MH1maW5hbGx5e3I9aT0wfWlmKDUmb1swXSl0aHJvdyBvWzFdO3JldHVybnt2YWx1ZTpvWzBdP29bMV06dm9pZCAwLGRvbmU6ITB9fShbbyxhXSl9fX0sY3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5kZWZhdWx0SG9va1ByZXBhcmVBcmdzPWZ1bmN0aW9uKHQsZSl7cmV0dXJue2NvbnRleHQ6dCxhcmdzOmV9fX1yZXR1cm4gdC5wcm90b3R5cGUuY29weUZ1bmN0aW9uU2lnbmF0dXJlPWZ1bmN0aW9uKHQsZSl7dC5wcm90b3R5cGU9ZS5wcm90b3R5cGUsT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsInRvU3RyaW5nIix7dmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gZS50b1N0cmluZygpfX0pfSx0LnByb3RvdHlwZS5jcmVhdGVTeW5jRnVuY3Rpb25JbnRlcmNlcHRvcj1mdW5jdGlvbih0KXt2YXIgZSxyPXQudGFyZ2V0LG49dC5tZXRob2ROYW1lLGk9dC5ob29rLG89dC5ob29rUHJlcGFyZUFyZ3Mscz12b2lkIDA9PT1vP3RoaXMuZGVmYXVsdEhvb2tQcmVwYXJlQXJnczpvLGE9dC5vcHRpb25zO2lmKCEobnVsbD09PShlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocixuKSl8fHZvaWQgMD09PWU/dm9pZCAwOmUud3JpdGFibGUpKXJldHVybiBmdC53YXJuKCJDYW5ub3QgaW50ZXJjZXB0IHJlYWQgb25seSBmdW5jdGlvbiAnIituKyInIG9mIG9iamVjdCAnIityKyInIiksbnVsbDt2YXIgYz0hMSx1PXJbbl07aWYoImZ1bmN0aW9uIj09dHlwZW9mIHUpe3ZhciBwPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3ZhciByLG49cyh0aGlzLHQpLG89dS5hcHBseSh0aGlzLHQpO2MmJihhJiZhLndpdGhDYWxsZXJOYW1lJiYocj1ucigpKSxmdC50cnlUb0V4ZWN1dGUoIlN5bmNGdW5jdGlvbkludGVyY2VwdG9yIiwoZnVuY3Rpb24oKXtpKG9yKG9yKHtyZXN1bHQ6b30sbikse2NhbGxlck5hbWU6cn0pKX0pKSgpKTtyZXR1cm4gb307dGhpcy5jb3B5RnVuY3Rpb25TaWduYXR1cmUocCx1KSxyW25dPXB9cmV0dXJue2FjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGM9ITB9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gYz0hMX19fSx0LnByb3RvdHlwZS5jcmVhdGVBc3luY0Z1bmN0aW9uSW50ZXJjZXB0b3I9ZnVuY3Rpb24odCl7dmFyIGUscj10LnRhcmdldCxuPXQubWV0aG9kTmFtZSxpPXQuaG9vayxvPXQuaG9va1ByZXBhcmVBcmdzLHM9dm9pZCAwPT09bz90aGlzLmRlZmF1bHRIb29rUHJlcGFyZUFyZ3M6byxhPXQub3B0aW9ucztpZighKG51bGw9PT0oZT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHIsbikpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLndyaXRhYmxlKSlyZXR1cm4gZnQud2FybigiQ2Fubm90IGludGVyY2VwdCByZWFkIG9ubHkgZnVuY3Rpb24gJyIrbisiJyBvZiBvYmplY3QgJyIrcisiJyIpLG51bGw7dmFyIGM9ITEsdT1yW25dO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB1KXt2YXIgcD1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtyZXR1cm4gc3IodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLHIsbjtyZXR1cm4gYXIodGhpcywoZnVuY3Rpb24obyl7cmV0dXJuIGU9cyh0aGlzLHQpLHI9dS5hcHBseSh0aGlzLHQpLGMmJihhJiZhLndpdGhDYWxsZXJOYW1lJiYobj1ucigpKSxmdC50cnlUb0V4ZWN1dGUoIkFzeW5jRnVuY3Rpb25JbnRlcmNlcHRvciIsKGZ1bmN0aW9uKCl7aShvcihvcih7cmVzdWx0OnJ9LGUpLHtjYWxsZXJOYW1lOm59KSl9KSkoKSksWzIscl19KSl9KSl9O3RoaXMuY29weUZ1bmN0aW9uU2lnbmF0dXJlKHAsdSkscltuXT1wfXJldHVybnthY3RpdmF0ZTpmdW5jdGlvbigpe3JldHVybiBjPSEwfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGM9ITF9fX0sdC5wcm90b3R5cGUuY3JlYXRlRGVzY3JpcHRvckludGVyY2VwdG9yPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj0hMSxpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxlKTtpZihpKXtpZighaS5jb25maWd1cmFibGUpcmV0dXJuIGZ0Lndhcm4oIkNhbm5vdCBpbnRlcmNlcHQgcmVhZCBvbmx5IHByb3BlcnR5ICciK2UrIicgb2Ygb2JqZWN0ICciK3QrIiciKSxudWxsO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUsb3Iob3Ioe30saS5nZXQ/e2dldDpmdW5jdGlvbigpe3JldHVybiBpLmdldC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fTp7fSksaS5zZXQ/e3NldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1hcmd1bWVudHMsbz1pLnNldC5hcHBseSh0aGlzLGUpO3JldHVybiBuJiZmdC50cnlUb0V4ZWN1dGUoIkRlc2NyaXB0b3JJbnRlcmNlcHRvciIsKGZ1bmN0aW9uKCl7cih0LGVbMF0pfSkpKCksb319Ont9KSl9cmV0dXJue2FjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG49ITB9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbj0hMX19fSx0fSgpLHVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixuLGksbyxzLGEsYyx1LHAsbCxoLGYsZCx5KXt0aGlzLnNlc3Npb25TZXJ2aWNlPXQsdGhpcy5jb25maWd1cmF0aW9uPWUsdGhpcy5jb21wcmVzc29yPXIsdGhpcy5zZWxlY3Rvcj1uLHRoaXMuY29uc2VudFNlcnZpY2U9aSx0aGlzLmJhc2ljUGFyYW1ldGVycz1vLHRoaXMuY29tbWFuZHNTZXJ2aWNlPXMsdGhpcy5waWk9YSx0aGlzLnNlc3Npb25SZW5ld2VyPWMsdGhpcy51cmxTZXJ2aWNlPXUsdGhpcy5waWlNYXNraW5nU2VydmljZT1wLHRoaXMuamF2YVNjcmlwdEVycm9yc1RyYWNrZXI9bCx0aGlzLmphdmFTY3JpcHRFcnJvcnNBbm9ueW1pemVyPWgsdGhpcy5hcGlFcnJvcnNUcmFja2VyPWYsdGhpcy5hcGlFcnJvcnNBbm9ueW1pemVyPWQsdGhpcy5kZWJ1Z1NlcnZpY2U9eX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1uZXcgY3Iscj1uZXcgZmUsbj1uZXcgdmUodGhpcy5waWlNYXNraW5nU2VydmljZSk7dGhpcy5hbm9ueW1pemF0aW9uU2VydmljZT1uZXcgUmUodGhpcy5waWksdGhpcy5jb25maWd1cmF0aW9uKSx0aGlzLmFub255bWl6YXRpb25TZXJ2aWNlLmluaXQoKTt2YXIgaT1uZXcgamUsbz1uZXcgR2UoZSxyKSxzPW5ldyBycihbcixuLHRoaXMuYW5vbnltaXphdGlvblNlcnZpY2UsaV0pO3RoaXMucmVjb3JkaW5nQmF0Y2g9bmV3ICR0O3ZhciBhPW5ldyB0ZSxjPW5ldyBBZShhLHRoaXMuYmFzaWNQYXJhbWV0ZXJzKTt0aGlzLmNvbmZpZ3VyYXRpb24udXNlTWFsa2FQaXBlbGluZSYmYy5hZGRQcm92aWRlcih7Z2V0UmVxdWVzdFBhcmFtZXRlcnM6ZnVuY3Rpb24oKXtyZXR1cm57cnQ6dC5zZXNzaW9uU2VydmljZS5nZXRSZWNvcmRpbmdTdGF0ZSgpfX19KTt2YXIgdT10aGlzLmNyZWF0ZVJlY29yZGluZ1Bvc3RSZXF1ZXN0KHRoaXMuY29tcHJlc3Nvcik7dGhpcy5tdXRhdGlvblNlcmlhbGl6ZXI9bmV3IGNlKHRoaXMuY29uc2VudFNlcnZpY2UscyxyLG4sdGhpcy5hbm9ueW1pemF0aW9uU2VydmljZSx0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy51cmxTZXJ2aWNlKSx0aGlzLm11dGF0aW9uU2VyaWFsaXplci5pbml0KCk7dmFyIHA9bmV3IEt0KHRoaXMuc2VsZWN0b3IscixuKSxsPW5ldyBRdCh0aGlzLm11dGF0aW9uU2VyaWFsaXplcixvLGkpO3RoaXMucmVjb3JkaW5nU2VydmljZT1uZXcgb2UodGhpcy5jb25maWd1cmF0aW9uLHUsdGhpcy5yZWNvcmRpbmdCYXRjaCxjLGEsbmV3IHBlKGUscixpKSxsLHAsbmV3IEllKHdpbmRvdy5sb2NhdGlvbix0aGlzLnBpaSksdGhpcy5zZXNzaW9uUmVuZXdlcixpLG5ldyBCZSh3aW5kb3cpLHRoaXMuamF2YVNjcmlwdEVycm9yc1RyYWNrZXIsdGhpcy5qYXZhU2NyaXB0RXJyb3JzQW5vbnltaXplcix0aGlzLmFwaUVycm9yc1RyYWNrZXIsdGhpcy5hcGlFcnJvcnNBbm9ueW1pemVyKSx0aGlzLnJlY29yZGluZ0luYWN0aXZpdHlTZXJ2aWNlPW5ldyBNZShwLGwsbmV3IGtlKG5ldyBPZSksdSk7dmFyIGg9bmV3IGJlKCJjc1BlcnNpc3RlZCIpLGY9dGhpcy5jcmVhdGVSZWNvcmRpbmdQb3N0UmVxdWVzdCh0aGlzLmNvbXByZXNzb3IpO3RoaXMucmVjb3JkaW5nUmVjb3ZlcnlTZXJ2aWNlPW5ldyBhZShmLHRoaXMucmVjb3JkaW5nQmF0Y2gsaCx0aGlzLmNvbmZpZ3VyYXRpb24pLG8uaW5pdCgpLHRoaXMucmVjb3JkaW5nSW5hY3Rpdml0eVNlcnZpY2UuaW5pdCgpLHRoaXMucmVjb3JkaW5nU2VydmljZS5pbml0KCksdGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoWyJpc1JlY29yZGluZyJdLChmdW5jdGlvbigpe3JldHVybiB0LnNlc3Npb25TZXJ2aWNlLmlzUmVwbGF5UmVjb3JkZWQoKX0pKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihbInNldENhcHR1cmVkRWxlbWVudHNTZWxlY3RvciJdLChmdW5jdGlvbihlKXt0LmFub255bWl6YXRpb25TZXJ2aWNlLnNldFdoaXRlbGlzdGVkRWxlbWVudHNTZWxlY3RvcihlKX0pKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihbInNldFBJSVNlbGVjdG9ycyJdLChmdW5jdGlvbihlKXt0LnBpaU1hc2tpbmdTZXJ2aWNlLnNldFBJSVNlbGVjdG9ycyhlKX0pKX0sdC5wcm90b3R5cGUub25TdGFydFRyYWNraW5nPWZ1bmN0aW9uKCl7dGhpcy5yZWNvcmRpbmdSZWNvdmVyeVNlcnZpY2UucmVjb3ZlcigpLHRoaXMuc2Vzc2lvblNlcnZpY2UuaXNSZXBsYXlSZWNvcmRlZCgpJiYodGhpcy5jb25maWd1cmF0aW9uLnVzZU1hbGthUGlwZWxpbmUmJnRoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0UmVjb3JkaW5nU3RhdGUoKT09PVh0LlRFTVBPUkFSSUxZX1JFQ09SREVEJiZ0aGlzLnJlY29yZGluZ1NlcnZpY2UuYmxvY2tTZW5kaW5nRXZlbnRzKCksdGhpcy5yZWNvcmRpbmdJbmFjdGl2aXR5U2VydmljZS5zdGFydCgpLHRoaXMucmVjb3JkaW5nU2VydmljZS5zdGFydCgpLHRoaXMucmVjb3JkaW5nUmVjb3ZlcnlTZXJ2aWNlLnN0YXJ0KCkpfSx0LnByb3RvdHlwZS5vbkFmdGVyQXJ0aWZpY2lhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy5yZWNvcmRpbmdTZXJ2aWNlLmNsZWFyU3RhdGVzKCksdGhpcy5tdXRhdGlvblNlcmlhbGl6ZXIucmVzZXRBbm9ueW1pemF0aW9uKCksdGhpcy5zZXNzaW9uU2VydmljZS5pc1JlcGxheVJlY29yZGVkKCk/KHRoaXMucmVjb3JkaW5nSW5hY3Rpdml0eVNlcnZpY2UucmVzdGFydCgpLHRoaXMucmVjb3JkaW5nU2VydmljZS5yZXN0YXJ0KCksdGhpcy5yZWNvcmRpbmdSZWNvdmVyeVNlcnZpY2UucmVzdGFydCgpKToodGhpcy5yZWNvcmRpbmdJbmFjdGl2aXR5U2VydmljZS5zdG9wKCksdGhpcy5yZWNvcmRpbmdTZXJ2aWNlLnN0b3AoKSx0aGlzLnJlY29yZGluZ1JlY292ZXJ5U2VydmljZS5zdG9wKCkpfSx0LnByb3RvdHlwZS5vbkJlZm9yZVNlc3Npb25SZW5ld2FsPWZ1bmN0aW9uKCl7dGhpcy5yZWNvcmRpbmdTZXJ2aWNlLmNsZWFyU3RhdGVzKCksdGhpcy5yZWNvcmRpbmdJbmFjdGl2aXR5U2VydmljZS5zdG9wKCksdGhpcy5yZWNvcmRpbmdTZXJ2aWNlLnN0b3AoKSx0aGlzLnJlY29yZGluZ1JlY292ZXJ5U2VydmljZS5zdG9wKCl9LHQucHJvdG90eXBlLm9uT3B0b3V0PWZ1bmN0aW9uKCl7dGhpcy5yZWNvcmRpbmdJbmFjdGl2aXR5U2VydmljZS5zdG9wKCksdGhpcy5yZWNvcmRpbmdTZXJ2aWNlLnN0b3AoKSx0aGlzLnJlY29yZGluZ1JlY292ZXJ5U2VydmljZS5zdG9wKCl9LHQucHJvdG90eXBlLm9uUGFnZUV2ZW50PWZ1bmN0aW9uKHQpe3RoaXMucmVjb3JkaW5nU2VydmljZS50cmlnZ2VyUGFnZUV2ZW50KHQpfSx0LnByb3RvdHlwZS5vbkV2ZW50VHJpZ2dlclJlY29yZGluZz1mdW5jdGlvbih0KXt0aGlzLnJlY29yZGluZ1NlcnZpY2UudHJpZ2dlclBhZ2VFdmVudCh0KX0sdC5wcm90b3R5cGUub25Db25zZW50R3JhbnRlZD1mdW5jdGlvbigpe3RoaXMubXV0YXRpb25TZXJpYWxpemVyLnJlc2V0QW5vbnltaXphdGlvbigpLHRoaXMucmVjb3JkaW5nU2VydmljZS50cmlnZ2VyQ29uc2VudEdyYW50ZWQoKX0sdC5wcm90b3R5cGUub25Db25zZW50V2l0aGRyYXduPWZ1bmN0aW9uKCl7dGhpcy5tdXRhdGlvblNlcmlhbGl6ZXIucmVzZXRBbm9ueW1pemF0aW9uKCksdGhpcy5yZWNvcmRpbmdTZXJ2aWNlLnRyaWdnZXJDb25zZW50V2l0aGRyYXduKCl9LHQucHJvdG90eXBlLm9uUmVjb3JkaW5nU3RhdGVDaGFuZ2U9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLmNvbmZpZ3VyYXRpb24udXNlTWFsa2FQaXBlbGluZSlzd2l0Y2godCl7Y2FzZSBYdC5OT1RfUkVDT1JERUQ6dGhpcy5yZWNvcmRpbmdTZXJ2aWNlLmNsZWFyRXZlbnRzKCksdGhpcy5yZWNvcmRpbmdJbmFjdGl2aXR5U2VydmljZS5zdG9wKCksdGhpcy5yZWNvcmRpbmdTZXJ2aWNlLnN0b3AoKSx0aGlzLnJlY29yZGluZ1JlY292ZXJ5U2VydmljZS5zdG9wKCk7YnJlYWs7Y2FzZSBYdC5SQU5ET01fU0FNUExJTkc6dGhpcy5yZWNvcmRpbmdCYXRjaC5zZXRSZXF1ZXN0UGFyYW1ldGVyc0Zyb21Qcm92aWRlcih7Z2V0UmVxdWVzdFBhcmFtZXRlcnM6ZnVuY3Rpb24oKXtyZXR1cm57cnQ6ZS5zZXNzaW9uU2VydmljZS5nZXRSZWNvcmRpbmdTdGF0ZSgpfX19KSx0aGlzLnJlY29yZGluZ1NlcnZpY2UuYWxsb3dTZW5kaW5nRXZlbnRzKCksdGhpcy5yZWNvcmRpbmdTZXJ2aWNlLnB1c2hFdmVudHMoKX19LHQucHJvdG90eXBlLmNyZWF0ZVJlY29yZGluZ1Bvc3RSZXF1ZXN0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29uZmlndXJhdGlvbi51c2VNYWxrYVBpcGVsaW5lPyJ2Mi9yZWNvcmRpbmciOiJyZWNvcmRpbmciLHI9dGhpcy5jb25maWd1cmF0aW9uLnVzZU1hbGthUGlwZWxpbmU/ImJ5dGVBcnJheSI6ImJhc2U2NCIsbj1uZXcgSHQodGhpcy5jb25maWd1cmF0aW9uLmdldFJlY29yZGluZ1VyaSgpLGUpO3JldHVybiB0aGlzLmRlYnVnU2VydmljZS5pc0NvbXByZXNzaW9uRGlzYWJsZWQoKXx8bi5zZXRDb21wcmVzc2lvbk9wdGlvbnModCxyKSxufSx0LmlzU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuIk11dGF0aW9uT2JzZXJ2ZXIiaW4gd2luZG93JiYidmlzaWJpbGl0eVN0YXRlImluIGRvY3VtZW50fSx0fSgpLHByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMudmlzaXRvclNlcnZpY2U9dCx0aGlzLnNlc3Npb25TZXJ2aWNlPWUsdGhpcy5uYXR1cmFsUGFnZVZpZXdTZW50PSExfXJldHVybiB0LnByb3RvdHlwZS5pc05hdHVyYWxQYWdlVmlld1NlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYXR1cmFsUGFnZVZpZXdTZW50fSx0LnByb3RvdHlwZS5zZXROYXR1cmFsUGFnZVZpZXdTZW50PWZ1bmN0aW9uKHQpe3RoaXMubmF0dXJhbFBhZ2VWaWV3U2VudD10fSx0LnByb3RvdHlwZS5nZXRUcmFja2luZ0NvbnRleHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNlc3Npb25LZXkoKSxlPXRoaXMuZ2V0UGFnZU51bWJlcigpO3JldHVybiB0JiZlP3tzZXNzaW9uS2V5OnQscGFnZU51bWJlcjplfTpudWxsfSx0LnByb3RvdHlwZS5nZXRTZXNzaW9uS2V5PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52aXNpdG9yU2VydmljZS5nZXRWaXNpdG9yKCk7cmV0dXJuIHQ/dC5pZCsiLiIrdC52aXNpdHNDb3VudDpudWxsfSx0LnByb3RvdHlwZS5nZXRQYWdlTnVtYmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Vzc2lvblNlcnZpY2UuZG9lc1Nlc3Npb25FeGlzdCgpP3RoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0U2Vzc2lvbigpLnBhZ2VOdW1iZXI6bnVsbH0sdH0oKSxscj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy50cmFja2luZ0NvbnRleHRTZXJ2aWNlPXQsdGhpcy5yZWdpc3RlcmVkQ2FsbGJhY2tzPVtdfXJldHVybiB0LnByb3RvdHlwZS5oYW5kbGVDb21tYW5kPWZ1bmN0aW9uKHQpe2lmKHd0KHQpJiYodGhpcy5yZWdpc3RlckNhbGxiYWNrKHQpLHRoaXMudHJhY2tpbmdDb250ZXh0U2VydmljZS5pc05hdHVyYWxQYWdlVmlld1NlbnQoKSkpe3ZhciBlPXRoaXMudHJhY2tpbmdDb250ZXh0U2VydmljZS5nZXRUcmFja2luZ0NvbnRleHQoKTtudWxsIT09ZSYmdGhpcy5leGVjdXRlQXN5bmModCxlKX19LHQucHJvdG90eXBlLnJlZ2lzdGVyQ2FsbGJhY2s9ZnVuY3Rpb24odCl7Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMucmVnaXN0ZXJlZENhbGxiYWNrcyx0KX0sdC5wcm90b3R5cGUuZXhlY3V0ZVJlZ2lzdGVyZWRDYWxsYmFja3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy50cmFja2luZ0NvbnRleHRTZXJ2aWNlLmdldFRyYWNraW5nQ29udGV4dCgpO251bGwhPT1lJiZjc0FycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0aGlzLnJlZ2lzdGVyZWRDYWxsYmFja3MsKGZ1bmN0aW9uKHIpe3JldHVybiB0LmV4ZWN1dGVBc3luYyhyLGUpfSkpfSx0LnByb3RvdHlwZS5leGVjdXRlQXN5bmM9ZnVuY3Rpb24odCxlKXtzZXRUaW1lb3V0KChmdW5jdGlvbigpe3QoZSl9KSl9LHR9KCksaHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMudHJhY2tpbmdDb250ZXh0U2VydmljZT10LHRoaXMucGVuZGluZ0NhbGxiYWNrcz1bXX1yZXR1cm4gdC5wcm90b3R5cGUuaGFuZGxlQ29tbWFuZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50cmFja2luZ0NvbnRleHRTZXJ2aWNlLmlzTmF0dXJhbFBhZ2VWaWV3U2VudCgpP3RoaXMuYXBwbHlHZXRTZXNzaW9uS2V5KHQpOnZvaWQgdGhpcy5hZGRQZW5kaW5nQ2FsbGJhY2sodCl9LHQucHJvdG90eXBlLmFwcGx5R2V0U2Vzc2lvbktleT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnRyYWNraW5nQ29udGV4dFNlcnZpY2UuZ2V0U2Vzc2lvbktleSgpO3JldHVybiB0aGlzLmhhc0NhbGxiYWNrKHQpJiZudWxsIT09ZSYmdGhpcy5leGVjdXRlQXN5bmModC5jYWxsYmFjayxlKSxlfSx0LnByb3RvdHlwZS5hZGRQZW5kaW5nQ2FsbGJhY2s9ZnVuY3Rpb24odCl7dGhpcy5oYXNDYWxsYmFjayh0KSYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMucGVuZGluZ0NhbGxiYWNrcyx0LmNhbGxiYWNrKX0sdC5wcm90b3R5cGUuZmx1c2hQZW5kaW5nQ2FsbGJhY2tzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMudHJhY2tpbmdDb250ZXh0U2VydmljZS5nZXRTZXNzaW9uS2V5KCk7bnVsbCE9PWUmJmNzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLnBlbmRpbmdDYWxsYmFja3MsKGZ1bmN0aW9uKHIpe3QuZXhlY3V0ZUFzeW5jKHIsZSl9KSksdGhpcy5wZW5kaW5nQ2FsbGJhY2tzPVtdfSx0LnByb3RvdHlwZS5oYXNDYWxsYmFjaz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGJhY2t9LHQucHJvdG90eXBlLmV4ZWN1dGVBc3luYz1mdW5jdGlvbih0LGUpe3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dChlKX0pKX0sdH0oKSxmcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMudmlzaXRvclNlcnZpY2U9dCx0aGlzLnNlc3Npb25TZXJ2aWNlPWUsdGhpcy5jb21tYW5kc1NlcnZpY2U9cn1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy50cmFja2luZ0NvbnRleHRTZXJ2aWNlPW5ldyBwcih0aGlzLnZpc2l0b3JTZXJ2aWNlLHRoaXMuc2Vzc2lvblNlcnZpY2UpLHRoaXMuYWZ0ZXJQYWdlVmlld1NlcnZpY2U9bmV3IGxyKHRoaXMudHJhY2tpbmdDb250ZXh0U2VydmljZSksdGhpcy5nZXRTZXNzaW9uS2V5U2VydmljZT1uZXcgaHIodGhpcy50cmFja2luZ0NvbnRleHRTZXJ2aWNlKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihbImdldFNlc3Npb25LZXkiXSwoZnVuY3Rpb24oZSl7cmV0dXJuIHQuZ2V0U2Vzc2lvbktleVNlcnZpY2UuaGFuZGxlQ29tbWFuZChlKX0pKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihbImFmdGVyUGFnZVZpZXciXSwoZnVuY3Rpb24oZSl7dC5hZnRlclBhZ2VWaWV3U2VydmljZS5oYW5kbGVDb21tYW5kKGUpfSkpfSx0LnByb3RvdHlwZS5vbkFmdGVyTmF0dXJhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy50cmFja2luZ0NvbnRleHRTZXJ2aWNlLnNldE5hdHVyYWxQYWdlVmlld1NlbnQoITApLHRoaXMuZ2V0U2Vzc2lvbktleVNlcnZpY2UuZmx1c2hQZW5kaW5nQ2FsbGJhY2tzKCksdGhpcy5hZnRlclBhZ2VWaWV3U2VydmljZS5leGVjdXRlUmVnaXN0ZXJlZENhbGxiYWNrcygpfSx0LnByb3RvdHlwZS5vbkFmdGVyQXJ0aWZpY2lhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy5hZnRlclBhZ2VWaWV3U2VydmljZS5leGVjdXRlUmVnaXN0ZXJlZENhbGxiYWNrcygpfSx0fSgpLGRyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMua2V5PWNzU3RyaW5nLnByb3RvdHlwZS5zbGljZS5jYWxsKHQsMCw1MCksdGhpcy52YWx1ZT1tdChlKT9jc1N0cmluZy5wcm90b3R5cGUuc2xpY2UuY2FsbChlLDAsMjU1KTplfXJldHVybiB0LmlzVmFsaWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbXQodCkmJihtdChlKXx8dnQoZSkpfSx0fSgpLHlyPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCksdnI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5iYXRjaD1lLG4ucGlpPXIsbi5keW5hbWljVmFyaWFibGVzUXVldWU9W10sbn1yZXR1cm4geXIoZSx0KSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5keW5hbWljVmFyaWFibGVzUXVldWUsKGZ1bmN0aW9uKGUpe3JldHVybiB0LnRyYWNrRHluYW1pY1ZhcmlhYmxlKGUua2V5LGUudmFsdWUpfSkpLHRoaXMuZHluYW1pY1ZhcmlhYmxlc1F1ZXVlPVtdfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLnRyYWNrRHluYW1pY1ZhcmlhYmxlPWZ1bmN0aW9uKHQsZSl7dGhpcy5pc1N0YXJ0ZWQ/ZHIuaXNWYWxpZCh0LGUpJiZ0aGlzLmJhdGNoLmFkZChuZXcgZHIodGhpcy5waWkuYW5vbnltaXplKHQpLHRoaXMucGlpLmFub255bWl6ZShlKSkpOmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmR5bmFtaWNWYXJpYWJsZXNRdWV1ZSx7a2V5OnQsdmFsdWU6ZX0pfSxlfShyZSksbXI9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTAscj1hcmd1bWVudHMubGVuZ3RoO2U8cjtlKyspdCs9YXJndW1lbnRzW2VdLmxlbmd0aDt2YXIgbj1BcnJheSh0KSxpPTA7Zm9yKGU9MDtlPHI7ZSsrKWZvcih2YXIgbz1hcmd1bWVudHNbZV0scz0wLGE9by5sZW5ndGg7czxhO3MrKyxpKyspbltpXT1vW3NdO3JldHVybiBufTt2YXIgZ3IsU3IsRXIsd3I9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLGZ1bmN0aW9uKGUscixuKXt2YXIgaT1uLnZhbHVlLG89ITE7bi52YWx1ZT1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLHI9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspcltuXT1hcmd1bWVudHNbbl07b3x8KG89ITAsc2V0VGltZW91dCgoZnVuY3Rpb24oKXtpLmFwcGx5KGUsciksbz0hMX0pLHQpKX19fSxDcj1mdW5jdGlvbih0LGUscixuKXt2YXIgaSxvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09bj9uPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTpuO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLG4pO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKGk9dFthXSkmJihzPShvPDM/aShzKTpvPjM/aShlLHIscyk6aShlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSxScj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5jb21wcmVzc29yPXQsdGhpcy5iYXRjaD1bXX1yZXR1cm4gdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmJhdGNoLHQpLHRoaXMuc2V0QmF0Y2hSZWFkeUNhbGwoKX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmJhdGNoPVtdfSx0LnByb3RvdHlwZS5vbkJhdGNoUmVhZHk9ZnVuY3Rpb24odCl7dGhpcy5iYXRjaFJlYWR5Q2FsbGJhY2s9dH0sdC5wcm90b3R5cGUuZ2V0UmVxdWVzdFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9e30sZT0wLHI9dGhpcy5iYXRjaDtlPHIubGVuZ3RoO2UrKyl7dmFyIG49cltlXTt0W24ua2V5XT1uLnZhbHVlfXJldHVybntkdjp0aGlzLmNvbXByZXNzb3IuY29tcHJlc3NTeW5jKGNzSlNPTi5zdHJpbmdpZnkodCkpfX0sdC5wcm90b3R5cGUuc2V0QmF0Y2hSZWFkeUNhbGw9ZnVuY3Rpb24oKXt0aGlzLmJhdGNoUmVhZHlDYWxsYmFjaygpfSxDcihbd3IoKSxkdCgiZHluYW1pY1ZhcmlhYmxlc0JhdGNoUmVhZHkiKV0sdC5wcm90b3R5cGUsInNldEJhdGNoUmVhZHlDYWxsIixudWxsKSx0fSgpLGJyPVsidHJhY2tEeW5hbWljVmFyaWFibGUiXSxUcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsbixpLG8pe3RoaXMuY29tbWFuZHNTZXJ2aWNlPXQsdGhpcy5zZXNzaW9uU2VydmljZT1lLHRoaXMuY29uZmlndXJhdGlvbj1yLHRoaXMuYmFzaWNQYXJhbWV0ZXJzPW4sdGhpcy5jb21wcmVzc29yPWksdGhpcy5waWk9byx0aGlzLnJlcXVlc3Q9bmV3IEIodGhpcy5jb25maWd1cmF0aW9uLmdldFRyYWNrZXJVcmkoKSwiZHZhciIpLHRoaXMuYmF0Y2g9bmV3IFJyKHRoaXMuY29tcHJlc3NvciksdGhpcy5zZXJ2aWNlPW5ldyB2cih0aGlzLmJhdGNoLHRoaXMucGlpKX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5yZXF1ZXN0LnNldFJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzKHRoaXMuYmFzaWNQYXJhbWV0ZXJzLHRoaXMuYmF0Y2gpLHRoaXMuc2Vzc2lvblNlcnZpY2Uuc2V0RHluYW1pY1ZhcmlhYmxlc1NlcnZpY2UodGhpcy5zZXJ2aWNlKSx0aGlzLmJhdGNoLm9uQmF0Y2hSZWFkeSgoZnVuY3Rpb24oKXtyZXR1cm4gdC5yZXF1ZXN0LnNlbmQoKX0pKSx0aGlzLnJlcXVlc3QuYWZ0ZXIoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYmF0Y2guY2xlYXIoKX0pKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihiciwoZnVuY3Rpb24oZSl7dmFyIHI9dm9pZCAwPT09ZT97fTplLG49ci5rZXksaT1yLnZhbHVlO3Quc2VydmljZS50cmFja0R5bmFtaWNWYXJpYWJsZShuLGkpfSkpfSx0LnByb3RvdHlwZS5vblN0YXJ0VHJhY2tpbmc9ZnVuY3Rpb24oKXt0aGlzLnNlcnZpY2Uuc3RhcnQoKX0sdH0oKSxBcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmlkPXQsdGhpcy5yZXZlbnVlPWV9cmV0dXJuIHQuZnJvbT1mdW5jdGlvbihlKXt2YXIgcj1uZXcgdChlLmlkLHBhcnNlRmxvYXQoZS5yZXZlbnVlKSk7cmV0dXJuIGlzTmFOKHBhcnNlRmxvYXQoZS50YXgpKXx8KHIudGF4PXBhcnNlRmxvYXQoZS50YXgpKSxpc05hTihwYXJzZUZsb2F0KGUuc2hpcHBpbmcpKXx8KHIuc2hpcHBpbmc9cGFyc2VGbG9hdChlLnNoaXBwaW5nKSksbXQoZS5jdXJyZW5jeSkmJmUuY3VycmVuY3kubGVuZ3RoPD0xMCYmKHIuY3VycmVuY3k9ZS5jdXJyZW5jeSkscn0sdC5wcm90b3R5cGUuaGFzVmFsaWRSZXZlbnVlPWZ1bmN0aW9uKCl7cmV0dXJuIWlzTmFOKHRoaXMucmV2ZW51ZSkmJnRoaXMucmV2ZW51ZT49MH0sdH0oKSxrcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsbil7dGhpcy5pZD10LHRoaXMubmFtZT1lLHRoaXMucHJpY2U9cix0aGlzLnF1YW50aXR5PW59cmV0dXJuIHQuZnJvbT1mdW5jdGlvbihlKXtpZighdC5pc1ZhbGlkKGUpKXJldHVybiBudWxsO3ZhciByPW5ldyB0KGUuaWQsZS5uYW1lLHBhcnNlRmxvYXQoZS5wcmljZSkscGFyc2VJbnQoZS5xdWFudGl0eSwxMCkpO3JldHVybiBTdChlLnNrdSkmJihyLnNrdT1lLnNrdSksU3QoZS5jYXRlZ29yeSkmJihyLmNhdGVnb3J5PWUuY2F0ZWdvcnkpLHJ9LHQuaXNWYWxpZD1mdW5jdGlvbih0KXtyZXR1cm4gbXQodC5pZCkmJm10KHQubmFtZSkmJnl0KHBhcnNlRmxvYXQodC5wcmljZSkpJiZ2dChwYXJzZUludCh0LnF1YW50aXR5LDEwKSkmJighU3QodC5za3UpfHxtdCh0LnNrdSkpJiYoIVN0KHQuY2F0ZWdvcnkpfHxtdCh0LmNhdGVnb3J5KSl9LHR9KCksUHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt0aGlzLnBpaT10LHRoaXMudHJhbnNhY3Rpb25SZXF1ZXN0PWUsdGhpcy5zZXNzaW9uUmVuZXdlcj1yLHRoaXMuY2xlYXIoKX1yZXR1cm4gdC5wcm90b3R5cGUuYWRkVHJhbnNhY3Rpb249ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5waWkuYW5vbnltaXplRmllbGRzKHQsWyJpZCJdKTt0aGlzLnRyYW5zYWN0aW9uPUFyLmZyb20oZSl9LHQucHJvdG90eXBlLmdldFRyYW5zYWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNhY3Rpb259LHQucHJvdG90eXBlLnNlbmRUcmFuc2FjdGlvbj1mdW5jdGlvbigpe3RoaXMuc2Vzc2lvblJlbmV3ZXIuaXNTZXNzaW9uVmFsaWQoKSYmKHRoaXMudHJhbnNhY3Rpb24uaGFzVmFsaWRSZXZlbnVlKCk/dGhpcy50cmFuc2FjdGlvblJlcXVlc3Quc2VuZCgpOmZ0Lndhcm4oIlRyYW5zYWN0aW9uIFNlcnZpY2U6IHVuYWJsZSB0byBzZW5kIHRyYW5zYWN0aW9uIHdpdGggaW52YWxpZCBwYXJhbWV0ZXJzIikpfSx0LnByb3RvdHlwZS5hZGRJdGVtPWZ1bmN0aW9uKHQpe2lmKCF3dCh0KSl7dmFyIGU9dGhpcy5waWkuYW5vbnltaXplRmllbGRzKHQsWyJpZCIsIm5hbWUiLCJza3UiLCJjYXRlZ29yeSJdKSxyPWtyLmZyb20oZSk7bnVsbCE9PXImJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLnRyYW5zYWN0aW9uSXRlbXMscil9fSx0LnByb3RvdHlwZS5nZXRJdGVtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zYWN0aW9uSXRlbXN9LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy50cmFuc2FjdGlvbj1Bci5mcm9tKHtyZXZlbnVlOk5hTn0pLHRoaXMudHJhbnNhY3Rpb25JdGVtcz1bXX0sdC5wcm90b3R5cGUuZ2V0UmVxdWVzdFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXt2YXIgdD17aWQ6dGhpcy50cmFuc2FjdGlvbi5pZD8iIit0aGlzLnRyYW5zYWN0aW9uLmlkOiIiLHJldmVudWU6IiIrdGhpcy50cmFuc2FjdGlvbi5yZXZlbnVlfTtyZXR1cm4gU3QodGhpcy50cmFuc2FjdGlvbi50YXgpJiYodC50YXg9IiIrdGhpcy50cmFuc2FjdGlvbi50YXgpLFN0KHRoaXMudHJhbnNhY3Rpb24uc2hpcHBpbmcpJiYodC5zaGlwcGluZz0iIit0aGlzLnRyYW5zYWN0aW9uLnNoaXBwaW5nKSxTdCh0aGlzLnRyYW5zYWN0aW9uLmN1cnJlbmN5KSYmKHQuY3U9IiIrdGhpcy50cmFuc2FjdGlvbi5jdXJyZW5jeSksdC5pdGVtcz13aW5kb3cuSlNPTi5zdHJpbmdpZnkodGhpcy50cmFuc2FjdGlvbkl0ZW1zKSx0fSx0fSgpLE9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnNrdUl0ZW09Y3NTdHJpbmcucHJvdG90eXBlLnNsaWNlLmNhbGwodCwwLDEwMCl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwic2t1Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2t1SXRlbX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0fSgpLF9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuY2FydEl0ZW1SZXF1ZXN0PXQsdGhpcy5zZXNzaW9uUmVuZXdlcj1lLHRoaXMuY2FydEl0ZW09bnVsbH1yZXR1cm4gdC5wcm90b3R5cGUuYWRkVG9DYXJ0PWZ1bmN0aW9uKHQpe3RoaXMuaXNWYWxpZFNrdSh0LnNrdSkmJih0aGlzLmNhcnRJdGVtPW5ldyBPcih0LnNrdSksdGhpcy5zZW5kQ2FydEl0ZW0oKSl9LHQucHJvdG90eXBlLmlzVmFsaWRTa3U9ZnVuY3Rpb24odCl7cmV0dXJuIG10KHQpJiZ0Lmxlbmd0aD4wfSx0LnByb3RvdHlwZS5nZXRDYXJ0SXRlbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNhcnRJdGVtfSx0LnByb3RvdHlwZS5zZW5kQ2FydEl0ZW09ZnVuY3Rpb24oKXt0aGlzLnNlc3Npb25SZW5ld2VyLmlzU2Vzc2lvblZhbGlkKCkmJnRoaXMuY2FydEl0ZW1SZXF1ZXN0LnNlbmQoKX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmNhcnRJdGVtPW51bGx9LHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FydEl0ZW0/e3NrdToiIit0aGlzLmNhcnRJdGVtLnNrdX06e319LHR9KCksSXI9WyJlY29tbWVyY2U6YWRkVG9DYXJ0IiwiZWM6Y2FydDphZGQiXSxOcj1bImVjb21tZXJjZTphZGRUcmFuc2FjdGlvbiIsImVjOnRyYW5zYWN0aW9uOmNyZWF0ZSJdLE1yPVsiZWNvbW1lcmNlOmFkZEl0ZW0iLCJlYzp0cmFuc2FjdGlvbjppdGVtczphZGQiXSxMcj1bImVjb21tZXJjZTpzZW5kIiwiZWM6dHJhbnNhY3Rpb246c2VuZCJdLERyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixuLGksbyxzKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLnZpc2l0b3JTZXJ2aWNlPWUsdGhpcy5zZXNzaW9uU2VydmljZT1yLHRoaXMuY29tbWFuZHNTZXJ2aWNlPW4sdGhpcy5waWk9aSx0aGlzLnNlc3Npb25SZW5ld2VyPW8sdGhpcy51cmxTZXJ2aWNlPXN9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgQih0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0VHJhY2tlclVyaSgpLCJ0cmFuc2FjdGlvbiIpLGU9bmV3IEIodGhpcy5jb25maWd1cmF0aW9uLmdldFRyYWNrZXJVcmkoKSwiYWRkdG9jYXJ0Iikscj1uZXcgUHIodGhpcy5waWksdCx0aGlzLnNlc3Npb25SZW5ld2VyKSxpPW5ldyBfcihlLHRoaXMuc2Vzc2lvblJlbmV3ZXIpO3Quc2V0UmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnModGhpcy5jb25maWd1cmF0aW9uLHRoaXMudmlzaXRvclNlcnZpY2UsdGhpcy5zZXNzaW9uU2VydmljZSx0aGlzLnVybFNlcnZpY2UscixuKSx0LmFmdGVyKChmdW5jdGlvbigpe3IuY2xlYXIoKX0pKSxlLnNldFJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzKHRoaXMuY29uZmlndXJhdGlvbix0aGlzLnZpc2l0b3JTZXJ2aWNlLHRoaXMuc2Vzc2lvblNlcnZpY2UsdGhpcy51cmxTZXJ2aWNlLGksbiksZS5hZnRlcigoZnVuY3Rpb24oKXtpLmNsZWFyKCl9KSksdGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoTnIsKGZ1bmN0aW9uKHQpe3IuYWRkVHJhbnNhY3Rpb24odCl9KSksdGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoTXIsKGZ1bmN0aW9uKHQpe3JldHVybiByLmFkZEl0ZW0odCl9KSksdGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoTHIsKGZ1bmN0aW9uKCl7cmV0dXJuIHIuc2VuZFRyYW5zYWN0aW9uKCl9KSksdGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoSXIsKGZ1bmN0aW9uKHQpe2kuYWRkVG9DYXJ0KHQpfSkpfSx0fSgpLHhyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLndpbmRvd1BlcmZvcm1hbmNlPXQucGVyZm9ybWFuY2V9cmV0dXJuIHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7aWYodGhpcy5hcmVUaW1pbmdzVW5hdmFpbGFibGUoKSlyZXR1cm57fTt2YXIgdD10aGlzLmNvbXB1dGUoKTtyZXR1cm57c3RyOnQuc3RhcnRSZW5kZXIsZGk6dC5kb21JbnRlcmFjdGl2ZSxkYzp0LmRvbUNvbXBsZXRlLGZsOnQuZnVsbHlMb2FkZWR9fSx0LnByb3RvdHlwZS5jb21wdXRlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy53aW5kb3dQZXJmb3JtYW5jZS50aW1pbmc7cmV0dXJue3N0YXJ0UmVuZGVyOiIiKyh0LmRvbUxvYWRpbmctdC5yZXF1ZXN0U3RhcnQpLGRvbUludGVyYWN0aXZlOiIiKyh0LmRvbUludGVyYWN0aXZlLXQucmVxdWVzdFN0YXJ0KSxkb21Db21wbGV0ZToiIisodC5kb21Db21wbGV0ZS10LnJlcXVlc3RTdGFydCksZnVsbHlMb2FkZWQ6IiIrKHQubG9hZEV2ZW50RW5kLXQucmVxdWVzdFN0YXJ0KX19LHQucHJvdG90eXBlLmFyZVRpbWluZ3NVbmF2YWlsYWJsZT1mdW5jdGlvbigpe3JldHVybiEodGhpcy53aW5kb3dQZXJmb3JtYW5jZSYmdGhpcy53aW5kb3dQZXJmb3JtYW5jZS50aW1pbmcmJnRoaXMud2luZG93UGVyZm9ybWFuY2UudGltaW5nLmxvYWRFdmVudEVuZD4wKX0sdH0oKTshZnVuY3Rpb24odCl7dFt0LlRBUD0wXT0iVEFQIix0W3QuTE9OR19QUkVTUz0xXT0iTE9OR19QUkVTUyIsdFt0LkRSQUc9Ml09IkRSQUciLHRbdC5GTElDSz0zXT0iRkxJQ0sifShncnx8KGdyPXt9KSksZnVuY3Rpb24odCl7dFt0LlVQPTFdPSJVUCIsdFt0LkRPV049Ml09IkRPV04iLHRbdC5MRUZUPTNdPSJMRUZUIix0W3QuUklHSFQ9NF09IlJJR0hUIn0oU3J8fChTcj17fSkpLGZ1bmN0aW9uKHQpe3RbdC5SRVNJWkU9MF09IlJFU0laRSIsdFt0LlNDUk9MTD0xXT0iU0NST0xMIix0W3QuTU9VU0VNT1ZFPTJdPSJNT1VTRU1PVkUiLHRbdC5NT1VTRURPV049M109Ik1PVVNFRE9XTiIsdFt0Lk1PVVNFVVA9NF09Ik1PVVNFVVAiLHRbdC5DTElDSz01XT0iQ0xJQ0siLHRbdC5NT1VTRU9WRVI9Nl09Ik1PVVNFT1ZFUiIsdFt0Lk1PVVNFT1VUPTddPSJNT1VTRU9VVCIsdFt0LkNIQU5HRT0xMF09IkNIQU5HRSIsdFt0LkZPQ1VTSU49MTFdPSJGT0NVU0lOIix0W3QuRk9DVVNPVVQ9MTJdPSJGT0NVU09VVCIsdFt0LlRBUD0xNF09IlRBUCJ9KEVyfHwoRXI9e30pKTt2YXIgcXI9ZnVuY3Rpb24oKXt9LFVyPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCksVnI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5wcm9qZWN0Q29uZmlndXJhdGlvbj1lLG4ucGF0aENvbXB1dGF0aW9uPXIsbi5zdXBwb3J0ZWRFdmVudFR5cGVzPVtFci5NT1VTRURPV04sRXIuTU9VU0VVUCxFci5DTElDSyxFci5NT1VTRU9WRVIsRXIuVEFQXSxufXJldHVybiBVcihlLHQpLGUucHJvdG90eXBlLmlzRXZlbnRUeXBlU3VwcG9ydGVkPWZ1bmN0aW9uKHQpe3JldHVybi0xIT09Y3NBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMuc3VwcG9ydGVkRXZlbnRUeXBlcyx0KX0sZS5wcm90b3R5cGUuZW5oYW5jZUFuYWx5c2lzRXZlbnQ9ZnVuY3Rpb24odCxlKXtpZih0aGlzLnByb2plY3RDb25maWd1cmF0aW9uLmVNZXJjaGFuZGlzaW5nRW5hYmxlZCl7dmFyIHI9dGhpcy5wYXRoQ29tcHV0YXRpb24uZ2V0VGFyZ2V0UGF0aEFuZFRhcmdldExpbmsodCksbj1yLnBhdGgsaT1yLnRhcmdldExpbms7ZS50YXJnZXQ9bixlLnRhcmdldExpbms9aX1lbHNlIGUudGFyZ2V0PXRoaXMucGF0aENvbXB1dGF0aW9uLmdldFRhcmdldFBhdGgodCksZS50YXJnZXRMaW5rPSIiO3JldHVybiBlfSxlfShxciksanI9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPT10LnRhcmdldCYmdC50YXJnZXQuc2hhZG93Um9vdCYmdC5jb21wb3NlZFBhdGg/dC5fX2NzT3JpZ2luYWxUYXJnZXR8fHQuY29tcG9zZWRQYXRoKClbMF06dC50YXJnZXR9LHpyPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCksQnI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgcj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIucHJvamVjdENvbmZpZ3VyYXRpb249ZSxyLnN1cHBvcnRlZEV2ZW50VHlwZXM9W0VyLkNMSUNLLEVyLk1PVVNFRE9XTixFci5NT1VTRVVQLEVyLlRBUF0scn1yZXR1cm4genIoZSx0KSxlLnByb3RvdHlwZS5pc0V2ZW50VHlwZVN1cHBvcnRlZD1mdW5jdGlvbih0KXtyZXR1cm4tMSE9PWNzQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLnN1cHBvcnRlZEV2ZW50VHlwZXMsdCl9LGUucHJvdG90eXBlLmVuaGFuY2VBbmFseXNpc0V2ZW50PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5wcm9qZWN0Q29uZmlndXJhdGlvbi5hdXRvSW5zaWdodHNFbmFibGVkKXtlLmNsYXNzTmFtZT0iIixlLnR5cGVBdHRyaWJ1dGU9IiI7dmFyIHI9anIodCk7ciYmdShyKSYmKGUuY2xhc3NOYW1lPXIuY2xhc3NOYW1lLCh1KG49cikmJiJidXR0b24iPT09bi5sb2NhbE5hbWV8fGQocikpJiYoZS50eXBlQXR0cmlidXRlPXIudHlwZSkpfXZhciBuO3JldHVybiBlfSxlfShxciksSHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt2YXIgbj10aGlzO3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMucGF0aENvbXB1dGF0aW9uPWUsdGhpcy5nZXN0dXJlVHJhY2tlcj1yLHRoaXMuYW5hbHlzaXNFdmVudHNFbmhhbmNlcnM9W25ldyBWcih0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy5wYXRoQ29tcHV0YXRpb24pLG5ldyBCcih0aGlzLmNvbmZpZ3VyYXRpb24pXSx0aGlzLmdlc3R1cmVUcmFja2VyLm9uRXZlbnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4ub25UYXAodCxlKX0pKX1yZXR1cm4gdC5wcm90b3R5cGUub25UYXA9ZnVuY3Rpb24odCxlKXtpZih0LnR5cGU9PT1nci5UQVApe3ZhciByPXRoaXMuYnVpbGRBbmFseXNpc0V2ZW50KGUse3R5cGU6RXIuVEFQfSk7ci50YXJnZXQhPT1iLklOVkFMSURfRUxFTUVOVCYmdGhpcy5vbkV2ZW50Q2FsbGJhY2socil9fSx0LnByb3RvdHlwZS5vbkV2ZW50PWZ1bmN0aW9uKHQpe3RoaXMub25FdmVudENhbGxiYWNrPXR9LHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5nZXN0dXJlVHJhY2tlci5zdGFydCgpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5nZXN0dXJlVHJhY2tlci5zdG9wKCl9LHQucHJvdG90eXBlLmJ1aWxkQW5hbHlzaXNFdmVudD1mdW5jdGlvbih0LGUpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbChjc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0aGlzLmFuYWx5c2lzRXZlbnRzRW5oYW5jZXJzLChmdW5jdGlvbih0KXtyZXR1cm4gdC5pc0V2ZW50VHlwZVN1cHBvcnRlZChlLnR5cGUpfSkpLChmdW5jdGlvbihlLHIpe3JldHVybiByLmVuaGFuY2VBbmFseXNpc0V2ZW50KHQsZSl9KSxlKX0sdH0oKSxGcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmNvbXB1dGU9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLmNvbnZlcnRQaXhlbHNUb0RQcyhlLngpLXRoaXMuY29udmVydFBpeGVsc1RvRFBzKHQueCksbj10aGlzLmNvbnZlcnRQaXhlbHNUb0RQcyhlLnkpLXRoaXMuY29udmVydFBpeGVsc1RvRFBzKHQueSksaT1lLnRpbWUtdC50aW1lO3JldHVybntkdXJhdGlvbjppLGRpc3RhbmNlOnRoaXMuY29tcHV0ZUdlc3R1cmVEaXN0YW5jZShyLG4pLGRpcmVjdGlvbjp0aGlzLmNvbXB1dGVHZXN0dXJlRGlyZWN0aW9uKHIsbiksdmVsb2NpdHk6dGhpcy5jb21wdXRlR2VzdHVyZVZlbG9jaXR5KHIsbixpKX19LHQucHJvdG90eXBlLmNvbnZlcnRQaXhlbHNUb0RQcz1mdW5jdGlvbih0KXtyZXR1cm4gdC93aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb30sdC5wcm90b3R5cGUuY29tcHV0ZUdlc3R1cmVEaXN0YW5jZT1mdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLnJvdW5kKE1hdGguc3FydCh0KnQrZSplKSl9LHQucHJvdG90eXBlLmNvbXB1dGVHZXN0dXJlVmVsb2NpdHk9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIvMWUzLGk9dC9uLG89ZS9uO3JldHVybiBNYXRoLnJvdW5kKE1hdGguYWJzKGkpK01hdGguYWJzKG8pKX0sdC5wcm90b3R5cGUuY29tcHV0ZUdlc3R1cmVEaXJlY3Rpb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5hYnModCk+TWF0aC5hYnMoZSk/dD4wP1NyLlJJR0hUOlNyLkxFRlQ6ZT4wP1NyLkRPV046U3IuVVB9LHR9KCksR3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5tZXRyaWNzQ29tcHV0ZXI9bmV3IEZyLHRoaXMucmVzZXQoKX1yZXR1cm4gdC5wcm90b3R5cGUub25HZXN0dXJlPWZ1bmN0aW9uKHQpe3RoaXMub25HZXN0dXJlQ2FsbGJhY2s9dH0sdC5wcm90b3R5cGUuaXNWYWxpZFRvdWNoRXZlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuInRvdWNoZXMiaW4gdCYmImNoYW5nZWRUb3VjaGVzImluIHR9LHQucHJvdG90eXBlLnByb2Nlc3NBY3Rpb25Eb3duPWZ1bmN0aW9uKHQpe3RoaXMuaXNHZXN0dXJlU3RhcnQodCkmJnRoaXMucmVzZXQoKSxjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5wZW5kaW5nSW5wdXRzLHt4OnQudG91Y2hlc1swXS5wYWdlWCx5OnQudG91Y2hlc1swXS5wYWdlWSx0aW1lOmNzRGF0ZS5ub3coKX0pLHRoaXMudGFyZ2V0PWpyKHQpfSx0LnByb3RvdHlwZS5wcm9jZXNzQWN0aW9uTW92ZT1mdW5jdGlvbigpe3RoaXMuaGFzTW92ZT0hMH0sdC5wcm90b3R5cGUucHJvY2Vzc0FjdGlvblVwPWZ1bmN0aW9uKHQpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLnBlbmRpbmdJbnB1dHMse3g6dC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCx5OnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVksdGltZTpjc0RhdGUubm93KCl9KSx0aGlzLmlzVmFsaWRTaW5nbGVUb3VjaEdlc3R1cmUoKSYmdGhpcy5ydW5EZXRlY3Rpb24odCl9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5wZW5kaW5nSW5wdXRzPVtdLHRoaXMudGFyZ2V0PW51bGwsdGhpcy5oYXNNb3ZlPSExfSx0LnByb3RvdHlwZS5ydW5EZXRlY3Rpb249ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5tZXRyaWNzQ29tcHV0ZXIuY29tcHV0ZSh0aGlzLnBlbmRpbmdJbnB1dHNbMF0sdGhpcy5wZW5kaW5nSW5wdXRzWzFdKSxyPXRoaXMuaGFzTW92ZT90aGlzLmNvbXB1dGVTd2lwZUdlc3R1cmUoZSk6dGhpcy5jb21wdXRlUHJlc3NHZXN0dXJlKGUpO3RoaXMub25HZXN0dXJlQ2FsbGJhY2socix0KX0sdC5wcm90b3R5cGUuY29tcHV0ZVN3aXBlR2VzdHVyZT1mdW5jdGlvbih0KXtyZXR1cm57dHlwZTp0LnZlbG9jaXR5PDEwMD9nci5EUkFHOmdyLkZMSUNLLHRhcmdldDp0aGlzLnRhcmdldCx2ZWxvY2l0eTp0LnZlbG9jaXR5LGRpc3RhbmNlOnQuZGlzdGFuY2UsZGlyZWN0aW9uOnQuZGlyZWN0aW9ufX0sdC5wcm90b3R5cGUuY29tcHV0ZVByZXNzR2VzdHVyZT1mdW5jdGlvbih0KXtyZXR1cm57dHlwZTp0LmR1cmF0aW9uPDFlMz9nci5UQVA6Z3IuTE9OR19QUkVTUyx0YXJnZXQ6dGhpcy50YXJnZXR9fSx0LnByb3RvdHlwZS5pc0dlc3R1cmVTdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gMT09PXQudG91Y2hlcy5sZW5ndGh9LHQucHJvdG90eXBlLmlzVmFsaWRTaW5nbGVUb3VjaEdlc3R1cmU9ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXRoaXMucGVuZGluZ0lucHV0cy5sZW5ndGh9LHR9KCksV3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZhciBlPXRoaXM7dGhpcy5sb2dnZXI9dCx0aGlzLmV2ZW50SGFuZGxlcnM9W3tib3VuZEVsZW1lbnQ6ZG9jdW1lbnQsdHlwZToidG91Y2hzdGFydCIsbGlzdGVuZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGUucHJvY2Vzc0V2ZW50KHQpfX0se2JvdW5kRWxlbWVudDpkb2N1bWVudCx0eXBlOiJ0b3VjaG1vdmUiLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3JldHVybiBlLnByb2Nlc3NFdmVudCh0KX19LHtib3VuZEVsZW1lbnQ6ZG9jdW1lbnQsdHlwZToidG91Y2hlbmQiLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3JldHVybiBlLnByb2Nlc3NFdmVudCh0KX19XSx0aGlzLmRldGVjdG9yPW5ldyBHcn1yZXR1cm4gdC5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXt0aGlzLmRldGVjdG9yLm9uR2VzdHVyZSh0KX0sdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmNhbkRldGVjdEdlc3R1cmUoKSYmY3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuZXZlbnRIYW5kbGVycywoZnVuY3Rpb24odCl7cmV0dXJuIEZ0KHQpfSkpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5jYW5EZXRlY3RHZXN0dXJlKCkmJmNzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmV2ZW50SGFuZGxlcnMsKGZ1bmN0aW9uKHQpe3JldHVybiBHdCh0KX0pKX0sdC5wcm90b3R5cGUuY2FuRGV0ZWN0R2VzdHVyZT1mdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb30sdC5wcm90b3R5cGUucHJvY2Vzc0V2ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5sb2dnZXIudHJ5VG9FeGVjdXRlKCJwcm9jZXNzIGdlc3R1cmUgZXZlbnQiLChmdW5jdGlvbigpe2lmKGUuZGV0ZWN0b3IuaXNWYWxpZFRvdWNoRXZlbnQodCkpc3dpdGNoKHQudHlwZSl7Y2FzZSJ0b3VjaHN0YXJ0IjplLmRldGVjdG9yLnByb2Nlc3NBY3Rpb25Eb3duKHQpO2JyZWFrO2Nhc2UidG91Y2htb3ZlIjplLmRldGVjdG9yLnByb2Nlc3NBY3Rpb25Nb3ZlKCk7YnJlYWs7Y2FzZSJ0b3VjaGVuZCI6ZS5kZXRlY3Rvci5wcm9jZXNzQWN0aW9uVXAodCl9fSkpKCl9LHQuaXNTd2lwZT1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlPT09Z3IuRkxJQ0t8fHQudHlwZT09PWdyLkRSQUd9LHR9KCksWHI9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTAscj1hcmd1bWVudHMubGVuZ3RoO2U8cjtlKyspdCs9YXJndW1lbnRzW2VdLmxlbmd0aDt2YXIgbj1BcnJheSh0KSxpPTA7Zm9yKGU9MDtlPHI7ZSsrKWZvcih2YXIgbz1hcmd1bWVudHNbZV0scz0wLGE9by5sZW5ndGg7czxhO3MrKyxpKyspbltpXT1vW3NdO3JldHVybiBufTtmdW5jdGlvbiBKcih0LGUpe3ZhciByLG4saSxvLHM9ZnVuY3Rpb24oKXtuPW51bGw7dmFyIGU9RC5ub3coKS1pO289dC5hcHBseSh2b2lkIDAsWHIoW2VdLHIpKSxpPW51bGx9O3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKyl0W2FdPWFyZ3VtZW50c1thXTtyZXR1cm4gaXx8KGk9RC5ub3coKSksbiYmd2luZG93LmNsZWFyVGltZW91dChuKSxyPVhyKHQpLG49d2luZG93LnNldFRpbWVvdXQocyxlKSxvfX12YXIgWXIsS3I7KEtyPVlyfHwoWXI9e30pKS5pc0V2ZW50T25TY3JvbGxDb250YWluZXI9ZnVuY3Rpb24odCl7cmV0dXJuISEoRXQodCkmJmZ1bmN0aW9uKHQpe3RyeXtpZihFdCh0LnRhcmdldCkpcmV0dXJuITB9Y2F0Y2godCl7fXJldHVybiExfSh0KSYmQ3QodC50YXJnZXQpJiZudWxsIT09dC50YXJnZXQuZ2V0QXR0cmlidXRlKCJkYXRhLWNzLXNjcm9sbC1jb250YWluZXIiKSl9LEtyLmdldFNjcm9sbENvbnRhaW5lcj1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJbZGF0YS1jcy1zY3JvbGwtY29udGFpbmVyXSIpfTt2YXIgUXI7KFFyfHwoUXI9e30pKS5nZXRSZWxhdGl2ZVBvc2l0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPWpyKHQpO2lmKCEoZSYmQ3QoZSkmJnd0KGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSYmRXQodC5wYWdlWCkmJkV0KHQucGFnZVkpKSlyZXR1cm57eFJlbDotMSx5UmVsOi0xLHZhbGlkOiExfTt2YXIgcj1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG49dC5wYWdlWC1yLmxlZnQtZ2Uud2luZG93T2Zmc2V0WCgpLGk9dC5wYWdlWS1yLnRvcC1nZS53aW5kb3dPZmZzZXRZKCk7ZSE9PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmKG4rPWUuc2Nyb2xsTGVmdCxpKz1lLnNjcm9sbFRvcCk7dmFyIG89TWF0aC5tYXgoZS5zY3JvbGxXaWR0aCxyLndpZHRoKSxzPU1hdGgubWF4KGUuc2Nyb2xsSGVpZ2h0LHIuaGVpZ2h0KTtyZXR1cm57eFJlbDpNYXRoLnJvdW5kKG4vbyo2NTUzNSkseVJlbDpNYXRoLnJvdW5kKGkvcyo2NTUzNSksdmFsaWQ6ITB9fTt2YXIgWnI9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSwkcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscil7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLnByb2plY3RDb25maWd1cmF0aW9uPWUsbi5wYXRoQ29tcHV0YXRpb249cixuLnN1cHBvcnRlZEV2ZW50VHlwZXM9W0VyLk1PVVNFTU9WRV0sbi5jdXJyZW50TW91c2VNb3ZlUGF0aD0iIixufXJldHVybiBacihlLHQpLGUucHJvdG90eXBlLmlzRXZlbnRUeXBlU3VwcG9ydGVkPWZ1bmN0aW9uKHQpe3JldHVybi0xIT09Y3NBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMuc3VwcG9ydGVkRXZlbnRUeXBlcyx0KX0sZS5wcm90b3R5cGUuZW5oYW5jZUFuYWx5c2lzRXZlbnQ9ZnVuY3Rpb24odCxlKXtpZighdGhpcy5wcm9qZWN0Q29uZmlndXJhdGlvbi5tb3VzZU1vdmVIZWF0bWFwRW5hYmxlZClyZXR1cm4gZTt2YXIgcj1Rci5nZXRSZWxhdGl2ZVBvc2l0aW9uKHQpLG49ci52YWxpZCxpPXIueFJlbCxvPXIueVJlbDtpZihuKXt2YXIgcz10aGlzLnBhdGhDb21wdXRhdGlvbi5nZXRUYXJnZXRQYXRoKHQpO3MhPT1iLklOVkFMSURfRUxFTUVOVCYmKGUudGFyZ2V0PTAsZS54UmVsPWksZS55UmVsPW8scyE9PXRoaXMuY3VycmVudE1vdXNlTW92ZVBhdGh8fHRoaXMucHJvamVjdENvbmZpZ3VyYXRpb24uaWZyYW1lc1RyYWNraW5nPyh0aGlzLmN1cnJlbnRNb3VzZU1vdmVQYXRoPXMsZS50YXJnZXRIZWF0bWFwPXMpOmUudGFyZ2V0SGVhdG1hcD0iIil9ZWxzZSB0aGlzLmN1cnJlbnRNb3VzZU1vdmVQYXRoPSIiO3JldHVybiBlfSxlfShxciksdG49ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSxlbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLnZhbGlkSW5wdXRUeXBlcz1bInRleHQiLCJlbWFpbCIsIm51bWJlciIsInNlYXJjaCIsInRlbCIsInVybCIsInBhc3N3b3JkIl0sZX1yZXR1cm4gdG4oZSx0KSxlLnByb3RvdHlwZS5pc0V2ZW50VHlwZVN1cHBvcnRlZD1mdW5jdGlvbih0KXtyZXR1cm4gRXIuQ0hBTkdFPT09dH0sZS5wcm90b3R5cGUuZW5oYW5jZUFuYWx5c2lzRXZlbnQ9ZnVuY3Rpb24odCxlKXt2YXIgcj1qcih0KTtyZXR1cm4gZChyKSYmY3NBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMudmFsaWRJbnB1dFR5cGVzLHIudHlwZSk+PTAmJihlLmlzQmxhbms9IiI9PT1yLnZhbHVlKSxlfSxlfShxcikscm49ZnVuY3Rpb24odCxlLHIsbil7dmFyIGksbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP2U6bnVsbD09PW4/bj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUscik6bjtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZSh0LGUscixuKTtlbHNlIGZvcih2YXIgYT10Lmxlbmd0aC0xO2E+PTA7YS0tKShpPXRbYV0pJiYocz0obzwzP2kocyk6bz4zP2koZSxyLHMpOmkoZSxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIscyksc30sbm49ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTAscj1hcmd1bWVudHMubGVuZ3RoO2U8cjtlKyspdCs9YXJndW1lbnRzW2VdLmxlbmd0aDt2YXIgbj1BcnJheSh0KSxpPTA7Zm9yKGU9MDtlPHI7ZSsrKWZvcih2YXIgbz1hcmd1bWVudHNbZV0scz0wLGE9by5sZW5ndGg7czxhO3MrKyxpKyspbltpXT1vW3NdO3JldHVybiBufSxvbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3ZhciBuLGksbyxzLGEsYyx1LHA9dGhpczt0aGlzLnByb2plY3RDb25maWd1cmF0aW9uPXQsdGhpcy5wYXRoQ29tcHV0YXRpb249ZSx0aGlzLnNlbGVjdG9yPXIsdGhpcy5GT0NVU0FCTEVfRUxFTUVOVFNfU0VMRUNUT1I9InNlbGVjdCwgc2VsZWN0ICosIGlucHV0LCB0ZXh0YXJlYSIsdGhpcy5DSEFOR0VBQkxFX0VMRU1FTlRTX1NFTEVDVE9SPSJzZWxlY3QsIHNlbGVjdCAqLCBpbnB1dCwgdGV4dGFyZWEiLHRoaXMuSE9WRVJBQkxFX0VMRU1FTlRTX1NFTEVDVE9SPSJhLCBhICosIGJ1dHRvbiwgYnV0dG9uICosIHNlbGVjdCwgc2VsZWN0ICosIGlucHV0LCB0ZXh0YXJlYSIsdGhpcy5ERUJPVU5DRV9EVVJBVElPTj0xNTAsdGhpcy5USFJPVFRMRV9EVVJBVElPTj00MDAsdGhpcy5zY3JvbGxDb250YWluZXJEaW1lbnNpb25TZW50PSExLHRoaXMuZGVib3VuY2VkU2Nyb2xsRXZlbnRDYWxsYmFjaz1KcigoZnVuY3Rpb24odCxlKXtyZXR1cm4gcC5zY3JvbGxMaXN0ZW5lcih0LGUpfSksdGhpcy5ERUJPVU5DRV9EVVJBVElPTiksdGhpcy5kZWJvdW5jZWRSZXNpemVFdmVudENhbGxiYWNrPUpyKChmdW5jdGlvbih0KXtyZXR1cm4gcC5yZXNpemVMaXN0ZW5lcih0KX0pLHRoaXMuREVCT1VOQ0VfRFVSQVRJT04pLHRoaXMudGhyb3R0bGVkTW91c2VNb3ZlQ2FsbGJhY2s9KG49ZnVuY3Rpb24odCl7cmV0dXJuIHAubW91c2VNb3ZlTGlzdGVuZXIodCl9LGk9dGhpcy5USFJPVFRMRV9EVVJBVElPTixzPVtdLGE9bnVsbCxjPTAsdT1mdW5jdGlvbigpe2M9RC5ub3coKSxhPW51bGwsbz1uLmFwcGx5KHZvaWQgMCxzKX0sZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dmFyIHI9RC5ub3coKTtjfHwoYz1yKTt2YXIgcD1pLShyLWMpO3JldHVybiBzPW1yKHQpLHA8PTB8fHA+aT8oYz1yLG89bi5hcHBseSh2b2lkIDAscyksYT8od2luZG93LmNsZWFyVGltZW91dChhKSxhPW51bGwpOnM9W10pOmF8fChhPXdpbmRvdy5zZXRUaW1lb3V0KHUscCkpLG99KSx0aGlzLmdsb2JhbEhhbmRsZXJzPVt7Ym91bmRFbGVtZW50OndpbmRvdyx0eXBlOiJyZXNpemUiLGxpc3RlbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHAuZGVib3VuY2VkUmVzaXplRXZlbnRDYWxsYmFjaygpfX0se2JvdW5kRWxlbWVudDpkb2N1bWVudCx0eXBlOiJzY3JvbGwiLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3JldHVybiBwLmRlYm91bmNlZFNjcm9sbEV2ZW50Q2FsbGJhY2sodCl9fSx7Ym91bmRFbGVtZW50OndpbmRvdyx0eXBlOiJtb3VzZW1vdmUiLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3AudGhyb3R0bGVkTW91c2VNb3ZlQ2FsbGJhY2socC5wcmVzZXJ2ZUV2ZW50Rm9yQXN5bmNVc2UodCkpfX0se2JvdW5kRWxlbWVudDpkb2N1bWVudCx0eXBlOiJtb3VzZWRvd24iLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3JldHVybiBwLm1vdXNlRG93bkxpc3RlbmVyKHQpfX0se2JvdW5kRWxlbWVudDpkb2N1bWVudCx0eXBlOiJtb3VzZXVwIixsaXN0ZW5lcjpmdW5jdGlvbih0KXtyZXR1cm4gcC5tb3VzZVVwTGlzdGVuZXIodCl9fSx7Ym91bmRFbGVtZW50OmRvY3VtZW50LHR5cGU6ImNsaWNrIixsaXN0ZW5lcjpmdW5jdGlvbih0KXtyZXR1cm4gcC5jbGlja0xpc3RlbmVyKHQpfX1dLHRoaXMub25TZWxlY3RvckhhbmRsZXJzPVt7Ym91bmRFbGVtZW50OmRvY3VtZW50LHR5cGU6Im1vdXNlb3ZlciIsbGlzdGVuZXI6dGhpcy5zZWxlY3Rvci5vbih0aGlzLkhPVkVSQUJMRV9FTEVNRU5UU19TRUxFQ1RPUiwoZnVuY3Rpb24odCl7cmV0dXJuIHAubW91c2VPdmVyTGlzdGVuZXIodCl9KSl9LHtib3VuZEVsZW1lbnQ6ZG9jdW1lbnQsdHlwZToibW91c2VvdXQiLGxpc3RlbmVyOnRoaXMuc2VsZWN0b3Iub24odGhpcy5IT1ZFUkFCTEVfRUxFTUVOVFNfU0VMRUNUT1IsKGZ1bmN0aW9uKHQpe3JldHVybiBwLm1vdXNlT3V0TGlzdGVuZXIodCl9KSl9LHtib3VuZEVsZW1lbnQ6ZG9jdW1lbnQsdHlwZToiZm9jdXNpbiIsbGlzdGVuZXI6dGhpcy5zZWxlY3Rvci5vbih0aGlzLkZPQ1VTQUJMRV9FTEVNRU5UU19TRUxFQ1RPUiwoZnVuY3Rpb24odCl7cmV0dXJuIHAuZm9jdXNJbkxpc3RlbmVyKHQpfSkpfSx7Ym91bmRFbGVtZW50OmRvY3VtZW50LHR5cGU6ImZvY3Vzb3V0IixsaXN0ZW5lcjp0aGlzLnNlbGVjdG9yLm9uKHRoaXMuRk9DVVNBQkxFX0VMRU1FTlRTX1NFTEVDVE9SLChmdW5jdGlvbih0KXtyZXR1cm4gcC5mb2N1c091dExpc3RlbmVyKHQpfSkpfSx7Ym91bmRFbGVtZW50OmRvY3VtZW50LHR5cGU6ImNoYW5nZSIsbGlzdGVuZXI6dGhpcy5zZWxlY3Rvci5vbih0aGlzLkNIQU5HRUFCTEVfRUxFTUVOVFNfU0VMRUNUT1IsKGZ1bmN0aW9uKHQpe3JldHVybiBwLmNoYW5nZUxpc3RlbmVyKHQpfSkpfV0sdGhpcy5hbmFseXNpc0V2ZW50c0VuaGFuY2Vycz1bbmV3IFZyKHRoaXMucHJvamVjdENvbmZpZ3VyYXRpb24sdGhpcy5wYXRoQ29tcHV0YXRpb24pLG5ldyAkcih0aGlzLnByb2plY3RDb25maWd1cmF0aW9uLHRoaXMucGF0aENvbXB1dGF0aW9uKSxuZXcgQnIodGhpcy5wcm9qZWN0Q29uZmlndXJhdGlvbiksbmV3IGVuXX1yZXR1cm4gdC5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXt0aGlzLm9uRXZlbnRDYWxsYmFjaz10fSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0U3VwcG9ydGVkSGFuZGxlcnMoKTtjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodCwoZnVuY3Rpb24odCl7cmV0dXJuIEZ0KHQpfSkpLHRoaXMucmVzaXplTGlzdGVuZXIoKX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0U3VwcG9ydGVkSGFuZGxlcnMoKTtjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodCwoZnVuY3Rpb24odCl7cmV0dXJuIEd0KHQpfSkpfSx0LnByb3RvdHlwZS5nZXRTdXBwb3J0ZWRIYW5kbGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdG9yLmlzTWF0Y2hlc1NlbGVjdG9yU3VwcG9ydGVkKCk/bm4odGhpcy5nbG9iYWxIYW5kbGVycyx0aGlzLm9uU2VsZWN0b3JIYW5kbGVycyk6KGZ0Lndhcm4oIkVsZW1lbnQubWF0Y2hlcyBpcyBub3QgaW1wbGVtZW50ZWQgeWV0IiksdGhpcy5nbG9iYWxIYW5kbGVycyl9LHQucHJvdG90eXBlLnJlc2l6ZUxpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPVlyLmdldFNjcm9sbENvbnRhaW5lcigpLHI9Q3QoZSk7ciYmKHRoaXMuc2Nyb2xsQ29udGFpbmVyRGltZW5zaW9uU2VudD0hMCk7dmFyIG49e3R5cGU6RXIuUkVTSVpFLHg6cj9lLmNsaWVudFdpZHRoOmdlLndpbmRvd1dpZHRoKCkseTpyP2UuY2xpZW50SGVpZ2h0OmdlLndpbmRvd0hlaWdodCgpfTt0JiYobi50YXJnZXQ9dCksdGhpcy5vbkV2ZW50Q2FsbGJhY2sobil9LHQucHJvdG90eXBlLnNjcm9sbExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7dmFyIHI9WXIuaXNFdmVudE9uU2Nyb2xsQ29udGFpbmVyKGUpOyF0aGlzLnNjcm9sbENvbnRhaW5lckRpbWVuc2lvblNlbnQmJnImJnRoaXMucmVzaXplTGlzdGVuZXIoKTt2YXIgbj10aGlzLmJ1aWxkQW5hbHlzaXNFdmVudChlLHt0eXBlOkVyLlNDUk9MTCx4OnI/ZS50YXJnZXQuc2Nyb2xsTGVmdDpnZS53aW5kb3dPZmZzZXRYKCkseTpyP2UudGFyZ2V0LnNjcm9sbFRvcDpnZS53aW5kb3dPZmZzZXRZKCksdGFyZ2V0OnR9KTt0aGlzLm9uRXZlbnRDYWxsYmFjayhuKX0sdC5wcm90b3R5cGUubW91c2VNb3ZlTGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5idWlsZEFuYWx5c2lzRXZlbnQodCx7dHlwZTpFci5NT1VTRU1PVkUseDp0LnBhZ2VYLHk6dC5wYWdlWX0pO3RoaXMub25FdmVudENhbGxiYWNrKGUpfSx0LnByb3RvdHlwZS5tb3VzZURvd25MaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmJ1aWxkQW5hbHlzaXNFdmVudCh0LHt0eXBlOkVyLk1PVVNFRE9XTix4OnQucGFnZVgseTp0LnBhZ2VZfSk7dGhpcy5vbkV2ZW50Q2FsbGJhY2tJZlZhbGlkVGFyZ2V0KGUpfSx0LnByb3RvdHlwZS5tb3VzZVVwTGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5idWlsZEFuYWx5c2lzRXZlbnQodCx7dHlwZTpFci5NT1VTRVVQLHg6dC5wYWdlWCx5OnQucGFnZVl9KTt0aGlzLm9uRXZlbnRDYWxsYmFja0lmVmFsaWRUYXJnZXQoZSl9LHQucHJvdG90eXBlLmNsaWNrTGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5idWlsZEFuYWx5c2lzRXZlbnQodCx7dHlwZTpFci5DTElDSyx4OnQucGFnZVgseTp0LnBhZ2VZfSk7dGhpcy5vbkV2ZW50Q2FsbGJhY2tJZlZhbGlkVGFyZ2V0KGUpfSx0LnByb3RvdHlwZS5tb3VzZU92ZXJMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmJ1aWxkQW5hbHlzaXNFdmVudCh0LHt0eXBlOkVyLk1PVVNFT1ZFUix4OnQucGFnZVgseTp0LnBhZ2VZfSk7dGhpcy5vbkV2ZW50Q2FsbGJhY2tJZlZhbGlkVGFyZ2V0KGUpfSx0LnByb3RvdHlwZS5tb3VzZU91dExpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYnVpbGRBbmFseXNpc0V2ZW50KHQse3R5cGU6RXIuTU9VU0VPVVQseDp0LnBhZ2VYLHk6dC5wYWdlWSx0YXJnZXQ6dGhpcy5wYXRoQ29tcHV0YXRpb24uZ2V0VGFyZ2V0UGF0aCh0KX0pO3RoaXMub25FdmVudENhbGxiYWNrSWZWYWxpZFRhcmdldChlKX0sdC5wcm90b3R5cGUuZm9jdXNJbkxpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYnVpbGRBbmFseXNpc0V2ZW50KHQse3R5cGU6RXIuRk9DVVNJTix0YXJnZXQ6dGhpcy5wYXRoQ29tcHV0YXRpb24uZ2V0VGFyZ2V0UGF0aCh0KX0pO3RoaXMub25FdmVudENhbGxiYWNrSWZWYWxpZFRhcmdldChlKX0sdC5wcm90b3R5cGUuZm9jdXNPdXRMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmJ1aWxkQW5hbHlzaXNFdmVudCh0LHt0eXBlOkVyLkZPQ1VTT1VULHRhcmdldDp0aGlzLnBhdGhDb21wdXRhdGlvbi5nZXRUYXJnZXRQYXRoKHQpfSk7dGhpcy5vbkV2ZW50Q2FsbGJhY2tJZlZhbGlkVGFyZ2V0KGUpfSx0LnByb3RvdHlwZS5jaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmJ1aWxkQW5hbHlzaXNFdmVudCh0LHt0eXBlOkVyLkNIQU5HRSx0YXJnZXQ6dGhpcy5wYXRoQ29tcHV0YXRpb24uZ2V0VGFyZ2V0UGF0aCh0KX0pO3RoaXMub25FdmVudENhbGxiYWNrSWZWYWxpZFRhcmdldChlKX0sdC5wcm90b3R5cGUub25FdmVudENhbGxiYWNrSWZWYWxpZFRhcmdldD1mdW5jdGlvbih0KXt0LnRhcmdldCE9PWIuSU5WQUxJRF9FTEVNRU5UJiZ0aGlzLm9uRXZlbnRDYWxsYmFjayh0KX0sdC5wcm90b3R5cGUuYnVpbGRBbmFseXNpc0V2ZW50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKHRoaXMuYW5hbHlzaXNFdmVudHNFbmhhbmNlcnMsKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzRXZlbnRUeXBlU3VwcG9ydGVkKGUudHlwZSl9KSksKGZ1bmN0aW9uKGUscil7cmV0dXJuIHIuZW5oYW5jZUFuYWx5c2lzRXZlbnQodCxlKX0pLGUpfSx0LnByb3RvdHlwZS5wcmVzZXJ2ZUV2ZW50Rm9yQXN5bmNVc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29tcG9zZWRQYXRoJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19jc09yaWdpbmFsVGFyZ2V0Iix7dmFsdWU6dC5jb21wb3NlZFBhdGgoKVswXSx3cml0YWJsZTohMSxlbnVtZXJhYmxlOiExfSksdH0scm4oW2R0KCJFdmVudCBoYW5kbGVyIHR5cGU6IHJlc2l6ZSIpXSx0LnByb3RvdHlwZSwicmVzaXplTGlzdGVuZXIiLG51bGwpLHJuKFtkdCgiRXZlbnQgaGFuZGxlciB0eXBlOiBzY3JvbGwiKV0sdC5wcm90b3R5cGUsInNjcm9sbExpc3RlbmVyIixudWxsKSxybihbZHQoIkV2ZW50IGhhbmRsZXIgdHlwZTogbW91c2VNb3ZlIildLHQucHJvdG90eXBlLCJtb3VzZU1vdmVMaXN0ZW5lciIsbnVsbCkscm4oW2R0KCJFdmVudCBoYW5kbGVyIHR5cGU6IG1vdXNlRG93biIpXSx0LnByb3RvdHlwZSwibW91c2VEb3duTGlzdGVuZXIiLG51bGwpLHJuKFtkdCgiRXZlbnQgaGFuZGxlciB0eXBlOiBtb3VzZVVwIildLHQucHJvdG90eXBlLCJtb3VzZVVwTGlzdGVuZXIiLG51bGwpLHJuKFtkdCgiRXZlbnQgaGFuZGxlciB0eXBlOiBjbGljayIpXSx0LnByb3RvdHlwZSwiY2xpY2tMaXN0ZW5lciIsbnVsbCkscm4oW2R0KCJFdmVudCBoYW5kbGVyIHR5cGU6IG1vdXNlT3ZlciIpXSx0LnByb3RvdHlwZSwibW91c2VPdmVyTGlzdGVuZXIiLG51bGwpLHJuKFtkdCgiRXZlbnQgaGFuZGxlciB0eXBlOiBtb3VzZU91dCIpXSx0LnByb3RvdHlwZSwibW91c2VPdXRMaXN0ZW5lciIsbnVsbCkscm4oW2R0KCJFdmVudCBoYW5kbGVyIHR5cGU6IGZvY3VzSW4iKV0sdC5wcm90b3R5cGUsImZvY3VzSW5MaXN0ZW5lciIsbnVsbCkscm4oW2R0KCJFdmVudCBoYW5kbGVyIHR5cGU6IGZvY3VzT3V0IildLHQucHJvdG90eXBlLCJmb2N1c091dExpc3RlbmVyIixudWxsKSxybihbZHQoIkV2ZW50IGhhbmRsZXIgdHlwZTogY2hhbmdlIildLHQucHJvdG90eXBlLCJjaGFuZ2VMaXN0ZW5lciIsbnVsbCksdH0oKSxzbj1mdW5jdGlvbih0LGUscixuKXt2YXIgaSxvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09bj9uPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTpuO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLG4pO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKGk9dFthXSkmJihzPShvPDM/aShzKTpvPjM/aShlLHIscyk6aShlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSxhbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgdD10aGlzO3RoaXMuTUFYX1NDUk9MTF9SQVRFX1RIUkVTSE9MRD0xMDAsdGhpcy5tYXhTY3JvbGxSYXRlPTAsdGhpcy5tYXhEb2N1bWVudEhlaWdodD1nZS5kb2N1bWVudEhlaWdodCgpLHRoaXMubWF4U2Nyb2xsUmF0ZUhhbmRsZXI9e2JvdW5kRWxlbWVudDpkb2N1bWVudCx0eXBlOiJzY3JvbGwiLGxpc3RlbmVyOmZ1bmN0aW9uKGUpe3JldHVybiB0Lm1heFNjcm9sbFJhdGVMaXN0ZW5lcihlKX19fXJldHVybiB0LnByb3RvdHlwZS5vbkV2ZW50PWZ1bmN0aW9uKHQpe3RoaXMub25FdmVudENhbGxiYWNrPXR9LHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7RnQodGhpcy5tYXhTY3JvbGxSYXRlSGFuZGxlciksdGhpcy5yZXNldCgpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7R3QodGhpcy5tYXhTY3JvbGxSYXRlSGFuZGxlcil9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dmFyIHQ9WXIuZ2V0U2Nyb2xsQ29udGFpbmVyKCk7aWYobnVsbD09PXQpdGhpcy5tYXhTY3JvbGxSYXRlPXRoaXMuY3VycmVudFNjcm9sbFJhdGUoZ2UuZG9jdW1lbnRIZWlnaHQoKSk7ZWxzZXt2YXIgZT10aGlzLmNvbXB1dGVQYWRkaW5nVG9wKHQpO3RoaXMubWF4U2Nyb2xsUmF0ZT10aGlzLmN1cnJlbnRTY3JvbGxSYXRlV2l0aFNjcm9sbENvbnRhaW5lcih0LGUpfXRoaXMub25FdmVudENhbGxiYWNrKCl9LHQucHJvdG90eXBlLm1heFNjcm9sbFJhdGVMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZSxyO2lmKFlyLmlzRXZlbnRPblNjcm9sbENvbnRhaW5lcih0KSl7dmFyIG49dC50YXJnZXQsaT10aGlzLmNvbXB1dGVQYWRkaW5nVG9wKG4pO2U9dGhpcy5kb2N1bWVudEhlaWdodFdpdGhTY3JvbGxDb250YWluZXIobixpKSxyPXRoaXMuY3VycmVudFNjcm9sbFJhdGVXaXRoU2Nyb2xsQ29udGFpbmVyKG4saSl9ZWxzZSBlPWdlLmRvY3VtZW50SGVpZ2h0KCkscj10aGlzLmN1cnJlbnRTY3JvbGxSYXRlKGUpOyhyPnRoaXMubWF4U2Nyb2xsUmF0ZXx8ZT50aGlzLm1heERvY3VtZW50SGVpZ2h0KSYmKHRoaXMubWF4U2Nyb2xsUmF0ZT1yLGU+dGhpcy5tYXhEb2N1bWVudEhlaWdodCYmKHRoaXMubWF4RG9jdW1lbnRIZWlnaHQ9ZSksdGhpcy5vbkV2ZW50Q2FsbGJhY2soKSl9LHQucHJvdG90eXBlLmN1cnJlbnRTY3JvbGxSYXRlPWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgucm91bmQodGhpcy5sYXN0UGl4ZWxMaW5lKCkvdCoxMDApO3JldHVybiBNYXRoLm1pbihlLHRoaXMuTUFYX1NDUk9MTF9SQVRFX1RIUkVTSE9MRCl9LHQucHJvdG90eXBlLmxhc3RQaXhlbExpbmU9ZnVuY3Rpb24oKXt2YXIgdD1nZS53aW5kb3dIZWlnaHQoKTtyZXR1cm4gZ2Uud2luZG93T2Zmc2V0WSgpK3R9LHQucHJvdG90eXBlLmN1cnJlbnRTY3JvbGxSYXRlV2l0aFNjcm9sbENvbnRhaW5lcj1mdW5jdGlvbih0LGUpe3ZhciByPXQuc2Nyb2xsVG9wK3QuY2xpZW50SGVpZ2h0K3QuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wK2Usbj10aGlzLmRvY3VtZW50SGVpZ2h0V2l0aFNjcm9sbENvbnRhaW5lcih0LGUpLGk9TWF0aC5yb3VuZChyL24qMTAwKTtyZXR1cm4gTWF0aC5taW4oaSx0aGlzLk1BWF9TQ1JPTExfUkFURV9USFJFU0hPTEQpfSx0LnByb3RvdHlwZS5jb21wdXRlUGFkZGluZ1RvcD1mdW5jdGlvbih0KXt2YXIgZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS5wYWRkaW5nVG9wfHwiMHB4IjtyZXR1cm4gcGFyc2VJbnQoZSwxMCl9LHQucHJvdG90eXBlLmRvY3VtZW50SGVpZ2h0V2l0aFNjcm9sbENvbnRhaW5lcj1mdW5jdGlvbih0LGUpe3JldHVybiB0LnNjcm9sbEhlaWdodCt0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCtlfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybntzcjoiIit0aGlzLm1heFNjcm9sbFJhdGUsbWRoOiIiK3RoaXMubWF4RG9jdW1lbnRIZWlnaHR9fSxzbihbZHQoIk1heFNjcm9sbFJhdGUgaGFuZGxlciIpXSx0LnByb3RvdHlwZSwibWF4U2Nyb2xsUmF0ZUxpc3RlbmVyIixudWxsKSx0fSgpLGNuPWZ1bmN0aW9uKCl7cmV0dXJuKGNuPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyPTEsbj1hcmd1bWVudHMubGVuZ3RoO3I8bjtyKyspZm9yKHZhciBpIGluIGU9YXJndW1lbnRzW3JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiYodFtpXT1lW2ldKTtyZXR1cm4gdH0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdW49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyLG4saSxvLHMsYSxjLHUscCl7dmFyIGw9dGhpczt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLmFuYWx5c2lzRXZlbnRzVHJhY2tlcj1lLHRoaXMuZ2VzdHVyZVRyYWNrZXI9cix0aGlzLm1heFNjcm9sbFJhdGVUcmFja2VyPW4sdGhpcy5wZXJmb3JtYW5jZVRpbWluZ01ldHJpY3M9aSx0aGlzLmFuYWx5c2lzRXZlbnRzQmF0Y2g9byx0aGlzLmFuYWx5c2lzRXZlbnRzUmVxdWVzdD1zLHRoaXMuYW5hbHlzaXNMYXN0RXZlbnRzUmVxdWVzdD1hLHRoaXMuYW5hbHlzaXNFdmVudFJlcXVlc3RQYXJhbWV0ZXJzPWMsdGhpcy5zZXNzaW9uUmVuZXdlcj11LHRoaXMucmVjb3ZlcnlTdG9yYWdlPXAsdGhpcy5ldmVudEVtaXR0ZXI9bmV3IGVlLHRoaXMudmlzaWJpbGl0eUNoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKCl7ImhpZGRlbiI9PT1kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUmJmwuc2VuZExhc3RFdmVudHMoKX0sdGhpcy5zZW5kTGFzdEV2ZW50cz1mdW5jdGlvbigpe2wuYW5hbHlzaXNFdmVudHNCYXRjaC5pc0VtcHR5KCl8fGwuYW5hbHlzaXNMYXN0RXZlbnRzUmVxdWVzdC5zZW5kKCl9fXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmFuYWx5c2lzRXZlbnRzVHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9jZXNzRXZlbnQoZSl9KSksdGhpcy5nZXN0dXJlVHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9jZXNzRXZlbnQoZSl9KSksdGhpcy5tYXhTY3JvbGxSYXRlVHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbigpe3QuYW5hbHlzaXNFdmVudHNCYXRjaC5zZXRSZXF1ZXN0UGFyYW1ldGVyc0Zyb21Qcm92aWRlcih0Lm1heFNjcm9sbFJhdGVUcmFja2VyKX0pKSx0aGlzLmJpbmRSZXF1ZXN0cygpfSx0LnByb3RvdHlwZS5iaW5kUmVxdWVzdHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuYW5hbHlzaXNFdmVudHNSZXF1ZXN0LnNldFJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzKHRoaXMuYW5hbHlzaXNFdmVudHNCYXRjaCksdGhpcy5hbmFseXNpc0V2ZW50c1JlcXVlc3QuYmVmb3JlKChmdW5jdGlvbigpe3QuYW5hbHlzaXNFdmVudHNCYXRjaC5zZXRSZXF1ZXN0UGFyYW1ldGVyc0Zyb21Qcm92aWRlcih0LnBlcmZvcm1hbmNlVGltaW5nTWV0cmljcyksdC5hbmFseXNpc0V2ZW50c0JhdGNoLmVuYWJsZUNvbXByZXNzaW9uKCl9KSksdGhpcy5hbmFseXNpc0V2ZW50c1JlcXVlc3QuYWZ0ZXIoKGZ1bmN0aW9uKCl7dC5hbmFseXNpc0V2ZW50c0JhdGNoLmNsZWFyRXZlbnRzKCksdC5hbmFseXNpc0V2ZW50c0JhdGNoLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyKHQuYW5hbHlzaXNFdmVudFJlcXVlc3RQYXJhbWV0ZXJzKX0pKSx0aGlzLmFuYWx5c2lzTGFzdEV2ZW50c1JlcXVlc3Quc2V0UmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnModGhpcy5hbmFseXNpc0V2ZW50c0JhdGNoKSx0aGlzLmFuYWx5c2lzTGFzdEV2ZW50c1JlcXVlc3QuYmVmb3JlKChmdW5jdGlvbigpe3QuYW5hbHlzaXNFdmVudHNCYXRjaC5zZXRSZXF1ZXN0UGFyYW1ldGVyc0Zyb21Qcm92aWRlcih0LnBlcmZvcm1hbmNlVGltaW5nTWV0cmljcyksdC5hbmFseXNpc0V2ZW50c0JhdGNoLmRpc2FibGVDb21wcmVzc2lvbigpfSkpLHRoaXMuYW5hbHlzaXNMYXN0RXZlbnRzUmVxdWVzdC5vbkJlYWNvblN1Y2Nlc3MoKGZ1bmN0aW9uKCl7dC5hbmFseXNpc0V2ZW50c0JhdGNoLmNsZWFyRXZlbnRzKCksdC5hbmFseXNpc0V2ZW50c0JhdGNoLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyKHQuYW5hbHlzaXNFdmVudFJlcXVlc3RQYXJhbWV0ZXJzKX0pKSx0aGlzLmFuYWx5c2lzTGFzdEV2ZW50c1JlcXVlc3Qub25CZWFjb25GYWlsdXJlKChmdW5jdGlvbigpe3Quc2F2ZUxhc3RFdmVudHMoKX0pKX0sdC5wcm90b3R5cGUuaW5pdFN0YXRlcz1mdW5jdGlvbigpe3RoaXMuYW5hbHlzaXNFdmVudHNCYXRjaC5zZXRSZXF1ZXN0UGFyYW1ldGVyc0Zyb21Qcm92aWRlcih0aGlzLmFuYWx5c2lzRXZlbnRSZXF1ZXN0UGFyYW1ldGVycyksdGhpcy5yZXNldFN0YXJ0VGltZSgpfSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuYWRkTGFzdEV2ZW50c0xpc3RlbmVycygpLHRoaXMuYW5hbHlzaXNFdmVudHNUcmFja2VyLnN0YXJ0KCksdGhpcy5tYXhTY3JvbGxSYXRlVHJhY2tlci5zdGFydCgpLHRoaXMuZ2VzdHVyZVRyYWNrZXIuc3RhcnQoKX0sdC5wcm90b3R5cGUub25JZnJhbWVBbmFseXNpc0V2ZW50PWZ1bmN0aW9uKHQpe3RoaXMucHJvY2Vzc0V2ZW50KHQpfSx0LnByb3RvdHlwZS5wcm9jZXNzRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5zZXNzaW9uUmVuZXdlci5pc1Nlc3Npb25WYWxpZCgpJiYodGhpcy5hbmFseXNpc0V2ZW50c0JhdGNoLmFkZEV2ZW50KHRoaXMuc2VyaWFsaXplQW5hbHlzaXNFdmVudCh0KSksdGhpcy5hbmFseXNpc0V2ZW50c0JhdGNoLmlzRnVsbCgpJiZ0aGlzLnNlbmRFdmVudHMoKSx0aGlzLmNvbmZpZ3VyYXRpb24uZW1pdERlYnVnRXZlbnRzJiZ0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCJhbmFseXNpc0V2ZW50Iixjbihjbih7fSx0KSx7dHlwZU5hbWU6RXJbdC50eXBlXX0pKSl9LHQucHJvdG90eXBlLnNlcmlhbGl6ZUFuYWx5c2lzRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9W3QudHlwZSx0aGlzLmdldFJlbGF0aXZlVGltZSgpXTtyZXR1cm4ieCJpbiB0JiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSx0LngpLCJ5ImluIHQmJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChlLHQueSksInRhcmdldCJpbiB0JiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSx0LnRhcmdldCksImlzQmxhbmsiaW4gdCYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKGUsdC5pc0JsYW5rKSx0aGlzLmNvbmZpZ3VyYXRpb24ubW91c2VNb3ZlSGVhdG1hcEVuYWJsZWQmJigidGFyZ2V0SGVhdG1hcCJpbiB0JiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSx0LnRhcmdldEhlYXRtYXApLCJ4UmVsImluIHQmJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChlLHQueFJlbCksInlSZWwiaW4gdCYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKGUsdC55UmVsKSksInRhcmdldExpbmsiaW4gdCYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKGUsdC50YXJnZXRMaW5rKSwiY2xhc3NOYW1lImluIHQmJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChlLHQuY2xhc3NOYW1lKSwidHlwZUF0dHJpYnV0ZSJpbiB0JiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSx0LnR5cGVBdHRyaWJ1dGUpLGV9LHQucHJvdG90eXBlLnNlbmRFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLmFuYWx5c2lzRXZlbnRzQmF0Y2guaXNFbXB0eSgpfHx0aGlzLmFuYWx5c2lzRXZlbnRzUmVxdWVzdC5zZW5kKCl9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUxhc3RFdmVudHNMaXN0ZW5lcnMoKSx0aGlzLmFuYWx5c2lzRXZlbnRzVHJhY2tlci5zdG9wKCksdGhpcy5tYXhTY3JvbGxSYXRlVHJhY2tlci5zdG9wKCksdGhpcy5nZXN0dXJlVHJhY2tlci5zdG9wKCksdGhpcy5hbmFseXNpc0V2ZW50c0JhdGNoLmVtcHR5KCl9LHQucHJvdG90eXBlLmNsZWFyU3RhdGVzPWZ1bmN0aW9uKCl7dGhpcy5zZW5kRXZlbnRzKCksdGhpcy5tYXhTY3JvbGxSYXRlVHJhY2tlci5yZXNldCgpfSx0LnByb3RvdHlwZS5yZXNldFN0YXJ0VGltZT1mdW5jdGlvbigpe3RoaXMuc3RhcnRUaW1lPUQubm93KCl9LHQucHJvdG90eXBlLmdldFJlbGF0aXZlVGltZT1mdW5jdGlvbigpe3JldHVybiBELm5vdygpLXRoaXMuc3RhcnRUaW1lfSx0LnByb3RvdHlwZS5hZGRMYXN0RXZlbnRzTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dGhpcy5hZGRWaXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXIoKSx0aGlzLmFkZFBhZ2VIaWRlTGlzdGVuZXIoKSx0aGlzLmFkZEJsdXJMaXN0ZW5lcigpfSx0LnByb3RvdHlwZS5yZW1vdmVMYXN0RXZlbnRzTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVWaXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXIoKSx0aGlzLnJlbW92ZVBhZ2VIaWRlTGlzdGVuZXIoKSx0aGlzLnJlbW92ZUJsdXJMaXN0ZW5lcigpfSx0LnByb3RvdHlwZS5hZGRWaXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXI9ZnVuY3Rpb24oKXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJ2aXNpYmlsaXR5Y2hhbmdlIix0aGlzLnZpc2liaWxpdHlDaGFuZ2VMaXN0ZW5lcil9LHQucHJvdG90eXBlLnJlbW92ZVZpc2liaWxpdHlDaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbigpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInZpc2liaWxpdHljaGFuZ2UiLHRoaXMudmlzaWJpbGl0eUNoYW5nZUxpc3RlbmVyKX0sdC5wcm90b3R5cGUuYWRkUGFnZUhpZGVMaXN0ZW5lcj1mdW5jdGlvbigpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJwYWdlaGlkZSIsdGhpcy5zZW5kTGFzdEV2ZW50cyl9LHQucHJvdG90eXBlLnJlbW92ZVBhZ2VIaWRlTGlzdGVuZXI9ZnVuY3Rpb24oKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicGFnZWhpZGUiLHRoaXMuc2VuZExhc3RFdmVudHMpfSx0LnByb3RvdHlwZS5hZGRCbHVyTGlzdGVuZXI9ZnVuY3Rpb24oKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsdGhpcy5zZW5kTGFzdEV2ZW50cyl9LHQucHJvdG90eXBlLnJlbW92ZUJsdXJMaXN0ZW5lcj1mdW5jdGlvbigpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLnNlbmRMYXN0RXZlbnRzKX0sdC5wcm90b3R5cGUuc2F2ZUxhc3RFdmVudHM9ZnVuY3Rpb24oKXt0cnl7dGhpcy5hbmFseXNpc0V2ZW50c0JhdGNoLmlzRW1wdHkoKXx8dGhpcy5yZWNvdmVyeVN0b3JhZ2Uuc2F2ZSh7ZXZlbnRzOnRoaXMuYW5hbHlzaXNFdmVudHNCYXRjaC5nZXRFdmVudHMoKSxtZXRhZGF0YTp0aGlzLmFuYWx5c2lzRXZlbnRzQmF0Y2guZ2V0TWV0YWRhdGEoKX0pfWNhdGNoKHQpe319LHR9KCkscG49aG4udG9TdHJpbmcoKSxsbj1obigpO2Z1bmN0aW9uIGhuKCl7dmFyIHQ9e19rZXlTdHI6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89IixfZjpTdHJpbmcuZnJvbUNoYXJDb2RlLGNvbXByZXNzVG9CYXNlNjQ6ZnVuY3Rpb24oZSl7aWYobnVsbD09ZSlyZXR1cm4iIjt2YXIgcixuLGksbyxzLGEsYyx1PSIiLHA9MDtmb3IoZT10LmNvbXByZXNzKGUpO3A8MiplLmxlbmd0aDspcCUyPT0wPyhyPWUuY2hhckNvZGVBdChwLzIpPj44LG49MjU1JmUuY2hhckNvZGVBdChwLzIpLGk9cC8yKzE8ZS5sZW5ndGg/ZS5jaGFyQ29kZUF0KHAvMisxKT4+ODpOYU4pOihyPTI1NSZlLmNoYXJDb2RlQXQoKHAtMSkvMiksKHArMSkvMjxlLmxlbmd0aD8obj1lLmNoYXJDb2RlQXQoKHArMSkvMik+PjgsaT0yNTUmZS5jaGFyQ29kZUF0KChwKzEpLzIpKTpuPWk9TmFOKSxwKz0zLG89cj4+MixzPSgzJnIpPDw0fG4+PjQsYT0oMTUmbik8PDJ8aT4+NixjPTYzJmksaXNOYU4obik/YT1jPTY0OmlzTmFOKGkpJiYoYz02NCksdT11K3QuX2tleVN0ci5jaGFyQXQobykrdC5fa2V5U3RyLmNoYXJBdChzKSt0Ll9rZXlTdHIuY2hhckF0KGEpK3QuX2tleVN0ci5jaGFyQXQoYyk7cmV0dXJuIHV9LGRlY29tcHJlc3NGcm9tQmFzZTY0OmZ1bmN0aW9uKGUpe2lmKG51bGw9PWUpcmV0dXJuIiI7dmFyIHIsbixpLG8scyxhLGMsdT0iIixwPTAsbD0wLGg9dC5fZjtmb3IoZT1lLnJlcGxhY2UoL1teQS1aYS16MC05XCtcL1w9XS9nLCIiKTtsPGUubGVuZ3RoOyluPXQuX2tleVN0ci5pbmRleE9mKGUuY2hhckF0KGwrKykpPDwyfChzPXQuX2tleVN0ci5pbmRleE9mKGUuY2hhckF0KGwrKykpKT4+NCxpPSgxNSZzKTw8NHwoYT10Ll9rZXlTdHIuaW5kZXhPZihlLmNoYXJBdChsKyspKSk+PjIsbz0oMyZhKTw8NnwoYz10Ll9rZXlTdHIuaW5kZXhPZihlLmNoYXJBdChsKyspKSkscCUyPT0wPyhyPW48PDgsNjQhPWEmJih1Kz1oKHJ8aSkpLDY0IT1jJiYocj1vPDw4KSk6KHUrPWgocnxuKSw2NCE9YSYmKHI9aTw8OCksNjQhPWMmJih1Kz1oKHJ8bykpKSxwKz0zO3JldHVybiB0LmRlY29tcHJlc3ModSl9LGNvbXByZXNzVG9VVEYxNjpmdW5jdGlvbihlKXtpZihudWxsPT1lKXJldHVybiIiO3ZhciByLG4saSxvPSIiLHM9MCxhPXQuX2Y7Zm9yKGU9dC5jb21wcmVzcyhlKSxyPTA7cjxlLmxlbmd0aDtyKyspc3dpdGNoKG49ZS5jaGFyQ29kZUF0KHIpLHMrKyl7Y2FzZSAwOm8rPWEoMzIrKG4+PjEpKSxpPSgxJm4pPDwxNDticmVhaztjYXNlIDE6bys9YShpKyhuPj4yKSszMiksaT0oMyZuKTw8MTM7YnJlYWs7Y2FzZSAyOm8rPWEoaSsobj4+MykrMzIpLGk9KDcmbik8PDEyO2JyZWFrO2Nhc2UgMzpvKz1hKGkrKG4+PjQpKzMyKSxpPSgxNSZuKTw8MTE7YnJlYWs7Y2FzZSA0Om8rPWEoaSsobj4+NSkrMzIpLGk9KDMxJm4pPDwxMDticmVhaztjYXNlIDU6bys9YShpKyhuPj42KSszMiksaT0oNjMmbik8PDk7YnJlYWs7Y2FzZSA2Om8rPWEoaSsobj4+NykrMzIpLGk9KDEyNyZuKTw8ODticmVhaztjYXNlIDc6bys9YShpKyhuPj44KSszMiksaT0oMjU1Jm4pPDw3O2JyZWFrO2Nhc2UgODpvKz1hKGkrKG4+PjkpKzMyKSxpPSg1MTEmbik8PDY7YnJlYWs7Y2FzZSA5Om8rPWEoaSsobj4+MTApKzMyKSxpPSgxMDIzJm4pPDw1O2JyZWFrO2Nhc2UgMTA6bys9YShpKyhuPj4xMSkrMzIpLGk9KDIwNDcmbik8PDQ7YnJlYWs7Y2FzZSAxMTpvKz1hKGkrKG4+PjEyKSszMiksaT0oNDA5NSZuKTw8MzticmVhaztjYXNlIDEyOm8rPWEoaSsobj4+MTMpKzMyKSxpPSg4MTkxJm4pPDwyO2JyZWFrO2Nhc2UgMTM6bys9YShpKyhuPj4xNCkrMzIpLGk9KDE2MzgzJm4pPDwxO2JyZWFrO2Nhc2UgMTQ6bys9YShpKyhuPj4xNSkrMzIsMzIrKDMyNzY3Jm4pKSxzPTB9cmV0dXJuIG8rYShpKzMyKX0sZGVjb21wcmVzc0Zyb21VVEYxNjpmdW5jdGlvbihlKXtpZihudWxsPT1lKXJldHVybiIiO2Zvcih2YXIgcixuLGk9IiIsbz0wLHM9MCxhPXQuX2Y7czxlLmxlbmd0aDspe3N3aXRjaChuPWUuY2hhckNvZGVBdChzKS0zMixvKyspe2Nhc2UgMDpyPW48PDE7YnJlYWs7Y2FzZSAxOmkrPWEocnxuPj4xNCkscj0oMTYzODMmbik8PDI7YnJlYWs7Y2FzZSAyOmkrPWEocnxuPj4xMykscj0oODE5MSZuKTw8MzticmVhaztjYXNlIDM6aSs9YShyfG4+PjEyKSxyPSg0MDk1Jm4pPDw0O2JyZWFrO2Nhc2UgNDppKz1hKHJ8bj4+MTEpLHI9KDIwNDcmbik8PDU7YnJlYWs7Y2FzZSA1OmkrPWEocnxuPj4xMCkscj0oMTAyMyZuKTw8NjticmVhaztjYXNlIDY6aSs9YShyfG4+PjkpLHI9KDUxMSZuKTw8NzticmVhaztjYXNlIDc6aSs9YShyfG4+PjgpLHI9KDI1NSZuKTw8ODticmVhaztjYXNlIDg6aSs9YShyfG4+PjcpLHI9KDEyNyZuKTw8OTticmVhaztjYXNlIDk6aSs9YShyfG4+PjYpLHI9KDYzJm4pPDwxMDticmVhaztjYXNlIDEwOmkrPWEocnxuPj41KSxyPSgzMSZuKTw8MTE7YnJlYWs7Y2FzZSAxMTppKz1hKHJ8bj4+NCkscj0oMTUmbik8PDEyO2JyZWFrO2Nhc2UgMTI6aSs9YShyfG4+PjMpLHI9KDcmbik8PDEzO2JyZWFrO2Nhc2UgMTM6aSs9YShyfG4+PjIpLHI9KDMmbik8PDE0O2JyZWFrO2Nhc2UgMTQ6aSs9YShyfG4+PjEpLHI9KDEmbik8PDE1O2JyZWFrO2Nhc2UgMTU6aSs9YShyfG4pLG89MH1zKyt9cmV0dXJuIHQuZGVjb21wcmVzcyhpKX0sY29tcHJlc3NUb1VpbnQ4QXJyYXk6ZnVuY3Rpb24oZSl7Zm9yKHZhciByPXQuY29tcHJlc3MoZSksbj1uZXcgVWludDhBcnJheSgyKnIubGVuZ3RoKSxpPTAsbz1yLmxlbmd0aDtpPG87aSsrKXt2YXIgcz1yLmNoYXJDb2RlQXQoaSk7blsyKmldPXM+Pj44LG5bMippKzFdPXMlMjU2fXJldHVybiBufSxkZWNvbXByZXNzRnJvbVVpbnQ4QXJyYXk6ZnVuY3Rpb24oZSl7aWYobnVsbD09ZSlyZXR1cm4gdC5kZWNvbXByZXNzKGUpO2Zvcih2YXIgcj1uZXcgQXJyYXkoZS5sZW5ndGgvMiksbj0wLGk9ci5sZW5ndGg7bjxpO24rKylyW25dPTI1NiplWzIqbl0rZVsyKm4rMV07cmV0dXJuIHQuZGVjb21wcmVzcyhTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwscikpfSxjb21wcmVzc1RvRW5jb2RlZFVSSUNvbXBvbmVudDpmdW5jdGlvbihlKXtyZXR1cm4gdC5jb21wcmVzc1RvQmFzZTY0KGUpLnJlcGxhY2UoIj0iLCIkIikucmVwbGFjZSgiLyIsIi0iKX0sZGVjb21wcmVzc0Zyb21FbmNvZGVkVVJJQ29tcG9uZW50OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYoZT1lLnJlcGxhY2UoIiQiLCI9IikucmVwbGFjZSgiLSIsIi8iKSksdC5kZWNvbXByZXNzRnJvbUJhc2U2NChlKX0sY29tcHJlc3M6ZnVuY3Rpb24oZSl7aWYobnVsbD09ZSlyZXR1cm4iIjt2YXIgcixuLGksbz17fSxzPXt9LGE9IiIsYz0iIix1PSIiLHA9MixsPTMsaD0yLGY9IiIsZD0wLHk9MCx2PXQuX2Y7Zm9yKGk9MDtpPGUubGVuZ3RoO2krPTEpaWYoYT1lLmNoYXJBdChpKSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobyxhKXx8KG9bYV09bCsrLHNbYV09ITApLGM9dSthLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLGMpKXU9YztlbHNle2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLHUpKXtpZih1LmNoYXJDb2RlQXQoMCk8MjU2KXtmb3Iocj0wO3I8aDtyKyspZDw8PTEsMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrO2ZvcihuPXUuY2hhckNvZGVBdCgwKSxyPTA7cjw4O3IrKylkPWQ8PDF8MSZuLDE1PT15Pyh5PTAsZis9dihkKSxkPTApOnkrKyxuPj49MX1lbHNle2ZvcihuPTEscj0wO3I8aDtyKyspZD1kPDwxfG4sMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrLG49MDtmb3Iobj11LmNoYXJDb2RlQXQoMCkscj0wO3I8MTY7cisrKWQ9ZDw8MXwxJm4sMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrLG4+Pj0xfTA9PS0tcCYmKHA9TWF0aC5wb3coMixoKSxoKyspLGRlbGV0ZSBzW3VdfWVsc2UgZm9yKG49b1t1XSxyPTA7cjxoO3IrKylkPWQ8PDF8MSZuLDE1PT15Pyh5PTAsZis9dihkKSxkPTApOnkrKyxuPj49MTswPT0tLXAmJihwPU1hdGgucG93KDIsaCksaCsrKSxvW2NdPWwrKyx1PVN0cmluZyhhKX1pZigiIiE9PXUpe2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLHUpKXtpZih1LmNoYXJDb2RlQXQoMCk8MjU2KXtmb3Iocj0wO3I8aDtyKyspZDw8PTEsMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrO2ZvcihuPXUuY2hhckNvZGVBdCgwKSxyPTA7cjw4O3IrKylkPWQ8PDF8MSZuLDE1PT15Pyh5PTAsZis9dihkKSxkPTApOnkrKyxuPj49MX1lbHNle2ZvcihuPTEscj0wO3I8aDtyKyspZD1kPDwxfG4sMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrLG49MDtmb3Iobj11LmNoYXJDb2RlQXQoMCkscj0wO3I8MTY7cisrKWQ9ZDw8MXwxJm4sMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrLG4+Pj0xfTA9PS0tcCYmKHA9TWF0aC5wb3coMixoKSxoKyspLGRlbGV0ZSBzW3VdfWVsc2UgZm9yKG49b1t1XSxyPTA7cjxoO3IrKylkPWQ8PDF8MSZuLDE1PT15Pyh5PTAsZis9dihkKSxkPTApOnkrKyxuPj49MTswPT0tLXAmJihwPU1hdGgucG93KDIsaCksaCsrKX1mb3Iobj0yLHI9MDtyPGg7cisrKWQ9ZDw8MXwxJm4sMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrLG4+Pj0xO2Zvcig7Oyl7aWYoZDw8PTEsMTU9PXkpe2YrPXYoZCk7YnJlYWt9eSsrfXJldHVybiBmfSxkZWNvbXByZXNzOmZ1bmN0aW9uKGUpe2lmKG51bGw9PWUpcmV0dXJuIiI7aWYoIiI9PWUpcmV0dXJuIG51bGw7dmFyIHIsbixpLG8scyxhLGMsdT1bXSxwPTQsbD00LGg9MyxmPSIiLGQ9IiIseT10Ll9mLHY9e3N0cmluZzplLHZhbDplLmNoYXJDb2RlQXQoMCkscG9zaXRpb246MzI3NjgsaW5kZXg6MX07Zm9yKHI9MDtyPDM7cis9MSl1W3JdPXI7Zm9yKGk9MCxzPU1hdGgucG93KDIsMiksYT0xO2EhPXM7KW89di52YWwmdi5wb3NpdGlvbix2LnBvc2l0aW9uPj49MSwwPT12LnBvc2l0aW9uJiYodi5wb3NpdGlvbj0zMjc2OCx2LnZhbD12LnN0cmluZy5jaGFyQ29kZUF0KHYuaW5kZXgrKykpLGl8PShvPjA/MTowKSphLGE8PD0xO3N3aXRjaChpKXtjYXNlIDA6Zm9yKGk9MCxzPU1hdGgucG93KDIsOCksYT0xO2EhPXM7KW89di52YWwmdi5wb3NpdGlvbix2LnBvc2l0aW9uPj49MSwwPT12LnBvc2l0aW9uJiYodi5wb3NpdGlvbj0zMjc2OCx2LnZhbD12LnN0cmluZy5jaGFyQ29kZUF0KHYuaW5kZXgrKykpLGl8PShvPjA/MTowKSphLGE8PD0xO2M9eShpKTticmVhaztjYXNlIDE6Zm9yKGk9MCxzPU1hdGgucG93KDIsMTYpLGE9MTthIT1zOylvPXYudmFsJnYucG9zaXRpb24sdi5wb3NpdGlvbj4+PTEsMD09di5wb3NpdGlvbiYmKHYucG9zaXRpb249MzI3Njgsdi52YWw9di5zdHJpbmcuY2hhckNvZGVBdCh2LmluZGV4KyspKSxpfD0obz4wPzE6MCkqYSxhPDw9MTtjPXkoaSk7YnJlYWs7Y2FzZSAyOnJldHVybiIifWZvcih1WzNdPWMsbj1kPWM7Oyl7aWYodi5pbmRleD52LnN0cmluZy5sZW5ndGgpcmV0dXJuIiI7Zm9yKGk9MCxzPU1hdGgucG93KDIsaCksYT0xO2EhPXM7KW89di52YWwmdi5wb3NpdGlvbix2LnBvc2l0aW9uPj49MSwwPT12LnBvc2l0aW9uJiYodi5wb3NpdGlvbj0zMjc2OCx2LnZhbD12LnN0cmluZy5jaGFyQ29kZUF0KHYuaW5kZXgrKykpLGl8PShvPjA/MTowKSphLGE8PD0xO3N3aXRjaChjPWkpe2Nhc2UgMDpmb3IoaT0wLHM9TWF0aC5wb3coMiw4KSxhPTE7YSE9czspbz12LnZhbCZ2LnBvc2l0aW9uLHYucG9zaXRpb24+Pj0xLDA9PXYucG9zaXRpb24mJih2LnBvc2l0aW9uPTMyNzY4LHYudmFsPXYuc3RyaW5nLmNoYXJDb2RlQXQodi5pbmRleCsrKSksaXw9KG8+MD8xOjApKmEsYTw8PTE7dVtsKytdPXkoaSksYz1sLTEscC0tO2JyZWFrO2Nhc2UgMTpmb3IoaT0wLHM9TWF0aC5wb3coMiwxNiksYT0xO2EhPXM7KW89di52YWwmdi5wb3NpdGlvbix2LnBvc2l0aW9uPj49MSwwPT12LnBvc2l0aW9uJiYodi5wb3NpdGlvbj0zMjc2OCx2LnZhbD12LnN0cmluZy5jaGFyQ29kZUF0KHYuaW5kZXgrKykpLGl8PShvPjA/MTowKSphLGE8PD0xO3VbbCsrXT15KGkpLGM9bC0xLHAtLTticmVhaztjYXNlIDI6cmV0dXJuIGR9aWYoMD09cCYmKHA9TWF0aC5wb3coMixoKSxoKyspLHVbY10pZj11W2NdO2Vsc2V7aWYoYyE9PWwpcmV0dXJuIG51bGw7Zj1uK24uY2hhckF0KDApfWQrPWYsdVtsKytdPW4rZi5jaGFyQXQoMCksbj1mLDA9PS0tcCYmKHA9TWF0aC5wb3coMixoKSxoKyspfX19O3JldHVybiB0fXZhciBmbj1mdW5jdGlvbigpe3JldHVybihmbj1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLG49YXJndW1lbnRzLmxlbmd0aDtyPG47cisrKWZvcih2YXIgaSBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmKHRbaV09ZVtpXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3ZvaWQgMD09PXQmJih0PVtdKSx2b2lkIDA9PT1lJiYoZT17fSksdGhpcy5ldmVudHM9dCx0aGlzLnJlcXVlc3RQYXJhbWV0ZXJzPWUsdGhpcy5jb21wcmVzc2VkPSEwLHRoaXMuc2l6ZUNvdW50ZXI9bmV3IFp0KDE1MzYwKX1yZXR1cm4gdC5wcm90b3R5cGUuYWRkRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5zaXplQ291bnRlci5hZGQoZW5jb2RlVVJJQ29tcG9uZW50KGNzSlNPTi5zdHJpbmdpZnkodCkpKSxjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5ldmVudHMsdCl9LHQucHJvdG90eXBlLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0UmVxdWVzdFBhcmFtZXRlcnMoKTtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodGhpcy5yZXF1ZXN0UGFyYW1ldGVyc1tyXT1lW3JdKX0sdC5wcm90b3R5cGUuZXZlbnRzQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ldmVudHMubGVuZ3RofSx0LnByb3RvdHlwZS5jbGVhckV2ZW50cz1mdW5jdGlvbigpe3RoaXMuc2l6ZUNvdW50ZXIucmVzZXQoKSx0aGlzLmV2ZW50cz1bXX0sdC5wcm90b3R5cGUuZW1wdHk9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyRXZlbnRzKCl9LHQucHJvdG90eXBlLmlzRnVsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemVDb3VudGVyLmlzVGhyZXNob2xkUmVhY2hlZCgpfHx0aGlzLmV2ZW50c0NvdW50KCk+PTUwfSx0LnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmV2ZW50cy5sZW5ndGh9LHQucHJvdG90eXBlLmdldEV2ZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmV2ZW50c30sdC5wcm90b3R5cGUuZ2V0TWV0YWRhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXF1ZXN0UGFyYW1ldGVyc30sdC5wcm90b3R5cGUuZ2V0UmVxdWVzdFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cuSlNPTi5zdHJpbmdpZnkodGhpcy5ldmVudHMpO3JldHVybiB0aGlzLmNvbXByZXNzZWQ/Zm4oZm4oe30sdGhpcy5yZXF1ZXN0UGFyYW1ldGVycykse2U6bG4uY29tcHJlc3NUb0Jhc2U2NCh0KX0pOmZuKGZuKHt9LHRoaXMucmVxdWVzdFBhcmFtZXRlcnMpLHtldTp0fSl9LHQucHJvdG90eXBlLmVuYWJsZUNvbXByZXNzaW9uPWZ1bmN0aW9uKCl7dGhpcy5jb21wcmVzc2VkPSEwfSx0LnByb3RvdHlwZS5kaXNhYmxlQ29tcHJlc3Npb249ZnVuY3Rpb24oKXt0aGlzLmNvbXByZXNzZWQ9ITF9LHR9KCkseW49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dmFyIHI9dGhpczt0aGlzLmFuYWx5c2lzRXZlbnRzUmVjb3ZlcnlSZXF1ZXN0PXQsdGhpcy5yZWNvdmVyeVN0b3JhZ2U9ZSx0aGlzLnZpc2liaWxpdHlDaGFuZ2VIYW5kbGVyPWZ1bmN0aW9uKCl7InZpc2libGUiPT09ZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlJiZyLnNlbmRQZXJzaXN0ZWRSZWNvcmRpbmdzKCl9fXJldHVybiB0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuc2VuZFBlcnNpc3RlZFJlY29yZGluZ3MoKSx0aGlzLmFkZFZpc2liaWxpdHlDaGFuZ2VMaXN0ZW5lcigpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVWaXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXIoKX0sdC5wcm90b3R5cGUuZ2V0UmVjb3ZlcnlTdG9yYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVjb3ZlcnlTdG9yYWdlfSx0LnByb3RvdHlwZS5zZW5kUGVyc2lzdGVkUmVjb3JkaW5ncz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucmVjb3ZlcnlTdG9yYWdlLnJlY292ZXIoKTtpZihudWxsIT09dCl7dmFyIGU9dCxyPWUubWV0YWRhdGEsbj1lLmV2ZW50cyxpPW5ldyBkbihuLHIpO3RoaXMuYW5hbHlzaXNFdmVudHNSZWNvdmVyeVJlcXVlc3Quc2V0UmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnMoaSksdGhpcy5hbmFseXNpc0V2ZW50c1JlY292ZXJ5UmVxdWVzdC5iZWZvcmUoKGZ1bmN0aW9uKCl7aS5lbmFibGVDb21wcmVzc2lvbigpfSkpLHRoaXMuYW5hbHlzaXNFdmVudHNSZWNvdmVyeVJlcXVlc3Quc2VuZCgpfX0sdC5wcm90b3R5cGUuYWRkVmlzaWJpbGl0eUNoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigidmlzaWJpbGl0eWNoYW5nZSIsdGhpcy52aXNpYmlsaXR5Q2hhbmdlSGFuZGxlcil9LHQucHJvdG90eXBlLnJlbW92ZVZpc2liaWxpdHlDaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbigpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInZpc2liaWxpdHljaGFuZ2UiLHRoaXMudmlzaWJpbGl0eUNoYW5nZUhhbmRsZXIpfSx0fSgpO3ZhciB2bj1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpLG1uPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyKXt2YXIgbj10LmNhbGwodGhpcyxlLHIpfHx0aGlzO3JldHVybiBuLm9uQmVhY29uU3VjY2Vzc0NhbGxiYWNrcz1bXSxuLm9uQmVhY29uRmFpbHVyZUNhbGxiYWNrcz1bXSxufXJldHVybiB2bihlLHQpLGUucHJvdG90eXBlLnNldFJlcXVlc3RQYXlsb2FkUHJvdmlkZXI9ZnVuY3Rpb24odCl7dGhpcy5yZXF1ZXN0UGF5bG9hZFByb3ZpZGVyPXR9LGUucHJvdG90eXBlLm9uQmVhY29uU3VjY2Vzcz1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5vbkJlYWNvblN1Y2Nlc3NDYWxsYmFja3MsdCl9LGUucHJvdG90eXBlLm9uQmVhY29uRmFpbHVyZT1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5vbkJlYWNvbkZhaWx1cmVDYWxsYmFja3MsdCl9LGUucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oKXtjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5iZWZvcmVSZXF1ZXN0Q2FsbGJhY2tzLChmdW5jdGlvbih0KXtyZXR1cm4gdCgpfSkpO3ZhciB0PXRoaXMucmV0cmlldmVQYXJhbWV0ZXJzKCksZT1MLnRvUXVlcnkodCkscj10aGlzLnJldHJpZXZlUGF5bG9hZCgpO3RoaXMuc2VuZEJlYWNvbihlLHIpP2NzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLm9uQmVhY29uU3VjY2Vzc0NhbGxiYWNrcywoZnVuY3Rpb24odCl7cmV0dXJuIHQoKX0pKTpjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5vbkJlYWNvbkZhaWx1cmVDYWxsYmFja3MsKGZ1bmN0aW9uKHQpe3JldHVybiB0KCl9KSksY3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuYWZ0ZXJSZXF1ZXN0Q2FsbGJhY2tzLChmdW5jdGlvbih0KXtyZXR1cm4gdCgpfSkpfSxlLnByb3RvdHlwZS5yZXRyaWV2ZVBheWxvYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXF1ZXN0UGF5bG9hZFByb3ZpZGVyP3RoaXMucmVxdWVzdFBheWxvYWRQcm92aWRlci5nZXRSZXF1ZXN0UGF5bG9hZCgpOiIifSxlLnByb3RvdHlwZS5zZW5kQmVhY29uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMCE9PW5hdmlnYXRvci5zZW5kQmVhY29uJiZuYXZpZ2F0b3Iuc2VuZEJlYWNvbih0aGlzLmRvbWFpblVyaSsiLyIrdGhpcy5wYXRoKyI/Iit0LGUpfSxlfShqKSxnbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5zdG9yYWdlTmFtZT10fXJldHVybiB0LnByb3RvdHlwZS5zYXZlPWZ1bmN0aW9uKHQpe2xvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuc3RvcmFnZU5hbWUsY3NKU09OLnN0cmluZ2lmeSh0KSl9LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5zdG9yYWdlTmFtZSl9LHQucHJvdG90eXBlLnJlY292ZXI9ZnVuY3Rpb24oKXt2YXIgdD1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnN0b3JhZ2VOYW1lKTtpZihudWxsPT09dClyZXR1cm4gbnVsbDt2YXIgZT1udWxsO3RyeXtlPWNzSlNPTi5wYXJzZSh0KX1jYXRjaChlKXtmdC5lcnJvcigiSW52YWxpZCBpdGVtIGluIGxvY2FsU3RvcmFnZS5cbiAgICAgICAgIChrZXk6Iit0aGlzLnN0b3JhZ2VOYW1lKyI7IHZhbHVlOiIrdCsiKSIpfWZpbmFsbHl7dGhpcy5jbGVhcigpfXJldHVybiBlfSx0fSgpLFNuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixuLGksbyxzLGEpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMudmlzaXRvclNlcnZpY2U9ZSx0aGlzLnNlc3Npb25TZXJ2aWNlPXIsdGhpcy5ldmVudFBhdGhDb21wdXRhdGlvbj1uLHRoaXMuc2VsZWN0b3I9aSx0aGlzLmNvbW1hbmRzU2VydmljZT1vLHRoaXMuc2Vzc2lvblJlbmV3ZXI9cyx0aGlzLmlmcmFtZUV2ZW50c0VtaXR0ZXI9YX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpeyFmdW5jdGlvbigpe2xvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJjc0xlZ2FjeVJlY292ZXJlZCIpO2Zvcih2YXIgdD1bXSxlPTA7ZTxsb2NhbFN0b3JhZ2UubGVuZ3RoO2UrPTEpe3ZhciByPWxvY2FsU3RvcmFnZS5rZXkoZSk7MD09PWNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwociwiQ1NTdG9yYWdlRGF0YSIpJiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodCxyKX1jc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodCwoZnVuY3Rpb24odCl7cmV0dXJuIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHQpfSkpfSgpO3ZhciB0PW5ldyBkbjt0aGlzLmFuYWx5c2lzRXZlbnRzUmVjb3Zlcnk9dGhpcy5jcmVhdGVSZWNvdmVyeSgpLHRoaXMuYW5hbHlzaXNFdmVudHNTZXJ2aWNlPXRoaXMuY3JlYXRlU2VydmljZSh0LHRoaXMuYW5hbHlzaXNFdmVudHNSZWNvdmVyeS5nZXRSZWNvdmVyeVN0b3JhZ2UoKSksdGhpcy5hbmFseXNpc0V2ZW50c1NlcnZpY2UuaW5pdCgpLHRoaXMuaWZyYW1lRXZlbnRzRW1pdHRlci5hZGRMaXN0ZW5lcnModGhpcy5hbmFseXNpc0V2ZW50c1NlcnZpY2UpfSx0LnByb3RvdHlwZS5vblN0YXJ0VHJhY2tpbmc9ZnVuY3Rpb24oKXt0aGlzLmFuYWx5c2lzRXZlbnRzUmVjb3Zlcnkuc3RhcnQoKSx0aGlzLmFuYWx5c2lzRXZlbnRzU2VydmljZS5zdGFydCgpfSx0LnByb3RvdHlwZS5vbkFmdGVyTmF0dXJhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy5hbmFseXNpc0V2ZW50c1NlcnZpY2UuaW5pdFN0YXRlcygpfSx0LnByb3RvdHlwZS5vbkFmdGVyQXJ0aWZpY2lhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy5hbmFseXNpc0V2ZW50c1NlcnZpY2UuaW5pdFN0YXRlcygpfSx0LnByb3RvdHlwZS5vbkJlZm9yZUFydGlmaWNpYWxQYWdlVmlldz1mdW5jdGlvbigpe3RoaXMuYW5hbHlzaXNFdmVudHNTZXJ2aWNlLmNsZWFyU3RhdGVzKCl9LHQucHJvdG90eXBlLm9uQmVmb3JlU2Vzc2lvblJlbmV3YWw9ZnVuY3Rpb24oKXt0aGlzLmFuYWx5c2lzRXZlbnRzU2VydmljZS5jbGVhclN0YXRlcygpLHRoaXMuYW5hbHlzaXNFdmVudHNTZXJ2aWNlLnN0b3AoKSx0aGlzLmFuYWx5c2lzRXZlbnRzUmVjb3Zlcnkuc3RvcCgpfSx0LnByb3RvdHlwZS5vbk9wdG91dD1mdW5jdGlvbigpe3RoaXMuYW5hbHlzaXNFdmVudHNTZXJ2aWNlLnN0b3AoKSx0aGlzLmFuYWx5c2lzRXZlbnRzUmVjb3Zlcnkuc3RvcCgpfSx0LnByb3RvdHlwZS5jcmVhdGVTZXJ2aWNlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9bmV3IHhyKHdpbmRvdyksaT1uZXcgYW4sbz1uZXcgb24odGhpcy5jb25maWd1cmF0aW9uLHRoaXMuZXZlbnRQYXRoQ29tcHV0YXRpb24sdGhpcy5zZWxlY3Rvcikscz1uZXcgSHIodGhpcy5jb25maWd1cmF0aW9uLHRoaXMuZXZlbnRQYXRoQ29tcHV0YXRpb24sbmV3IFdyKGZ0KSksYT1uZXcgQih0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0VHJhY2tlclVyaSgpLCJldmVudHMiKSxjPW5ldyBtbih0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0VHJhY2tlclVyaSgpLCJldmVudHMiKSx1PW5ldyBBZSh0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy52aXNpdG9yU2VydmljZSx0aGlzLnNlc3Npb25TZXJ2aWNlLGkscixuKTtyZXR1cm4gbmV3IHVuKHRoaXMuY29uZmlndXJhdGlvbixvLHMsaSxyLHQsYSxjLHUsdGhpcy5zZXNzaW9uUmVuZXdlcixlKX0sdC5wcm90b3R5cGUuY3JlYXRlUmVjb3Zlcnk9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgQih0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0VHJhY2tlclVyaSgpLCJldmVudHMiKTtyZXR1cm4gbmV3IHluKHQsbmV3IGduKCJjc0FuYWx5c2lzRXZlbnRzUGVyc2lzdGVkIikpfSx0fSgpLEVuPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCksd249ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIsbil7dmFyIGk9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXI9ZSxpLnBhZ2VWaWV3UmVxdWVzdD1yLGkudXJsU2VydmljZT1uLGl9cmV0dXJuIEVuKGUsdCksZS5wcm90b3R5cGUub25TdGFydD1mdW5jdGlvbigpe3RoaXMuc2VuZE5hdHVyYWxQYWdlVmlldygpfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLnRyaWdnZXJBcnRpZmljaWFsUGFnZVZpZXc9ZnVuY3Rpb24odCl7dGhpcy51cmxTZXJ2aWNlLm92ZXJyaWRlUGF0aCh0KSx0aGlzLmlzU3RhcnRlZCYmdGhpcy5zZW5kQXJ0aWZpY2lhbFBhZ2VWaWV3KCl9LGUucHJvdG90eXBlLnNlbmROYXR1cmFsUGFnZVZpZXc9ZnVuY3Rpb24oKXt0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdEJlZm9yZU5hdHVyYWxQYWdlVmlldygpLHRoaXMucGFnZVZpZXdSZXF1ZXN0LnNlbmQoKSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdEFmdGVyTmF0dXJhbFBhZ2VWaWV3KCl9LGUucHJvdG90eXBlLnNlbmRBcnRpZmljaWFsUGFnZVZpZXc9ZnVuY3Rpb24oKXt0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdEJlZm9yZUFydGlmaWNpYWxQYWdlVmlldygpLHRoaXMucGFnZVZpZXdSZXF1ZXN0LnNlbmQoKSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdEFmdGVyQXJ0aWZpY2lhbFBhZ2VWaWV3KCl9LGV9KHJlKSxDbj13aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlfHx3aW5kb3cubmF2aWdhdG9yLnVzZXJMYW5ndWFnZXx8d2luZG93Lm5hdmlnYXRvci5icm93c2VyTGFuZ3VhZ2V8fHdpbmRvdy5uYXZpZ2F0b3Iuc3lzdGVtTGFuZ3VhZ2V8fCJ1bmtub3duIjtmdW5jdGlvbiBSbigpe3JldHVybntsYTpDbn19dmFyIGJuLFRuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnBpaT10fXJldHVybiB0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybntkcjp0aGlzLmdldCgpfX0sdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGlpLmFub255bWl6ZSh0aGlzLmdldFJlZmVycmVyKCkpfSx0LnByb3RvdHlwZS5nZXRSZWZlcnJlcj1mdW5jdGlvbigpe3ZhciB0PSIiO3RyeXt0PXdpbmRvdy50b3AuZG9jdW1lbnQucmVmZXJyZXJ9Y2F0Y2goZSl7aWYod2luZG93LnBhcmVudCl0cnl7dD13aW5kb3cucGFyZW50LmRvY3VtZW50LnJlZmVycmVyfWNhdGNoKGUpe3Q9IiJ9fXJldHVybiIiPT09dCYmKHQ9ZG9jdW1lbnQucmVmZXJyZXIpLHR9LHR9KCksQW49WyJ0cmFja1BhZ2V2aWV3Il0sa249WyJzZXRQYXRoIl0sUG49WyJzZXRRdWVyeSJdLE9uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixuLGksbyxzLGEsYyl7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy5jb21tYW5kc1NlcnZpY2U9ZSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXI9cix0aGlzLnZpc2l0b3JTZXJ2aWNlPW4sdGhpcy5zZXNzaW9uU2VydmljZT1pLHRoaXMuY29uc2VudFNlcnZpY2U9byx0aGlzLmN1c3RvbVZhcmlhYmxlc1NlcnZpY2U9cyx0aGlzLnBpaT1hLHRoaXMudXJsU2VydmljZT1jfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPW5ldyBCKHRoaXMuY29uZmlndXJhdGlvbi5nZXRUcmFja2VyVXJpKCksInBhZ2V2aWV3Iik7dGhpcy5wYWdlVmlld1NlcnZpY2U9bmV3IHduKHRoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlcixlLHRoaXMudXJsU2VydmljZSksZS5zZXRSZXF1ZXN0UGFyYW1ldGVyc1Byb3ZpZGVycyh0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy52aXNpdG9yU2VydmljZSx0aGlzLnNlc3Npb25TZXJ2aWNlLGdlLG5ldyBUbih0aGlzLnBpaSksdGhpcy51cmxTZXJ2aWNlLHRoaXMuY29uc2VudFNlcnZpY2UsaSx0aGlzLmN1c3RvbVZhcmlhYmxlc1NlcnZpY2UsbiksdGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoQW4sKGZ1bmN0aW9uKGUpe3JldHVybiB0LnBhZ2VWaWV3U2VydmljZS50cmlnZ2VyQXJ0aWZpY2lhbFBhZ2VWaWV3KGUpfSkpLHRoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKGtuLChmdW5jdGlvbihlKXtyZXR1cm4gdC51cmxTZXJ2aWNlLm92ZXJyaWRlUGF0aChlKX0pKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihQbiwoZnVuY3Rpb24oZSl7cmV0dXJuIHQudXJsU2VydmljZS5vdmVycmlkZVF1ZXJ5KGUpfSkpfSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMucGFnZVZpZXdTZXJ2aWNlLnN0YXJ0KCl9LHQucHJvdG90eXBlLm9uQmVmb3JlU2Vzc2lvblJlbmV3YWw9ZnVuY3Rpb24oKXt0aGlzLnBhZ2VWaWV3U2VydmljZS5zdG9wKCl9LHR9KCksX249ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5wYXRoQ29tcHV0YXRpb249dCx0aGlzLmNvbmZpZ3VyYXRpb249ZX1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0VGFyZ2V0UGF0aD1mdW5jdGlvbih0KXt2YXIgZT1qcih0KTtyZXR1cm4gdGhpcy5wYXRoQ29tcHV0YXRpb24uZ2V0RWxlbWVudFBhdGgoZSx7ZHluYW1pY0lkUmVnZXg6dGhpcy5jb25maWd1cmF0aW9uLmR5bmFtaWNJZFJlZ2V4fSl9LHQucHJvdG90eXBlLmdldFRhcmdldFBhdGhBbmRUYXJnZXRMaW5rPWZ1bmN0aW9uKHQpe3ZhciBlPWpyKHQpLHI9dGhpcy5wYXRoQ29tcHV0YXRpb24uZ2V0RWxlbWVudFBhdGhBbmRGaXJzdEFuY2hvclBhcmVudChlLHtkeW5hbWljSWRSZWdleDp0aGlzLmNvbmZpZ3VyYXRpb24uZHluYW1pY0lkUmVnZXh9KSxuPXIucGF0aCxpPXIuZmlyc3RBbmNob3JQYXJlbnQ7cmV0dXJue3BhdGg6bix0YXJnZXRMaW5rOnRoaXMuaGFzVmFsaWRUYXJnZXRMaW5rKGkpP2kuaHJlZjoiIn19LHQucHJvdG90eXBlLmhhc1ZhbGlkVGFyZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlPWpyKHQpO3JldHVybiB0aGlzLnBhdGhDb21wdXRhdGlvbi5pc1ZhbGlkRWxlbWVudChlKX0sdC5wcm90b3R5cGUuaGFzVmFsaWRUYXJnZXRMaW5rPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09dCYmdC5oYXNBdHRyaWJ1dGUoImhyZWYiKSYmIU8odC5nZXRBdHRyaWJ1dGUoImhyZWYiKSwiIyIpfSx0fSgpLEluPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnBhdGhDb21wdXRhdGlvbj10fXJldHVybiB0LnByb3RvdHlwZS5vbj1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKG4pe3IucGF0aENvbXB1dGF0aW9uLmhhc1ZhbGlkVGFyZ2V0KG4pJiZyLnRhcmdldE1hdGNoZXNTZWxlY3RvcihuLHQpJiZlKG4pfX0sdC5wcm90b3R5cGUudGFyZ2V0TWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKHQsZSl7dmFyIHI9anIodCk7cmV0dXJuIG1lKCkuY2FsbChyLGUpfSx0LnByb3RvdHlwZS5pc01hdGNoZXNTZWxlY3RvclN1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiEhbWUoKX0sdH0oKSxObj1bInZpc2l0IiwyXSxNbj1bInBhZ2UiLDNdLExuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7dGhpcy5waWk9dCx0aGlzLmNvb2tpZVNlcnZpY2U9ZSx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZT1yLHRoaXMuY3VzdG9tVmFyaWFibGVzUGFnZT17fX1yZXR1cm4gdC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpLG87aWYodD4wJiZFdChlKSYmRXQocikpe3ZhciBzPXRoaXMucGlpLmFub255bWl6ZSgiIisobXQoZSk/ZTpjc1N0cmluZyhlKSkpLGE9dGhpcy5waWkuYW5vbnltaXplKCIiKyhtdChyKT9yOmNzU3RyaW5nKHIpKSk7aWYoaT1bcy5zbGljZSgwLDIwKSxhLnNsaWNlKDAsMjU1KV0sbz0iIiE9PXIsIVN0KG4pfHxjc0FycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoTm4sbik+PTApe3ZhciBjPXRoaXMuZ2V0Q3VzdG9tVmFyaWFibGVzU2Vzc2lvbigpO28/Y1t0XT1pOmRlbGV0ZSBjW3RdLFR0LnNldFJhdyh3aW5kb3cuSlNPTi5zdHJpbmdpZnkoYyksdGhpcy5jb29raWVTZXJ2aWNlLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlKX0oIVN0KG4pfHxjc0FycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoTW4sbik+PTApJiYobz90aGlzLmN1c3RvbVZhcmlhYmxlc1BhZ2VbdF09aTpkZWxldGUgdGhpcy5jdXN0b21WYXJpYWJsZXNQYWdlW3RdKX19LHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRDdXN0b21WYXJpYWJsZXNTZXNzaW9uKCk7Zm9yKHZhciBlIGluIHRoaXMuY3VzdG9tVmFyaWFibGVzUGFnZSl0aGlzLmN1c3RvbVZhcmlhYmxlc1BhZ2UuaGFzT3duUHJvcGVydHkoZSkmJih0W2VdPXRoaXMuY3VzdG9tVmFyaWFibGVzUGFnZVtlXSk7aWYod2luZG93LkpTT04uc3RyaW5naWZ5KHQpLmxlbmd0aDw9MilyZXR1cm57fTt2YXIgcj17Y3ZhcnM6dGhpcy5nZXRWYWxpZEN1c3RvbVZhcnModCl9O3JldHVybiB0aGlzLmN1c3RvbVZhcmlhYmxlc1BhZ2UmJndpbmRvdy5KU09OLnN0cmluZ2lmeSh0aGlzLmN1c3RvbVZhcmlhYmxlc1BhZ2UpLmxlbmd0aD4yJiYoci5jdmFycD10aGlzLmdldFZhbGlkQ3VzdG9tVmFycyh0aGlzLmN1c3RvbVZhcmlhYmxlc1BhZ2UpKSxyfSx0LnByb3RvdHlwZS5nZXRDdXN0b21WYXJpYWJsZXNTZXNzaW9uPWZ1bmN0aW9uKCl7dmFyIHQ9VHQuZ2V0KHRoaXMuY29va2llU2VydmljZSk7cmV0dXJuIG51bGwhPT10JiZndCh0KT90Ont9fSx0LnByb3RvdHlwZS5nZXRWYWxpZEN1c3RvbVZhcnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHI9cGFyc2VJbnQoZSwxMCksbj10W2VdLGk9blswXSxvPW5bMV07YT0xLGM9MjAsKCEodnQocz1yKSYmcz49YSYmczw9Yyl8fGkubGVuZ3RoPjIwfHxvLmxlbmd0aD4yNTUpJiZkZWxldGUgdFtlXX12YXIgcyxhLGMsdT1mdW5jdGlvbih0KXt2YXIgZTtmb3IoZSBpbiB0KXJldHVybiExO3JldHVybiEwfSh0KT9bXTp0O3JldHVybiB3aW5kb3cuSlNPTi5zdHJpbmdpZnkodSl9LHR9KCksRG49WyJzZXRDdXN0b21WYXJpYWJsZSJdLHhuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixuKXt0aGlzLmNvbW1hbmRzU2VydmljZT10LHRoaXMuY3VzdG9tVmFyaWFibGVzU2VydmljZT1lLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlPXIsdGhpcy5jb29raWVTZXJ2aWNlPW59cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKERuLChmdW5jdGlvbihlLHIsbixpKXt0LmN1c3RvbVZhcmlhYmxlc1NlcnZpY2Uuc2V0KGUscixuLGkpfSkpfSx0LnByb3RvdHlwZS5vbk9wdG91dD1mdW5jdGlvbigpe1R0LnJlbW92ZSh0aGlzLmNvb2tpZVNlcnZpY2UsdGhpcy5jcm9zc0RvbWFpblNpbmdsZUlmcmFtZVNlcnZpY2UpfSx0fSgpLHFuPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz9lOm51bGw9PT1uP249T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHIpOm47aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUodCxlLHIsbik7ZWxzZSBmb3IodmFyIGE9dC5sZW5ndGgtMTthPj0wO2EtLSkoaT10W2FdKSYmKHM9KG88Mz9pKHMpOm8+Mz9pKGUscixzKTppKGUscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHMpLHN9LFVuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUub25Mb2FkPWZ1bmN0aW9uKHQpe3RoaXMub25Mb2FkQ2FsbGJhY2s9dH0sdC5wcm90b3R5cGUub25Mb2FkQ2FsbGJhY2tFeGVjdXRlPWZ1bmN0aW9uKCl7dGhpcy5vbkxvYWRDYWxsYmFjaygpfSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3ZhciB0PXRoaXMub25Mb2FkQ2FsbGJhY2tFeGVjdXRlLmJpbmQodGhpcyk7dGhpcy5vbkRvY3VtZW50TG9hZGVkKHQpfSx0LnByb3RvdHlwZS5vbkRvY3VtZW50TG9hZGVkPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixlKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsZSksdCgpfSJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHwibG9hZGluZyIhPT1kb2N1bWVudC5yZWFkeVN0YXRlJiYhZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsP3NldFRpbWVvdXQodCk6KGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixlKSl9LHFuKFtkdCgib25Mb2FkIildLHQucHJvdG90eXBlLCJvbkxvYWRDYWxsYmFja0V4ZWN1dGUiLG51bGwpLHR9KCksVm49WyJjbGVhclNlc3Npb24iXSxqbj1bImV4dGVuZFNlc3Npb24iXSx6bj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsbil7dGhpcy5jb29raWVEb21haW49dCx0aGlzLnZpc2l0b3JTZXJ2aWNlPWUsdGhpcy5zZXNzaW9uU2VydmljZT1yLHRoaXMuY29tbWFuZHNTZXJ2aWNlPW59cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKFZuLChmdW5jdGlvbigpe3JldHVybiB0LnNlc3Npb25TZXJ2aWNlLnJlbW92ZVNlc3Npb24odC5jb29raWVEb21haW4pfSkpLHRoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKGpuLChmdW5jdGlvbigpe3JldHVybiB0LnNlc3Npb25TZXJ2aWNlLmV4dGVuZFNlc3Npb25QZXJpb2RpY2FsbHkoKX0pKX0sdC5wcm90b3R5cGUub25CZWZvcmVOYXR1cmFsUGFnZVZpZXc9ZnVuY3Rpb24oKXt0aGlzLnZpc2l0b3JTZXJ2aWNlLmNyZWF0ZU9yVXBkYXRlVmlzaXRvcigpLHRoaXMuc2Vzc2lvblNlcnZpY2UuY3JlYXRlT3JVcGRhdGVTZXNzaW9uKCl9LHQucHJvdG90eXBlLm9uQmVmb3JlQXJ0aWZpY2lhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy52aXNpdG9yU2VydmljZS5jcmVhdGVPclVwZGF0ZVZpc2l0b3IoKSx0aGlzLnNlc3Npb25TZXJ2aWNlLmNyZWF0ZU9yVXBkYXRlU2Vzc2lvbigpfSx0LnByb3RvdHlwZS5vbk9wdG91dD1mdW5jdGlvbigpe3RoaXMudmlzaXRvclNlcnZpY2UucmVtb3ZlQ3VycmVudFZpc2l0b3IoKSx0aGlzLnNlc3Npb25TZXJ2aWNlLnJlbW92ZUN1cnJlbnRTZXNzaW9uKCl9LHQucHJvdG90eXBlLm9uUmVjb3JkaW5nU3RhdGVDaGFuZ2U9ZnVuY3Rpb24odCl7dGhpcy5zZXNzaW9uU2VydmljZS51cGRhdGVSZWNvcmRpbmdTdGF0ZSh0KX0sdH0oKSxCbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5zZXNzaW9uU2VydmljZT10fXJldHVybiB0LnByb3RvdHlwZS5vblNlc3Npb25FeHBpcmVkPWZ1bmN0aW9uKHQpe3RoaXMub25TZXNzaW9uRXhwaXJlZENhbGxiYWNrPXR9LHQucHJvdG90eXBlLmlzU2Vzc2lvblZhbGlkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zZXNzaW9uU2VydmljZS5oYXNWYWxpZFNlc3Npb24oKTtyZXR1cm4hdCYmdGhpcy5jYW5SZW5ld1Nlc3Npb24oKT8odGhpcy5sYXN0U2Vzc2lvblJlbmV3YWxUaW1lPUQubm93KCksdGhpcy5vblNlc3Npb25FeHBpcmVkQ2FsbGJhY2soKSx0aGlzLnNlc3Npb25TZXJ2aWNlLmhhc1ZhbGlkU2Vzc2lvbigpKTp0fSx0LnByb3RvdHlwZS5jYW5SZW5ld1Nlc3Npb249ZnVuY3Rpb24oKXtyZXR1cm4hU3QodGhpcy5sYXN0U2Vzc2lvblJlbmV3YWxUaW1lKXx8RC5ub3coKS10aGlzLmxhc3RTZXNzaW9uUmVuZXdhbFRpbWU+NmU0fSx0fSgpLEhuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7dGhpcy5lTWVyY2hhbmRpc2luZ1JlcXVlc3Q9dCx0aGlzLnVybFNlcnZpY2U9ZSx0aGlzLmVNZXJjaGFuZGlzaW5nVHJhY2tlcj1yLHRoaXMucmVxdWVzdFBheWxvYWQ9e3RhcmdldFVybDoiIix3aW5kb3dXaWR0aDowLHdpbmRvd0hlaWdodDowLHByb2R1Y3RzOltdfX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5lTWVyY2hhbmRpc2luZ1JlcXVlc3QuYWZ0ZXJQcm92aWRlcnNDYWxsZWQoKGZ1bmN0aW9uKCl7dC5yZXF1ZXN0UGF5bG9hZC5wcm9kdWN0cz1bXX0pKSx0aGlzLmVNZXJjaGFuZGlzaW5nUmVxdWVzdC5zZXRSZXF1ZXN0UGF5bG9hZFByb3ZpZGVyKHtnZXRSZXF1ZXN0UGF5bG9hZDpmdW5jdGlvbigpe3JldHVybiBjc0pTT04uc3RyaW5naWZ5KHQucmVxdWVzdFBheWxvYWQpfX0pfSx0LnByb3RvdHlwZS5jb2xsZWN0PWZ1bmN0aW9uKCl7dGhpcy5yZXF1ZXN0UGF5bG9hZD17dGFyZ2V0VXJsOnRoaXMudXJsU2VydmljZS5nZXRVcmwoKSx3aW5kb3dXaWR0aDpnZS53aW5kb3dXaWR0aCgpLHdpbmRvd0hlaWdodDpnZS53aW5kb3dIZWlnaHQoKSxwcm9kdWN0czp0aGlzLmVNZXJjaGFuZGlzaW5nVHJhY2tlci5jb2xsZWN0UHJvZHVjdHMoKX0sdGhpcy5zZW5kRU1lcmNoYW5kaXNpbmdEYXRhKCl9LHQucHJvdG90eXBlLm9uSWZyYW1lRW1lcmNoYW5kaXNpbmdNZXNzYWdlPWZ1bmN0aW9uKHQpe3RoaXMucmVxdWVzdFBheWxvYWQ9dCx0aGlzLnNlbmRFTWVyY2hhbmRpc2luZ0RhdGEoKX0sdC5wcm90b3R5cGUuc2VuZEVNZXJjaGFuZGlzaW5nRGF0YT1mdW5jdGlvbigpe3RoaXMuZU1lcmNoYW5kaXNpbmdSZXF1ZXN0LnNlbmQoKX0sdH0oKSxGbj1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MCxyPWFyZ3VtZW50cy5sZW5ndGg7ZTxyO2UrKyl0Kz1hcmd1bWVudHNbZV0ubGVuZ3RoO3ZhciBuPUFycmF5KHQpLGk9MDtmb3IoZT0wO2U8cjtlKyspZm9yKHZhciBvPWFyZ3VtZW50c1tlXSxzPTAsYT1vLmxlbmd0aDtzPGE7cysrLGkrKyluW2ldPW9bc107cmV0dXJuIG59Oyhibnx8KGJuPXt9KSkuZmluZE5lc3RlZFNoYWRvd0hvc3RzPWZ1bmN0aW9uIHQoZSl7Zm9yKHZhciByLG49W10saT0wLG89ZnVuY3Rpb24odCl7dmFyIGU9Uyh0LnF1ZXJ5U2VsZWN0b3JBbGwoIioiKSk7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGUsKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNoYWRvd1Jvb3R9KSl9KGUpO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldOyhyPWNzQXJyYXkucHJvdG90eXBlLnB1c2gpLmNhbGwuYXBwbHkocixGbihbbixzXSx0KHMuc2hhZG93Um9vdCkpKX1yZXR1cm4gbn07dmFyIEduLFduPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wLHI9YXJndW1lbnRzLmxlbmd0aDtlPHI7ZSsrKXQrPWFyZ3VtZW50c1tlXS5sZW5ndGg7dmFyIG49QXJyYXkodCksaT0wO2ZvcihlPTA7ZTxyO2UrKylmb3IodmFyIG89YXJndW1lbnRzW2VdLHM9MCxhPW8ubGVuZ3RoO3M8YTtzKyssaSsrKW5baV09b1tzXTtyZXR1cm4gbn07KEdufHwoR249e30pKS5maW5kQWxsRWxlbWVudHM9ZnVuY3Rpb24odCxlKXt2YXIgcjt2b2lkIDA9PT1lJiYoZT1kb2N1bWVudCk7Zm9yKHZhciBuPVMoZS5xdWVyeVNlbGVjdG9yQWxsKHQpKSxpPTAsbz1ibi5maW5kTmVzdGVkU2hhZG93SG9zdHMoZSk7aTxvLmxlbmd0aDtpKyspe3ZhciBzPVMob1tpXS5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3JBbGwodCkpOyhyPWNzQXJyYXkucHJvdG90eXBlLnB1c2gpLmNhbGwuYXBwbHkocixXbihbbl0scykpfXJldHVybiBufTt2YXIgWG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuY29uZmlndXJhdGlvbj10fXJldHVybiB0LnByb3RvdHlwZS5jb2xsZWN0UHJvZHVjdHM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wLHI9dGhpcy5nZXRBbGxWYWxpZEFuY2hvcnModGhpcy5jb25maWd1cmF0aW9uLmhvc3RuYW1lcyk7ZTxyLmxlbmd0aDtlKyspe3ZhciBuPXJbZV0saT1iLmdldEVsZW1lbnRQYXRoKG4se2R5bmFtaWNJZFJlZ2V4OnRoaXMuY29uZmlndXJhdGlvbi5keW5hbWljSWRSZWdleH0pO2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0LHt0YXJnZXRQYXRoOmksaHJlZjpuLmhyZWZ9KX1yZXR1cm4gdH0sdC5wcm90b3R5cGUuZ2V0QWxsVmFsaWRBbmNob3JzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKEduLmZpbmRBbGxFbGVtZW50cygiYSIpLChmdW5jdGlvbihyKXtyZXR1cm4gZS5pc0FuY2hvclZhbGlkKHIsdCl9KSl9LHQucHJvdG90eXBlLmlzQW5jaG9yVmFsaWQ9ZnVuY3Rpb24odCxlKXt2YXIgcj1ldCh0LmhyZWYpO3JldHVybiB0Lm9mZnNldFdpZHRoPjAmJnQub2Zmc2V0SGVpZ2h0PjAmJiIiIT09ciYmcnQocixlKX0sdH0oKSxKbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsbixpLG8pe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMuY29tcHJlc3Nvcj1lLHRoaXMuYmFzaWNSZXF1ZXN0UGFyYW1ldGVycz1yLHRoaXMuY3VzdG9tVmFyaWFibGVzU2VydmljZT1uLHRoaXMudXJsU2VydmljZT1pLHRoaXMuaWZyYW1lRXZlbnRzRW1pdHRlcj1vfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jcmVhdGVFTWVyY2hhbmRpc2luZ1Bvc3RSZXF1ZXN0KHRoaXMuY29tcHJlc3NvciksZT1uZXcgWG4odGhpcy5jb25maWd1cmF0aW9uKTt0aGlzLmVNZXJjaGFuZGlzaW5nU2VydmljZT1uZXcgSG4odCx0aGlzLnVybFNlcnZpY2UsZSksdGhpcy5lTWVyY2hhbmRpc2luZ1NlcnZpY2UuaW5pdCgpLHRoaXMuaWZyYW1lRXZlbnRzRW1pdHRlci5hZGRMaXN0ZW5lcnModGhpcy5lTWVyY2hhbmRpc2luZ1NlcnZpY2UpfSx0LnByb3RvdHlwZS5vblN0YXJ0VHJhY2tpbmc9ZnVuY3Rpb24oKXt0aGlzLmVNZXJjaGFuZGlzaW5nU2VydmljZS5jb2xsZWN0KCl9LHQucHJvdG90eXBlLm9uQWZ0ZXJBcnRpZmljaWFsUGFnZVZpZXc9ZnVuY3Rpb24oKXt0aGlzLmVNZXJjaGFuZGlzaW5nU2VydmljZS5jb2xsZWN0KCl9LHQucHJvdG90eXBlLmNyZWF0ZUVNZXJjaGFuZGlzaW5nUG9zdFJlcXVlc3Q9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEh0KHRoaXMuY29uZmlndXJhdGlvbi5nZXRUcmFja2VyVXJpKCksImRpc3BsYXkiKTtyZXR1cm4gZS5zZXRDb21wcmVzc2lvbk9wdGlvbnModCwiYmFzZTY0IiksZS5zZXRSZXF1ZXN0UGFyYW1ldGVyc1Byb3ZpZGVycyh0aGlzLmJhc2ljUmVxdWVzdFBhcmFtZXRlcnMsdGhpcy5jdXN0b21WYXJpYWJsZXNTZXJ2aWNlKSxlLnNldFJlcXVlc3RIZWFkZXIoe25hbWU6IkFjY2Vzcy1Db250cm9sLUV4cG9zZS1IZWFkZXJzIix2YWx1ZToiQ29udGVudC1jb21wcmVzc2lvbiJ9KSxlLnNldFJlcXVlc3RIZWFkZXIoe25hbWU6IkNvbnRlbnQtdHlwZSIsdmFsdWU6InRleHQvcGxhaW47IGNoYXJzZXQ9VVRGLTgifSksZS5zZXRSZXF1ZXN0SGVhZGVyKHtuYW1lOiJDb250ZW50LWNvbXByZXNzaW9uIix2YWx1ZToiTFpTdHJpbmcifSksZX0sdH0oKSxZbj1yKDApO2Z1bmN0aW9uIEtuKHQpe3JldHVybiB0LnRhZ0RlcGxveW1lbnRNb2RlPT09WW4uVGFnRGVwbG95bWVudE1vZGUuRHVhbENvbGxlY3Rpb25SZXZpZXd8fHQudGFnRGVwbG95bWVudE1vZGU9PT1Zbi5UYWdEZXBsb3ltZW50TW9kZS5EdWFsQ29sbGVjdGlvbn12YXIgUW4sWm49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyLG4pe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMudmlzaXRvclNlcnZpY2U9ZSx0aGlzLnNlc3Npb25TZXJ2aWNlPXIsdGhpcy5waWlNYXNraW5nU2VydmljZT1ufXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5pc0NsaWNrdGFsZVB0Y0xvYWRlZD0hMSx0aGlzLmlzQ29udGVudFNxdWFyZURhdGFDb2xsZWN0aW9uU3RhcnRlZD0hMX0sdC5wcm90b3R5cGUubG9hZENsaWNrdGFsZVB0Yz1mdW5jdGlvbigpeyF0aGlzLmlzQ2xpY2t0YWxlUHRjTG9hZGVkJiZ0aGlzLmNvbmZpZ3VyYXRpb24ucHRjRG9tYWluJiZ0aGlzLmNvbmZpZ3VyYXRpb24ucHRjR3VpZCYmdGhpcy5kb0xvYWRDbGlja3RhbGVQdGMoKX0sdC5wcm90b3R5cGUuZ2V0U2Vzc2lvbkRhdGE9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvbmZpZ3VyYXRpb24ucHJvamVjdElkLGU9dGhpcy52aXNpdG9yU2VydmljZS5nZXRWaXNpdG9yKCk7cmV0dXJue3Byb2plY3RJZDp0LHVzZXJJZDplLmlkLHNlc3Npb25OdW1iZXI6ZS52aXNpdHNDb3VudCxwYWdlTnVtYmVyOnRoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0U2Vzc2lvbigpLnBhZ2VOdW1iZXJ9fSx0LnByb3RvdHlwZS5zdGFydERhdGFDb2xsZWN0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuaXNDb250ZW50U3F1YXJlRGF0YUNvbGxlY3Rpb25TdGFydGVkfHxLbih0aGlzLmNvbmZpZ3VyYXRpb24pJiYodGhpcy5waWlNYXNraW5nU2VydmljZS5pbml0Q1RQSUkoKSx0KCksdGhpcy5pc0NvbnRlbnRTcXVhcmVEYXRhQ29sbGVjdGlvblN0YXJ0ZWQ9ITApfSx0LnByb3RvdHlwZS5kb0xvYWRDbGlja3RhbGVQdGM9ZnVuY3Rpb24oKXt0aGlzLmlzQ2xpY2t0YWxlUHRjTG9hZGVkPSEwO3ZhciB0PXRoaXMuYnVpbGRTY3JpcHRFbGVtZW50KCk7ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZCh0KX0sdC5wcm90b3R5cGUuYnVpbGRTY3JpcHRFbGVtZW50PWZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiwic2NyaXB0Iik7cmV0dXJuIHQuYXN5bmM9ITAsdC5jcm9zc09yaWdpbj0iYW5vbnltb3VzIix0LnR5cGU9InRleHQvamF2YXNjcmlwdCIsdGhpcy5jb25maWd1cmF0aW9uLnB0Y1NoYTUxMiYmdGhpcy5jb25maWd1cmF0aW9uLnB0Y1NuYXBzaG90UGF0aD8odC5pbnRlZ3JpdHk9InNoYTUxMi0iK3RoaXMuY29uZmlndXJhdGlvbi5wdGNTaGE1MTIsdC5zcmM9Imh0dHBzOi8vIit0aGlzLmNvbmZpZ3VyYXRpb24ucHRjRG9tYWluKyIvIit0aGlzLmNvbmZpZ3VyYXRpb24ucHRjU25hcHNob3RQYXRoKyIvcHRjLmpzIik6dC5zcmM9Imh0dHBzOi8vIit0aGlzLmNvbmZpZ3VyYXRpb24ucHRjRG9tYWluKyIvcHRjLyIrdGhpcy5jb25maWd1cmF0aW9uLnB0Y0d1aWQrIi5qcyIsdH0sdH0oKTshZnVuY3Rpb24odCl7dC5pc1JlY29yZGluZz1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cuQ2xpY2tUYWxlSXNSZWNvcmRpbmcmJndpbmRvdy5DbGlja1RhbGVJc1JlY29yZGluZygpfSx0LnN0b3BSZWNvcmRpbmc9ZnVuY3Rpb24oKXt3aW5kb3cuQ2xpY2tUYWxlU3RvcCYmd2luZG93LkNsaWNrVGFsZVN0b3AoKX0sdC50cmlnZ2VyTG9naWNhbFBhZ2VWaWV3PWZ1bmN0aW9uKHQpe3dpbmRvdy5DbGlja1RhbGVMb2dpY2FsV2l0aFVwbG9hZFBhZ2UmJndpbmRvdy5DbGlja1RhbGVMb2dpY2FsV2l0aFVwbG9hZFBhZ2UodCl9LHQuc2VuZFBhZ2VFdmVudD1mdW5jdGlvbih0KXt3aW5kb3cuQ2xpY2tUYWxlRXZlbnQmJndpbmRvdy5DbGlja1RhbGVFdmVudCh0KX0sdC5zZW5kRXZlbnRUcmlnZ2VyUmVjb3JkaW5nPWZ1bmN0aW9uKHQpe3dpbmRvdy5DbGlja1RhbGVFdmVudFRyaWdnZXImJndpbmRvdy5DbGlja1RhbGVFdmVudFRyaWdnZXIodCl9fShRbnx8KFFuPXt9KSk7dmFyICRuLHRpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixuLGksbyxzKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLnZpc2l0b3JTZXJ2aWNlPWUsdGhpcy5zZXNzaW9uU2VydmljZT1yLHRoaXMudXJsU2VydmljZT1uLHRoaXMuY29tbWFuZHNTZXJ2aWNlPWksdGhpcy5zdGFydERhdGFDb2xsZWN0aW9uQ2FsbGJhY2s9byx0aGlzLnBpaU1hc2tpbmdTZXJ2aWNlPXN9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuY2xpY2t0YWxlSW50ZWdyYXRpb25TZXJ2aWNlPW5ldyBabih0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy52aXNpdG9yU2VydmljZSx0aGlzLnNlc3Npb25TZXJ2aWNlLHRoaXMucGlpTWFza2luZ1NlcnZpY2UpLHRoaXMuY2xpY2t0YWxlSW50ZWdyYXRpb25TZXJ2aWNlLmluaXQoKSx0aGlzLmxvYWRQdGNGb3JEdWFsQ29sbGVjdGlvbigpLHRoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKFsiZ2V0U2Vzc2lvbkRhdGEiXSwoZnVuY3Rpb24oKXtyZXR1cm4gdC5jbGlja3RhbGVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2Vzc2lvbkRhdGEoKX0pKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihbInN0YXJ0RGF0YUNvbGxlY3Rpb24iXSwoZnVuY3Rpb24oKXt0LmNsaWNrdGFsZUludGVncmF0aW9uU2VydmljZS5zdGFydERhdGFDb2xsZWN0aW9uKHQuc3RhcnREYXRhQ29sbGVjdGlvbkNhbGxiYWNrKX0pKX0sdC5wcm90b3R5cGUubG9hZFB0Y0ZvckR1YWxDb2xsZWN0aW9uPWZ1bmN0aW9uKCl7S24odGhpcy5jb25maWd1cmF0aW9uKSYmdGhpcy5jbGlja3RhbGVJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENsaWNrdGFsZVB0YygpfSx0LnByb3RvdHlwZS5vbkFmdGVyTmF0dXJhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy5jb25maWd1cmF0aW9uLnRhZ0RlcGxveW1lbnRNb2RlIT09WW4uVGFnRGVwbG95bWVudE1vZGUuTG9hZENsaWNrdGFsZVB0Y3x8dGhpcy5zZXNzaW9uU2VydmljZS5pc1JlcGxheVJlY29yZGVkKCl8fHRoaXMuY2xpY2t0YWxlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDbGlja3RhbGVQdGMoKX0sdC5wcm90b3R5cGUub25BZnRlckFydGlmaWNpYWxQYWdlVmlldz1mdW5jdGlvbigpeyF0aGlzLnNlc3Npb25TZXJ2aWNlLmlzUmVwbGF5UmVjb3JkZWQoKSYmUW4uaXNSZWNvcmRpbmcoKSYmdGhpcy5jb25maWd1cmF0aW9uLnRhZ0RlcGxveW1lbnRNb2RlPT09WW4uVGFnRGVwbG95bWVudE1vZGUuTG9hZENsaWNrdGFsZVB0YyYmUW4udHJpZ2dlckxvZ2ljYWxQYWdlVmlldyh0aGlzLnVybFNlcnZpY2UuZ2V0VXJsKCkpfSx0LnByb3RvdHlwZS5vbkFmdGVyU2Vzc2lvblJlbmV3YWw9ZnVuY3Rpb24oKXshdGhpcy5zZXNzaW9uU2VydmljZS5pc1JlcGxheVJlY29yZGVkKCkmJlFuLmlzUmVjb3JkaW5nKCkmJlFuLnRyaWdnZXJMb2dpY2FsUGFnZVZpZXcodGhpcy51cmxTZXJ2aWNlLmdldFVybCgpKX0sdC5wcm90b3R5cGUub25PcHRvdXQ9ZnVuY3Rpb24oKXtRbi5pc1JlY29yZGluZygpJiZRbi5zdG9wUmVjb3JkaW5nKCl9LHR9KCksZWk9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSxyaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscixuLGkpe3ZhciBvPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gby5jb25maWd1cmF0aW9uPWUsby5wYWdlRXZlbnRSZXF1ZXN0PXIsby5jb21wcmVzc29yPW4sby5jdXN0b21FdmVudHNFbWl0dGVyPWksby5wYWdlRXZlbnRzUXVldWU9W10sby5ldHJRdWV1ZT1bXSxvfXJldHVybiBlaShlLHQpLGUucHJvdG90eXBlLm9uU3RhcnQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2NzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLnBhZ2VFdmVudHNRdWV1ZSwoZnVuY3Rpb24oZSl7cmV0dXJuIHQudHJhY2tQYWdlRXZlbnQoZSl9KSksdGhpcy5wYWdlRXZlbnRzUXVldWU9W10sY3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuZXRyUXVldWUsKGZ1bmN0aW9uKGUpe3JldHVybiB0LnRyYWNrRXZlbnRUcmlnZ2VyUmVjb3JkaW5nKGUpfSkpLHRoaXMuZXRyUXVldWU9W119LGUucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUudHJhY2tQYWdlRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5pc1N0YXJ0ZWQ/ZS5pc1ZhbGlkRXZlbnROYW1lKHQpJiYodGhpcy5jdXN0b21FdmVudHNFbWl0dGVyLmVtaXRQYWdlRXZlbnQodCksdGhpcy5wYWdlRXZlbnRSZXF1ZXN0UGFyYW1ldGVyPXtldmVudE5hbWU6dCxpc0VUUjohMX0sdGhpcy5zZW5kUGFnZUV2ZW50KCksdGhpcy5jb25maWd1cmF0aW9uLnRhZ0RlcGxveW1lbnRNb2RlPT09WW4uVGFnRGVwbG95bWVudE1vZGUuTG9hZENsaWNrdGFsZVB0YyYmUW4uc2VuZFBhZ2VFdmVudCh0KSk6Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMucGFnZUV2ZW50c1F1ZXVlLHQpfSxlLnByb3RvdHlwZS50cmFja0V2ZW50VHJpZ2dlclJlY29yZGluZz1mdW5jdGlvbih0KXt2YXIgcjt0aGlzLmlzU3RhcnRlZD9lLmlzVmFsaWRFdmVudE5hbWUodCkmJihLbihyPXRoaXMuY29uZmlndXJhdGlvbil8fHIudGFnRGVwbG95bWVudE1vZGU9PT1Zbi5UYWdEZXBsb3ltZW50TW9kZS5Mb2FkQ2xpY2t0YWxlUHRjKSYmKHRoaXMuY3VzdG9tRXZlbnRzRW1pdHRlci5lbWl0RXZlbnRUcmlnZ2VyUmVjb3JkaW5nKHQpLHRoaXMucGFnZUV2ZW50UmVxdWVzdFBhcmFtZXRlcj17ZXZlbnROYW1lOnQsaXNFVFI6ITB9LHRoaXMuc2VuZFBhZ2VFdmVudCgpLHRoaXMuY29uZmlndXJhdGlvbi50YWdEZXBsb3ltZW50TW9kZT09PVluLlRhZ0RlcGxveW1lbnRNb2RlLkxvYWRDbGlja3RhbGVQdGMmJlFuLnNlbmRFdmVudFRyaWdnZXJSZWNvcmRpbmcodCkpOmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmV0clF1ZXVlLHQpfSxlLnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybnt2YWx1ZTp0aGlzLmNvbXByZXNzb3IuY29tcHJlc3NTeW5jKHRoaXMucGFnZUV2ZW50UmVxdWVzdFBhcmFtZXRlci5ldmVudE5hbWUpLGlzRVRSOiIiKyEhdGhpcy5wYWdlRXZlbnRSZXF1ZXN0UGFyYW1ldGVyLmlzRVRSfX0sZS5wcm90b3R5cGUuc2VuZFBhZ2VFdmVudD1mdW5jdGlvbigpe3RoaXMucGFnZUV2ZW50UmVxdWVzdC5zZW5kKCl9LGUuaXNWYWxpZEV2ZW50TmFtZT1mdW5jdGlvbih0KXtyZXR1cm4gbXQodCkmJiEhY3NTdHJpbmcucHJvdG90eXBlLnRyaW0uY2FsbCh0KX0sZX0ocmUpLG5pPVsidHJhY2tQYWdlRXZlbnQiXSxpaT1bInRyYWNrRXZlbnRUcmlnZ2VyUmVjb3JkaW5nIl0sb2k9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyLG4saSl7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy5jb21tYW5kc1NlcnZpY2U9ZSx0aGlzLmNvbXByZXNzb3I9cix0aGlzLmJhc2ljUGFyYW1ldGVycz1uLHRoaXMuY3VzdG9tRXZlbnRzRW1pdHRlcj1pfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPW5ldyBCKHRoaXMuY29uZmlndXJhdGlvbi5nZXRUcmFja2VyVXJpKCksInBhZ2VFdmVudCIpO3RoaXMucGFnZUV2ZW50U2VydmljZT1uZXcgcmkodGhpcy5jb25maWd1cmF0aW9uLGUsdGhpcy5jb21wcmVzc29yLHRoaXMuY3VzdG9tRXZlbnRzRW1pdHRlciksZS5zZXRSZXF1ZXN0UGFyYW1ldGVyc1Byb3ZpZGVycyh0aGlzLnBhZ2VFdmVudFNlcnZpY2UsdGhpcy5iYXNpY1BhcmFtZXRlcnMpLHRoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKG5pLChmdW5jdGlvbihlKXt0LnBhZ2VFdmVudFNlcnZpY2UudHJhY2tQYWdlRXZlbnQoZSl9KSksdGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoaWksKGZ1bmN0aW9uKGUpe3QucGFnZUV2ZW50U2VydmljZS50cmFja0V2ZW50VHJpZ2dlclJlY29yZGluZyhlKX0pKX0sdC5wcm90b3R5cGUub25TdGFydFRyYWNraW5nPWZ1bmN0aW9uKCl7dGhpcy5wYWdlRXZlbnRTZXJ2aWNlLnN0YXJ0KCl9LHR9KCksc2k9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTAscj1hcmd1bWVudHMubGVuZ3RoO2U8cjtlKyspdCs9YXJndW1lbnRzW2VdLmxlbmd0aDt2YXIgbj1BcnJheSh0KSxpPTA7Zm9yKGU9MDtlPHI7ZSsrKWZvcih2YXIgbz1hcmd1bWVudHNbZV0scz0wLGE9by5sZW5ndGg7czxhO3MrKyxpKyspbltpXT1vW3NdO3JldHVybiBufSxhaT1tZSgpLGNpPVsiLmN0SGlkZGVuLCB0ZXh0YXJlYSJdLHVpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLnBpaU1hc2tTZWxlY3RvcnM9e1BJSVNlbGVjdG9yczpbXSxBdHRyaWJ1dGVzOltdfSxLbih0aGlzLmNvbmZpZ3VyYXRpb24pfHxjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5waWlNYXNrU2VsZWN0b3JzLlBJSVNlbGVjdG9ycywiW2RhdGEtY3MtbWFza10iKX1yZXR1cm4gdC5wcm90b3R5cGUuc2V0UElJU2VsZWN0b3JzPWZ1bmN0aW9uKHQpe3ZhciBlOyFLbih0aGlzLmNvbmZpZ3VyYXRpb24pJiZ0JiYoKG51bGw9PT0oZT10LlBJSVNlbGVjdG9ycyl8fHZvaWQgMD09PWU/dm9pZCAwOmUubGVuZ3RoKSYmKHRoaXMucGlpTWFza1NlbGVjdG9ycy5QSUlTZWxlY3RvcnM9c2kodGhpcy5waWlNYXNrU2VsZWN0b3JzLlBJSVNlbGVjdG9ycyx0LlBJSVNlbGVjdG9ycykpLHRoaXMucGlpTWFza1NlbGVjdG9ycy5BdHRyaWJ1dGVzPXQuQXR0cmlidXRlcyBpbnN0YW5jZW9mIEFycmF5P3NpKHQuQXR0cmlidXRlcyk6W10pfSx0LnByb3RvdHlwZS5pbml0Q1RQSUk9ZnVuY3Rpb24oKXt2YXIgdCxlLHI9dGhpczsobnVsbD09PShlPW51bGw9PT0odD1udWxsPT09d2luZG93fHx2b2lkIDA9PT13aW5kb3c/dm9pZCAwOndpbmRvdy5DbGlja1RhbGVTZXR0aW5ncyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuRE9NKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5QSUkpJiYodGhpcy5waWlNYXNrU2VsZWN0b3JzLlBJSVNlbGVjdG9ycz1zaShjaSx3aW5kb3cuQ2xpY2tUYWxlU2V0dGluZ3MuRE9NLlBJSS5UZXh0KSxjc0FycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh3aW5kb3cuQ2xpY2tUYWxlU2V0dGluZ3MuRE9NLlBJSS5BdHRyaWJ1dGVzLChmdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoci5waWlNYXNrU2VsZWN0b3JzLkF0dHJpYnV0ZXMse3NlbGVjdG9yOnQucnVsZSxhdHRyTmFtZTp0LmF0dHJ9KX0pKSl9LHQucHJvdG90eXBlLmlzRWxlbWVudE1hdGNoaW5nU2VsZWN0b3JzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChlLChmdW5jdGlvbihlKXtyZXR1cm4gYWkuY2FsbCh0LGUpfSkpfSx0LnByb3RvdHlwZS5pc0VsZW1lbnRNYXRjaGluZ0F0dHJpYnV0ZXM9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5zb21lLmNhbGwociwoZnVuY3Rpb24ocil7cmV0dXJuIHQuaGFzQXR0cmlidXRlKGUpJiZjc1N0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHIuYXR0ck5hbWUsZSk+LTEmJmFpLmNhbGwodCxyLnNlbGVjdG9yKX0pKX0sdC5wcm90b3R5cGUuY2hlY2tBdHRyaWJ1dGVNYXRjaD1mdW5jdGlvbih0LGUpe3JldHVybiAwIT09dGhpcy5waWlNYXNrU2VsZWN0b3JzLkF0dHJpYnV0ZXMubGVuZ3RoJiZ0aGlzLmlzRWxlbWVudE1hdGNoaW5nQXR0cmlidXRlcyh0LGUsdGhpcy5waWlNYXNrU2VsZWN0b3JzLkF0dHJpYnV0ZXMpfSx0LnByb3RvdHlwZS5jaGVja05vZGVNYXRjaD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pc0VsZW1lbnRNYXRjaGluZ1NlbGVjdG9ycyh0LHRoaXMucGlpTWFza1NlbGVjdG9ycy5QSUlTZWxlY3RvcnMpfSx0fSgpLHBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmNvbW1hbmRzU2VydmljZT10fXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoWyJsb2dTbmlwcGV0RXJyb3IiXSwoZnVuY3Rpb24odCxlKXttdCh0KSYmbXQoZSkmJmZ0LmVycm9yKGUsInNuaXBwZXQtIit0KX0pKX0sdH0oKSxsaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMuaWZyYW1lUGFyZW50VG9DaGlsZHJlbkNvbW11bmljYXRpb25TZXJ2aWNlPWUsdGhpcy5pZnJhbWVFdmVudHNFbWl0dGVyPXJ9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuaWZyYW1lUGFyZW50VG9DaGlsZHJlbkNvbW11bmljYXRpb25TZXJ2aWNlLm9uQ2hpbGRNZXNzYWdlKChmdW5jdGlvbihlLHIsbixpKXtyZXR1cm4gdC5pZnJhbWVFdmVudHNFbWl0dGVyLmVtaXRJZnJhbWVFdmVudChlLHIsbixpKX0pKX0sdC5wcm90b3R5cGUub25TdGFydFRyYWNraW5nPWZ1bmN0aW9uKCl7dGhpcy5jb25maWd1cmF0aW9uLmlmcmFtZXNUcmFja2luZyYmdGhpcy5pZnJhbWVQYXJlbnRUb0NoaWxkcmVuQ29tbXVuaWNhdGlvblNlcnZpY2Uuc3RhcnQoKX0sdC5wcm90b3R5cGUub25PcHRvdXQ9ZnVuY3Rpb24oKXt0aGlzLmNvbmZpZ3VyYXRpb24uaWZyYW1lc1RyYWNraW5nJiZ0aGlzLmlmcmFtZVBhcmVudFRvQ2hpbGRyZW5Db21tdW5pY2F0aW9uU2VydmljZS5zdG9wKCl9LHR9KCksaGk9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSxmaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5jb25maWd1cmF0aW9uPWUsci5pZnJhbWVzPVtdLHIubWVzc2FnZUhhbmRsZXI9e2JvdW5kRWxlbWVudDp3aW5kb3csdHlwZToibWVzc2FnZSIsbGlzdGVuZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHIubWVzc2FnZXNMaXN0ZW5lcih0KX19LHJ9cmV0dXJuIGhpKGUsdCksZS5wcm90b3R5cGUub25DaGlsZE1lc3NhZ2U9ZnVuY3Rpb24odCl7dGhpcy5vbkNoaWxkTWVzc2FnZUNhbGxiYWNrPXR9LGUucHJvdG90eXBlLm9uU3RhcnQ9ZnVuY3Rpb24oKXtGdCh0aGlzLm1lc3NhZ2VIYW5kbGVyLCExKSx0aGlzLmRpc2NvdmVyVmFsaWRJZnJhbWVzKCl9LGUucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbigpe3RoaXMuc2VuZFN0b3BNZXNzYWdlcygpLEd0KHRoaXMubWVzc2FnZUhhbmRsZXIsITEpfSxlLnByb3RvdHlwZS5kaXNjb3ZlclZhbGlkSWZyYW1lcz1mdW5jdGlvbigpe3RoaXMuaWZyYW1lcz10aGlzLmdldEFsbFZhbGlkSWZyYW1lcygpLHRoaXMuc2VuZERpc2NvdmVyeU1lc3NhZ2VzKCl9LGUucHJvdG90eXBlLmdldEFsbFZhbGlkSWZyYW1lcz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKEduLmZpbmRBbGxFbGVtZW50cygiaWZyYW1lIiksKGZ1bmN0aW9uKGUpe3JldHVybiB0LmlzSWZyYW1lVmFsaWQoZSl9KSl9LGUucHJvdG90eXBlLmlzSWZyYW1lVmFsaWQ9ZnVuY3Rpb24odCl7cmV0dXJuImNzLW5hdGl2ZS1mcmFtZSIhPT10LmlkJiYoIXQuc3JjfHxydChldCh0LnNyYyksdGhpcy5jb25maWd1cmF0aW9uLmhvc3RuYW1lcykpfSxlLnByb3RvdHlwZS5zZW5kRGlzY292ZXJ5TWVzc2FnZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2NzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmlmcmFtZXMsKGZ1bmN0aW9uKGUscil7ZS5jb250ZW50V2luZG93JiZvdC5zZW5kTWVzc2FnZShlLmNvbnRlbnRXaW5kb3csIioiLHQuYnVpbGREaXNjb3ZlcnlNZXNzYWdlKHIpKX0pKX0sZS5wcm90b3R5cGUuc2VuZFN0b3BNZXNzYWdlcz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7Y3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuaWZyYW1lcywoZnVuY3Rpb24oZSl7ZS5jb250ZW50V2luZG93JiZvdC5zZW5kTWVzc2FnZShlLmNvbnRlbnRXaW5kb3csIioiLHQuYnVpbGRTdG9wTWVzc2FnZSgpKX0pKX0sZS5wcm90b3R5cGUuYnVpbGREaXNjb3ZlcnlNZXNzYWdlPWZ1bmN0aW9uKHQpe3JldHVybiBvdC5idWlsZEJhc2VNZXNzYWdlKGl0LkRpc2NvdmVyeSxudC5QYXJlbnQsdGhpcy5jb25maWd1cmF0aW9uLnByb2plY3RJZCx0KX0sZS5wcm90b3R5cGUuYnVpbGRTdG9wTWVzc2FnZT1mdW5jdGlvbigpe3JldHVybiBvdC5idWlsZEJhc2VNZXNzYWdlKGl0LlN0b3AsbnQuUGFyZW50LHRoaXMuY29uZmlndXJhdGlvbi5wcm9qZWN0SWQpfSxlLnByb3RvdHlwZS5tZXNzYWdlc0xpc3RlbmVyPWZ1bmN0aW9uKHQpe2lmKG90LmlzTWVzc2FnZVZhbGlkKHQsbnQuQ2hpbGQsdGhpcy5jb25maWd1cmF0aW9uLnByb2plY3RJZCx0aGlzLmNvbmZpZ3VyYXRpb24uaG9zdG5hbWVzKSlpZih2b2lkIDAhPT10LmRhdGEuaWR8fHQuZGF0YS50eXBlIT09aXQuRGlzY292ZXJ5KWlmKHZ0KHQuZGF0YS5pZCkmJnZvaWQgMCE9PXRoaXMuaWZyYW1lc1t0LmRhdGEuaWRdfHx0LmRhdGEudHlwZT09PWl0LkNoaWxkTG9nTWVzc2FnZSl7dmFyIGU9dGhpcy5pZnJhbWVzW3QuZGF0YS5pZF0scj1iLmdldEVsZW1lbnRQYXRoKGUse2R5bmFtaWNJZFJlZ2V4OnRoaXMuY29uZmlndXJhdGlvbi5keW5hbWljSWRSZWdleH0pLG49dC5kYXRhLnR5cGUsaT10LmRhdGEuY29udGVudDt0aGlzLm9uQ2hpbGRNZXNzYWdlQ2FsbGJhY2soZSxyLG4saSl9ZWxzZSBmdC5lcnJvcigiUGFyZW50IHJlY2VpdmVkIGRhdGEgZnJvbSB1bmtub3duIGlmcmFtZSA6ICIrY3NKU09OLnN0cmluZ2lmeSh0LmRhdGEpKTtlbHNlIHRoaXMuZGlzY292ZXJWYWxpZElmcmFtZXMoKX0sZX0ocmUpLGRpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixuLGksbyxzLGEsYyx1LHAsbCxoLGYsZCx5LHYsbSxnLFMsRSx3LEMsUil7dmFyIGI9dGhpczt0aGlzLmJhc2ljUmVxdWVzdFBhcmFtZXRlcnM9dCx0aGlzLmNvbXByZXNzb3I9ZSx0aGlzLnZpc2l0b3JTZXJ2aWNlPXIsdGhpcy5zZXNzaW9uU2VydmljZT1uLHRoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlcj1pLHRoaXMuY29tbWFuZHNTZXJ2aWNlPW8sdGhpcy5jb21tYW5kc01vZHVsZT1zLHRoaXMuY29uZmlndXJhdGlvbj1hLHRoaXMub3B0b3V0TW9kdWxlPWMsdGhpcy5vcHRvdXRTZXJ2aWNlPXUsdGhpcy5jb25zZW50TW9kdWxlPXAsdGhpcy5jb25zZW50U2VydmljZT1sLHRoaXMucGlpPWgsdGhpcy5jb29raWVTZXJ2aWNlPWYsdGhpcy5jcm9zc0RvbWFpblNpbmdsZUlmcmFtZVNlcnZpY2U9ZCx0aGlzLnVybFNlcnZpY2U9eSx0aGlzLnByb2plY3RDb25maWd1cmF0aW9uTW9kdWxlPXYsdGhpcy5jdXN0b21FdmVudHNFbWl0dGVyPW0sdGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlcj1nLHRoaXMuamF2YVNjcmlwdEVycm9yc0Fub255bWl6ZXI9Uyx0aGlzLmFwaUVycm9yc1RyYWNrZXI9RSx0aGlzLmFwaUVycm9yc0Fub255bWl6ZXI9dyx0aGlzLmlmcmFtZUV2ZW50c0VtaXR0ZXI9Qyx0aGlzLmRlYnVnU2VydmljZT1SLHRoaXMuc3RhcnREYXRhQ29sbGVjdGlvbj1mdW5jdGlvbigpe2IucGFnZVZpZXdNb2R1bGUuc3RhcnQoKSxiLmxvYWRUcmFja2VyLnN0YXJ0KCl9fXJldHVybiB0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5vcHRvdXRNb2R1bGUuaW5pdCgpLHRoaXMub3B0b3V0U2VydmljZS5pbml0KCksIXRoaXMub3B0b3V0U2VydmljZS5pc0FjdGl2ZSgpKXt2YXIgZT1uZXcgQm4odGhpcy5zZXNzaW9uU2VydmljZSkscj1uZXcgX24oYix0aGlzLmNvbmZpZ3VyYXRpb24pLG49bmV3IEluKHIpLGk9bmV3IFNuKHRoaXMuY29uZmlndXJhdGlvbix0aGlzLnZpc2l0b3JTZXJ2aWNlLHRoaXMuc2Vzc2lvblNlcnZpY2UscixuLHRoaXMuY29tbWFuZHNTZXJ2aWNlLGUsdGhpcy5pZnJhbWVFdmVudHNFbWl0dGVyKSxvPW5ldyBUcih0aGlzLmNvbW1hbmRzU2VydmljZSx0aGlzLnNlc3Npb25TZXJ2aWNlLHRoaXMuY29uZmlndXJhdGlvbix0aGlzLmJhc2ljUmVxdWVzdFBhcmFtZXRlcnMsdGhpcy5jb21wcmVzc29yLHRoaXMucGlpKSxzPW5ldyBmcih0aGlzLnZpc2l0b3JTZXJ2aWNlLHRoaXMuc2Vzc2lvblNlcnZpY2UsdGhpcy5jb21tYW5kc1NlcnZpY2UpLGE9bmV3IERyKHRoaXMuY29uZmlndXJhdGlvbix0aGlzLnZpc2l0b3JTZXJ2aWNlLHRoaXMuc2Vzc2lvblNlcnZpY2UsdGhpcy5jb21tYW5kc1NlcnZpY2UsdGhpcy5waWksZSx0aGlzLnVybFNlcnZpY2UpLGM9bmV3IExuKHRoaXMucGlpLHRoaXMuY29va2llU2VydmljZSx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZSksdT1uZXcgeG4odGhpcy5jb21tYW5kc1NlcnZpY2UsYyx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZSx0aGlzLmNvb2tpZVNlcnZpY2UpO3RoaXMucGFnZVZpZXdNb2R1bGU9bmV3IE9uKHRoaXMuY29uZmlndXJhdGlvbix0aGlzLmNvbW1hbmRzU2VydmljZSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIsdGhpcy52aXNpdG9yU2VydmljZSx0aGlzLnNlc3Npb25TZXJ2aWNlLHRoaXMuY29uc2VudFNlcnZpY2UsYyx0aGlzLnBpaSx0aGlzLnVybFNlcnZpY2UpO3ZhciBwPW5ldyB6bih0aGlzLmNvb2tpZVNlcnZpY2UuZ2V0RG9tYWluKCksdGhpcy52aXNpdG9yU2VydmljZSx0aGlzLnNlc3Npb25TZXJ2aWNlLHRoaXMuY29tbWFuZHNTZXJ2aWNlKSxsPW5ldyB1aSh0aGlzLmNvbmZpZ3VyYXRpb24pLGg9bmV3IHRpKHRoaXMuY29uZmlndXJhdGlvbix0aGlzLnZpc2l0b3JTZXJ2aWNlLHRoaXMuc2Vzc2lvblNlcnZpY2UsdGhpcy51cmxTZXJ2aWNlLHRoaXMuY29tbWFuZHNTZXJ2aWNlLHRoaXMuc3RhcnREYXRhQ29sbGVjdGlvbixsKSxmPW5ldyBvaSh0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy5jb21tYW5kc1NlcnZpY2UsdGhpcy5jb21wcmVzc29yLHRoaXMuYmFzaWNSZXF1ZXN0UGFyYW1ldGVycyx0aGlzLmN1c3RvbUV2ZW50c0VtaXR0ZXIpLGQ9bmV3IHBpKHRoaXMuY29tbWFuZHNTZXJ2aWNlKSx5PW5ldyBmaSh0aGlzLmNvbmZpZ3VyYXRpb24pLHY9bmV3IGxpKHRoaXMuY29uZmlndXJhdGlvbix5LHRoaXMuaWZyYW1lRXZlbnRzRW1pdHRlcik7aWYodi5pbml0KCksdGhpcy5sb2FkVHJhY2tlcj1uZXcgVW4sdGhpcy5jb25zZW50TW9kdWxlLmluaXQoKSxzLmluaXQoKSxvLmluaXQoKSxhLmluaXQoKSx1LmluaXQoKSx0aGlzLnBhZ2VWaWV3TW9kdWxlLmluaXQoKSxwLmluaXQoKSxoLmluaXQoKSxmLmluaXQoKSx0aGlzLnByb2plY3RDb25maWd1cmF0aW9uTW9kdWxlLmluaXQoKSxkLmluaXQoKSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuYWRkTGlzdGVuZXJzKHAsdGhpcy5jb21tYW5kc01vZHVsZSxpLHRoaXMuY29uc2VudE1vZHVsZSxzLHUsdGhpcy5wYWdlVmlld01vZHVsZSxoLGYsbyx2KSx1ci5pc1N1cHBvcnRlZCgpJiZ0aGlzLmNvbXByZXNzb3IuaXNTdXBwb3J0ZWQoKSl7dmFyIG09bmV3IHVyKHRoaXMuc2Vzc2lvblNlcnZpY2UsdGhpcy5jb25maWd1cmF0aW9uLHRoaXMuY29tcHJlc3NvcixuLHRoaXMuY29uc2VudFNlcnZpY2UsdGhpcy5iYXNpY1JlcXVlc3RQYXJhbWV0ZXJzLHRoaXMuY29tbWFuZHNTZXJ2aWNlLHRoaXMucGlpLGUsdGhpcy51cmxTZXJ2aWNlLGwsdGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlcix0aGlzLmphdmFTY3JpcHRFcnJvcnNBbm9ueW1pemVyLHRoaXMuYXBpRXJyb3JzVHJhY2tlcix0aGlzLmFwaUVycm9yc0Fub255bWl6ZXIsdGhpcy5kZWJ1Z1NlcnZpY2UpO20uaW5pdCgpLHRoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlci5hZGRMaXN0ZW5lcnMobSksdGhpcy5jdXN0b21FdmVudHNFbWl0dGVyLmFkZExpc3RlbmVycyhtKX1pZih0aGlzLmNvbmZpZ3VyYXRpb24uZU1lcmNoYW5kaXNpbmdFbmFibGVkKXt2YXIgZz1uZXcgSm4odGhpcy5jb25maWd1cmF0aW9uLHRoaXMuY29tcHJlc3Nvcix0aGlzLmJhc2ljUmVxdWVzdFBhcmFtZXRlcnMsYyx0aGlzLnVybFNlcnZpY2UsdGhpcy5pZnJhbWVFdmVudHNFbWl0dGVyKTtnLmluaXQoKSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuYWRkTGlzdGVuZXJzKGcpfWkuaW5pdCgpLGUub25TZXNzaW9uRXhwaXJlZCgoZnVuY3Rpb24oKXt0LmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdEJlZm9yZVNlc3Npb25SZW5ld2FsKCksdC5kb1N0YXJ0KCEwKSx0LmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdEFmdGVyU2Vzc2lvblJlbmV3YWwoKX0pKSx0aGlzLmRvU3RhcnQoKX19LHQucHJvdG90eXBlLmRvU3RhcnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt2b2lkIDA9PT10JiYodD0hMSksdGhpcy5jb21tYW5kc1NlcnZpY2Uuc3RhcnQoKSx0aGlzLmxvYWRUcmFja2VyLm9uTG9hZCgoZnVuY3Rpb24oKXtlLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdFN0YXJ0VHJhY2tpbmcoKX0pKSxLbih0aGlzLmNvbmZpZ3VyYXRpb24pJiYhdHx8dGhpcy5zdGFydERhdGFDb2xsZWN0aW9uKCl9LHR9KCkseWk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyLG4saSxvLHMsYSl7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy52aXNpdG9yU2VydmljZT1lLHRoaXMuZXhjbHVzaW9uU2VydmljZT1yLHRoaXMub3V0ZGF0ZWRTdGF0ZT1uLHRoaXMuYWxsb3dTdWJkb21haW5zQ2hhbmdlPWksdGhpcy5jcm9zc0RvbWFpblNlcnZpY2U9byx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZT1zLHRoaXMuZm9yY2VJbmNsdXNpb25TZXJ2aWNlPWF9cmV0dXJuIHQucHJvdG90eXBlLmNvbXB1dGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLmNvbmZpZ3VyYXRpb24uY3Jvc3NEb21haW5UcmFja2luZz90aGlzLmNvbmZpZ3VyYXRpb24uY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVUcmFja2luZz90aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZS5zdGFydCgoZnVuY3Rpb24oKXtyZXR1cm4gZS5jb21wdXRlU3RhdGUodCl9KSk6dGhpcy5jcm9zc0RvbWFpblNlcnZpY2UuYXBwbHlVcFRvRGF0ZSgoZnVuY3Rpb24oKXtyZXR1cm4gZS5jb21wdXRlU3RhdGUodCl9KSk6dGhpcy5jb21wdXRlU3RhdGUodCl9LHQucHJvdG90eXBlLmNvbXB1dGVTdGF0ZT1mdW5jdGlvbih0KXt0aGlzLmFsbG93U3ViZG9tYWluc0NoYW5nZS5oYW5kbGUoKSx0aGlzLm91dGRhdGVkU3RhdGUuY2xlYXIoKSx0aGlzLmlzSW5jbHVkZWQoKT8odGhpcy5vdXRkYXRlZFN0YXRlLnJlc3RvcmVDbGVhcmVkVmlzaXRvcigpLHQoITApKToodGhpcy5leGNsdXNpb25TZXJ2aWNlLmV4Y2x1ZGUodGhpcy5jb25maWd1cmF0aW9uKSx0KCExKSl9LHQucHJvdG90eXBlLmlzSW5jbHVkZWQ9ZnVuY3Rpb24oKXt2YXIgdD1JKHRoaXMuY29uZmlndXJhdGlvbi5zYW1wbGVSYXRlKTtyZXR1cm4gdGhpcy5mb3JjZUluY2x1c2lvblNlcnZpY2UuaXNGb3JjZUluY2x1ZGVkKCl8fCF0aGlzLmV4Y2x1c2lvblNlcnZpY2UuaXNFeGNsdWRlZCgpJiZ0aGlzLnZpc2l0b3JTZXJ2aWNlLmRvZXNWaXNpdG9yRXhpc3QoKXx8IXRoaXMuZXhjbHVzaW9uU2VydmljZS5pc0V4Y2x1ZGVkKCkmJnR9LHR9KCk7IWZ1bmN0aW9uKHQpe3QuZ2VuZXJhdGU9ZnVuY3Rpb24oKXt2YXIgdD1uYXZpZ2F0b3IudXNlckFnZW50K25hdmlnYXRvci5sYW5ndWFnZStuYXZpZ2F0b3IucGxhdGZvcm0sZT1jc1N0cmluZy5wcm90b3R5cGUuc2xpY2UuY2FsbChmdW5jdGlvbih0KXtmb3IodmFyIGU9MCxyPTA7cjx0Lmxlbmd0aDtyKz0xKWU9Y3NTdHJpbmcucHJvdG90eXBlLmNoYXJDb2RlQXQuY2FsbCh0LHIpKyhlPDw2KSsoZTw8MTYpLWU7cmV0dXJuIE1hdGguYWJzKGUpfSh0KS50b1N0cmluZygxNiksLTQpLHI9KG5ldyBjc0RhdGUpLmdldFRpbWUoKSxuPWNzU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlLmNhbGwoInh4eHh4eHh4LWhoaGgtYXh4eC15eHh4LXh4eHh4eHh4eHh4eCIsL1t4eV0vZywoZnVuY3Rpb24odCl7dmFyIGU9KHIrMTYqTWF0aC5yYW5kb20oKSklMTZ8MDtyZXR1cm4gcj1NYXRoLmZsb29yKHIvMTYpLCgieCI9PT10P2U6NyZlfDgpLnRvU3RyaW5nKDE2KX0pKTtyZXR1cm4gY3NTdHJpbmcucHJvdG90eXBlLnJlcGxhY2UuY2FsbChuLCJoaGhoIixlKX19KCRufHwoJG49e30pKTt2YXIgdmksbWk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyLG4pe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMuc2Vzc2lvblNlcnZpY2U9ZSx0aGlzLmNvb2tpZVNlcnZpY2U9cix0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZT1ufXJldHVybiB0LnByb3RvdHlwZS5jcmVhdGVPclVwZGF0ZVZpc2l0b3I9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFZpc2l0b3IoKTtudWxsPT09dD8odD10aGlzLmNyZWF0ZVZpc2l0b3IoKSx0aGlzLnNlc3Npb25TZXJ2aWNlLnJlbW92ZUN1cnJlbnRTZXNzaW9uKCkpOnQ9dGhpcy5tYW5hZ2VTYW1lU2l0ZUZvclZpc2l0b3IodCksdGhpcy51cGRhdGVWaXNpdG9yKHQpLHRoaXMuc2V0VmlzaXRvcih0KX0sdC5wcm90b3R5cGUuY3JlYXRlVmlzaXRvcj1mdW5jdGlvbigpe3JldHVybntpZDokbi5nZW5lcmF0ZSgpLHZpc2l0c0NvdW50OjAsYXBwbGllZFRyYWNraW5nRHJhdzp0aGlzLmNvbmZpZ3VyYXRpb24ubGFzdFRyYWNraW5nRHJhdyxjcmVhdGlvblRpbWVzdGFtcDprKCksbGFzdFZpc2l0VGltZXN0YW1wOjAsaGl0VGltZXN0YW1wOjAsZXhwaXJlczpELm5vdygpK3RoaXMuY29uZmlndXJhdGlvbi52aXNpdG9yQ29va2llVGltZW91dCxzYW1lU2l0ZTp0aGlzLmNvb2tpZVNlcnZpY2UuZ2V0U2FtZVNpdGVGbGFnKCksc2VjdXJlZDp0aGlzLmNvb2tpZVNlcnZpY2UuZ2V0U2VjdXJlRmxhZygpfX0sdC5wcm90b3R5cGUudXBkYXRlVmlzaXRvcj1mdW5jdGlvbih0KXt2YXIgZT1rKCk7dGhpcy5zZXNzaW9uU2VydmljZS5kb2VzU2Vzc2lvbkV4aXN0KCl8fCh0LnZpc2l0c0NvdW50Kz0xLHQubGFzdFZpc2l0VGltZXN0YW1wPWUpLHQuaGl0VGltZXN0YW1wPWUsdC5hcHBsaWVkVHJhY2tpbmdEcmF3PXRoaXMuY29uZmlndXJhdGlvbi5sYXN0VHJhY2tpbmdEcmF3fSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0VmlzaXRvcigpO3JldHVybiB0P3t1dTp0LmlkLHNuOiIiK3QudmlzaXRzQ291bnQsbHY6IiIrdC5sYXN0VmlzaXRUaW1lc3RhbXAsbGhkOiIiK3QubGFzdFZpc2l0VGltZXN0YW1wLGhkOiIiK3QuaGl0VGltZXN0YW1wfTp7fX0sdC5wcm90b3R5cGUuZ2V0VmlzaXRvcj1mdW5jdGlvbigpe3JldHVybiBQdC5nZXQodGhpcy5jb29raWVTZXJ2aWNlKX0sdC5wcm90b3R5cGUuc2V0VmlzaXRvcj1mdW5jdGlvbih0KXt0aGlzLnNldENvb2tpZUZsYWdzRnJvbUNvb2tpZVNlcnZpY2UodCksUHQuc2V0KHQsdGhpcy5jb29raWVTZXJ2aWNlLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlKX0sdC5wcm90b3R5cGUuZG9lc1Zpc2l0b3JFeGlzdD1mdW5jdGlvbigpe3JldHVybiBudWxsIT09UHQuZ2V0KHRoaXMuY29va2llU2VydmljZSl9LHQucHJvdG90eXBlLnJlbW92ZUN1cnJlbnRWaXNpdG9yPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVWaXNpdG9yKHRoaXMuY29va2llU2VydmljZS5nZXREb21haW4oKSl9LHQucHJvdG90eXBlLnJlbW92ZVZpc2l0b3I9ZnVuY3Rpb24odCl7dmFyIGU9dHx8dGhpcy5jb29raWVTZXJ2aWNlLmdldERvbWFpbigpO1B0LnJlbW92ZShlLHRoaXMuY29va2llU2VydmljZSx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZSl9LHQucHJvdG90eXBlLnZpc2l0b3JIYXNTYW1lU2l0ZURlZmluZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIFN0KHQuc2FtZVNpdGUpJiZTdCh0LnNlY3VyZWQpfSx0LnByb3RvdHlwZS5zZXRDb29raWVGbGFnc0Zyb21Db29raWVTZXJ2aWNlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnNhbWVTaXRlPXRoaXMuY29va2llU2VydmljZS5nZXRTYW1lU2l0ZUZsYWcoKSx0LnNlY3VyZWQ9dGhpcy5jb29raWVTZXJ2aWNlLmdldFNlY3VyZUZsYWcoKSx0fSx0LnByb3RvdHlwZS5tYW5hZ2VTYW1lU2l0ZUZvclZpc2l0b3I9ZnVuY3Rpb24odCl7aWYodGhpcy5jb25maWd1cmF0aW9uLmNyb3NzRG9tYWluVHJhY2tpbmcmJiF0aGlzLnZpc2l0b3JIYXNTYW1lU2l0ZURlZmluZWQodCkpe3ZhciBlPXRoaXMuY3JlYXRlVmlzaXRvcigpO3JldHVybiB0aGlzLnNlc3Npb25TZXJ2aWNlLnJlbW92ZUN1cnJlbnRTZXNzaW9uKCksZX1yZXR1cm4gdH0sdH0oKSxnaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLmNvbXByZXNzb3I9ZX1yZXR1cm4gdC5wcm90b3R5cGUuaXNDb21wcmVzc2lvblN1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXByZXNzb3IuaXNTdXBwb3J0ZWQoKX0sdH0oKSxTaT1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpLEVpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyLG4saSl7dmFyIG89dC5jYWxsKHRoaXMsZSxyKXx8dGhpcztyZXR1cm4gby5jb25maWd1cmF0aW9uPWUsby5jb21wcmVzc29yPXIsby5mb3JjZUluY2x1c2lvblNlcnZpY2U9bixvLnVybFNlcnZpY2U9aSxvfXJldHVybiBTaShlLHQpLGUucHJvdG90eXBlLnNhbml0aXplU2Vzc2lvblJlY29yZGluZ1N0YXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0fSxlLnByb3RvdHlwZS5jb21wdXRlUmVjb3JkaW5nU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0NvbXByZXNzaW9uU3VwcG9ydGVkKCkmJih0aGlzLmZvcmNlSW5jbHVzaW9uU2VydmljZS5pc0ZvcmNlTGVnYWN5UmVwbGF5UmVjb3JkZWQoKXx8TigpPHRoaXMuY29uZmlndXJhdGlvbi5yZXBsYXlSZWNvcmRpbmdSYXRlJiZ1ci5pc1N1cHBvcnRlZCgpKT9XdC5SRVBMQVlfUkVDT1JESU5HX0VOQUJMRUQ6V3QuUkVQTEFZX1JFQ09SRElOR19ESVNBQkxFRH0sZS5wcm90b3R5cGUuaXNSZXBsYXlSZWNvcmRlZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5yZWNvcmRpbmdTdGF0ZT09PVd0LlJFUExBWV9SRUNPUkRJTkdfRU5BQkxFRHx8dGhpcy5jb21wdXRlVHJpZ2dlclNlc3Npb25SZXBsYXlTdGF0dXModCl9LGUucHJvdG90eXBlLmNvbXB1dGVUcmlnZ2VyU2Vzc2lvblJlcGxheVN0YXR1cz1mdW5jdGlvbih0KXtpZih0aGlzLmNvbmZpZ3VyYXRpb24udHJpZ2dlclNlc3Npb25SZXBsYXlFbmFibGVkJiZ0aGlzLmNvbmZpZ3VyYXRpb24udHJpZ2dlclNlc3Npb25SZXBsYXlSZWdleCYmdC5yZWNvcmRpbmdTdGF0ZSE9PVd0LlJFUExBWV9SRUNPUkRJTkdfRU5BQkxFRCl7dmFyIGU9dGhpcy51cmxTZXJ2aWNlLmdldFVybCgpO3JldHVybiB0aGlzLmNvbmZpZ3VyYXRpb24udHJpZ2dlclNlc3Npb25SZXBsYXlSZWdleC50ZXN0KGUpfXJldHVybiExfSxlLnByb3RvdHlwZS5nZXREaXNhYmxlZFJlY29yZGluZ1N0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIFd0LlJFUExBWV9SRUNPUkRJTkdfRElTQUJMRUR9LGUucHJvdG90eXBlLnNldFZpc2l0b3JTZXJ2aWNlPWZ1bmN0aW9uKHQpe30sZX0oZ2kpLHdpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7dGhpcy5zZXNzaW9uU3RvcmFnZT10LHRoaXMuY29va2llU2VydmljZT1lLHRoaXMucmVjb3JkaW5nU3RhdGVTdHJhdGVneT1yLHRoaXMudHJpZ2dlclNlc3Npb25SZXBsYXlPbmdvaW5nPSExLHRoaXMuZXh0ZW5kZWRTZXNzaW9uVGltZW91dElkPW51bGwsdGhpcy5zZXNzaW9uRXh0ZW5zaW9uQ291bnQ9MH1yZXR1cm4gdC5wcm90b3R5cGUuc2V0RHluYW1pY1ZhcmlhYmxlc1NlcnZpY2U9ZnVuY3Rpb24odCl7dGhpcy5keW5hbWljVmFyaWFibGVzU2VydmljZT10fSx0LnByb3RvdHlwZS5jcmVhdGVPclVwZGF0ZVNlc3Npb249ZnVuY3Rpb24oKXt0aGlzLnN0b3BTZXNzaW9uRXh0ZW5zaW9uKCksdGhpcy5iZWdpblNlc3Npb249RC5ub3coKSx0aGlzLnNlc3Npb25FeHRlbnNpb25Db3VudD0wO3ZhciB0PXRoaXMuZ2V0U2Vzc2lvbldpdGhvdXRDYWNoZSgpO251bGw9PT10Pyh0PXRoaXMuYnVpbGRTZXNzaW9uT2JqZWN0KCksdGhpcy5pbmNyZW1lbnRTZXNzaW9uUGFnZU51bWJlcih0KSx0LnJlY29yZGluZ1N0YXRlPXRoaXMucmVjb3JkaW5nU3RhdGVTdHJhdGVneS5jb21wdXRlUmVjb3JkaW5nU3RhdGUodCkpOih0PXRoaXMucmVjb3JkaW5nU3RhdGVTdHJhdGVneS5zYW5pdGl6ZVNlc3Npb25SZWNvcmRpbmdTdGF0ZSh0KSx0aGlzLmluY3JlbWVudFNlc3Npb25QYWdlTnVtYmVyKHQpKSx0aGlzLnNldFNlc3Npb24odCksdGhpcy5zZXRUcmlnZ2VyU2Vzc2lvblJlcGxheVN0YXR1cyh0KX0sdC5wcm90b3R5cGUuYnVpbGRTZXNzaW9uT2JqZWN0PWZ1bmN0aW9uKCl7cmV0dXJue3BhZ2VOdW1iZXI6MCxyZWNvcmRpbmdTdGF0ZTp0aGlzLnJlY29yZGluZ1N0YXRlU3RyYXRlZ3kuZ2V0RGlzYWJsZWRSZWNvcmRpbmdTdGF0ZSgpfX0sdC5wcm90b3R5cGUuc2V0VHJpZ2dlclNlc3Npb25SZXBsYXlTdGF0dXM9ZnVuY3Rpb24odCl7dGhpcy5yZWNvcmRpbmdTdGF0ZVN0cmF0ZWd5IGluc3RhbmNlb2YgRWk/dGhpcy50cmlnZ2VyU2Vzc2lvblJlcGxheU9uZ29pbmc9dGhpcy5yZWNvcmRpbmdTdGF0ZVN0cmF0ZWd5LmNvbXB1dGVUcmlnZ2VyU2Vzc2lvblJlcGxheVN0YXR1cyh0KTp0aGlzLnRyaWdnZXJTZXNzaW9uUmVwbGF5T25nb2luZz0hMX0sdC5wcm90b3R5cGUuY3JlYXRlRXh0ZW5kZWRTZXNzaW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5idWlsZFNlc3Npb25PYmplY3QoKTtyZXR1cm4gdGhpcy5pbmNyZW1lbnRTZXNzaW9uUGFnZU51bWJlcih0KSx0LnJlY29yZGluZ1N0YXRlPXRoaXMucmVjb3JkaW5nU3RhdGVTdHJhdGVneS5jb21wdXRlUmVjb3JkaW5nU3RhdGUodCksdGhpcy5zZXRUcmlnZ2VyU2Vzc2lvblJlcGxheVN0YXR1cyh0KSx0fSx0LnByb3RvdHlwZS5pbmNyZW1lbnRTZXNzaW9uUGFnZU51bWJlcj1mdW5jdGlvbih0KXt0LnBhZ2VOdW1iZXIrPTF9LHQucHJvdG90eXBlLmlzUmVwbGF5UmVjb3JkZWQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNlc3Npb24oKTtyZXR1cm4hIXQmJnRoaXMucmVjb3JkaW5nU3RhdGVTdHJhdGVneS5pc1JlcGxheVJlY29yZGVkKHQpfSx0LnByb3RvdHlwZS5yZW1vdmVDdXJyZW50U2Vzc2lvbj1mdW5jdGlvbigpe3RoaXMucmVtb3ZlU2Vzc2lvbih0aGlzLmNvb2tpZVNlcnZpY2UuZ2V0RG9tYWluKCkpfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3ZhciB0PXt9LGU9dGhpcy5nZXRTZXNzaW9uKCk7cmV0dXJuIG51bGwhPT1lJiYodC5wbj0iIitlLnBhZ2VOdW1iZXIsdGhpcy5yZWNvcmRpbmdTdGF0ZVN0cmF0ZWd5IGluc3RhbmNlb2YgRWkmJih0LnJlPXRoaXMudHJpZ2dlclNlc3Npb25SZXBsYXlPbmdvaW5nP1d0LlRSSUdHRVJfUkVQTEFZX1JFQ09SRElOR19FTkFCTEVEOmUucmVjb3JkaW5nU3RhdGUpKSx0fSx0LnByb3RvdHlwZS5nZXRTZXNzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0KCl9LHQucHJvdG90eXBlLmdldFNlc3Npb25XaXRob3V0Q2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXNzaW9uU3RvcmFnZS5nZXQoITApfSx0LnByb3RvdHlwZS5kb2VzU2Vzc2lvbkV4aXN0PWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLnNlc3Npb25TdG9yYWdlLmdldCgpfSx0LnByb3RvdHlwZS5zZXRTZXNzaW9uPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MThlNSksdGhpcy5zZXNzaW9uU3RvcmFnZS5zZXQodCxlKX0sdC5wcm90b3R5cGUucmVtb3ZlU2Vzc2lvbj1mdW5jdGlvbih0KXt0aGlzLnNlc3Npb25TdG9yYWdlLnJlbW92ZSh0KX0sdC5wcm90b3R5cGUuZ2V0UmVjb3JkaW5nU3RhdGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNlc3Npb24oKTtyZXR1cm4gbnVsbCE9PXQ/dC5yZWNvcmRpbmdTdGF0ZTpudWxsfSx0LnByb3RvdHlwZS51cGRhdGVSZWNvcmRpbmdTdGF0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFNlc3Npb24oKTtudWxsIT09ZSYmKGUucmVjb3JkaW5nU3RhdGU9dCx0aGlzLnNldFNlc3Npb24oZSkpfSx0LnByb3RvdHlwZS5oYXNWYWxpZFNlc3Npb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNlc3Npb25TdG9yYWdlLmdldFJhd1Nlc3Npb24oKTtyZXR1cm4gdGhpcy5zZXNzaW9uU3RvcmFnZS5pc1ZhbGlkKHQpfSx0LnByb3RvdHlwZS5leHRlbmRTZXNzaW9uUGVyaW9kaWNhbGx5PWZ1bmN0aW9uKCl7dGhpcy5leHRlbmRlZFNlc3Npb25UaW1lb3V0SWR8fHRoaXMuZXh0ZW5kU2Vzc2lvbigpfSx0LnByb3RvdHlwZS5leHRlbmRTZXNzaW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5oYXNSZWFjaGVkTWF4RHVyYXRpb24oKSl0aGlzLnN0b3BTZXNzaW9uRXh0ZW5zaW9uKCk7ZWxzZXt2YXIgdD10aGlzLmdldFNlc3Npb24oKTtudWxsPT09dCYmKHQ9dGhpcy5jcmVhdGVFeHRlbmRlZFNlc3Npb24oKSksdGhpcy5zZXRTZXNzaW9uKHQsMTc0ZTQpLHRoaXMuc2VuZER5bmFtaWNWYXIoKSx0aGlzLnNjaGVkdWxlTmV4dFNlc3Npb25VcGRhdGUoKX19LHQucHJvdG90eXBlLnNjaGVkdWxlTmV4dFNlc3Npb25VcGRhdGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuZXh0ZW5kZWRTZXNzaW9uVGltZW91dElkPXdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3QuZXh0ZW5kU2Vzc2lvbigpfSksMTc0ZTQpfSx0LnByb3RvdHlwZS5oYXNSZWFjaGVkTWF4RHVyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gMTQzNGU0LShELm5vdygpKzE4ZTUtdGhpcy5iZWdpblNlc3Npb24pPDB9LHQucHJvdG90eXBlLnN0b3BTZXNzaW9uRXh0ZW5zaW9uPWZ1bmN0aW9uKCl7dGhpcy5leHRlbmRlZFNlc3Npb25UaW1lb3V0SWQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZXh0ZW5kZWRTZXNzaW9uVGltZW91dElkKSx0aGlzLmV4dGVuZGVkU2Vzc2lvblRpbWVvdXRJZD1udWxsKX0sdC5wcm90b3R5cGUuc2VuZER5bmFtaWNWYXI9ZnVuY3Rpb24oKXt0aGlzLnNlc3Npb25FeHRlbnNpb25Db3VudCs9MSx0aGlzLmR5bmFtaWNWYXJpYWJsZXNTZXJ2aWNlLnRyYWNrRHluYW1pY1ZhcmlhYmxlKCJzZXNzaW9uX2V4cGlyeV91cGRhdGUiLHRoaXMuc2Vzc2lvbkV4dGVuc2lvbkNvdW50KX0sdH0oKSxDaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMudmlzaXRvclNlcnZpY2U9ZSx0aGlzLmV4Y2x1c2lvblNlcnZpY2U9cn1yZXR1cm4gdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmlzVmlzaXRvck91dGRhdGVkKCkmJih0aGlzLnNhdmVkVmlzaXRvcj10aGlzLnZpc2l0b3JTZXJ2aWNlLmdldFZpc2l0b3IoKSx0aGlzLnZpc2l0b3JTZXJ2aWNlLnJlbW92ZVZpc2l0b3IoKSksdGhpcy5pc0V4Y2x1c2lvbk91dGRhdGVkKCkmJnRoaXMuZXhjbHVzaW9uU2VydmljZS5yZW1vdmVFeGNsdXNpb24oKX0sdC5wcm90b3R5cGUuaXNWaXNpdG9yT3V0ZGF0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aXNpdG9yU2VydmljZS5kb2VzVmlzaXRvckV4aXN0KCkmJnRoaXMudmlzaXRvclNlcnZpY2UuZ2V0VmlzaXRvcigpLmFwcGxpZWRUcmFja2luZ0RyYXchPT10aGlzLmNvbmZpZ3VyYXRpb24ubGFzdFRyYWNraW5nRHJhd30sdC5wcm90b3R5cGUuaXNFeGNsdXNpb25PdXRkYXRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmV4Y2x1c2lvblNlcnZpY2UuZ2V0QXBwbGllZFRyYWNraW5nRHJhdygpIT09dGhpcy5jb25maWd1cmF0aW9uLmxhc3RUcmFja2luZ0RyYXd9LHQucHJvdG90eXBlLnJlc3RvcmVDbGVhcmVkVmlzaXRvcj1mdW5jdGlvbigpe3RoaXMuc2F2ZWRWaXNpdG9yJiZ0aGlzLnZpc2l0b3JTZXJ2aWNlLnNldFZpc2l0b3IodGhpcy5zYXZlZFZpc2l0b3IpfSx0fSgpLFJpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixuKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLmNvb2tpZVNlcnZpY2U9ZSx0aGlzLnZpc2l0b3JTZXJ2aWNlPXIsdGhpcy5zZXNzaW9uU2VydmljZT1ufXJldHVybiB0LnByb3RvdHlwZS5oYW5kbGU9ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZVZpc2l0b3IoKSx0aGlzLmhhbmRsZVNlc3Npb24oKX0sdC5wcm90b3R5cGUuaGFuZGxlVmlzaXRvcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMudmlzaXRvclNlcnZpY2UuZ2V0VmlzaXRvcigpO3QmJih0aGlzLmNvbmZpZ3VyYXRpb24uYWxsb3dTdWJkb21haW5zP3RoaXMudmlzaXRvclNlcnZpY2UucmVtb3ZlVmlzaXRvcihSdC5DVVJSRU5UX0RPTUFJTik6dGhpcy52aXNpdG9yU2VydmljZS5yZW1vdmVWaXNpdG9yKHRoaXMuY29va2llU2VydmljZS5nZXRSb290RG9tYWluKCkpLHRoaXMudmlzaXRvclNlcnZpY2Uuc2V0VmlzaXRvcih0KSl9LHQucHJvdG90eXBlLmhhbmRsZVNlc3Npb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNlc3Npb25TZXJ2aWNlLmdldFNlc3Npb25XaXRob3V0Q2FjaGUoKTt0JiYodGhpcy5jb25maWd1cmF0aW9uLmFsbG93U3ViZG9tYWlucz90aGlzLnNlc3Npb25TZXJ2aWNlLnJlbW92ZVNlc3Npb24oUnQuQ1VSUkVOVF9ET01BSU4pOnRoaXMuc2Vzc2lvblNlcnZpY2UucmVtb3ZlU2Vzc2lvbih0aGlzLmNvb2tpZVNlcnZpY2UuZ2V0Um9vdERvbWFpbigpKSx0aGlzLnNlc3Npb25TZXJ2aWNlLnNldFNlc3Npb24odCkpfSx0fSgpLGJpPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wLHI9YXJndW1lbnRzLmxlbmd0aDtlPHI7ZSsrKXQrPWFyZ3VtZW50c1tlXS5sZW5ndGg7dmFyIG49QXJyYXkodCksaT0wO2ZvcihlPTA7ZTxyO2UrKylmb3IodmFyIG89YXJndW1lbnRzW2VdLHM9MCxhPW8ubGVuZ3RoO3M8YTtzKyssaSsrKW5baV09b1tzXTtyZXR1cm4gbn0sVGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5saXN0ZW5lcnM9W119cmV0dXJuIHQucHJvdG90eXBlLmFkZExpc3RlbmVycz1mdW5jdGlvbigpe2Zvcih2YXIgdCxlPVtdLHI9MDtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKWVbcl09YXJndW1lbnRzW3JdOyh0PWNzQXJyYXkucHJvdG90eXBlLnB1c2gpLmNhbGwuYXBwbHkodCxiaShbdGhpcy5saXN0ZW5lcnNdLGUpKX0sdH0oKSxBaT1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpLGtpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBBaShlLHQpLGUucHJvdG90eXBlLmVtaXRCZWZvcmVOYXR1cmFsUGFnZVZpZXc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMubGlzdGVuZXJzO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgcj1lW3RdO3Iub25CZWZvcmVOYXR1cmFsUGFnZVZpZXcmJnIub25CZWZvcmVOYXR1cmFsUGFnZVZpZXcoKX19LGUucHJvdG90eXBlLmVtaXRBZnRlck5hdHVyYWxQYWdlVmlldz1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5saXN0ZW5lcnM7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07ci5vbkFmdGVyTmF0dXJhbFBhZ2VWaWV3JiZyLm9uQWZ0ZXJOYXR1cmFsUGFnZVZpZXcoKX19LGUucHJvdG90eXBlLmVtaXRJbml0VHJhY2tpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMubGlzdGVuZXJzO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgcj1lW3RdO3Iub25Jbml0VHJhY2tpbmcmJnIub25Jbml0VHJhY2tpbmcoKX19LGUucHJvdG90eXBlLmVtaXRTdGFydFRyYWNraW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLmxpc3RlbmVyczt0PGUubGVuZ3RoO3QrKyl7dmFyIHI9ZVt0XTtyLm9uU3RhcnRUcmFja2luZyYmci5vblN0YXJ0VHJhY2tpbmcoKX19LGUucHJvdG90eXBlLmVtaXRCZWZvcmVBcnRpZmljaWFsUGFnZVZpZXc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMubGlzdGVuZXJzO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgcj1lW3RdO3Iub25CZWZvcmVBcnRpZmljaWFsUGFnZVZpZXcmJnIub25CZWZvcmVBcnRpZmljaWFsUGFnZVZpZXcoKX19LGUucHJvdG90eXBlLmVtaXRBZnRlckFydGlmaWNpYWxQYWdlVmlldz1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5saXN0ZW5lcnM7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07ci5vbkFmdGVyQXJ0aWZpY2lhbFBhZ2VWaWV3JiZyLm9uQWZ0ZXJBcnRpZmljaWFsUGFnZVZpZXcoKX19LGUucHJvdG90eXBlLmVtaXRCZWZvcmVTZXNzaW9uUmVuZXdhbD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5saXN0ZW5lcnM7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07ci5vbkJlZm9yZVNlc3Npb25SZW5ld2FsJiZyLm9uQmVmb3JlU2Vzc2lvblJlbmV3YWwoKX19LGUucHJvdG90eXBlLmVtaXRBZnRlclNlc3Npb25SZW5ld2FsPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLmxpc3RlbmVyczt0PGUubGVuZ3RoO3QrKyl7dmFyIHI9ZVt0XTtyLm9uQWZ0ZXJTZXNzaW9uUmVuZXdhbCYmci5vbkFmdGVyU2Vzc2lvblJlbmV3YWwoKX19LGUucHJvdG90eXBlLmVtaXRPcHRvdXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMubGlzdGVuZXJzO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgcj1lW3RdO3Iub25PcHRvdXQmJnIub25PcHRvdXQoKX19LGUucHJvdG90eXBlLmVtaXRDb25zZW50R3JhbnRlZD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5saXN0ZW5lcnM7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07ci5vbkNvbnNlbnRHcmFudGVkJiZyLm9uQ29uc2VudEdyYW50ZWQoKX19LGUucHJvdG90eXBlLmVtaXRDb25zZW50V2l0aGRyYXduPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLmxpc3RlbmVyczt0PGUubGVuZ3RoO3QrKyl7dmFyIHI9ZVt0XTtyLm9uQ29uc2VudFdpdGhkcmF3biYmci5vbkNvbnNlbnRXaXRoZHJhd24oKX19LGUucHJvdG90eXBlLmVtaXRSZWNvcmRpbmdTdGF0ZUNoYW5nZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxyPXRoaXMubGlzdGVuZXJzO2U8ci5sZW5ndGg7ZSsrKXt2YXIgbj1yW2VdO24ub25SZWNvcmRpbmdTdGF0ZUNoYW5nZSYmbi5vblJlY29yZGluZ1N0YXRlQ2hhbmdlKHQpfX0sZX0oVGkpOyFmdW5jdGlvbih0KXt0W3QuTk9UX1JFUVVJUkVEPTBdPSJOT1RfUkVRVUlSRUQiLHRbdC5OT1RfRVhQUkVTU0VEPTFdPSJOT1RfRVhQUkVTU0VEIix0W3QuR1JBTlRFRD0yXT0iR1JBTlRFRCIsdFt0LldJVEhEUkFXTj0zXT0iV0lUSERSQVdOIn0odml8fCh2aT17fSkpO3ZhciBQaSxPaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5jb29raWVTZXJ2aWNlPXR9cmV0dXJuIHQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29va2llU2VydmljZS5nZXQoIl9jc19jIik7cmV0dXJuIG51bGw9PT10P3Q6TnVtYmVyKHQpfSx0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5jb29raWVTZXJ2aWNlLnNldCgiX2NzX2MiLGNzU3RyaW5nKHQpLDM0MTY0ZTYpfSx0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7dGhpcy5jb29raWVTZXJ2aWNlLmRlbGV0ZSgiX2NzX2MiLHQpfSx0fSgpLF9pPVsidHJhY2tDb25zZW50R3JhbnRlZCJdLElpPVsidHJhY2tDb25zZW50V2l0aGRyYXduIl0sTmk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5jb21tYW5kc1NlcnZpY2U9dCx0aGlzLnNlcnZpY2U9ZX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuc2VydmljZS5oYW5kbGVTdWJkb21haW5DaGFuZ2UoKSx0aGlzLnNlcnZpY2Uuc2V0SW5pdGlhbENvbnNlbnQoKSx0aGlzLnJlZ2lzdGVyQ29tbWFuZHMoKX0sdC5wcm90b3R5cGUucmVnaXN0ZXJDb21tYW5kcz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoX2ksKGZ1bmN0aW9uKCl7dC5zZXJ2aWNlLmdyYW50Q29uc2VudCgpfSkpLHRoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKElpLChmdW5jdGlvbigpe3Quc2VydmljZS53aXRoZHJhd0NvbnNlbnQoKX0pKX0sdC5wcm90b3R5cGUub25PcHRvdXQ9ZnVuY3Rpb24oKXt0aGlzLnNlcnZpY2UucmVtb3ZlQ3VycmVudENvbnNlbnQoKX0sdH0oKSxNaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsbil7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy5zdG9yYWdlPWUsdGhpcy5saWZlQ3ljbGVFdmVudHNFbWl0dGVyPXIsdGhpcy5jb29raWVTZXJ2aWNlPW59cmV0dXJuIHQucHJvdG90eXBlLnNldEluaXRpYWxDb25zZW50PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zdG9yYWdlLmdldCgpOyhudWxsPT09dHx8dGhpcy5oYXNDb25zZW50UmVxdWlyZWRDaGFuZ2VkKHQpKSYmdGhpcy5zZXREZWZhdWx0KCl9LHQucHJvdG90eXBlLmhhc0NvbnNlbnRSZXF1aXJlZENoYW5nZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb25maWd1cmF0aW9uLmNvbnNlbnRSZXF1aXJlZDtyZXR1cm4gZSYmdD09PXZpLk5PVF9SRVFVSVJFRHx8IWUmJnQhPT12aS5OT1RfUkVRVUlSRUR9LHQucHJvdG90eXBlLmhhbmRsZVN1YmRvbWFpbkNoYW5nZT1mdW5jdGlvbigpe3RoaXMuY29uZmlndXJhdGlvbi5hbGxvd1N1YmRvbWFpbnM/dGhpcy5zdG9yYWdlLnJlbW92ZShSdC5DVVJSRU5UX0RPTUFJTik6dGhpcy5zdG9yYWdlLnJlbW92ZSh0aGlzLmNvb2tpZVNlcnZpY2UuZ2V0Um9vdERvbWFpbigpKX0sdC5wcm90b3R5cGUuc2V0RGVmYXVsdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29uZmlndXJhdGlvbi5jb25zZW50UmVxdWlyZWQ/dmkuTk9UX0VYUFJFU1NFRDp2aS5OT1RfUkVRVUlSRUQ7dGhpcy5zdG9yYWdlLnNldCh0KX0sdC5wcm90b3R5cGUuZ3JhbnRDb25zZW50PWZ1bmN0aW9uKCl7dGhpcy5jb25maWd1cmF0aW9uLmNvbnNlbnRSZXF1aXJlZCYmKHRoaXMuc3RvcmFnZS5zZXQodmkuR1JBTlRFRCksdGhpcy5saWZlQ3ljbGVFdmVudHNFbWl0dGVyLmVtaXRDb25zZW50R3JhbnRlZCgpKX0sdC5wcm90b3R5cGUud2l0aGRyYXdDb25zZW50PWZ1bmN0aW9uKCl7dGhpcy5jb25maWd1cmF0aW9uLmNvbnNlbnRSZXF1aXJlZCYmKHRoaXMuc3RvcmFnZS5zZXQodmkuV0lUSERSQVdOKSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdENvbnNlbnRXaXRoZHJhd24oKSl9LHQucHJvdG90eXBlLnJlbW92ZUN1cnJlbnRDb25zZW50PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb29raWVTZXJ2aWNlLmdldERvbWFpbigpO3RoaXMuc3RvcmFnZS5yZW1vdmUodCl9LHQucHJvdG90eXBlLmlzQWxsb3dlZEJ5Q29uc2VudD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmNvbmZpZ3VyYXRpb24uY29uc2VudFJlcXVpcmVkfHx0aGlzLnN0b3JhZ2UuZ2V0KCk9PT12aS5HUkFOVEVEfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybnt1YzoiIit0aGlzLnN0b3JhZ2UuZ2V0KCl9fSx0fSgpLExpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixuLGksbyxzKXt0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXI9dCx0aGlzLmNvbW1hbmRzU2VydmljZT1lLHRoaXMuY29tbWFuZHNNb2R1bGU9cix0aGlzLm9wdG91dE1vZHVsZT1uLHRoaXMub3B0b3V0U2VydmljZT1pLHRoaXMuZXhjbHVzaW9uTW9kdWxlPW8sdGhpcy5jb25zZW50TW9kdWxlPXN9cmV0dXJuIHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5saWZlQ3ljbGVFdmVudHNFbWl0dGVyLmFkZExpc3RlbmVycyh0aGlzLmV4Y2x1c2lvbk1vZHVsZSx0aGlzLmNvbnNlbnRNb2R1bGUsdGhpcy5jb21tYW5kc01vZHVsZSksdGhpcy5jb25zZW50TW9kdWxlLmluaXQoKSx0aGlzLm9wdG91dE1vZHVsZS5pbml0KCksdGhpcy5vcHRvdXRTZXJ2aWNlLmluaXQoKSx0aGlzLm9wdG91dFNlcnZpY2UuaXNBY3RpdmUoKXx8dGhpcy5jb21tYW5kc1NlcnZpY2Uuc3RhcnQoKX0sdH0oKSxEaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5zZXJ2aWNlPXR9cmV0dXJuIHQucHJvdG90eXBlLm9uT3B0b3V0PWZ1bmN0aW9uKCl7dGhpcy5zZXJ2aWNlLnJlbW92ZUV4Y2x1c2lvbigpfSx0fSgpLHhpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMubG9jYXRpb249dCx0aGlzLmNvb2tpZVNlcnZpY2U9ZX1yZXR1cm4gdC5wcm90b3R5cGUuaXNGb3JjZUluY2x1ZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzRm9yY2VJbmNsdXNpb25Db29raWUoKXx8dGhpcy5oYXNGb3JjZUluY2x1c2lvbkluVVJMKCl9LHQucHJvdG90eXBlLmlzRm9yY2VMZWdhY3lSZXBsYXlSZWNvcmRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0ZvcmNlSW5jbHVzaW9uQ29va2llVmFsdWUoV3QuUkVQTEFZX1JFQ09SRElOR19FTkFCTEVEKXx8dGhpcy5oYXNGb3JjZUluY2x1c2lvblZhbHVlSW5VUkwoV3QuUkVQTEFZX1JFQ09SRElOR19FTkFCTEVEKX0sdC5wcm90b3R5cGUuaXNGb3JjZU1hbGthUmVwbGF5UmVjb3JkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNGb3JjZUluY2x1c2lvbkNvb2tpZVZhbHVlKFh0LlJBTkRPTV9TQU1QTElORyl9LHQucHJvdG90eXBlLmhhc0ZvcmNlSW5jbHVzaW9uQ29va2llPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLmNvb2tpZVNlcnZpY2UuZ2V0KCJfY3NfaW5jIil9LHQucHJvdG90eXBlLmhhc0ZvcmNlSW5jbHVzaW9uQ29va2llVmFsdWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29va2llU2VydmljZS5nZXQoIl9jc19pbmMiKT09PXR9LHQucHJvdG90eXBlLmhhc0ZvcmNlSW5jbHVzaW9uSW5VUkw9ZnVuY3Rpb24oKXtyZXR1cm4gY3NTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLmxvY2F0aW9uLmhyZWYsIl9jc19pbmMiKT4wfSx0LnByb3RvdHlwZS5oYXNGb3JjZUluY2x1c2lvblZhbHVlSW5VUkw9ZnVuY3Rpb24odCl7cmV0dXJuIGNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcy5sb2NhdGlvbi5ocmVmLCJfY3NfaW5jPSIrdCk+MH0sdH0oKSxxaT1mdW5jdGlvbigpe3JldHVybihxaT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLG49YXJndW1lbnRzLmxlbmd0aDtyPG47cisrKWZvcih2YXIgaSBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmKHRbaV09ZVtpXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LFVpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMubWV0cmljcz17fX1yZXR1cm4gdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT1ELm5vdygpKTt2YXIgcj10aGlzLm1ldHJpY3NbdF07dGhpcy5tZXRyaWNzW3RdPXImJnIuc3RhcnRlZEF0P3I6cWkocWkoe30scikse3N0YXJ0ZWRBdDplfSl9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT1ELm5vdygpKTt2YXIgcj10aGlzLm1ldHJpY3NbdF07dGhpcy5tZXRyaWNzW3RdPXImJnIuc3RvcHBlZEF0P3I6cWkocWkoe30scikse3N0b3BwZWRBdDplfSksdGhpcy5vblN0b3BDYWxsYmFjayh0LHRoaXMubWV0cmljc1t0XSl9LHQucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbih0KXt0aGlzLm9uU3RvcENhbGxiYWNrPXR9LHR9KCksVmk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5sb2NhdGlvbjtyZXR1cm57cHI6dC5wcm90b2NvbCxobzp0Lmhvc3RuYW1lLHBhOnQucGF0aG5hbWUscXU6dC5zZWFyY2gsaGE6dC5oYXNofX0sdH0oKSxqaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLnJlcXVlc3Q9ZSx0aGlzLmlzTG9nZ2luZ0FjdGl2ZT0hMX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuaXNMb2dnaW5nQWN0aXZlPUkodGhpcy5jb25maWd1cmF0aW9uLm1ldHJpY1JhdGUpfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybnthOiJ1eGFtIixtazp0aGlzLm1ldHJpY0tleSxtdjoiIit0aGlzLm1ldHJpY1ZhbHVlfX0sdC5wcm90b3R5cGUubG9nTWV0cmljPWZ1bmN0aW9uKHQsZSl7dGhpcy5tZXRyaWNLZXk9dCx0aGlzLm1ldHJpY1ZhbHVlPWUuc3RvcHBlZEF0LWUuc3RhcnRlZEF0LHRoaXMuc2VuZExvZygpfSx0LnByb3RvdHlwZS5zZW5kTG9nPWZ1bmN0aW9uKCl7dGhpcy5pc0xvZ2dpbmdBY3RpdmUmJnRoaXMucmVxdWVzdC5zZW5kKCl9LHR9KCk7IWZ1bmN0aW9uKHQpe3QuVElNRV9CRUZPUkVfRVhFQ1VUSU9OPSJUaW1lQmVmb3JlRXhlY3V0aW9uIix0LlBBR0VfTE9BRD0iUGFnZUxvYWQifShQaXx8KFBpPXt9KSk7dmFyIHppLEJpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7dGhpcy5zZXJ2aWNlPWUsdGhpcy5waWk9cix0aGlzLmxvY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnM9bmV3IFZpLHRoaXMuYmFzaWNMb2dSZXF1ZXN0UGFyYW1ldGVycz1uZXcgUSh0LHRoaXMucGlpKSx0aGlzLnJlcXVlc3Q9bmV3IEIodC5nZXRMb2dnZXJVcmkoKSksdGhpcy5sb2dnZXI9bmV3IGppKHQsdGhpcy5yZXF1ZXN0KX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5yZXF1ZXN0LnNldFJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzKHRoaXMuYmFzaWNMb2dSZXF1ZXN0UGFyYW1ldGVycyx0aGlzLmxvY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnMpLHRoaXMubG9nZ2VyLmluaXQoKSx0aGlzLnNlcnZpY2Uub25TdG9wKChmdW5jdGlvbihlLHIpe3QubG9nZ2VyLmxvZ01ldHJpYyhlLHIpfSkpLHRoaXMucmVjb3JkSW5pdGlhbE1ldHJpY3MoKX0sdC5wcm90b3R5cGUucmVjb3JkSW5pdGlhbE1ldHJpY3M9ZnVuY3Rpb24oKXt0aGlzLmlzU3VwcG9ydGVkKCkmJih0aGlzLnNlcnZpY2Uuc3RhcnQoUGkuUEFHRV9MT0FELHdpbmRvdy5wZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0KSx0aGlzLnNlcnZpY2Uuc3RvcChQaS5QQUdFX0xPQUQsd2luZG93LnBlcmZvcm1hbmNlLnRpbWluZy5kb21Db250ZW50TG9hZGVkRXZlbnRFbmQpLHRoaXMuc2VydmljZS5zdGFydChQaS5USU1FX0JFRk9SRV9FWEVDVVRJT04sd2luZG93LnBlcmZvcm1hbmNlLnRpbWluZy5kb21Db250ZW50TG9hZGVkRXZlbnRFbmQpLHRoaXMuc2VydmljZS5zdG9wKFBpLlRJTUVfQkVGT1JFX0VYRUNVVElPTikpfSx0LnByb3RvdHlwZS5pc1N1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cucGVyZm9ybWFuY2UmJndpbmRvdy5wZXJmb3JtYW5jZS50aW1pbmd9LHR9KCksSGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXI9dCx0aGlzLmxvY2F0aW9uPWUsdGhpcy5jb29raWVTZXJ2aWNlPXJ9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXshdGhpcy5pc0FjdGl2ZSgpJiZ0aGlzLmhhc09wdG91dEluVVJMKCkmJnRoaXMuYWN0aXZhdGUoKX0sdC5wcm90b3R5cGUuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4iMSI9PT10aGlzLmNvb2tpZVNlcnZpY2UuZ2V0KCJfY3Nfb3B0b3V0Iil9LHQucHJvdG90eXBlLmFjdGl2YXRlPWZ1bmN0aW9uKCl7dGhpcy5saWZlQ3ljbGVFdmVudHNFbWl0dGVyLmVtaXRPcHRvdXQoKSx0aGlzLmNvb2tpZVNlcnZpY2Uuc2V0KCJfY3Nfb3B0b3V0IiwiMSIsMzQxNjRlNil9LHQucHJvdG90eXBlLmhhc09wdG91dEluVVJMPWZ1bmN0aW9uKCl7cmV0dXJuIGNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcy5sb2NhdGlvbi5ocmVmLCJfY3Nfb3B0b3V0Iik+MH0sdH0oKSxGaT1bIm9wdG91dCJdLEdpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuY29tbWFuZHNTZXJ2aWNlPXQsdGhpcy5vcHRvdXRTZXJ2aWNlPWV9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKEZpLChmdW5jdGlvbigpe3Qub3B0b3V0U2VydmljZS5hY3RpdmF0ZSgpfSkpfSx0fSgpO2Z1bmN0aW9uIFdpKHQsZSl7cmV0dXJuIGUudmlzaXRvci52aXNpdHNDb3VudCE9PXQudmlzaXRvci52aXNpdHNDb3VudD9lLnZpc2l0b3IudmlzaXRzQ291bnQtdC52aXNpdG9yLnZpc2l0c0NvdW50OnQuc2Vzc2lvbj9lLnNlc3Npb24/ZS5zZXNzaW9uLnBhZ2VOdW1iZXItdC5zZXNzaW9uLnBhZ2VOdW1iZXI6LTE6MX0hZnVuY3Rpb24odCl7dC5zZWxlY3Q9ZnVuY3Rpb24odCxlKXt2YXIgcj1mdW5jdGlvbih0LGUpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC5leGNsdXNpb249PT1lfSkpWzBdfSh0LGUpLG49ZnVuY3Rpb24odCxlKXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuc29ydC5jYWxsKGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKHQsKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih0LGUpe3JldHVybiB0LnZpc2l0b3ImJnQudmlzaXRvci5hcHBsaWVkVHJhY2tpbmdEcmF3PT09ZX0odCxlKX0pKSxXaSlbMF19KHQsZSk7cmV0dXJuIHJ8fG59fSh6aXx8KHppPXt9KSk7dmFyIFhpPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wLHI9YXJndW1lbnRzLmxlbmd0aDtlPHI7ZSsrKXQrPWFyZ3VtZW50c1tlXS5sZW5ndGg7dmFyIG49QXJyYXkodCksaT0wO2ZvcihlPTA7ZTxyO2UrKylmb3IodmFyIG89YXJndW1lbnRzW2VdLHM9MCxhPW8ubGVuZ3RoO3M8YTtzKyssaSsrKW5baV09b1tzXTtyZXR1cm4gbn0sSmk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLmN1cnJlbnREb21haW5TdGF0ZT1lLHRoaXMub3RoZXJEb21haW5TdGF0ZXM9cn1yZXR1cm4gdC5wcm90b3R5cGUuYXBwbHlVcFRvRGF0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMub3RoZXJEb21haW5TdGF0ZXMucmV0cmlldmUodGhpcy5jb25maWd1cmF0aW9uLmhvc3RuYW1lcywoZnVuY3Rpb24ocil7dmFyIG49WGkoW2UuY3VycmVudERvbWFpblN0YXRlLmdldCgpXSxyKSxpPXppLnNlbGVjdChuLGUuY29uZmlndXJhdGlvbi5sYXN0VHJhY2tpbmdEcmF3KTtlLmN1cnJlbnREb21haW5TdGF0ZS5hcHBseShpKSx0KCl9KSl9LHR9KCksWWk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5jb21tYW5kc1NlcnZpY2U9dCx0aGlzLmlmcmFtZUV2ZW50c0VtaXR0ZXI9ZX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuaWZyYW1lRXZlbnRzRW1pdHRlci5hZGRMaXN0ZW5lcnModGhpcy5jb21tYW5kc1NlcnZpY2UpfSx0LnByb3RvdHlwZS5vbk9wdG91dD1mdW5jdGlvbigpe3RoaXMuY29tbWFuZHNTZXJ2aWNlLnN0b3AoKX0sdC5wcm90b3R5cGUub25CZWZvcmVTZXNzaW9uUmVuZXdhbD1mdW5jdGlvbigpe3RoaXMuY29tbWFuZHNTZXJ2aWNlLnN0b3AoKX0sdH0oKTt2YXIgS2ksUWk9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSxaaT1mdW5jdGlvbih0LGUscixuKXt2YXIgaSxvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09bj9uPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTpuO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLG4pO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKGk9dFthXSkmJihzPShvPDM/aShzKTpvPjM/aShlLHIscyk6aShlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSwkaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBlLnJlZ2lzdHJ5PXt9LGV9cmV0dXJuIFFpKGUsdCksZS5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9MCxuPXQ7cjxuLmxlbmd0aDtyKyspe3ZhciBpPW5bcl07dGhpcy5yZWdpc3RyeVtpXT1lLHRoaXMucmVnaXN0cnl9fSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5hcHBseVBlbmRpbmcoKSx0aGlzLmVuYWJsZUltbWVkaWF0ZUFwcGxpY2F0aW9uKCl9LGUucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbigpe3dpbmRvdy5fdXhhPVtdfSxlLnByb3RvdHlwZS5vbklmcmFtZUNvbW1hbmRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLHI9dC5jb21tYW5kcztlPHIubGVuZ3RoO2UrKyl7dmFyIG49cltlXTt0aGlzLmFwcGx5RnJvbUlmcmFtZShuLm5hbWUsbi5wYXJhbXMsdC5pZnJhbWVQYXRoKX19LGUucHJvdG90eXBlLmFwcGx5RnJvbUlmcmFtZT1mdW5jdGlvbih0LGUscil7dmFyIG49dGhpcztmdC50cnlUb0V4ZWN1dGUoIkNvbW1hbmRzLmFwcGx5LmZyb20uaWZyYW1lOiAiK3IsKGZ1bmN0aW9uKCl7dmFyIHI7aWYobi5yZWdpc3RyeVt0XSlyZXR1cm4ocj1uLnJlZ2lzdHJ5KVt0XS5hcHBseShyLGUpfSkpKCl9LGUucHJvdG90eXBlLmFwcGx5UGVuZGluZz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7d2luZG93Ll91eGEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHI9ZVswXSxuPWUuc2xpY2UoMSk7cmV0dXJuIHQuYXBwbHkocixuKX0pKX0sZS5wcm90b3R5cGUuZW5hYmxlSW1tZWRpYXRlQXBwbGljYXRpb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3dpbmRvdy5fdXhhPXtwdXNoOmZ1bmN0aW9uKGUpe3ZhciByPWVbMF0sbj1lLnNsaWNlKDEpO3JldHVybiB0LmFwcGx5KHIsbil9fX0sZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCxlKXt2YXIgcjtpZih0aGlzLnJlZ2lzdHJ5W3RdKXJldHVybihyPXRoaXMucmVnaXN0cnkpW3RdLmFwcGx5KHIsZSl9LFppKFtkdCgiQ29tbWFuZHMuYXBwbHkiKV0sZS5wcm90b3R5cGUsImFwcGx5IixudWxsKSxlfShyZSksdG89ZnVuY3Rpb24odCxlLHIsbil7dmFyIGksbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP2U6bnVsbD09PW4/bj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUscik6bjtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZSh0LGUscixuKTtlbHNlIGZvcih2YXIgYT10Lmxlbmd0aC0xO2E+PTA7YS0tKShpPXRbYV0pJiYocz0obzwzP2kocyk6bz4zP2koZSxyLHMpOmkoZSxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIscyksc30sZW89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIHQ9dGhpczt0aGlzLmV2ZW50SGFuZGxlcj17Ym91bmRFbGVtZW50OmRvY3VtZW50LHR5cGU6InNlY3VyaXR5cG9saWN5dmlvbGF0aW9uIixsaXN0ZW5lcjpmdW5jdGlvbihlKXtyZXR1cm4gdC5zZWN1cml0eVBvbGljeVZpb2xhdGlvbkxpc3RlbmVyKGUpfX19cmV0dXJuIHQucHJvdG90eXBlLm9uRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5vbkV2ZW50Q2FsbGJhY2s9dH0sdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXtGdCh0aGlzLmV2ZW50SGFuZGxlcil9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtHdCh0aGlzLmV2ZW50SGFuZGxlcil9LHQucHJvdG90eXBlLnNlY3VyaXR5RXJyb3JJc1JlbGV2YW50PWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLnNvdXJjZUZpbGUmJjAhPT1lLnNvdXJjZUZpbGUubGVuZ3RoJiZjc0FycmF5LnByb3RvdHlwZS5zb21lLmNhbGwodC53aGlsZWxpc3REb21haW5zLChmdW5jdGlvbih0KXtyZXR1cm4gY3NTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbChlLnNvdXJjZUZpbGUsdCk+MH0pKX0sdC5wcm90b3R5cGUuc2VjdXJpdHlQb2xpY3lWaW9sYXRpb25MaXN0ZW5lcj1mdW5jdGlvbih0KXt0aGlzLnNlY3VyaXR5RXJyb3JJc1JlbGV2YW50KHQpJiZ0aGlzLm9uRXZlbnRDYWxsYmFjayh7dmlvbGF0ZWREaXJlY3RpdmU6dC52aW9sYXRlZERpcmVjdGl2ZSxzb3VyY2VGaWxlOnQuc291cmNlRmlsZX0pfSx0LndoaWxlbGlzdERvbWFpbnM9WyJjb250ZW50c3F1YXJlIiwibG9jYWxob3N0Iiwid2Vic2l0ZS5jb20vYnVpbGQvZTJlIl0sdG8oW2R0KCJFdmVudCBoYW5kbGVyIHR5cGU6IHNlY3VyaXR5cG9saWN5dmlvbGF0aW9uIildLHQucHJvdG90eXBlLCJzZWN1cml0eVBvbGljeVZpb2xhdGlvbkxpc3RlbmVyIixudWxsKSx0fSgpLHJvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmNvbnRlbnRTZWN1cml0eVBvbGljeUVycm9yc1RyYWNrZXI9dH1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jb250ZW50U2VjdXJpdHlQb2xpY3lFcnJvcnNUcmFja2VyLm9uRXZlbnQoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2Nlc3NFdmVudChlKX0pKX0sdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnRTZWN1cml0eVBvbGljeUVycm9yc1RyYWNrZXIuc3RhcnQoKX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuY29udGVudFNlY3VyaXR5UG9saWN5RXJyb3JzVHJhY2tlci5zdG9wKCl9LHQucHJvdG90eXBlLnByb2Nlc3NFdmVudD1mdW5jdGlvbih0KXt2YXIgZT0iQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZXJyb3IuIFZpb2xhdGVkIGRpcmVjdGl2ZTogIit0LnZpb2xhdGVkRGlyZWN0aXZlKyIgLSBTb3VyY2UgZmlsZTogIit0LnNvdXJjZUZpbGU7ZnQud2FybihlKX0sdH0oKSxubz1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpLGlvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyLG4saSl7dmFyIG89dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLmphdmFTY3JpcHRFcnJvcnNUcmFja2VyPWUsby5qYXZhU2NyaXB0RXJyb3JzUmVxdWVzdD1yLG8uYmFzaWNSZXF1ZXN0UGFyYW1ldGVycz1uLG8uamF2YVNjcmlwdEVycm9yc0Fub255bWl6ZXI9aSxvLmphdmFTY3JpcHRFcnJvcnNCYXRjaD1bXSxvLmphdmFTY3JpcHRFcnJvcnNDb3VudD0wLG99cmV0dXJuIG5vKGUsdCksZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9jZXNzRXZlbnQoZSl9KSksdGhpcy5iaW5kUmVxdWVzdCgpfSxlLnByb3RvdHlwZS5pbml0U3RhdGVzPWZ1bmN0aW9uKCl7dGhpcy5zdGFydFRpbWU9RC5ub3coKSx0aGlzLmphdmFTY3JpcHRFcnJvcnNCYXRjaD1bXSx0aGlzLmphdmFTY3JpcHRFcnJvcnNDb3VudD0wfSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlci5zdGFydCgpfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXt0aGlzLmphdmFTY3JpcHRFcnJvcnNUcmFja2VyLnN0b3AoKX0sZS5wcm90b3R5cGUuZ2V0UmVxdWVzdFBheWxvYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gY3NKU09OLnN0cmluZ2lmeSh7ZXJyb3JzOnRoaXMuamF2YVNjcmlwdEVycm9yc0JhdGNofSl9LGUucHJvdG90eXBlLm9uSWZyYW1lSmF2YXNjcmlwdEVycm9yPWZ1bmN0aW9uKHQpe3RoaXMucHJvY2Vzc0V2ZW50KHQpfSxlLnByb3RvdHlwZS5wcm9jZXNzRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5pc1N0YXJ0ZWQmJnRoaXMuamF2YVNjcmlwdEVycm9yc0NvdW50PDIwJiYodGhpcy5qYXZhU2NyaXB0RXJyb3JzQW5vbnltaXplci5hbm9ueW1pemUodCksdC5ydD10aGlzLmdldFJlbGF0aXZlVGltZSgpLGNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmphdmFTY3JpcHRFcnJvcnNCYXRjaCx0KSx0aGlzLnNlbmRFcnJvcnMoKSl9LGUucHJvdG90eXBlLmJpbmRSZXF1ZXN0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmphdmFTY3JpcHRFcnJvcnNSZXF1ZXN0LnNldFJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzKHRoaXMuYmFzaWNSZXF1ZXN0UGFyYW1ldGVycyksdGhpcy5qYXZhU2NyaXB0RXJyb3JzUmVxdWVzdC5zZXRSZXF1ZXN0UGF5bG9hZFByb3ZpZGVyKHRoaXMpLHRoaXMuamF2YVNjcmlwdEVycm9yc1JlcXVlc3QuYWZ0ZXIoKGZ1bmN0aW9uKCl7dC5qYXZhU2NyaXB0RXJyb3JzQmF0Y2g9W10sdC5qYXZhU2NyaXB0RXJyb3JzQ291bnQrPTF9KSl9LGUucHJvdG90eXBlLmdldFJlbGF0aXZlVGltZT1mdW5jdGlvbigpe3JldHVybiBELm5vdygpLXRoaXMuc3RhcnRUaW1lfSxlLnByb3RvdHlwZS5zZW5kRXJyb3JzPWZ1bmN0aW9uKCl7dGhpcy5qYXZhU2NyaXB0RXJyb3JzUmVxdWVzdC5zZW5kKCl9LGV9KHJlKSxvbz1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpLHNvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyLG4saSl7dmFyIG89dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLmFwaUVycm9yc1RyYWNrZXI9ZSxvLmFwaUVycm9yc1JlcXVlc3Q9cixvLmJhc2ljUmVxdWVzdFBhcmFtZXRlcnM9bixvLmFwaUVycm9yc0Fub255bWl6ZXI9aSxvLmFwaUVycm9yc0JhdGNoPVtdLG8uYXBpRXJyb3JzQ291bnQ9MCxvfXJldHVybiBvbyhlLHQpLGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuYXBpRXJyb3JzVHJhY2tlci5pbml0KCksdGhpcy5hcGlFcnJvcnNUcmFja2VyLm9uRXZlbnQoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2Nlc3NFdmVudChlKX0pKSx0aGlzLmJpbmRSZXF1ZXN0KCl9LGUucHJvdG90eXBlLmluaXRTdGF0ZXM9ZnVuY3Rpb24oKXt0aGlzLmFwaUVycm9yc0JhdGNoPVtdLHRoaXMuYXBpRXJyb3JzQ291bnQ9MH0sZS5wcm90b3R5cGUub25TdGFydD1mdW5jdGlvbigpe3RoaXMuYXBpRXJyb3JzVHJhY2tlci5zdGFydCgpfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXt0aGlzLmFwaUVycm9yc1RyYWNrZXIuc3RvcCgpfSxlLnByb3RvdHlwZS5nZXRSZXF1ZXN0UGF5bG9hZD1mdW5jdGlvbigpe3JldHVybiBjc0pTT04uc3RyaW5naWZ5KHtlcnJvcnM6dGhpcy5hcGlFcnJvcnNCYXRjaH0pfSxlLnByb3RvdHlwZS5vbklmcmFtZUFwaUVycm9yPWZ1bmN0aW9uKHQpe3RoaXMucHJvY2Vzc0V2ZW50KHQpfSxlLnByb3RvdHlwZS5wcm9jZXNzRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5pc1N0YXJ0ZWQmJnRoaXMuYXBpRXJyb3JzQ291bnQ8ZS5NQVhfRVJST1JTJiYoY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMuYXBpRXJyb3JzQmF0Y2gsdGhpcy5hcGlFcnJvcnNBbm9ueW1pemVyLmFub255bWl6ZSh0KSksdGhpcy5zZW5kRXJyb3JzKCkpfSxlLnByb3RvdHlwZS5iaW5kUmVxdWVzdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5hcGlFcnJvcnNSZXF1ZXN0LnNldFJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzKHRoaXMuYmFzaWNSZXF1ZXN0UGFyYW1ldGVycyksdGhpcy5hcGlFcnJvcnNSZXF1ZXN0LnNldFJlcXVlc3RQYXlsb2FkUHJvdmlkZXIodGhpcyksdGhpcy5hcGlFcnJvcnNSZXF1ZXN0LmFmdGVyKChmdW5jdGlvbigpe3QuYXBpRXJyb3JzQmF0Y2g9W10sdC5hcGlFcnJvcnNDb3VudCs9MX0pKX0sZS5wcm90b3R5cGUuc2VuZEVycm9ycz1mdW5jdGlvbigpe3RoaXMuYXBpRXJyb3JzUmVxdWVzdC5zZW5kKCl9LGUuTUFYX0VSUk9SUz0yMCxlfShyZSk7IWZ1bmN0aW9uKHQpe3QuQ09OVEVOVFNRVUFSRT0iY29udGVudHNxdWFyZS5uZXQiLHQuQ0xJQ0tUQUxFPSJjbGlja3RhbGUubmV0Iix0LkZBS0VfVFJBQ0tFUj0iZmFrZS10cmFja2VyLmNvbnRlbnQtc3F1YXJlLmZyIn0oS2l8fChLaT17fSkpO3ZhciBhbyxjbz1bImFwaS1lcnJvcnM6bWFza1VybCJdLHVvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixuLGksbyxzLGEpe3RoaXMuamF2YVNjcmlwdEVycm9yc1RyYWNrZXI9dCx0aGlzLmphdmFTY3JpcHRFcnJvcnNBbm9ueW1pemVyPWUsdGhpcy5hcGlFcnJvcnNUcmFja2VyPXIsdGhpcy5hcGlFcnJvcnNBbm9ueW1pemVyPW4sdGhpcy5jb25maWd1cmF0aW9uPWksdGhpcy5iYXNpY1JlcXVlc3RQYXJhbWV0ZXJzPW8sdGhpcy5pZnJhbWVFdmVudHNFbWl0dGVyPXMsdGhpcy5jb21tYW5kc1NlcnZpY2U9YX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuY29udGVudFNlY3VyaXR5UG9saWN5RXJyb3JzU2VydmljZT1uZXcgcm8obmV3IGVvKSx0aGlzLmNvbnRlbnRTZWN1cml0eVBvbGljeUVycm9yc1NlcnZpY2UuaW5pdCgpO3ZhciB0PW5ldyBIdCh0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0VHJhY2tlclVyaSgpLCJlcnJvcnMiKTt0aGlzLmphdmFTY3JpcHRFcnJvcnNTZXJ2aWNlPW5ldyBpbyh0aGlzLmphdmFTY3JpcHRFcnJvcnNUcmFja2VyLHQsdGhpcy5iYXNpY1JlcXVlc3RQYXJhbWV0ZXJzLHRoaXMuamF2YVNjcmlwdEVycm9yc0Fub255bWl6ZXIpLHRoaXMuamF2YVNjcmlwdEVycm9yc1NlcnZpY2UuaW5pdCgpLHRoaXMuaWZyYW1lRXZlbnRzRW1pdHRlci5hZGRMaXN0ZW5lcnModGhpcy5qYXZhU2NyaXB0RXJyb3JzU2VydmljZSk7dmFyIGU9bmV3IEh0KHRoaXMuY29uZmlndXJhdGlvbi5nZXRUcmFja2VyVXJpKCksImFwaS1lcnJvcnMiKTt0aGlzLmFwaUVycm9yc1RyYWNrZXIuZXhjbHVkZURvbWFpbnMoW0tpLkNPTlRFTlRTUVVBUkUsS2kuQ0xJQ0tUQUxFLEtpLkZBS0VfVFJBQ0tFUl0pLHRoaXMuYXBpRXJyb3JzU2VydmljZT1uZXcgc28odGhpcy5hcGlFcnJvcnNUcmFja2VyLGUsdGhpcy5iYXNpY1JlcXVlc3RQYXJhbWV0ZXJzLHRoaXMuYXBpRXJyb3JzQW5vbnltaXplciksdGhpcy5hcGlFcnJvcnNTZXJ2aWNlLmluaXQoKSx0aGlzLmlmcmFtZUV2ZW50c0VtaXR0ZXIuYWRkTGlzdGVuZXJzKHRoaXMuYXBpRXJyb3JzU2VydmljZSksdGhpcy5yZWdpc3RlckNvbW1hbmRzKCl9LHQucHJvdG90eXBlLnJlZ2lzdGVyQ29tbWFuZHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKGNvLChmdW5jdGlvbihlKXtyZXR1cm4gdC5hcGlFcnJvcnNBbm9ueW1pemVyLmFkZFVybE1hc2tpbmdQYXR0ZXJuKGUpfSkpfSx0LnByb3RvdHlwZS5vbkluaXRUcmFja2luZz1mdW5jdGlvbigpe3RoaXMuY29udGVudFNlY3VyaXR5UG9saWN5RXJyb3JzU2VydmljZS5zdGFydCgpfSx0LnByb3RvdHlwZS5vblN0YXJ0VHJhY2tpbmc9ZnVuY3Rpb24oKXt0aGlzLmNvbmZpZ3VyYXRpb24uanNFcnJvcnNFbmFibGVkJiZ0aGlzLmphdmFTY3JpcHRFcnJvcnNTZXJ2aWNlLnN0YXJ0KCksdGhpcy5jb25maWd1cmF0aW9uLmFwaUVycm9yc0VuYWJsZWQmJnRoaXMuYXBpRXJyb3JzU2VydmljZS5zdGFydCgpfSx0LnByb3RvdHlwZS5vbkFmdGVyTmF0dXJhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy5qYXZhU2NyaXB0RXJyb3JzU2VydmljZS5pbml0U3RhdGVzKCksdGhpcy5hcGlFcnJvcnNTZXJ2aWNlLmluaXRTdGF0ZXMoKX0sdC5wcm90b3R5cGUub25BZnRlckFydGlmaWNpYWxQYWdlVmlldz1mdW5jdGlvbigpe3RoaXMuamF2YVNjcmlwdEVycm9yc1NlcnZpY2UuaW5pdFN0YXRlcygpLHRoaXMuYXBpRXJyb3JzU2VydmljZS5pbml0U3RhdGVzKCl9LHQucHJvdG90eXBlLm9uQmVmb3JlU2Vzc2lvblJlbmV3YWw9ZnVuY3Rpb24oKXt0aGlzLmphdmFTY3JpcHRFcnJvcnNTZXJ2aWNlLnN0b3AoKSx0aGlzLmFwaUVycm9yc1NlcnZpY2Uuc3RvcCgpfSx0LnByb3RvdHlwZS5vbk9wdG91dD1mdW5jdGlvbigpe3RoaXMuY29udGVudFNlY3VyaXR5UG9saWN5RXJyb3JzU2VydmljZS5zdG9wKCksdGhpcy5qYXZhU2NyaXB0RXJyb3JzU2VydmljZS5zdG9wKCksdGhpcy5hcGlFcnJvcnNTZXJ2aWNlLnN0b3AoKX0sdH0oKSxwbz1mdW5jdGlvbih0LGUscixuKXt2YXIgaSxvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09bj9uPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTpuO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLG4pO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKGk9dFthXSkmJihzPShvPDM/aShzKTpvPjM/aShlLHIscyk6aShlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfTshZnVuY3Rpb24odCl7dC5TZXQ9InNldCIsdC5SZW1vdmU9InJlbW92ZSJ9KGFvfHwoYW89e30pKTt2YXIgbG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy5jb29raWVTZXJ2aWNlPWUsdGhpcy5zYW1lU2l0ZT11dC5Ob25lLHRoaXMuaXNBY3RpdmF0ZWQ9ITEsdGhpcy5zZXRDb29raWVCYXRjaD1bXSx0aGlzLnJlbW92ZUNvb2tpZUJhdGNoPVtdfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5zYW1lU2l0ZT10aGlzLmNvb2tpZVNlcnZpY2UuaXNTYW1lU2l0ZVN1cHBvcnRlZCgpP3V0Lk5vbmU6dXQuTm90U2V0fSx0LnByb3RvdHlwZS5zZXRTdGF0ZXM9ZnVuY3Rpb24odCxlKXt0aGlzLmN1cnJlbnREb21haW5TdGF0ZT10LHRoaXMuaWZyYW1lRG9tYWluU3RhdGU9ZX0sdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLmlmcmFtZURvbWFpblN0YXRlLmluaXQodGhpcy5nZXRJZnJhbWVEb21haW4oKSwoZnVuY3Rpb24ocixuKXt2YXIgaT1bZS5jdXJyZW50RG9tYWluU3RhdGUuZ2V0KCldO24mJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChpLHIpO3ZhciBvPXppLnNlbGVjdChpLGUuY29uZmlndXJhdGlvbi5sYXN0VHJhY2tpbmdEcmF3KTtlLmlzQWN0aXZhdGVkPSEwLGUuY3VycmVudERvbWFpblN0YXRlLmFwcGx5KG8pLHQoKX0pKSx0aGlzLmlmcmFtZT10aGlzLmlmcmFtZURvbWFpblN0YXRlLm9wZW5JZnJhbWUoKX0sdC5wcm90b3R5cGUuc2V0Q29va2llPWZ1bmN0aW9uKHQsZSxyKXtpZih0aGlzLmlzQWN0aXZhdGVkKXt2YXIgbj17bmFtZTp0LHZhbHVlOmUsc2FtZXNpdGU6dGhpcy5zYW1lU2l0ZSxzZWN1cmU6cHQuWWVzfTtyJiYobi5leHBpcmVzPWF0LnRvRXhwaXJlRGF0ZShyKS5nZXRUaW1lKCkpLHRoaXMuYWRkVG9TZXRDb29raWVCYXRjaChuKX19LHQucHJvdG90eXBlLnJlbW92ZUNvb2tpZT1mdW5jdGlvbih0KXt0aGlzLmlzQWN0aXZhdGVkJiZ0aGlzLmFkZFRvUmVtb3ZlQ29va2llQmF0Y2godCl9LHQucHJvdG90eXBlLmFkZFRvUmVtb3ZlQ29va2llQmF0Y2g9ZnVuY3Rpb24odCl7dGhpcy5yZW1vdmVDb29raWVCYXRjaD1jc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0aGlzLnJlbW92ZUNvb2tpZUJhdGNoLChmdW5jdGlvbihlKXtyZXR1cm4gZSE9PXR9KSksdGhpcy5zZXRDb29raWVCYXRjaD1jc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0aGlzLnNldENvb2tpZUJhdGNoLChmdW5jdGlvbihlKXtyZXR1cm4gZS5uYW1lIT09dH0pKSxjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5yZW1vdmVDb29raWVCYXRjaCx0KSx0aGlzLnNldEJhdGNoUmVhZHlDYWxsKCl9LHQucHJvdG90eXBlLmFkZFRvU2V0Q29va2llQmF0Y2g9ZnVuY3Rpb24odCl7dGhpcy5yZW1vdmVDb29raWVCYXRjaD1jc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0aGlzLnJlbW92ZUNvb2tpZUJhdGNoLChmdW5jdGlvbihlKXtyZXR1cm4gZSE9PXQubmFtZX0pKSx0aGlzLnNldENvb2tpZUJhdGNoPWNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKHRoaXMuc2V0Q29va2llQmF0Y2gsKGZ1bmN0aW9uKGUpe3JldHVybiBlLm5hbWUhPT10Lm5hbWV9KSksY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMuc2V0Q29va2llQmF0Y2gsdCksdGhpcy5zZXRCYXRjaFJlYWR5Q2FsbCgpfSx0LnByb3RvdHlwZS5zZXRCYXRjaFJlYWR5Q2FsbD1mdW5jdGlvbigpe3RoaXMuc2VuZE1lc3NhZ2VzQmF0Y2hzKCl9LHQucHJvdG90eXBlLnNlbmRNZXNzYWdlc0JhdGNocz1mdW5jdGlvbigpe2lmKHRoaXMuc2V0Q29va2llQmF0Y2gubGVuZ3RoPjApe3ZhciB0PXRoaXMuYnVpbGRNZXNzYWdlKGFvLlNldCx0aGlzLnNldENvb2tpZUJhdGNoKTt0aGlzLnNlbmRNZXNzYWdlKHQpLHRoaXMuc2V0Q29va2llQmF0Y2g9W119aWYodGhpcy5yZW1vdmVDb29raWVCYXRjaC5sZW5ndGg+MCl7dmFyIGU9dGhpcy5idWlsZE1lc3NhZ2UoYW8uUmVtb3ZlLHRoaXMucmVtb3ZlQ29va2llQmF0Y2gpO3RoaXMuc2VuZE1lc3NhZ2UoZSksdGhpcy5yZW1vdmVDb29raWVCYXRjaD1bXX19LHQucHJvdG90eXBlLmJ1aWxkTWVzc2FnZT1mdW5jdGlvbih0LGUpe3JldHVybntjb21tYW5kOnQsY29va2llczplLGRvbWFpbjpudWxsLHBpZDp0aGlzLmNvbmZpZ3VyYXRpb24ucHJvamVjdElkfX0sdC5wcm90b3R5cGUuc2VuZE1lc3NhZ2U9ZnVuY3Rpb24odCl7dmFyIGU9Imh0dHBzOi8vIit0aGlzLmdldElmcmFtZURvbWFpbigpO3RoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cmJnRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UodCxlKX0sdC5wcm90b3R5cGUuZ2V0SWZyYW1lRG9tYWluPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5kdWFsQ29sbGVjdGlvblRhZ0RvbWFpbiYmImNvbnRlbnRzcXVhcmUubmV0IiE9PXRoaXMuY29uZmlndXJhdGlvbi5kdWFsQ29sbGVjdGlvblRhZ0RvbWFpbj8iY2Ruc3NsLiIrdGhpcy5jb25maWd1cmF0aW9uLmR1YWxDb2xsZWN0aW9uVGFnRG9tYWluOiJjc3hkLmNvbnRlbnRzcXVhcmUubmV0In0scG8oW3dyKCksZHQoInNlbmQgeGRmcmFtZS1zaW5nbGUtaWZyYW1lIGJhdGNoIildLHQucHJvdG90eXBlLCJzZXRCYXRjaFJlYWR5Q2FsbCIsbnVsbCksdH0oKSxobz1bIl9jc19pZCIsIl9jc19zIiwiX2NzX2N2YXJzIiwiX2NzX2V4Il0sZm89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy54ZGZyYW1lT3BlbmVyPWV9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24odCxlKXt0aGlzLnhkZnJhbWVPcmlnaW49Imh0dHBzOi8vIit0LHRoaXMuY2FsbGJhY2s9ZX0sdC5wcm90b3R5cGUub3BlbklmcmFtZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy54ZGZyYW1lT3BlbmVyLm9uTWVzc2FnZSgoZnVuY3Rpb24oZSl7dC5oYW5kbGVYZGZyYW1lTWVzc2FnZShlKX0pKSx0aGlzLnhkZnJhbWVPcGVuZXIub25UaW1lb3V0KChmdW5jdGlvbigpe3QuaGFuZGxlVGltZW91dCgpfSkpLHRoaXMueGRmcmFtZU9wZW5lci5zdGFydCgpO3ZhciBlPXRoaXMuZ2V0WGRmcmFtZVVybCh0aGlzLnhkZnJhbWVPcmlnaW4pO3JldHVybiB0aGlzLnhkZnJhbWVPcGVuZXIub3BlbihlKX0sdC5wcm90b3R5cGUuaGFuZGxlWGRmcmFtZU1lc3NhZ2U9ZnVuY3Rpb24odCl7aWYodGhpcy5pc1hkZnJhbWVNZXNzYWdlKHQpKXt2YXIgZT10LmRhdGEscj0hMDtpZih0aGlzLmlzWGRmcmFtZUVycm9yTWVzc2FnZSh0KSlyZXR1cm4gdm9pZCBmdC53YXJuKCJFcnJvciB4ZGZyYW1lIHNpbmdsZSBkb21haW46ICIrY3NKU09OLnN0cmluZ2lmeSh0LmRhdGEpKyIgZnJvbSAiK3Qub3JpZ2luKTtpZighTHQuaXNSYXdEb21haW5TdGF0ZShlKSlyZXR1cm4gdm9pZCBmdC53YXJuKCJVbmtub3duIG1lc3NhZ2UgZm9ybWF0IGZyb20geGRmcmFtZSBzaW5nbGUgZG9tYWluOiAiK2NzSlNPTi5zdHJpbmdpZnkodC5kYXRhKSsiIGZyb20gIit0Lm9yaWdpbik7THQuaXNWYWxpZChlKXx8KGZ0Lndhcm4oIkludmFsaWQgeGRmcmFtZSBzaW5nbGUgZG9tYWluIHN0YXRlOiAiK2NzSlNPTi5zdHJpbmdpZnkodC5kYXRhKSsiIGZyb20gIit0Lm9yaWdpbikscj0hMSksdGhpcy54ZGZyYW1lT3BlbmVyLnN0b3AoKSx0aGlzLmNhbGxiYWNrKEl0LmZyb21SYXcoZSkscil9fSx0LnByb3RvdHlwZS5oYW5kbGVUaW1lb3V0PWZ1bmN0aW9uKCl7ZnQud2FybigieGRmcmFtZSBzaW5nbGUgZG9tYWluOiBhbGwgbWVzc2FnZXMgbm90IHJlY2VpdmVkIil9LHQucHJvdG90eXBlLmlzWGRmcmFtZU1lc3NhZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQub3JpZ2luPT09dGhpcy54ZGZyYW1lT3JpZ2luJiZndCh0LmRhdGEpfSx0LnByb3RvdHlwZS5pc1hkZnJhbWVFcnJvck1lc3NhZ2U9ZnVuY3Rpb24odCl7cmV0dXJuISF0LmRhdGEuZXJyb3J9LHQucHJvdG90eXBlLmdldFhkZnJhbWVVcmw9ZnVuY3Rpb24odCl7dmFyIGU9Y3NBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKGhvLCIsIik7cmV0dXJuIHQrIi91eGEveGRmcmFtZS1zaW5nbGUtZG9tYWluLTEuMS4wLmh0bWw/cGlkPSIrdGhpcy5jb25maWd1cmF0aW9uLnByb2plY3RJZCsiJmNvb2tpZU5hbWVzPSIrZX0sdH0oKSx5bz1mdW5jdGlvbigpe3JldHVybih5bz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLG49YXJndW1lbnRzLmxlbmd0aDtyPG47cisrKWZvcih2YXIgaSBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmKHRbaV09ZVtpXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHZvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy52aXNpdG9yU2VydmljZT1lLHRoaXMuc2Vzc2lvblNlcnZpY2U9cn1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0UmVxdWVzdFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXtpZighdGhpcy52aXNpdG9yU2VydmljZS5kb2VzVmlzaXRvckV4aXN0KCl8fCF0aGlzLnNlc3Npb25TZXJ2aWNlLmRvZXNTZXNzaW9uRXhpc3QoKSlyZXR1cm57fTt2YXIgdD10aGlzLnZpc2l0b3JTZXJ2aWNlLmdldFZpc2l0b3IoKTtyZXR1cm4geW8oeW8oeW8oe30se3Y6IjEwLjguNiJ9KSx0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0UmVxdWVzdFBhcmFtZXRlcnMoKSkse3V1OnQuaWQsc246IiIrdC52aXNpdHNDb3VudCxwbjoiIit0aGlzLnNlc3Npb25TZXJ2aWNlLmdldFNlc3Npb24oKS5wYWdlTnVtYmVyfSl9LHR9KCksbW89ZnVuY3Rpb24odCxlLHIsbil7dmFyIGksbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP2U6bnVsbD09PW4/bj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUscik6bjtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZSh0LGUscixuKTtlbHNlIGZvcih2YXIgYT10Lmxlbmd0aC0xO2E+PTA7YS0tKShpPXRbYV0pJiYocz0obzwzP2kocyk6bz4zP2koZSxyLHMpOmkoZSxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIscyksc30sZ289ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIHQ9dGhpczt0aGlzLmlzU3RhcnRlZD0hMSx0aGlzLm9uRXZlbnRDYWxsYmFja3M9W10sdGhpcy51c2VDYXB0dXJlPSExLHRoaXMuZXZlbnRIYW5kbGVyPXtib3VuZEVsZW1lbnQ6d2luZG93LHR5cGU6ImVycm9yIixsaXN0ZW5lcjpmdW5jdGlvbihlKXtyZXR1cm4gdC5lcnJvckxpc3RlbmVyKGUpfX19cmV0dXJuIHQucHJvdG90eXBlLm9uRXZlbnQ9ZnVuY3Rpb24odCl7Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMub25FdmVudENhbGxiYWNrcyx0KX0sdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmlzU3RhcnRlZHx8KEZ0KHRoaXMuZXZlbnRIYW5kbGVyLHRoaXMudXNlQ2FwdHVyZSksdGhpcy5pc1N0YXJ0ZWQ9ITApfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5pc1N0YXJ0ZWQmJihHdCh0aGlzLmV2ZW50SGFuZGxlcix0aGlzLnVzZUNhcHR1cmUpLHRoaXMuaXNTdGFydGVkPSExKX0sdC5wcm90b3R5cGUuZXJyb3JMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmJ1aWxkSmF2YVNjcmlwdEVycm9yKHQpO2NzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLm9uRXZlbnRDYWxsYmFja3MsKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUpfSkpfSx0LnByb3RvdHlwZS5kZWNvcmF0ZUVycm9yTWVzc2FnZT1mdW5jdGlvbihlKXtyZXR1cm4gZS5sZW5ndGg8PXQuTUFYX0VSUk9SX01FU1NBR0VfTEVOR1RIP2U6Y3NTdHJpbmcucHJvdG90eXBlLnNsaWNlLmNhbGwoZSwwLHQuTUFYX0VSUk9SX01FU1NBR0VfTEVOR1RILXQudHJ1bmNhdGVkRXJyb3JNZXNzYWdlTWFya2VyLmxlbmd0aCkrdC50cnVuY2F0ZWRFcnJvck1lc3NhZ2VNYXJrZXJ9LHQucHJvdG90eXBlLmJ1aWxkSmF2YVNjcmlwdEVycm9yPWZ1bmN0aW9uKHQpe3JldHVybntlcnJvclR5cGU6ImpzRXJyb3IiLG1lc3NhZ2U6dGhpcy5kZWNvcmF0ZUVycm9yTWVzc2FnZSh0Lm1lc3NhZ2UpLGZpbGVuYW1lOnQuZmlsZW5hbWUsbGluZW5vOnQubGluZW5vLGNvbG5vOnQuY29sbm99fSx0LnRydW5jYXRlZEVycm9yTWVzc2FnZU1hcmtlcj0i4oCmIix0Lk1BWF9FUlJPUl9NRVNTQUdFX0xFTkdUSD0xMDI0LG1vKFtkdCgiRXZlbnQgaGFuZGxlciB0eXBlOiBlcnJvciIpXSx0LnByb3RvdHlwZSwiZXJyb3JMaXN0ZW5lciIsbnVsbCksdH0oKSxTbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmNvbW1hbmRzU2VydmljZT10LHRoaXMucHJvamVjdENvbmZpZ3VyYXRpb249ZX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoWyJkZWJ1Z0V2ZW50cyJdLChmdW5jdGlvbihlKXsiYm9vbGVhbiI9PXR5cGVvZiBlJiZ0LnByb2plY3RDb25maWd1cmF0aW9uLnVwZGF0ZUR5bmFtaWNGaWVsZHMoImVtaXREZWJ1Z0V2ZW50cyIsZSl9KSl9LHR9KCk7ZnVuY3Rpb24gRW8odCxlLHIpe2lmKCFTdChlKSYmIVN0KHIpKXJldHVybiB0LmhyZWY7dmFyIG49U3QoZSk/ZnVuY3Rpb24odCl7cmV0dXJuIE8odCwiLyIpP3Q6Ii8iK3R9KGUpOnQucGF0aG5hbWUsaT1TdChyKT9mdW5jdGlvbih0KXtyZXR1cm4gTyh0LCI/Iil8fCIiPT09dD90OiI/Iit0fShyKTp0LnNlYXJjaDtyZXR1cm4gdC5wcm90b2NvbCsiLy8iK3QuaG9zdCtuK2l9dmFyIHdvLENvLFJvLGJvLFRvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMubG9jYXRpb249dCx0aGlzLnBpaT1lfXJldHVybiB0LnByb3RvdHlwZS5vdmVycmlkZVBhdGg9ZnVuY3Rpb24odCl7U3QodCkmJm10KHQpJiYodGhpcy5wYXRoPSIiPT09dD92b2lkIDA6dCl9LHQucHJvdG90eXBlLm92ZXJyaWRlUXVlcnk9ZnVuY3Rpb24odCl7U3QodCkmJm10KHQpJiYodGhpcy5xdWVyeT10KX0sdC5wcm90b3R5cGUuY29tcHV0ZU92ZXJyaWRkZW5Vcmw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaXNDdXJyZW50UGFnZVVybCh0KT90aGlzLmdldFVybCgpOnR9LHQucHJvdG90eXBlLmlzQ3VycmVudFBhZ2VVcmw9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ub3JtYWxpemVVcmwodGhpcy5sb2NhdGlvbi5ocmVmKTtyZXR1cm4gdGhpcy5ub3JtYWxpemVVcmwodCk9PT1lfSx0LnByb3RvdHlwZS5ub3JtYWxpemVVcmw9ZnVuY3Rpb24odCl7cmV0dXJuIF8odCwiLyIpP2NzU3RyaW5nLnByb3RvdHlwZS5zbGljZS5jYWxsKHQsMCwtMSk6dH0sdC5wcm90b3R5cGUuZ2V0VXJsPWZ1bmN0aW9uKCl7cmV0dXJuIEVvKHRoaXMubG9jYXRpb24sdGhpcy5wYXRoLHRoaXMucXVlcnkpfSx0LnByb3RvdHlwZS5nZXRVcmxQcm90b2NvbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2F0aW9uLnByb3RvY29sfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0VXJsKCk7cmV0dXJue3VybDp0aGlzLnBpaS5hbm9ueW1pemUodCl9fSx0fSgpLEFvPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCksa289ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIEFvKGUsdCksZS5wcm90b3R5cGUuZW1pdFBhZ2VFdmVudD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxyPXRoaXMubGlzdGVuZXJzO2U8ci5sZW5ndGg7ZSsrKXt2YXIgbj1yW2VdO24ub25QYWdlRXZlbnQmJm4ub25QYWdlRXZlbnQodCl9fSxlLnByb3RvdHlwZS5lbWl0RXZlbnRUcmlnZ2VyUmVjb3JkaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLHI9dGhpcy5saXN0ZW5lcnM7ZTxyLmxlbmd0aDtlKyspe3ZhciBuPXJbZV07bi5vbkV2ZW50VHJpZ2dlclJlY29yZGluZyYmbi5vbkV2ZW50VHJpZ2dlclJlY29yZGluZyh0KX19LGV9KFRpKSxQbz1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpLE9vPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz9lOm51bGw9PT1uP249T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHIpOm47aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUodCxlLHIsbik7ZWxzZSBmb3IodmFyIGE9dC5sZW5ndGgtMTthPj0wO2EtLSkoaT10W2FdKSYmKHM9KG88Mz9pKHMpOm8+Mz9pKGUscixzKTppKGUscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHMpLHN9LF9vPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyLG4saSxvKXt2YXIgcz10LmNhbGwodGhpcyxlLHIpfHx0aGlzO3JldHVybiBzLmNvbmZpZ3VyYXRpb249ZSxzLmNvbXByZXNzb3I9cixzLnF1b3RhU2VydmljZVJlcXVlc3Q9bixzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXI9aSxzLmZvcmNlSW5jbHVzaW9uU2VydmljZT1vLHN9cmV0dXJuIFBvKGUsdCksZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuYmluZFF1b3RhU2VydmljZVJlcXVlc3QoKX0sZS5wcm90b3R5cGUuc2FuaXRpemVTZXNzaW9uUmVjb3JkaW5nU3RhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVjb3JkaW5nU3RhdGU9PT1YdC5URU1QT1JBUklMWV9SRUNPUkRFRCYmKHQucmVjb3JkaW5nU3RhdGU9WHQuTk9UX1JFQ09SREVEKSx0fSxlLnByb3RvdHlwZS5jb21wdXRlUmVjb3JkaW5nU3RhdGU9ZnVuY3Rpb24odCl7dmFyIGUscj10aGlzO2lmKCF0aGlzLmlzQ29tcHJlc3Npb25TdXBwb3J0ZWQoKSlyZXR1cm4gWHQuTk9UX1JFQ09SREVEO2lmKE4oKTx0aGlzLmNvbmZpZ3VyYXRpb24ucmVwbGF5UmVjb3JkaW5nUmF0ZSYmdXIuaXNTdXBwb3J0ZWQoKXx8dGhpcy5mb3JjZUluY2x1c2lvblNlcnZpY2UuaXNGb3JjZU1hbGthUmVwbGF5UmVjb3JkZWQoKSl7dmFyIG49bnVsbD09PShlPXRoaXMudmlzaXRvclNlcnZpY2UpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmdldFZpc2l0b3IoKTtyZXR1cm4gdGhpcy5xdW90YVNlcnZpY2VSZXF1ZXN0LnNldFJlcXVlc3RQYXlsb2FkUHJvdmlkZXIoe2dldFJlcXVlc3RQYXlsb2FkOmZ1bmN0aW9uKCl7cmV0dXJuIGNzSlNPTi5zdHJpbmdpZnkoe3Byb2plY3RJZDpyLmNvbmZpZ3VyYXRpb24ucHJvamVjdElkLHJlY29yZGluZ1R5cGVzOltwYXJzZUludChYdC5SQU5ET01fU0FNUExJTkcsMTApXSx1dToobnVsbD09bj92b2lkIDA6bi5pZCl8fCIiLHNuOihudWxsPT1uP3ZvaWQgMDpuLnZpc2l0c0NvdW50KXx8IiIscG46KG51bGw9PXQ/dm9pZCAwOnQucGFnZU51bWJlcil8fCIifSl9fSksdGhpcy5xdW90YVNlcnZpY2VSZXF1ZXN0LnNlbmQoKSxYdC5SQU5ET01fU0FNUExJTkd9cmV0dXJuIFh0Lk5PVF9SRUNPUkRFRH0sZS5wcm90b3R5cGUuaXNSZXBsYXlSZWNvcmRlZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5yZWNvcmRpbmdTdGF0ZT09PVh0LlRFTVBPUkFSSUxZX1JFQ09SREVEfHx0LnJlY29yZGluZ1N0YXRlPT09WHQuUkFORE9NX1NBTVBMSU5HfSxlLnByb3RvdHlwZS5iaW5kUXVvdGFTZXJ2aWNlUmVxdWVzdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5xdW90YVNlcnZpY2VSZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoe25hbWU6IkNvbnRlbnQtVHlwZSIsdmFsdWU6ImFwcGxpY2F0aW9uL2pzb24ifSksdGhpcy5xdW90YVNlcnZpY2VSZXF1ZXN0Lm9uRXJyb3IoKGZ1bmN0aW9uKCl7cmV0dXJuIHQucXVvdGFTZXJ2aWNlRXJyb3JIYW5kbGVyKCJOZXR3b3JrRXJyb3IiKX0pKSx0aGlzLnF1b3RhU2VydmljZVJlcXVlc3Qub25UaW1lb3V0KDNlMywoZnVuY3Rpb24oKXtyZXR1cm4gdC5xdW90YVNlcnZpY2VUaW1lb3V0SGFuZGxlcigpfSkpLHRoaXMucXVvdGFTZXJ2aWNlUmVxdWVzdC5vbkxvYWQoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnF1b3RhU2VydmljZUxvYWRIYW5kbGVyKGUpfSkpfSxlLnByb3RvdHlwZS5xdW90YVNlcnZpY2VFcnJvckhhbmRsZXI9ZnVuY3Rpb24odCl7ZnQud2FybigiUXVvdGEgU2VydmljZTogcmVxdWVzdCBlcnJvciAtICIrdCl9LGUucHJvdG90eXBlLnF1b3RhU2VydmljZVRpbWVvdXRIYW5kbGVyPWZ1bmN0aW9uKCl7ZnQud2FybigiUXVvdGEgU2VydmljZTogcmVxdWVzdCB0aW1lb3V0Iil9LGUucHJvdG90eXBlLnF1b3RhU2VydmljZUxvYWRIYW5kbGVyPWZ1bmN0aW9uKHQpe2lmKDIwMD09PXQuc3RhdHVzKXRyeXtjc0pTT04ucGFyc2UodC5yZXNwb25zZVRleHQpfWNhdGNoKGUpe3JldHVybiB2b2lkIHRoaXMucXVvdGFTZXJ2aWNlRXJyb3JIYW5kbGVyKCJVbmFibGUgdG8gcGFyc2UgdGhlIHF1b3RhIHNlcnZpY2UgcmVzcG9uc2U6ICIrdC5yZXNwb25zZVRleHQpfWVsc2UgdGhpcy5xdW90YVNlcnZpY2VFcnJvckhhbmRsZXIoIlN0YXR1cyBjb2RlOiAiK3Quc3RhdHVzKX0sZS5wcm90b3R5cGUuc2V0VmlzaXRvclNlcnZpY2U9ZnVuY3Rpb24odCl7dGhpcy52aXNpdG9yU2VydmljZT10fSxlLnByb3RvdHlwZS5nZXREaXNhYmxlZFJlY29yZGluZ1N0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIFh0Lk5PVF9SRUNPUkRFRH0sT28oW2R0KCJRdW90YSBTZXJ2aWNlOiBvbmVycm9yIildLGUucHJvdG90eXBlLCJxdW90YVNlcnZpY2VFcnJvckhhbmRsZXIiLG51bGwpLE9vKFtkdCgiUXVvdGEgU2VydmljZTogb250aW1lb3V0IildLGUucHJvdG90eXBlLCJxdW90YVNlcnZpY2VUaW1lb3V0SGFuZGxlciIsbnVsbCksT28oW2R0KCJRdW90YSBTZXJ2aWNlOiBvbmxvYWQiKV0sZS5wcm90b3R5cGUsInF1b3RhU2VydmljZUxvYWRIYW5kbGVyIixudWxsKSxlfShnaSksSW89ZnVuY3Rpb24oKXt0aGlzLmlzU3RhcnRlZD0hMX0sTm89ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSxNbz1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MCxyPWFyZ3VtZW50cy5sZW5ndGg7ZTxyO2UrKyl0Kz1hcmd1bWVudHNbZV0ubGVuZ3RoO3ZhciBuPUFycmF5KHQpLGk9MDtmb3IoZT0wO2U8cjtlKyspZm9yKHZhciBvPWFyZ3VtZW50c1tlXSxzPTAsYT1vLmxlbmd0aDtzPGE7cysrLGkrKyluW2ldPW9bc107cmV0dXJuIG59LExvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4ueGhyUmVxdWVzdFRyYWNrZXI9ZSxuLmZldGNoUmVxdWVzdFRyYWNrZXI9cixuLm9uRXZlbnRDYWxsYmFja3M9W10sbi5leGNsdWRlZERvbWFpbnM9W10sbn1yZXR1cm4gTm8oZSx0KSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnhoclJlcXVlc3RUcmFja2VyLm9uRXZlbnQoKGZ1bmN0aW9uKGUpe3JldHVybiB0LmFwaUVycm9yTGlzdGVuZXIoZSl9KSksdGhpcy5mZXRjaFJlcXVlc3RUcmFja2VyLm9uRXZlbnQoKGZ1bmN0aW9uKGUpe3JldHVybiB0LmFwaUVycm9yTGlzdGVuZXIoZSl9KSl9LGUucHJvdG90eXBlLm9uRXZlbnQ9ZnVuY3Rpb24odCl7Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMub25FdmVudENhbGxiYWNrcyx0KX0sZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmlzU3RhcnRlZHx8KHRoaXMueGhyUmVxdWVzdFRyYWNrZXIuc3RhcnQoKSx0aGlzLmZldGNoUmVxdWVzdFRyYWNrZXIuc3RhcnQoKSx0aGlzLmlzU3RhcnRlZD0hMCl9LGUucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLmlzU3RhcnRlZCYmKHRoaXMueGhyUmVxdWVzdFRyYWNrZXIuc3RvcCgpLHRoaXMuZmV0Y2hSZXF1ZXN0VHJhY2tlci5zdG9wKCksdGhpcy5pc1N0YXJ0ZWQ9ITEpfSxlLnByb3RvdHlwZS5hcGlFcnJvckxpc3RlbmVyPWZ1bmN0aW9uKHQpe2lmKHQudXJsJiZ0LnN0YXR1c0NvZGUpe2lmKHQudXJsPXR0KHQudXJsKSxjc0FycmF5LnByb3RvdHlwZS5zb21lLmNhbGwodGhpcy5leGNsdWRlZERvbWFpbnMsKGZ1bmN0aW9uKGUpe3JldHVybi0xIT09Y3NTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0LnVybCxlKX0pKSlyZXR1cm47aWYodC5zdGF0dXNDb2RlPj00MDApe3ZhciBlPXRoaXMuYnVpbGRBcGlFcnJvcih0KTtjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5vbkV2ZW50Q2FsbGJhY2tzLChmdW5jdGlvbih0KXtyZXR1cm4gdChlKX0pKX19fSxlLnByb3RvdHlwZS5idWlsZEFwaUVycm9yPWZ1bmN0aW9uKHQpe3JldHVybntlcnJvclR5cGU6ImFwaUVycm9yIix1cmw6dC51cmwsbWV0aG9kOnQubWV0aG9kLHJlcXVlc3RUaW1lOnQucmVxdWVzdFRpbWUscmVzcG9uc2VUaW1lOnQucmVzcG9uc2VUaW1lLHN0YXR1c0NvZGU6dC5zdGF0dXNDb2RlLGxpYnJhcnk6dC5saWJyYXJ5fX0sZS5wcm90b3R5cGUuZXhjbHVkZURvbWFpbnM9ZnVuY3Rpb24odCl7dmFyIGU7KGU9Y3NBcnJheS5wcm90b3R5cGUucHVzaCkuY2FsbC5hcHBseShlLE1vKFt0aGlzLmV4Y2x1ZGVkRG9tYWluc10sdCkpfSxlLnRydW5jYXRlZEVycm9yTWVzc2FnZU1hcmtlcj0i4oCmIixlfShJbyksRG89ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSx4bz1mdW5jdGlvbih0LGUscixuKXt2YXIgaSxvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09bj9uPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTpuO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLG4pO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKGk9dFthXSkmJihzPShvPDM/aShzKTpvPjM/aShlLHIscyk6aShlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSxxbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5tb25rZXlQYXRjaGVyPWUsci5jYWxsYmFja3M9W10sci5vcGVuSG9vaz1mdW5jdGlvbih0KXt2YXIgZT10LmNvbnRleHQsbj10LmFyZ3MsaT10LmNhbGxlck5hbWU7cmV0dXJuIHIuaW50ZXJjZXB0T3BlbihlLG4saSl9LHJ9cmV0dXJuIERvKGUsdCksZS5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5jYWxsYmFja3MsdCl9LGUucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5pc1N0YXJ0ZWR8fCh0aGlzLmNyZWF0ZUludGVyY2VwdG9ycygpLHRoaXMub3BlbkludGVyY2VwdG9yJiZ0aGlzLm9wZW5JbnRlcmNlcHRvci5hY3RpdmF0ZSgpLHRoaXMuaXNTdGFydGVkPSEwKX0sZS5wcm90b3R5cGUuY3JlYXRlSW50ZXJjZXB0b3JzPWZ1bmN0aW9uKCl7dGhpcy5vcGVuSW50ZXJjZXB0b3J8fCh0aGlzLm9wZW5JbnRlcmNlcHRvcj10aGlzLm1vbmtleVBhdGNoZXIuY3JlYXRlU3luY0Z1bmN0aW9uSW50ZXJjZXB0b3Ioe3RhcmdldDpYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUsbWV0aG9kTmFtZToib3BlbiIsaG9vazp0aGlzLm9wZW5Ib29rLG9wdGlvbnM6e3dpdGhDYWxsZXJOYW1lOiEwfX0pKX0sZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuaXNTdGFydGVkJiYodGhpcy5vcGVuSW50ZXJjZXB0b3ImJnRoaXMub3BlbkludGVyY2VwdG9yLmRlYWN0aXZhdGUoKSx0aGlzLmlzU3RhcnRlZD0hMSl9LGUucHJvdG90eXBlLmludGVyY2VwdE9wZW49ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXRoaXM7dC5hcGlDYWxsPXt1cmw6ZVsxXSxtZXRob2Q6ZVswXSxyZXF1ZXN0VGltZTpELm5vdygpLHJlc3BvbnNlVGltZTowLHN0YXR1c0NvZGU6MH0sdC5hcGlDYWxsLmxpYnJhcnk9cix0LmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLChmdW5jdGlvbih0KXtyZXR1cm4gbi5yZWFkeVN0YXRlQ2hhbmdlTGlzdGVuZXIodC50YXJnZXQpfSkpfSxlLnByb3RvdHlwZS5yZWFkeVN0YXRlQ2hhbmdlTGlzdGVuZXI9ZnVuY3Rpb24odCl7dC5yZWFkeVN0YXRlPT09WE1MSHR0cFJlcXVlc3QuRE9ORSYmKHQuYXBpQ2FsbC5yZXNwb25zZVRpbWU9RC5ub3coKSx0LmFwaUNhbGwuc3RhdHVzQ29kZT10LnN0YXR1cyxjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5jYWxsYmFja3MsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQuYXBpQ2FsbCl9KSkpfSx4byhbZHQoIlhoclJlcXVlc3RUcmFja2VyLmludGVyY2VwdE9wZW4iKV0sZS5wcm90b3R5cGUsImludGVyY2VwdE9wZW4iLG51bGwpLHhvKFtkdCgiWGhyUmVxdWVzdFRyYWNrZXIucmVhZHlTdGF0ZUNoYW5nZUxpc3RlbmVyIildLGUucHJvdG90eXBlLCJyZWFkeVN0YXRlQ2hhbmdlTGlzdGVuZXIiLG51bGwpLGV9KElvKSxVbz1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpLFZvPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz9lOm51bGw9PT1uP249T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHIpOm47aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUodCxlLHIsbik7ZWxzZSBmb3IodmFyIGE9dC5sZW5ndGgtMTthPj0wO2EtLSkoaT10W2FdKSYmKHM9KG88Mz9pKHMpOm8+Mz9pKGUscixzKTppKGUscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHMpLHN9LGpvPWZ1bmN0aW9uKHQsZSxyLG4pe3JldHVybiBuZXcocnx8KHI9UHJvbWlzZSkpKChmdW5jdGlvbihpLG8pe2Z1bmN0aW9uIHModCl7dHJ5e2Mobi5uZXh0KHQpKX1jYXRjaCh0KXtvKHQpfX1mdW5jdGlvbiBhKHQpe3RyeXtjKG4udGhyb3codCkpfWNhdGNoKHQpe28odCl9fWZ1bmN0aW9uIGModCl7dmFyIGU7dC5kb25lP2kodC52YWx1ZSk6KGU9dC52YWx1ZSxlIGluc3RhbmNlb2Ygcj9lOm5ldyByKChmdW5jdGlvbih0KXt0KGUpfSkpKS50aGVuKHMsYSl9Yygobj1uLmFwcGx5KHQsZXx8W10pKS5uZXh0KCkpfSkpfSx6bz1mdW5jdGlvbih0LGUpe3ZhciByLG4saSxvLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmaVswXSl0aHJvdyBpWzFdO3JldHVybiBpWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIG89e25leHQ6YSgwKSx0aHJvdzphKDEpLHJldHVybjphKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYob1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxvO2Z1bmN0aW9uIGEobyl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihvKXtpZihyKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO3M7KXRyeXtpZihyPTEsbiYmKGk9MiZvWzBdP24ucmV0dXJuOm9bMF0/bi50aHJvd3x8KChpPW4ucmV0dXJuKSYmaS5jYWxsKG4pLDApOm4ubmV4dCkmJiEoaT1pLmNhbGwobixvWzFdKSkuZG9uZSlyZXR1cm4gaTtzd2l0Y2gobj0wLGkmJihvPVsyJm9bMF0saS52YWx1ZV0pLG9bMF0pe2Nhc2UgMDpjYXNlIDE6aT1vO2JyZWFrO2Nhc2UgNDpyZXR1cm4gcy5sYWJlbCsrLHt2YWx1ZTpvWzFdLGRvbmU6ITF9O2Nhc2UgNTpzLmxhYmVsKyssbj1vWzFdLG89WzBdO2NvbnRpbnVlO2Nhc2UgNzpvPXMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEoaT1zLnRyeXMsKGk9aS5sZW5ndGg+MCYmaVtpLmxlbmd0aC0xXSl8fDYhPT1vWzBdJiYyIT09b1swXSkpe3M9MDtjb250aW51ZX1pZigzPT09b1swXSYmKCFpfHxvWzFdPmlbMF0mJm9bMV08aVszXSkpe3MubGFiZWw9b1sxXTticmVha31pZig2PT09b1swXSYmcy5sYWJlbDxpWzFdKXtzLmxhYmVsPWlbMV0saT1vO2JyZWFrfWlmKGkmJnMubGFiZWw8aVsyXSl7cy5sYWJlbD1pWzJdLHMub3BzLnB1c2gobyk7YnJlYWt9aVsyXSYmcy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlfW89ZS5jYWxsKHQscyl9Y2F0Y2godCl7bz1bNix0XSxuPTB9ZmluYWxseXtyPWk9MH1pZig1Jm9bMF0pdGhyb3cgb1sxXTtyZXR1cm57dmFsdWU6b1swXT9vWzFdOnZvaWQgMCxkb25lOiEwfX0oW28sYV0pfX19LEJvPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wLHI9YXJndW1lbnRzLmxlbmd0aDtlPHI7ZSsrKXQrPWFyZ3VtZW50c1tlXS5sZW5ndGg7dmFyIG49QXJyYXkodCksaT0wO2ZvcihlPTA7ZTxyO2UrKylmb3IodmFyIG89YXJndW1lbnRzW2VdLHM9MCxhPW8ubGVuZ3RoO3M8YTtzKyssaSsrKW5baV09b1tzXTtyZXR1cm4gbn0sSG89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgcj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIubW9ua2V5UGF0Y2hlcj1lLHIuY2FsbGJhY2tzPVtdLHIuaG9vaz1mdW5jdGlvbih0KXt2YXIgZT10LnJlc3VsdCxuPXQuYXJncyxpPXQuY2FsbGVyTmFtZTtyLmludGVyY2VwdEZldGNoKGUsbixpKX0scn1yZXR1cm4gVW8oZSx0KSxlLnByb3RvdHlwZS5vbkV2ZW50PWZ1bmN0aW9uKHQpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmNhbGxiYWNrcyx0KX0sZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmNhblRyYWNrRmV0Y2goKSYmIXRoaXMuaXNTdGFydGVkJiYodGhpcy5jcmVhdGVGZXRjaEludGVyY2VwdG9yKCksdGhpcy5mZXRjaEludGVyY2VwdG9yJiZ0aGlzLmZldGNoSW50ZXJjZXB0b3IuYWN0aXZhdGUoKSx0aGlzLmlzU3RhcnRlZD0hMCl9LGUucHJvdG90eXBlLmNhblRyYWNrRmV0Y2g9ZnVuY3Rpb24oKXtyZXR1cm4hIXdpbmRvdy5mZXRjaCYmImZ1bmN0aW9uIj09dHlwZW9mIHdpbmRvdy5mZXRjaH0sZS5wcm90b3R5cGUucHJlcGFyZUFyZ3M9ZnVuY3Rpb24odCxlKXt2YXIgcj1CbyhlKTtyZXR1cm4gclswXSYmImZ1bmN0aW9uIj09dHlwZW9mIHJbMF0uY2xvbmUmJihyWzBdPWVbMF0uY2xvbmUoKSkse2NvbnRleHQ6dCxhcmdzOnJ9fSxlLnByb3RvdHlwZS5jcmVhdGVGZXRjaEludGVyY2VwdG9yPWZ1bmN0aW9uKCl7dGhpcy5mZXRjaEludGVyY2VwdG9yfHwodGhpcy5mZXRjaEludGVyY2VwdG9yPXRoaXMubW9ua2V5UGF0Y2hlci5jcmVhdGVBc3luY0Z1bmN0aW9uSW50ZXJjZXB0b3Ioe3RhcmdldDp3aW5kb3csbWV0aG9kTmFtZToiZmV0Y2giLGhvb2s6dGhpcy5ob29rLGhvb2tQcmVwYXJlQXJnczp0aGlzLnByZXBhcmVBcmdzLG9wdGlvbnM6e3dpdGhDYWxsZXJOYW1lOiEwfX0pKX0sZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuaXNTdGFydGVkJiYodGhpcy5mZXRjaEludGVyY2VwdG9yJiZ0aGlzLmZldGNoSW50ZXJjZXB0b3IuZGVhY3RpdmF0ZSgpLHRoaXMuaXNTdGFydGVkPSExKX0sZS5wcm90b3R5cGUuaW50ZXJjZXB0RmV0Y2g9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBqbyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saSxvLHMsYSxjO3JldHVybiB6byh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiB1LnRyeXMucHVzaChbMCwyLCwzXSksbj1lWzBdLGk9ZVsxXSxvPW5ldyBSZXF1ZXN0KG4saSksKHM9e3VybDpvLnVybCxtZXRob2Q6by5tZXRob2QscmVxdWVzdFRpbWU6RC5ub3coKSxyZXNwb25zZVRpbWU6MCxzdGF0dXNDb2RlOjB9KS5saWJyYXJ5PXIsWzQsdF07Y2FzZSAxOnJldHVybiBhPXUuc2VudCgpLHMucmVzcG9uc2VUaW1lPUQubm93KCksYS50eXBlLmluZGV4T2YoIm9wYXF1ZSIpPi0xP3Muc3RhdHVzQ29kZT0tMTpzLnN0YXR1c0NvZGU9YS5zdGF0dXMsY3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuY2FsbGJhY2tzLChmdW5jdGlvbih0KXtyZXR1cm4gdChzKX0pKSxbMywzXTtjYXNlIDI6cmV0dXJuIGM9dS5zZW50KCksZnQuZXJyb3IoIkVycm9yIGluIEZldGNoUmVxdWVzdFRyYWNrZXIuaW50ZXJjZXB0RmV0Y2g6IitjKyIpIiksWzMsM107Y2FzZSAzOnJldHVyblsyXX19KSl9KSl9LFZvKFtkdCgiRmV0Y2hSZXF1ZXN0VHJhY2tlci5pbnRlcmNlcHRGZXRjaCIpXSxlLnByb3RvdHlwZSwiaW50ZXJjZXB0RmV0Y2giLG51bGwpLGV9KElvKTtDbz13b3x8KHdvPXt9KSxSbz1bRXIuTU9VU0VNT1ZFLEVyLk1PVVNFRE9XTixFci5NT1VTRVVQLEVyLkNMSUNLLEVyLk1PVVNFT1ZFUixFci5NT1VTRU9VVCxFci5UQVBdLENvLnRyYW5zZm9ybUV2ZW50PWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gZS50YXJnZXQmJihlLnRhcmdldD0iIit0K0pvK2UudGFyZ2V0KSxlLnRhcmdldEhlYXRtYXAmJihlLnRhcmdldEhlYXRtYXA9IiIrdCtKbytlLnRhcmdldEhlYXRtYXApLGUudGFyZ2V0TGluayYmKGUudGFyZ2V0TGluaz0iIit0K0pvK2UudGFyZ2V0TGluayksZX0oZSxmdW5jdGlvbih0LGUpe2lmKG49ZS50eXBlLC0xIT09Y3NBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKFJvLG4pKXt2YXIgcj10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2UueCYmKGUueD1NYXRoLnJvdW5kKHIubGVmdCtlLngrZ2Uud2luZG93T2Zmc2V0WCgpKSksZS55JiYoZS55PU1hdGgucm91bmQoci50b3ArZS55K2dlLndpbmRvd09mZnNldFkoKSkpfXZhciBuO3JldHVybiBlfSh0LHIpKX0sKGJvfHwoYm89e30pKS50cmFuc2Zvcm1Db21tYW5kc0JhdGNoPWZ1bmN0aW9uKHQsZSl7cmV0dXJue2lmcmFtZVBhdGg6ZS5pZnJhbWVQYXRoPyIiK3QrSm8rZS5pZnJhbWVQYXRoOnQsY29tbWFuZHM6ZS5jb21tYW5kc319O3ZhciBGbyxHbz1mdW5jdGlvbigpe3JldHVybihHbz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLG49YXJndW1lbnRzLmxlbmd0aDtyPG47cisrKWZvcih2YXIgaSBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmKHRbaV09ZVtpXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9OyhGb3x8KEZvPXt9KSkudHJhbnNmb3JtRW1lcmNoYW5kaXNpbmdNZXNzYWdlPWZ1bmN0aW9uKHQsZSl7aWYoMD09PWUucHJvZHVjdHMubGVuZ3RoKXJldHVybiBlO3ZhciByPWNzQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGUucHJvZHVjdHMsKGZ1bmN0aW9uKGUpe3JldHVybiBHbyhHbyh7fSxlKSx7dGFyZ2V0UGF0aDoiIit0K0pvK2UudGFyZ2V0UGF0aH0pfSkpO3JldHVybiBHbyhHbyh7fSxlKSx7cHJvZHVjdHM6cn0pfTt2YXIgV28sWG89ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSxKbz0ifGlmcmFtZXwiLFlvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBYbyhlLHQpLGUucHJvdG90eXBlLmVtaXRJZnJhbWVFdmVudD1mdW5jdGlvbih0LGUscixuKXtzd2l0Y2gocil7Y2FzZSBpdC5DaGlsZExvZ01lc3NhZ2U6dGhpcy5sb2dNZXNzYWdlKG4pO2JyZWFrO2Nhc2UgaXQuQW5hbHlzaXNFdmVudDp2YXIgaT13by50cmFuc2Zvcm1FdmVudCh0LGUsbik7dGhpcy5lbWl0SWZyYW1lQW5hbHlzaXNFdmVudChpKTticmVhaztjYXNlIGl0LkphdmFzY3JpcHRFcnJvcjp0aGlzLmVtaXRJZnJhbWVKYXZhc2NyaXB0RXJyb3Iobik7YnJlYWs7Y2FzZSBpdC5BcGlFcnJvcjp0aGlzLmVtaXRJZnJhbWVBcGlFcnJvcihuKTticmVhaztjYXNlIGl0LkVtZXJjaGFuZGlzaW5nTWVzc2FnZTp2YXIgbz1Gby50cmFuc2Zvcm1FbWVyY2hhbmRpc2luZ01lc3NhZ2UoZSxuKTt0aGlzLmVtaXRJZnJhbWVFbWVyY2hhbmRpc2luZ01lc3NhZ2Uobyk7YnJlYWs7Y2FzZSBpdC5Db21tYW5kczp2YXIgcz1iby50cmFuc2Zvcm1Db21tYW5kc0JhdGNoKGUsbik7dGhpcy5lbWl0SWZyYW1lQ29tbWFuZHMocyk7YnJlYWs7ZGVmYXVsdDpmdC5lcnJvcigiUGFyZW50IHJlY2VpdmVkIHVua25vd24gZGF0YSB0eXBlIGZyb20gaWZyYW1lIDogIitjc0pTT04uc3RyaW5naWZ5KG4pKX19LGUucHJvdG90eXBlLmxvZ01lc3NhZ2U9ZnVuY3Rpb24odCl7dmFyIGU9dC5tZXNzYWdlLHI9dC5lcnJvckNvZGU7c3dpdGNoKHQubGV2ZWwpe2Nhc2UgTS5kZWJ1ZzpmdC5kZWJ1ZyhlLHIpO2JyZWFrO2Nhc2UgTS53YXJuOmZ0Lndhcm4oZSxyKTticmVhaztjYXNlIE0uZXJyb3I6ZnQuZXJyb3IoZSxyKTticmVhaztjYXNlIE0uY3JpdGljYWw6ZnQuY3JpdGljYWwoZSxyKX19LGUucHJvdG90eXBlLmVtaXRJZnJhbWVBbmFseXNpc0V2ZW50PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLHI9dGhpcy5saXN0ZW5lcnM7ZTxyLmxlbmd0aDtlKyspe3ZhciBuPXJbZV07bi5vbklmcmFtZUFuYWx5c2lzRXZlbnQmJm4ub25JZnJhbWVBbmFseXNpc0V2ZW50KHQpfX0sZS5wcm90b3R5cGUuZW1pdElmcmFtZUphdmFzY3JpcHRFcnJvcj1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxyPXRoaXMubGlzdGVuZXJzO2U8ci5sZW5ndGg7ZSsrKXt2YXIgbj1yW2VdO24ub25JZnJhbWVKYXZhc2NyaXB0RXJyb3ImJm4ub25JZnJhbWVKYXZhc2NyaXB0RXJyb3IodCl9fSxlLnByb3RvdHlwZS5lbWl0SWZyYW1lQXBpRXJyb3I9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAscj10aGlzLmxpc3RlbmVycztlPHIubGVuZ3RoO2UrKyl7dmFyIG49cltlXTtuLm9uSWZyYW1lQXBpRXJyb3ImJm4ub25JZnJhbWVBcGlFcnJvcih0KX19LGUucHJvdG90eXBlLmVtaXRJZnJhbWVFbWVyY2hhbmRpc2luZ01lc3NhZ2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAscj10aGlzLmxpc3RlbmVycztlPHIubGVuZ3RoO2UrKyl7dmFyIG49cltlXTtuLm9uSWZyYW1lRW1lcmNoYW5kaXNpbmdNZXNzYWdlJiZuLm9uSWZyYW1lRW1lcmNoYW5kaXNpbmdNZXNzYWdlKHQpfX0sZS5wcm90b3R5cGUuZW1pdElmcmFtZUNvbW1hbmRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLHI9dGhpcy5saXN0ZW5lcnM7ZTxyLmxlbmd0aDtlKyspe3ZhciBuPXJbZV07bi5vbklmcmFtZUNvbW1hbmRzJiZuLm9uSWZyYW1lQ29tbWFuZHModCl9fSxlfShUaSk7IWZ1bmN0aW9uKHQpe3QuQ09NUFJFU1NJT05fRElTQUJMRUQ9ImNvbXByZXNzaW9uRGlzYWJsZWQifShXb3x8KFdvPXt9KSk7dmFyIEtvLFFvLFpvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmNvb2tpZVNlcnZpY2U9dCx0aGlzLmNvb2tpZUZsYWdzPVtdfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb29raWVTZXJ2aWNlLmdldCgiX2NzX2RlYnVnIik7dCYmKHRoaXMuY29va2llRmxhZ3M9Y3NTdHJpbmcucHJvdG90eXBlLnNwbGl0LmNhbGwodCwiLiIpKX0sdC5wcm90b3R5cGUuaXNDb21wcmVzc2lvbkRpc2FibGVkPWZ1bmN0aW9uKCl7cmV0dXJuLTEhPT1jc0FycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcy5jb29raWVGbGFncyxXby5DT01QUkVTU0lPTl9ESVNBQkxFRCl9LHR9KCksJG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMub25FcnJvcj10LHRoaXMud29ya2VyPXRoaXMudHJ5Q3JlYXRlQ29tcHJlc3Npb25Xb3JrZXIoKSx0aGlzLmNhbGxiYWNrcz17fSx0aGlzLmNhbGxiYWNrSWQ9MH1yZXR1cm4gdC5wcm90b3R5cGUuaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMud29ya2VyfSx0LnByb3RvdHlwZS5jb21wcmVzcz1mdW5jdGlvbih0LGUscil7aWYodGhpcy5pc1N1cHBvcnRlZCgpKXt2YXIgbj10aGlzLmdldE5ld0NhbGxiYWNrSWQoKTt0aGlzLmNhbGxiYWNrc1tuXT1yLHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKFt0LGUsbl0pfX0sdC5wcm90b3R5cGUuY29tcHJlc3NTeW5jPWZ1bmN0aW9uKHQpe3JldHVybiBsbi5jb21wcmVzc1RvQmFzZTY0KHQpfSx0LnByb3RvdHlwZS50ZXJtaW5hdGVXb3JrZXI9ZnVuY3Rpb24oKXtudWxsIT09dGhpcy53b3JrZXImJnRoaXMud29ya2VyLnRlcm1pbmF0ZSgpfSx0LnByb3RvdHlwZS50cnlDcmVhdGVDb21wcmVzc2lvbldvcmtlcj1mdW5jdGlvbigpe3RyeXt2YXIgdD1jc1N0cmluZy5wcm90b3R5cGUucmVwbGFjZS5jYWxsKHRoaXMuY29tcHJlc3Npb25TY3JpcHQudG9TdHJpbmcoKSwiR0VUX0xaX1NUUklOR19TT1VSQ0UiLHBuKTtyZXR1cm4gdGhpcy5jcmVhdGVXb3JrZXIoIigiK3QrIikoKTsiKX1jYXRjaCh0KXtyZXR1cm4gbnVsbH19LHQucHJvdG90eXBlLmNyZWF0ZVdvcmtlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLHI9d2luZG93LmNzVVJMfHx3aW5kb3cud2Via2l0VVJMLG49d2luZG93LkJsb2IsaT13aW5kb3cuV29ya2VyO2lmKCFyfHwhbnx8IWkpcmV0dXJuIG51bGw7dmFyIG89bmV3IG4oW3RdLHt0eXBlOiJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0In0pLHM9bmV3IGkoci5jcmVhdGVPYmplY3RVUkwobykpO3JldHVybiBzLm9uZXJyb3I9ZnVuY3Rpb24odCl7cmV0dXJuIGUuaGFuZGxlV29ya2VyRXJyb3IodCl9LHMub25tZXNzYWdlPWZ1bmN0aW9uKHQpe3JldHVybiBlLmhhbmRsZVdvcmtlck1lc3NhZ2UodCl9LHN9LHQucHJvdG90eXBlLmhhbmRsZVdvcmtlckVycm9yPWZ1bmN0aW9uKHQpe3ZhciBlPSJXb3JrZXJFcnJvcjogIisodC5tZXNzYWdlP3QubWVzc2FnZToiTm8gbWVzc2FnZSIpO3JldHVybiB0aGlzLm9uRXJyb3IoZSl9LHQucHJvdG90eXBlLmhhbmRsZVdvcmtlck1lc3NhZ2U9ZnVuY3Rpb24odCl7dmFyIGU9dC5kYXRhLHI9ZVswXSxuPWVbMV07dGhpcy5jYWxsYmFja3Nbcl0obiksZGVsZXRlIHRoaXMuY2FsbGJhY2tzW3JdfSx0LnByb3RvdHlwZS5jb21wcmVzc2lvblNjcmlwdD1mdW5jdGlvbigpe3ZhciB0PUdFVF9MWl9TVFJJTkdfU09VUkNFKCk7c2VsZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZnVuY3Rpb24oZSl7dmFyIHIsbj1lLmRhdGEsaT1uWzBdLG89blsxXSxzPW5bMl07c3dpdGNoKGkpe2Nhc2UiYmFzZTY0IjpyPXQuY29tcHJlc3NUb0Jhc2U2NChvKTticmVhaztjYXNlImJ5dGVBcnJheSI6cj10LmNvbXByZXNzVG9VaW50OEFycmF5KG8pLmJ1ZmZlcn1zZWxmLnBvc3RNZXNzYWdlKFtzLHJdKX0pKX0sdC5wcm90b3R5cGUuZ2V0TmV3Q2FsbGJhY2tJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbGxiYWNrSWQrPTF9LHR9KCksdHM9ZnVuY3Rpb24oKXtyZXR1cm4odHM9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHI9MSxuPWFyZ3VtZW50cy5sZW5ndGg7cjxuO3IrKylmb3IodmFyIGkgaW4gZT1hcmd1bWVudHNbcl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJih0W2ldPWVbaV0pO3JldHVybiB0fSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5waWk9dCx0aGlzLnVybE1hc2tpbmdQYXR0ZXJucz1bXX1yZXR1cm4gdC5wcm90b3R5cGUuYWRkVXJsTWFza2luZ1BhdHRlcm49ZnVuY3Rpb24oZSl7Zm9yKHZhciByPVtdLG49MCxpPWNzU3RyaW5nLnByb3RvdHlwZS5zcGxpdC5jYWxsKGUsIi8iKTtuPGkubGVuZ3RoO24rKyl7dmFyIG89aVtuXTtPKG8sdC5ST1VURV9QQVJBTUVURVJfU1RBUlQpP2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChyLHtrZXk6byx2YWx1ZToiQ1NfQU5PTllNSVpFRF8iK2NzU3RyaW5nLnByb3RvdHlwZS50b1VwcGVyQ2FzZS5jYWxsKGNzU3RyaW5nLnByb3RvdHlwZS5zbGljZS5jYWxsKG8sMSkpfSk6Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHIse2tleTpvLHZhbHVlOm51bGx9KX1jc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy51cmxNYXNraW5nUGF0dGVybnMscil9LHQucHJvdG90eXBlLmFub255bWl6ZT1mdW5jdGlvbih0KXtyZXR1cm4gdHModHMoe30sdCkse3VybDp0aGlzLmFub255bWl6ZVVybCh0LnVybCl9KX0sdC5wcm90b3R5cGUuYW5vbnltaXplVXJsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1hc2tVcmwodGhpcy5waWkuYW5vbnltaXplKHRoaXMucmVtb3ZlUXVlcnlTdHJpbmcodCkpKX0sdC5wcm90b3R5cGUubWFza1VybD1mdW5jdGlvbih0KXtmb3IodmFyIGU9Y3NTdHJpbmcucHJvdG90eXBlLnNwbGl0LmNhbGwodCwiLyIpLHI9MCxuPXRoaXMudXJsTWFza2luZ1BhdHRlcm5zO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdLG89dGhpcy5nZXRBbm9ueW1pemVkVXJsKGUsaSk7aWYobnVsbCE9PW8pcmV0dXJuIG99cmV0dXJuIHR9LHQucHJvdG90eXBlLmdldEFub255bWl6ZWRVcmw9ZnVuY3Rpb24oZSxyKXtpZihlLmxlbmd0aDxyLmxlbmd0aClyZXR1cm4gbnVsbDtmb3IodmFyIG49IiIsaT0wO2k8ZS5sZW5ndGg7aSs9MSlpZihpPj1yLmxlbmd0aCluKz1lW2ldKyIvIjtlbHNlIGlmKE8ocltpXS5rZXksdC5ST1VURV9QQVJBTUVURVJfU1RBUlQpKW4rPXJbaV0udmFsdWUrIi8iO2Vsc2V7aWYoZVtpXSE9PXJbaV0ua2V5KXJldHVybiBudWxsO24rPWVbaV0rIi8ifXJldHVybiBjc1N0cmluZy5wcm90b3R5cGUuc2xpY2UuY2FsbChuLDAsLTEpfSx0LnByb3RvdHlwZS5yZW1vdmVRdWVyeVN0cmluZz1mdW5jdGlvbih0KXt2YXIgZT1jc1N0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHQsIj8iKTtyZXR1cm4tMSE9PWU/Y3NTdHJpbmcucHJvdG90eXBlLnNsaWNlLmNhbGwodCwwLGUrMSk6dH0sdC5ST1VURV9QQVJBTUVURVJfU1RBUlQ9IjoiLHR9KCkscnM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5waWk9dCx0aGlzLnVybFNlcnZpY2U9ZX1yZXR1cm4gdC5wcm90b3R5cGUuYW5vbnltaXplPWZ1bmN0aW9uKHQpe3JldHVybiBTdCh0Lm1lc3NhZ2UpJiYodC5tZXNzYWdlPXRoaXMucGlpLmFub255bWl6ZSh0Lm1lc3NhZ2UpKSxTdCh0LmZpbGVuYW1lKSYmKHQuZmlsZW5hbWU9dGhpcy5waWkuYW5vbnltaXplKHRoaXMudXJsU2VydmljZS5jb21wdXRlT3ZlcnJpZGRlblVybCh0LmZpbGVuYW1lKSkpLHR9LHR9KCksbnM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLmNvb2tpZUNoZWNrZXI9ZSx0aGlzLnBhcmVudExvZ0NvbnRleHQ9cn1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cGVyZm9ybWFuY2UubWFyaygiY3Mtc3RhcnQtYm9vdCIpO3ZhciBlPW5ldyBraSxyPW5ldyBXLG49bmV3IFVpLGk9bmV3IEJpKHRoaXMuY29uZmlndXJhdGlvbixuLHIpLG89bmV3IFRvKHdpbmRvdy5sb2NhdGlvbixyKSxzPW5ldyBSdCh0aGlzLmNvbmZpZ3VyYXRpb24sbyx0aGlzLmNvb2tpZUNoZWNrZXIpO3MuaW5pdCgpO3ZhciBhPW5ldyB4aSh3aW5kb3cubG9jYXRpb24scyksYz1uZXcgWm8ocyk7Yy5pbml0KCk7dmFyIHU9bmV3IGxvKHRoaXMuY29uZmlndXJhdGlvbixzKTt1LmluaXQoKTt2YXIgcCxsPW5ldyAkbygoZnVuY3Rpb24odCl7ZnQud2Fybih0KX0pKTtpZih0aGlzLmNvbmZpZ3VyYXRpb24udXNlTWFsa2FQaXBlbGluZSl7dmFyIGg9bmV3IEh0KHRoaXMuY29uZmlndXJhdGlvbi5nZXRRdW90YVNlcnZpY2VVcmkoKSwicXVvdGEiKTsocD1uZXcgX28odGhpcy5jb25maWd1cmF0aW9uLGwsaCxlLGEpKS5pbml0KCl9ZWxzZSBwPW5ldyBFaSh0aGlzLmNvbmZpZ3VyYXRpb24sbCxhLG8pO3ZhciBmPW5ldyBNdChzLHUpLGQ9bmV3IHdpKGYscyxwKSx5PW5ldyBtaSh0aGlzLmNvbmZpZ3VyYXRpb24sZCxzLHUpO3RoaXMucGFyZW50TG9nQ29udGV4dC5zZXRDb250ZXh0KHksZCkscC5zZXRWaXNpdG9yU2VydmljZSh5KTt2YXIgdj1uZXcgUmkodGhpcy5jb25maWd1cmF0aW9uLHMseSxkKSxtPW5ldyB4dCh3aW5kb3cubG9jYXRpb24scyx1KSxnPW5ldyBEaShtKSxTPW5ldyBDaSh0aGlzLmNvbmZpZ3VyYXRpb24seSxtKSxFPW5ldyBPdCh5LGQsbSx0aGlzLmNvbmZpZ3VyYXRpb24scyx1KSx3PW5ldyBqdCxDPW5ldyBVdCh3LHdpbmRvdy5sb2NhdGlvbiksUj1uZXcgSmkodGhpcy5jb25maWd1cmF0aW9uLEUsQyksYj1uZXcgZm8odGhpcy5jb25maWd1cmF0aW9uLHcpO3Uuc2V0U3RhdGVzKEUsYik7dmFyIFQ9bmV3IHlpKHRoaXMuY29uZmlndXJhdGlvbix5LG0sUyx2LFIsdSxhKTtyZXR1cm4gaS5pbml0KCksVC5jb21wdXRlKChmdW5jdGlvbihuKXt2YXIgaT1uZXcgWW8sYT1uZXcgJGkscD1uZXcgWWkoYSxpKTtwLmluaXQoKTt2YXIgaD1uZXcga28sZj1uZXcgT2kocyksdj1uZXcgTWkodC5jb25maWd1cmF0aW9uLGYsZSxzKSxtPW5ldyBOaShhLHYpLFM9bmV3IEhpKGUsd2luZG93LmxvY2F0aW9uLHMpLEU9bmV3IEdpKGEsUyksdz1uZXcgU28oYSx0LmNvbmZpZ3VyYXRpb24pLEM9bmV3IHZvKHQuY29uZmlndXJhdGlvbix5LGQpLFI9bmV3IGdvLGI9bmV3IGNyLFQ9bmV3IHFvKGIpLEE9bmV3IEhvKGIpLGs9bmV3IExvKFQsQSksUD1uZXcgZXMociksTz1uZXcgcnMocixvKSxfPW5ldyB1byhSLE8sayxQLHQuY29uZmlndXJhdGlvbixDLGksYSk7KF8uaW5pdCgpLHBlcmZvcm1hbmNlLm1hcmsoImNzLXN0ZXAyLWJvb3QiKSxlLmFkZExpc3RlbmVycyhfKSxuKT8oZS5lbWl0SW5pdFRyYWNraW5nKCksbmV3IGRpKEMsbCx5LGQsZSxhLHAsdC5jb25maWd1cmF0aW9uLEUsUyxtLHYscixzLHUsbyx3LGgsUixPLGssUCxpLGMpLnN0YXJ0KCkpOm5ldyBMaShlLGEscCxFLFMsZyxtKS5zdGFydCgpfSkpLHBlcmZvcm1hbmNlLm1hcmsoImNzLWVuZC1ib290IikscGVyZm9ybWFuY2UubWVhc3VyZSgiY3MtbWVhc3VyZS1ib290IiwiY3Mtc3RhcnQtYm9vdCIsImNzLWVuZC1ib290Iikse0xaU3RyaW5nOmxufX0sdH0oKTshZnVuY3Rpb24odCl7dmFyIGUscj17bG9hZEJ1bmRsZTpmdW5jdGlvbih0KXt2YXIgcz10LnNvdXJjZSxhPXQuZGF0YTtpZihpKGEpKXt2YXIgcD1mdW5jdGlvbigpe3ZhciBlLHIsaSxvPW4oIntkb21haW59L3RhZy90YWcuYnVuZGxlLmpzP3Y9e3ZlcnNpb259IixhKTtlPW8scj1mdW5jdGlvbigpe3JldHVybiBzLnBvc3RNZXNzYWdlKCJjc0J1bmRsZUxvYWRlZCIsdC5vcmlnaW4pfSwoaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSkudHlwZT0idGV4dC9qYXZhc2NyaXB0IixpLmFzeW5jPSEwLGkuc3JjPWUsaS5vbmxvYWQ9cixpLmNoYXJzZXQ9InV0Zi04Iixkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGkpfTtlPWEudG9rZW4sdShyLmxvYWRCdW5kbGUpLG8odC5vcmlnaW4pP3AoKTpmdW5jdGlvbih0LGUpe3ZhciByPWZ1bmN0aW9uKHQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO3JldHVybiBlLnNyYz10LGUuaWQ9ImNvbnRlbnQtc3F1YXJlLWJyaWRnZSIsZS5zZXRBdHRyaWJ1dGUoInN0eWxlIiwiZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB2aXNpYmlsaXR5OiBoaWRkZW4gIWltcG9ydGFudDsiKSxlfShuKCJ7ZG9tYWlufS90YWcvYnJpZGdlLmh0bWw/dj17dmVyc2lvbn0je3Rva2VufSIsdCkpLGk9ZnVuY3Rpb24odCl7dC5zb3VyY2U9PT1yLmNvbnRlbnRXaW5kb3cmJiJUT0tFTl9WQUxJRCI9PT10LmRhdGEmJih1KGkpLHIucmVtb3ZlKCksZSgpKX07YyhpKSxkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHIpfShhLHApfX19O2Z1bmN0aW9uIG4odCxlKXtyZXR1cm4gY3NTdHJpbmcucHJvdG90eXBlLnJlcGxhY2UuY2FsbChjc1N0cmluZy5wcm90b3R5cGUucmVwbGFjZS5jYWxsKGNzU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlLmNhbGwodCwie3ZlcnNpb259IixlLnZlcnNpb24pLCJ7dG9rZW59IixlLnRva2VuKSwie2RvbWFpbn0iLGUuZG9tYWluKX1mdW5jdGlvbiBpKHQpe3JldHVybiB0JiYiY3NCdW5kbGVJbmplY3Rpb24iPT09dC50eXBlJiZvKHQuZG9tYWluKSYmYSh0LnZlcnNpb24pJiZzKHQudG9rZW4pfWZ1bmN0aW9uIG8odCl7cmV0dXJuL15odHRwcz86XC9cL1thLXpBLVowLTlcLlwtXStcLihjb250ZW50LXNxdWFyZVwuZnJ8Y29udGVudHNxdWFyZVwuY29tKSQvLnRlc3QodCl9ZnVuY3Rpb24gcyh0KXtyZXR1cm4vXlthLXpBLVowLTldKyQvLnRlc3QodCl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4vXlthLXpBLVowLTlcLl0rJC8udGVzdCh0KX1mdW5jdGlvbiBjKHQpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIix0LCExKX1mdW5jdGlvbiB1KHQpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIix0LCExKX10LmdldFRva2VuPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LHQuaXNBdXRob3JpemVkSW5jb21pbmdNZXNzYWdlPWksdC5pc0F1dGhvcml6ZWREb21haW49byx0LmlzQXV0aG9yaXplZFRva2VuPXMsdC5pc0F1dGhvcml6ZWRUYWdWZXJzaW9uPWEsdC5pc0FjdGl2YWJsZT1mdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5vcGVuZXJ8fHdpbmRvdy5wYXJlbnQ7cmV0dXJuIHdpbmRvdyE9PXQmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyfSx0LndhaXRGb3JCdW5kbGVJbmplY3Rpb249ZnVuY3Rpb24oKXtjKHIubG9hZEJ1bmRsZSl9LHQubGlzdGVuPWMsdC5yZW1vdmVMaXN0ZW5lcj11fShLb3x8KEtvPXt9KSksZnVuY3Rpb24odCl7dmFyIGUscj13aW5kb3cub3BlbmVyfHx3aW5kb3cucGFyZW50LG49Wy9eaHR0cHM6XC9cL2FwcFwuY29udGVudHNxdWFyZVwuY29tJC8sL15odHRwczpcL1wvZGV2LWFwcFwuY29udGVudHNxdWFyZVwuY29tJC8sL15odHRwczpcL1wvc3RhZ2luZy1hcHBcLmNvbnRlbnRzcXVhcmVcLmNvbSQvLC9eaHR0cHM6XC9cLy4qXC50ZXN0XC5jb250ZW50c3F1YXJlXC5jb20kL10saT17cGluZzpmdW5jdGlvbih0KXsicGluZyI9PT10LmRhdGEmJm8odC5vcmlnaW4pJiYoZT10Lm9yaWdpbixjKGkucGluZyksYShpLmluc2VydE1lc3NhZ2VTY3JpcHQpLHMoInV0aWxzLmpzIisiP2NiPSIrKG5ldyBjc0RhdGUpLmdldFRpbWUoKSkpfSxpbnNlcnRNZXNzYWdlU2NyaXB0OnUoKGZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YTsic3RyaW5nIj09dHlwZW9mIGUmJiJwaW5nIiE9PWUmJihjKGkuaW5zZXJ0TWVzc2FnZVNjcmlwdCkscyhlKSl9KSl9O2Z1bmN0aW9uIG8odCl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChuLChmdW5jdGlvbihlKXtyZXR1cm4gZS50ZXN0KHQpfSkpfWZ1bmN0aW9uIHModCxyKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtuLnR5cGU9InRleHQvamF2YXNjcmlwdCIsbi5hc3luYz0hMDt2YXIgaT1jc1N0cmluZy5wcm90b3R5cGUucmVwbGFjZS5jYWxsKGUsL15odHRwcz86LywiIik7bi5zcmM9aSsiL3RhZy8iK3Qsbi5vbmxvYWQ9cixuLmNoYXJzZXQ9InV0Zi04Iixkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKG4pfWZ1bmN0aW9uIGEodCl7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHQsITEpfWZ1bmN0aW9uIGModCl7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHQsITEpfWZ1bmN0aW9uIHUodCl7cmV0dXJuIGZ1bmN0aW9uKHIpe3Iub3JpZ2luPT09ZSYmdChyKX19dC5nZXRUb2tlbj1mdW5jdGlvbigpe3JldHVybiBLby5nZXRUb2tlbigpfSx0LmlzQWN0aXZhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdyE9PXImJndpbmRvdy5hZGRFdmVudExpc3RlbmVyfSx0LmlzQXV0aG9yaXplZERvbWFpbj1vLHQud2FpdEZvckNvbm5lY3Rpb249ZnVuY3Rpb24oKXthKGkucGluZyksS28ud2FpdEZvckJ1bmRsZUluamVjdGlvbigpfSx0Lmxpc3Rlbj1hLHQucmVtb3ZlTGlzdGVuZXI9Yyx0LnNlY3VyZUxpc3RlbmVyPXUsdC5wb3N0PWZ1bmN0aW9uKHQpe2UmJnIucG9zdE1lc3NhZ2UodCxlKX19KFFvfHwoUW89e30pKTt2YXIgaXM9d2luZG93LkNTRnJhbWVDb21tdW5pY2F0aW9ufHxRbyxvcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2U9dH1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnJlZ2lzdGVyKGJyKSx0aGlzLmlmcmFtZUNvbW1hbmRzU2VuZGVyU2VydmljZS5yZWdpc3RlcihEbiksdGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2UucmVnaXN0ZXIoa24pLHRoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnJlZ2lzdGVyKFBuKSx0aGlzLmlmcmFtZUNvbW1hbmRzU2VuZGVyU2VydmljZS5yZWdpc3RlcihBbiksdGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2UucmVnaXN0ZXIoSXIpLHRoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnJlZ2lzdGVyKE5yKSx0aGlzLmlmcmFtZUNvbW1hbmRzU2VuZGVyU2VydmljZS5yZWdpc3RlcihNciksdGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2UucmVnaXN0ZXIoTHIpLHRoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnJlZ2lzdGVyKFZuKSx0aGlzLmlmcmFtZUNvbW1hbmRzU2VuZGVyU2VydmljZS5yZWdpc3RlcihqbiksdGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2UucmVnaXN0ZXIoRmkpLHRoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnJlZ2lzdGVyKG5pKSx0aGlzLmlmcmFtZUNvbW1hbmRzU2VuZGVyU2VydmljZS5yZWdpc3RlcihpaSksdGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2UucmVnaXN0ZXIoX2kpLHRoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnJlZ2lzdGVyKElpKSx0aGlzLmlmcmFtZUNvbW1hbmRzU2VuZGVyU2VydmljZS5yZWdpc3Rlcihjbyl9LHQucHJvdG90eXBlLm9uU3RhcnRUcmFja2luZz1mdW5jdGlvbigpe3RoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnN0YXJ0KCl9LHQucHJvdG90eXBlLm9uT3B0b3V0PWZ1bmN0aW9uKCl7dGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2Uuc3RvcCgpfSx0fSgpLHNzPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX19KCksYXM9ZnVuY3Rpb24odCxlLHIsbil7dmFyIGksbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP2U6bnVsbD09PW4/bj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUscik6bjtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZSh0LGUscixuKTtlbHNlIGZvcih2YXIgYT10Lmxlbmd0aC0xO2E+PTA7YS0tKShpPXRbYV0pJiYocz0obzwzP2kocyk6bz4zP2koZSxyLHMpOmkoZSxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIscyksc30sY3M9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5jb21tYW5kc1NlcnZpY2U9ZSxuLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZT1yLG4uYmF0Y2g9W10sbn1yZXR1cm4gc3MoZSx0KSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5jb21tYW5kc0JhdGNoUmVhZHkoKX0sZS5wcm90b3R5cGUub25TdG9wPWZ1bmN0aW9uKCl7dGhpcy5iYXRjaD1bXX0sZS5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMscj1mdW5jdGlvbih0KXtuLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihbdF0sKGZ1bmN0aW9uKCl7Zm9yKHZhciByPVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXJbbl09YXJndW1lbnRzW25dO3JldHVybiBlLnNlbmQodCxyKX0pKX0sbj10aGlzLGk9MCxvPXQ7aTxvLmxlbmd0aDtpKyspe3Iob1tpXSl9fSxlLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKHQsZSl7Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMuYmF0Y2gse25hbWU6dCxwYXJhbXM6ZX0pLHRoaXMuaXNTdGFydGVkJiZ0aGlzLmNvbW1hbmRzQmF0Y2hSZWFkeSgpfSxlLnByb3RvdHlwZS5jb21tYW5kc0JhdGNoUmVhZHk9ZnVuY3Rpb24oKXtpZigwIT09dGhpcy5iYXRjaC5sZW5ndGgpe3ZhciB0PXtjb21tYW5kczp0aGlzLmJhdGNofTt0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZS5zZW5kVG9QYXJlbnQoaXQuQ29tbWFuZHMsdCksdGhpcy5iYXRjaD1bXX19LGFzKFtkdCgiQ29tbWFuZHMuaWZyYW1lLmNvbW1hbmRzQmF0Y2guc2VuZCIpXSxlLnByb3RvdHlwZSwic2VuZCIsbnVsbCksYXMoW3dyKCksZHQoInNlbmQgaWZyYW1lIGNvbW1hbmRzIGJhdGNoIildLGUucHJvdG90eXBlLCJjb21tYW5kc0JhdGNoUmVhZHkiLG51bGwpLGV9KHJlKSx1cz1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihuLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbil9fSgpLHBzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uY29uZmlndXJhdGlvbj1lLG4ubGlmZUN5Y2xlRXZlbnRzRW1pdHRlcj1yLG4uaWQ9LTEsbi5wYXJlbnRPcmlnaW49IiIsbi5tYXhNZXNzYWdlc0J1ZmZlcj0yNSxuLm1lc3NhZ2VCdWZmZXI9W10sbi5tZXNzYWdlSGFuZGxlcj17Ym91bmRFbGVtZW50OndpbmRvdyx0eXBlOiJtZXNzYWdlIixsaXN0ZW5lcjpmdW5jdGlvbih0KXtyZXR1cm4gbi5tZXNzYWdlc0xpc3RlbmVyKHQpfX0sbn1yZXR1cm4gdXMoZSx0KSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7RnQodGhpcy5tZXNzYWdlSGFuZGxlciwhMSksdGhpcy5zZW5kRGlzY292ZXJ5KCl9LGUucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbigpe0d0KHRoaXMubWVzc2FnZUhhbmRsZXIsITEpfSxlLnByb3RvdHlwZS5zZW5kVG9QYXJlbnQ9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLmJ1aWxkQ2hpbGRCYXNlTWVzc2FnZSh0LGUpO3RoaXMuc2VuZE1lc3NhZ2Uocil9LGUucHJvdG90eXBlLnNlbmREaXNjb3Zlcnk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJ1aWxkQ2hpbGRCYXNlTWVzc2FnZShpdC5EaXNjb3ZlcnkpO290LnNlbmRNZXNzYWdlKHdpbmRvdy5wYXJlbnQsIioiLHQpfSxlLnByb3RvdHlwZS5idWlsZENoaWxkQmFzZU1lc3NhZ2U9ZnVuY3Rpb24odCxlKXt2YXIgcj1vdC5idWlsZEJhc2VNZXNzYWdlKHQsbnQuQ2hpbGQsdGhpcy5jb25maWd1cmF0aW9uLnByb2plY3RJZCx0aGlzLmlkKTtyZXR1cm4gZSYmKHIuY29udGVudD1lKSxyfSxlLnByb3RvdHlwZS5zZW5kTWVzc2FnZT1mdW5jdGlvbih0KXt2b2lkIDAhPT10LmlkP290LnNlbmRNZXNzYWdlKHdpbmRvdy5wYXJlbnQsdGhpcy5wYXJlbnRPcmlnaW4sdCk6dGhpcy5hZGRNZXNzYWdlVG9CdWZmZXIodCl9LGUucHJvdG90eXBlLm1lc3NhZ2VzTGlzdGVuZXI9ZnVuY3Rpb24odCl7aWYob3QuaXNNZXNzYWdlVmFsaWQodCxudC5QYXJlbnQsdGhpcy5jb25maWd1cmF0aW9uLnByb2plY3RJZCx0aGlzLmNvbmZpZ3VyYXRpb24uaG9zdG5hbWVzKSlzd2l0Y2godC5kYXRhLnR5cGUpe2Nhc2UgaXQuRGlzY292ZXJ5OmlmKCF2dCh0LmRhdGEuaWQpfHx0LmRhdGEuaWQ8MClyZXR1cm4gdm9pZCBmdC53YXJuKCJJZnJhbWUgY2hpbGQgKCIrdGhpcy5pZCsiKSByZWNlaXZlZCBkaXNjb3Zlcnkgd2l0aG91dCB2YWxpZCBpZCBmcm9tIHBhcmVudCAoIit0Lm9yaWdpbisiKSA6ICIrY3NKU09OLnN0cmluZ2lmeSh0LmRhdGEpKTt0aGlzLmlkPXQuZGF0YS5pZCx0aGlzLnBhcmVudE9yaWdpbj10Lm9yaWdpbix0aGlzLnNlbmRBbGxCdWZmZXJlZE1lc3NhZ2VzKCk7YnJlYWs7Y2FzZSBpdC5TdG9wOnRoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlci5lbWl0T3B0b3V0KCk7YnJlYWs7ZGVmYXVsdDpmdC53YXJuKCJJZnJhbWUgY2hpbGQgKCIrdGhpcy5pZCsiKSByZWNlaXZlZCB1bmtub3duIGRhdGEgdHlwZSBmcm9tIHBhcmVudCAoIit0Lm9yaWdpbisiKSA6ICIrY3NKU09OLnN0cmluZ2lmeSh0LmRhdGEpKX19LGUucHJvdG90eXBlLmFkZE1lc3NhZ2VUb0J1ZmZlcj1mdW5jdGlvbih0KXt0aGlzLm1lc3NhZ2VCdWZmZXIubGVuZ3RoPHRoaXMubWF4TWVzc2FnZXNCdWZmZXImJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLm1lc3NhZ2VCdWZmZXIsdCl9LGUucHJvdG90eXBlLnNlbmRBbGxCdWZmZXJlZE1lc3NhZ2VzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLm1lc3NhZ2VCdWZmZXI7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07ci5pZD10aGlzLmlkLG90LnNlbmRNZXNzYWdlKHdpbmRvdy5wYXJlbnQsdGhpcy5wYXJlbnRPcmlnaW4scil9dGhpcy5tZXNzYWdlQnVmZmVyPVtdfSxlfShyZSksbHM9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSxocz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscil7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLmFwaUVycm9yc1RyYWNrZXI9ZSxuLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZT1yLG59cmV0dXJuIGxzKGUsdCksZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5hcGlFcnJvcnNUcmFja2VyLmluaXQoKSx0aGlzLmFwaUVycm9yc1RyYWNrZXIub25FdmVudCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvY2Vzc0V2ZW50KGUpfSkpfSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5hcGlFcnJvcnNUcmFja2VyLnN0YXJ0KCl9LGUucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbigpe3RoaXMuYXBpRXJyb3JzVHJhY2tlci5zdG9wKCl9LGUucHJvdG90eXBlLnByb2Nlc3NFdmVudD1mdW5jdGlvbih0KXt0aGlzLmlzU3RhcnRlZCYmdGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2Uuc2VuZFRvUGFyZW50KGl0LkFwaUVycm9yLHQpfSxlfShyZSksZnM9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSxkcz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscil7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLmphdmFTY3JpcHRFcnJvcnNUcmFja2VyPWUsbi5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2U9cixufXJldHVybiBmcyhlLHQpLGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuamF2YVNjcmlwdEVycm9yc1RyYWNrZXIub25FdmVudCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvY2Vzc0V2ZW50KGUpfSkpfSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlci5zdGFydCgpfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXt0aGlzLmphdmFTY3JpcHRFcnJvcnNUcmFja2VyLnN0b3AoKX0sZS5wcm90b3R5cGUucHJvY2Vzc0V2ZW50PWZ1bmN0aW9uKHQpe3RoaXMuaXNTdGFydGVkJiZ0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZS5zZW5kVG9QYXJlbnQoaXQuSmF2YXNjcmlwdEVycm9yLHQpfSxlfShyZSkseXM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyLG4pe3RoaXMuamF2YVNjcmlwdEVycm9yc1RyYWNrZXI9dCx0aGlzLmFwaUVycm9yc1RyYWNrZXI9ZSx0aGlzLmNvbmZpZ3VyYXRpb249cix0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZT1ufXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5pZnJhbWVKYXZhU2NyaXB0RXJyb3JzU2VydmljZT1uZXcgZHModGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlcix0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZSksdGhpcy5pZnJhbWVKYXZhU2NyaXB0RXJyb3JzU2VydmljZS5pbml0KCksdGhpcy5hcGlFcnJvcnNUcmFja2VyLmV4Y2x1ZGVEb21haW5zKFtLaS5DT05URU5UU1FVQVJFLEtpLkNMSUNLVEFMRSxLaS5GQUtFX1RSQUNLRVJdKSx0aGlzLmlmcmFtZUFwaUVycm9yc1NlcnZpY2U9bmV3IGhzKHRoaXMuYXBpRXJyb3JzVHJhY2tlcix0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZSksdGhpcy5pZnJhbWVBcGlFcnJvcnNTZXJ2aWNlLmluaXQoKX0sdC5wcm90b3R5cGUub25TdGFydFRyYWNraW5nPWZ1bmN0aW9uKCl7dGhpcy5jb25maWd1cmF0aW9uLmpzRXJyb3JzRW5hYmxlZCYmdGhpcy5pZnJhbWVKYXZhU2NyaXB0RXJyb3JzU2VydmljZS5zdGFydCgpLHRoaXMuY29uZmlndXJhdGlvbi5hcGlFcnJvcnNFbmFibGVkJiZ0aGlzLmlmcmFtZUFwaUVycm9yc1NlcnZpY2Uuc3RhcnQoKX0sdC5wcm90b3R5cGUub25PcHRvdXQ9ZnVuY3Rpb24oKXt0aGlzLmlmcmFtZUphdmFTY3JpcHRFcnJvcnNTZXJ2aWNlLnN0b3AoKSx0aGlzLmlmcmFtZUFwaUVycm9yc1NlcnZpY2Uuc3RvcCgpfSx0fSgpLHZzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZT10fXJldHVybiB0LnByb3RvdHlwZS5vblN0YXJ0VHJhY2tpbmc9ZnVuY3Rpb24oKXt0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZS5zdGFydCgpfSx0LnByb3RvdHlwZS5vbk9wdG91dD1mdW5jdGlvbigpe3RoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlLnN0b3AoKX0sdH0oKSxtcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMuaWZyYW1lUGFyZW50VG9DaGlsZHJlbkNvbW11bmljYXRpb25TZXJ2aWNlPXQsdGhpcy5pZnJhbWVFdmVudHNFbWl0dGVyPWUsdGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2U9cn1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5pZnJhbWVQYXJlbnRUb0NoaWxkcmVuQ29tbXVuaWNhdGlvblNlcnZpY2Uub25DaGlsZE1lc3NhZ2UoKGZ1bmN0aW9uKGUscixuLGkpe3JldHVybiB0LmlmcmFtZUV2ZW50c0VtaXR0ZXIuZW1pdElmcmFtZUV2ZW50KGUscixuLGkpfSkpfSx0LnByb3RvdHlwZS5vbklmcmFtZUFuYWx5c2lzRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2Uuc2VuZFRvUGFyZW50KGl0LkFuYWx5c2lzRXZlbnQsdCl9LHQucHJvdG90eXBlLm9uSWZyYW1lSmF2YXNjcmlwdEVycm9yPWZ1bmN0aW9uKHQpe3RoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlLnNlbmRUb1BhcmVudChpdC5KYXZhc2NyaXB0RXJyb3IsdCl9LHQucHJvdG90eXBlLm9uSWZyYW1lQXBpRXJyb3I9ZnVuY3Rpb24odCl7dGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2Uuc2VuZFRvUGFyZW50KGl0LkFwaUVycm9yLHQpfSx0LnByb3RvdHlwZS5vbklmcmFtZUVtZXJjaGFuZGlzaW5nTWVzc2FnZT1mdW5jdGlvbih0KXt0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZS5zZW5kVG9QYXJlbnQoaXQuRW1lcmNoYW5kaXNpbmdNZXNzYWdlLHQpfSx0LnByb3RvdHlwZS5vbklmcmFtZUNvbW1hbmRzPWZ1bmN0aW9uKHQpe3RoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlLnNlbmRUb1BhcmVudChpdC5Db21tYW5kcyx0KX0sdC5wcm90b3R5cGUub25TdGFydFRyYWNraW5nPWZ1bmN0aW9uKCl7dGhpcy5pZnJhbWVQYXJlbnRUb0NoaWxkcmVuQ29tbXVuaWNhdGlvblNlcnZpY2Uuc3RhcnQoKX0sdC5wcm90b3R5cGUub25PcHRvdXQ9ZnVuY3Rpb24oKXt0aGlzLmlmcmFtZVBhcmVudFRvQ2hpbGRyZW5Db21tdW5pY2F0aW9uU2VydmljZS5zdG9wKCl9LHR9KCksZ3M9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKToobi5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG4pfX0oKSxTcz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscixuKXt2YXIgaT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkuYW5hbHlzaXNFdmVudHNUcmFja2VyPWUsaS5nZXN0dXJlVHJhY2tlcj1yLGkuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlPW4saX1yZXR1cm4gZ3MoZSx0KSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmFuYWx5c2lzRXZlbnRzVHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9jZXNzRXZlbnQoZSl9KSksdGhpcy5nZXN0dXJlVHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9jZXNzRXZlbnQoZSl9KSl9LGUucHJvdG90eXBlLm9uU3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmFuYWx5c2lzRXZlbnRzVHJhY2tlci5zdGFydCgpLHRoaXMuZ2VzdHVyZVRyYWNrZXIuc3RhcnQoKX0sZS5wcm90b3R5cGUub25TdG9wPWZ1bmN0aW9uKCl7dGhpcy5hbmFseXNpc0V2ZW50c1RyYWNrZXIuc3RvcCgpLHRoaXMuZ2VzdHVyZVRyYWNrZXIuc3RvcCgpfSxlLnByb3RvdHlwZS5wcm9jZXNzRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5pc1N0YXJ0ZWQmJnQudHlwZSE9PUVyLlJFU0laRSYmdGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2Uuc2VuZFRvUGFyZW50KGl0LkFuYWx5c2lzRXZlbnQsdCl9LGV9KHJlKSxFcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsbil7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy5ldmVudFBhdGhDb21wdXRhdGlvbj1lLHRoaXMuc2VsZWN0b3I9cix0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZT1ufXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG9uKHRoaXMuY29uZmlndXJhdGlvbix0aGlzLmV2ZW50UGF0aENvbXB1dGF0aW9uLHRoaXMuc2VsZWN0b3IpLGU9bmV3IEhyKHRoaXMuY29uZmlndXJhdGlvbix0aGlzLmV2ZW50UGF0aENvbXB1dGF0aW9uLG5ldyBXcihmdCkpO3RoaXMuaWZyYW1lQW5hbHlzaXNFdmVudHNTZXJ2aWNlPW5ldyBTcyh0LGUsdGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2UpLHRoaXMuaWZyYW1lQW5hbHlzaXNFdmVudHNTZXJ2aWNlLmluaXQoKX0sdC5wcm90b3R5cGUub25TdGFydFRyYWNraW5nPWZ1bmN0aW9uKCl7dGhpcy5pZnJhbWVBbmFseXNpc0V2ZW50c1NlcnZpY2Uuc3RhcnQoKX0sdC5wcm90b3R5cGUub25PcHRvdXQ9ZnVuY3Rpb24oKXt0aGlzLmlmcmFtZUFuYWx5c2lzRXZlbnRzU2VydmljZS5zdG9wKCl9LHR9KCksd3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt0aGlzLnVybFNlcnZpY2U9dCx0aGlzLmVNZXJjaGFuZGlzaW5nVHJhY2tlcj1lLHRoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlPXIsdGhpcy5wcm9kdWN0cz1bXX1yZXR1cm4gdC5wcm90b3R5cGUuY29sbGVjdD1mdW5jdGlvbigpe3RoaXMucHJvZHVjdHM9dGhpcy5lTWVyY2hhbmRpc2luZ1RyYWNrZXIuY29sbGVjdFByb2R1Y3RzKCksdGhpcy50YXJnZXRVcmw9dGhpcy51cmxTZXJ2aWNlLmdldFVybCgpLHRoaXMuc2VuZEVNZXJjaGFuZGlzaW5nRGF0YSgpfSx0LnByb3RvdHlwZS5jbGVhclByb2R1Y3RzPWZ1bmN0aW9uKCl7dGhpcy5wcm9kdWN0cz1bXX0sdC5wcm90b3R5cGUuc2VuZEVNZXJjaGFuZGlzaW5nRGF0YT1mdW5jdGlvbigpe3ZhciB0PXt0YXJnZXRVcmw6dGhpcy50YXJnZXRVcmwsd2luZG93V2lkdGg6Z2Uud2luZG93V2lkdGgoKSx3aW5kb3dIZWlnaHQ6Z2Uud2luZG93SGVpZ2h0KCkscHJvZHVjdHM6dGhpcy5wcm9kdWN0c307dGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2Uuc2VuZFRvUGFyZW50KGl0LkVtZXJjaGFuZGlzaW5nTWVzc2FnZSx0KX0sdH0oKSxDcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMudXJsU2VydmljZT1lLHRoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlPXJ9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgWG4odGhpcy5jb25maWd1cmF0aW9uKTt0aGlzLmlmcmFtZUVtZXJjaGFuZGlzaW5nU2VydmljZT1uZXcgd3ModGhpcy51cmxTZXJ2aWNlLHQsdGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2UpfSx0LnByb3RvdHlwZS5vblN0YXJ0VHJhY2tpbmc9ZnVuY3Rpb24oKXt0aGlzLmlmcmFtZUVtZXJjaGFuZGlzaW5nU2VydmljZS5jbGVhclByb2R1Y3RzKCksdGhpcy5pZnJhbWVFbWVyY2hhbmRpc2luZ1NlcnZpY2UuY29sbGVjdCgpfSx0fSgpLFJzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixuKXt2YXIgaT10aGlzO3RoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlcj10LHRoaXMuY29uZmlndXJhdGlvbj1lLHRoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlPXIsdGhpcy5jb21tYW5kc1NlcnZpY2U9bix0aGlzLnN0YXJ0RGF0YUNvbGxlY3Rpb249ZnVuY3Rpb24oKXtpLmNvbW1hbmRzU2VydmljZS5zdGFydCgpLGkubG9hZFRyYWNrZXIuc3RhcnQoKX19cmV0dXJuIHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPW5ldyBfbihiLHRoaXMuY29uZmlndXJhdGlvbikscj1uZXcgSW4oZSksbj1uZXcgRXModGhpcy5jb25maWd1cmF0aW9uLGUscix0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZSksaT1uZXcgdnModGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2UpO2lmKHRoaXMuY29uZmlndXJhdGlvbi5lTWVyY2hhbmRpc2luZ0VuYWJsZWQpe3ZhciBvPW5ldyBXLHM9bmV3IFRvKHdpbmRvdy5sb2NhdGlvbixvKSxhPW5ldyBDcyh0aGlzLmNvbmZpZ3VyYXRpb24scyx0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZSk7dGhpcy5saWZlQ3ljbGVFdmVudHNFbWl0dGVyLmFkZExpc3RlbmVycyhhKSxhLmluaXQoKX12YXIgYz1uZXcgZmkodGhpcy5jb25maWd1cmF0aW9uKSx1PW5ldyBZbyxwPW5ldyBtcyhjLHUsdGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2UpO3UuYWRkTGlzdGVuZXJzKHApLHRoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlci5hZGRMaXN0ZW5lcnMoaSxwLG4pLHAuaW5pdCgpLG4uaW5pdCgpLHRoaXMubG9hZFRyYWNrZXI9bmV3IFVuLHRoaXMubG9hZFRyYWNrZXIub25Mb2FkKChmdW5jdGlvbigpe3QubGlmZUN5Y2xlRXZlbnRzRW1pdHRlci5lbWl0U3RhcnRUcmFja2luZygpfSkpLHRoaXMuc3RhcnREYXRhQ29sbGVjdGlvbigpfSx0fSgpLGJzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmNvbmZpZ3VyYXRpb249dH1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PW5ldyBraSxlPW5ldyBwcyh0aGlzLmNvbmZpZ3VyYXRpb24sdCkscj1uZXcgJGksbj1uZXcgY3MocixlKSxpPW5ldyBvcyhuKTtpLmluaXQoKTt2YXIgbz1uZXcgZ28scz1uZXcgY3IsYT1uZXcgcW8ocyksYz1uZXcgSG8ocyksdT1uZXcgTG8oYSxjKSxwPW5ldyB5cyhvLHUsdGhpcy5jb25maWd1cmF0aW9uLGUpO3JldHVybiBwLmluaXQoKSx0LmFkZExpc3RlbmVycyhpLHApLHQuZW1pdEluaXRUcmFja2luZygpLG5ldyBScyh0LHRoaXMuY29uZmlndXJhdGlvbixlLHIpLnN0YXJ0KCkse0xaU3RyaW5nOmxufX0sdH0oKSxUcz1mdW5jdGlvbih0LGUscixuKXt2YXIgaSxvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09bj9uPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTpuO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLG4pO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKGk9dFthXSkmJihzPShvPDM/aShzKTpvPjM/aShlLHIscyk6aShlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSxBcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMuaWZyYW1lQ29udGV4dD1lLHRoaXMucGFyZW50TG9nQ29udGV4dD1yfXJldHVybiB0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe2lmKCF3aW5kb3cuVVhBbmFseXRpY3Mpe3ZhciB0PW5ldyBidCh0aGlzLmlmcmFtZUNvbnRleHQpO3QuaW5pdCgpO3ZhciBlPW5ldyBrdCh0aGlzLmNvbmZpZ3VyYXRpb24sdCk7aWYodGhpcy5pZnJhbWVDb250ZXh0LmlzVG9wV2luZG93VHJhY2tlcigpJiZlLmNhblRyYWNrKCkpe3dpbmRvdy5DU1Byb3RlY3RuYXRpdmVGdW5jdGlvbnNFcnJvcnMmJmZ0Lndhcm4oInByb3RlY3ROYXRpdmVGdW5jdGlvbnMgZmFpbGVkOiAiK3dpbmRvdy5DU1Byb3RlY3RuYXRpdmVGdW5jdGlvbnNFcnJvcnMpO3ZhciByPW5ldyBucyh0aGlzLmNvbmZpZ3VyYXRpb24sdCx0aGlzLnBhcmVudExvZ0NvbnRleHQpO3dpbmRvdy5VWEFuYWx5dGljcz1yLmluaXQoKX1lbHNlIGlmKCF0aGlzLmlmcmFtZUNvbnRleHQuaXNUb3BXaW5kb3dUcmFja2VyKCkmJmUuY2FuVHJhY2tJbklmcmFtZSgpKXt2YXIgbj1uZXcgYnModGhpcy5jb25maWd1cmF0aW9uKTt3aW5kb3cuVVhBbmFseXRpY3M9bi5pbml0KCl9IXdpbmRvdy5DU0ZyYW1lQ29tbXVuaWNhdGlvbiYmaXMuaXNBY3RpdmFibGUoKSYmKHdpbmRvdy5DU0ZyYW1lQ29tbXVuaWNhdGlvbj1pcyxpcy53YWl0Rm9yQ29ubmVjdGlvbigpKX19LFRzKFtkdCgibWFpbi5zdGFydCIpXSx0LnByb3RvdHlwZSwic3RhcnQiLG51bGwpLHR9KCk7dHJ5e3BlcmZvcm1hbmNlLm1hcmsoImNzLXN0YXJ0LXRhZyIpO3ZhciBrcz1uZXcgeCh3aW5kb3cuQ1NfQ09ORik7d2luZG93Ll91eGE9d2luZG93Ll91eGF8fFtdLGtzLnByb2Nlc3NPcHRpb25PdmVycmlkZXMod2luZG93Ll91eGEpO3ZhciBQcz1uZXcgcSh3aW5kb3csa3MpO1BzLmluaXQoKTt2YXIgT3M9bmV3IGh0O2lmKFBzLmlzVG9wV2luZG93VHJhY2tlcigpKXt2YXIgX3M9bmV3IFooa3MsT3MpO2Z0LnNldFN0cmF0ZWd5KF9zKX1lbHNle3ZhciBJcz1uZXcgbHQoa3MpO2Z0LnNldFN0cmF0ZWd5KElzKX1uZXcgQXMoa3MsUHMsT3MpLnN0YXJ0KCl9Y2F0Y2godCl7fX1dKTs=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="1975550515" offset="0" length="16384" />
        <PacketInfo time="1975550531" offset="16384" length="16384" />
        <PacketInfo time="1975550531" offset="32768" length="16384" />
        <PacketInfo time="1975550531" offset="49152" length="5826" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>