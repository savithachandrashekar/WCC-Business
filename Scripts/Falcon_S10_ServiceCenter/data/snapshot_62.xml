<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="62">
  <HTTPTask id="782" hostname="t.contentsquare.net" path="/uxa/9d25aca9-e352-4895-bbbd-ccebc9786c07.js" url="https://t.contentsquare.net/uxa/9d25aca9-e352-4895-bbbd-ccebc9786c07.js" ip="13.249.79.52" port="443" connectionId="38" origin="Primary" frame="1" startDateTime="2021-07-16T05:08:28.415+00:00" startTime="1512935078" endTime="1512935093">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Host" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dC5jb250ZW50c3F1YXJlLm5ldA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IiBOb3Q7QSBCcmFuZCI7dj0iOTkiLCAiR29vZ2xlIENocm9tZSI7dj0iOTEiLCAiQ2hyb21pdW0iO3Y9IjkxIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-mobile" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PzA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzkxLjAuNDQ3Mi4xMjQgU2FmYXJpLzUzNy4zNg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY29ycw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9wcHNzdXBwb3J0LWl0Z2xsYmg3LmluYy5ocC5jb20v</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC91eGEvOWQyNWFjYTktZTM1Mi00ODk1LWJiYmQtY2NlYmM5Nzg2YzA3LmpzIEhUVFAvMS4xDQpIb3N0OiB0LmNvbnRlbnRzcXVhcmUubmV0DQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpzZWMtY2gtdWE6ICIgTm90O0EgQnJhbmQiO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjkxIiwgIkNocm9taXVtIjt2PSI5MSINCnNlYy1jaC11YS1tb2JpbGU6ID8wDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTEuMC40NDcyLjEyNCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQ6ICovKg0KU2VjLUZldGNoLVNpdGU6IGNyb3NzLXNpdGUNClNlYy1GZXRjaC1Nb2RlOiBuby1jb3JzDQpTZWMtRmV0Y2gtRGVzdDogc2NyaXB0DQpSZWZlcmVyOiBodHRwczovL3Bwc3N1cHBvcnQtaXRnbGxiaDcuaW5jLmhwLmNvbS8NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZSwgYnINCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>60780</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PXV0Zi04</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NjA3ODA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2VkLCAxNCBKdWwgMjAyMSAwOToyMDowNiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2VkLCAxNCBKdWwgMjAyMSAwOToxOTo1OSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjgwNGRiNjBkZjQ2Y2QwY2UxMDMwY2U5MjcwYzdlMWY3Ig==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="x-amz-server-side-encryption" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QUVTMjU2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT05MDA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QW1hem9uUzM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Cache" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SGl0IGZyb20gY2xvdWRmcm9udA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Via" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MS4xIDYwOTEwYjNlNzU2YzI5YmIxMTNiMWQ1YTc2MDk1ZWI1LmNsb3VkZnJvbnQubmV0IChDbG91ZEZyb250KQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Amz-Cf-Pop" index="13">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>REZXNTMtQzE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Amz-Cf-Id" index="14">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>eXN6VDVvTHRJc1NlTmhmMGhURTBzVW9BdzFIT2ROLUxBV0xRdXA2TW1jUmJxbFhRVXBfeVV3PT0=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Age" index="15">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTU3MzY4</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7Y2hhcnNldD11dGYtOA0KQ29udGVudC1MZW5ndGg6IDYwNzgwDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpEYXRlOiBXZWQsIDE0IEp1bCAyMDIxIDA5OjIwOjA2IEdNVA0KTGFzdC1Nb2RpZmllZDogV2VkLCAxNCBKdWwgMjAyMSAwOToxOTo1OSBHTVQNCkVUYWc6ICI4MDRkYjYwZGY0NmNkMGNlMTAzMGNlOTI3MGM3ZTFmNyINCngtYW16LXNlcnZlci1zaWRlLWVuY3J5cHRpb246IEFFUzI1Ng0KQ2FjaGUtQ29udHJvbDogbWF4LWFnZT05MDANCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpTZXJ2ZXI6IEFtYXpvblMzDQpYLUNhY2hlOiBIaXQgZnJvbSBjbG91ZGZyb250DQpWaWE6IDEuMSA2MDkxMGIzZTc1NmMyOWJiMTEzYjFkNWE3NjA5NWViNS5jbG91ZGZyb250Lm5ldCAoQ2xvdWRGcm9udCkNClgtQW16LUNmLVBvcDogREZXNTMtQzENClgtQW16LUNmLUlkOiB5c3pUNW9MdElzU2VOaGYwaFRFMHNVb0F3MUhPZE4tTEFXTFF1cDZNbWNSYnFsWFFVcF95VXc9PQ0KQWdlOiAxNTczNjgNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>dmFyIENTX0NPTkY9eyJwcm9qZWN0SWQiOjEyNTUsInN0YXR1cyI6MSwiaG9zdG5hbWVzIjpbImhwLmNvbSIsImhwc2hvcHBpbmcuaW4iLCJvbWVuLmNvbSJdLCJjcm9zc0RvbWFpblRyYWNraW5nIjoxLCJjcm9zc0RvbWFpblNpbmdsZUlmcmFtZVRyYWNraW5nIjoxLCJjb25zZW50UmVxdWlyZWQiOjEsImFsbG93U3ViZG9tYWlucyI6MSwidmlzaXRvckNvb2tpZVRpbWVvdXQiOjM0MTY0MDAwMDAwLCJzYW1wbGVSYXRlIjoxMDAsInJlcGxheVJlY29yZGluZ1JhdGUiOjAsInZhbGlkYXRpb25SYXRlIjoxMCwibGFzdFRyYWNraW5nRHJhdyI6MTU4OTM4MDA5OCwidHJhY2tlckRvbWFpbiI6ImMuY29udGVudHNxdWFyZS5uZXQiLCJyZWNvcmRpbmdEb21haW4iOiJyLmNvbnRlbnRzcXVhcmUubmV0IiwidXNlTWFsa2FQaXBlbGluZSI6MCwiZWQiOiJsLmNvbnRlbnRzcXVhcmUubmV0L2xvZy93ZWIiLCJlTWVyY2hhbmRpc2luZ0VuYWJsZWQiOjAsIm1vdXNlTW92ZUhlYXRtYXBFbmFibGVkIjoxLCJhdXRvSW5zaWdodHNFbmFibGVkIjowLCJqc0Vycm9yc0VuYWJsZWQiOjEsImFwaUVycm9yc0VuYWJsZWQiOjAsInNlY3VyZUNvb2tpZXNFbmFibGVkIjowLCJ0cmlnZ2VyU2Vzc2lvblJlcGxheUVuYWJsZWQiOjAsInRyaWdnZXJTZXNzaW9uUmVwbGF5UmVnZXgiOm51bGwsImR5bmFtaWNJZFJlZ2V4IjoiXltcXGR8YS16XXsxMX0tW1xcZF17MX0kIiwid2hpdGVsaXN0ZWRBdHRyaWJ1dGVzIjpbXSwicmVwbGF5UmVjb3JkaW5nVW5tYXNrZWRVcmxSZWdleCI6bnVsbCwicmVwbGF5UmVjb3JkaW5nTWFza2VkVXJsUmVnZXgiOm51bGwsInRhZ0RlcGxveW1lbnRNb2RlIjoiRFVBTF9DT0xMRUNUSU9OIiwiZXhwZXJpbWVudGFsIjpudWxsLCJpZnJhbWVzVHJhY2tpbmciOjAsInRleHRWaXNpYmlsaXR5RW5hYmxlZCI6MCwibWFsa2FVcmxFbmFibGVkIjowLCJtYWxrYUV0ckVuYWJsZWQiOjAsImR1YWxDb2xsZWN0aW9uVGFnRG9tYWluIjoiY29udGVudHNxdWFyZS5uZXQiLCJwdGNEb21haW4iOiJjdC5jb250ZW50c3F1YXJlLm5ldCIsInB0Y1BhcnRpdGlvbiI6bnVsbCwicHRjR3VpZCI6IjlkMjVhY2E5LWUzNTItNDg5NS1iYmJkLWNjZWJjOTc4NmMwNyJ9Owp2YXIgQ1NfSU5URUdSQVRJT05TX0NPTkYgPSB7ImRlbWFuZGJhc2UiOnt9LCJtZWRhbGxpYSI6e30sIm9wdGltaXplbHkiOnt9LCJ1c2FiaWxsYSI6e319OwovKiBpbnRlZ3JhdGlvbi1kZW1hbmRiYXNlIDIuMS4yICovCiFmdW5jdGlvbihlKXt2YXIgbj17fTtmdW5jdGlvbiB0KGEpe2lmKG5bYV0pcmV0dXJuIG5bYV0uZXhwb3J0czt2YXIgbz1uW2FdPXtpOmEsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gZVthXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyx0KSxvLmw9ITAsby5leHBvcnRzfXQubT1lLHQuYz1uLHQuZD1mdW5jdGlvbihlLG4sYSl7dC5vKGUsbil8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4se2VudW1lcmFibGU6ITAsZ2V0OmF9KX0sdC5yPWZ1bmN0aW9uKGUpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LHQudD1mdW5jdGlvbihlLG4pe2lmKDEmbiYmKGU9dChlKSksOCZuKXJldHVybiBlO2lmKDQmbiYmIm9iamVjdCI9PXR5cGVvZiBlJiZlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIGE9T2JqZWN0LmNyZWF0ZShudWxsKTtpZih0LnIoYSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJm4mJiJzdHJpbmciIT10eXBlb2YgZSlmb3IodmFyIG8gaW4gZSl0LmQoYSxvLGZ1bmN0aW9uKG4pe3JldHVybiBlW25dfS5iaW5kKG51bGwsbykpO3JldHVybiBhfSx0Lm49ZnVuY3Rpb24oZSl7dmFyIG49ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIHQuZChuLCJhIixuKSxufSx0Lm89ZnVuY3Rpb24oZSxuKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbil9LHQucD0iIix0KHQucz0wKX0oW2Z1bmN0aW9uKGUsbix0KXsidXNlIHN0cmljdCI7dC5yKG4pLGZ1bmN0aW9uKGUsbil7dHJ5e2UoKX1jYXRjaChlKXt3aW5kb3cuX3V4YT13aW5kb3cuX3V4YXx8W10sX3V4YS5wdXNoKFsibG9nU25pcHBldEVycm9yIixuLGUubWVzc2FnZV0pfX0oKGZ1bmN0aW9uKCl7d2luZG93Ll91eGE9d2luZG93Ll91eGF8fFtdLENTX0NPTkYuaW50ZWdyYXRpb25zPUNTX0NPTkYuaW50ZWdyYXRpb25zfHxbXSxDU19DT05GLmludGVncmF0aW9ucy5wdXNoKCJEZW1hbmRiYXNlIik7ZnVuY3Rpb24gZShlKXtmdW5jdGlvbiBuKGUsbil7dmFyIHQsYTthPW4sdD0iQUJNX0RCXyIrKHQ9ZSksX3V4YS5wdXNoKFsidHJhY2tEeW5hbWljVmFyaWFibGUiLHtrZXk6dCx2YWx1ZTphfV0pfWZ1bmN0aW9uIHQoKXtzZXRUaW1lb3V0KChmdW5jdGlvbigpe2lmKG8uSXBBcGkmJm8uSXBBcGkuQ29tcGFueVByb2ZpbGUmJm8uSXBBcGkuQ29tcGFueVByb2ZpbGUuaW5mb3JtYXRpb25fbGV2ZWwpe3ZhciBlPW8uSXBBcGkuQ29tcGFueVByb2ZpbGU7IkJhc2ljIj09PWUuaW5mb3JtYXRpb25fbGV2ZWw/bigiSW5mb3JtYXRpb24gTGV2ZWwiLCJCYXNpYyIpOiJEZXRhaWxlZCI9PT1lLmluZm9ybWF0aW9uX2xldmVsJiZuKCJJbmZvcm1hdGlvbiBMZXZlbCIsIkRldGFpbGVkIiksZS5hbm51YWxfc2FsZXMmJm4oIkFubnVhbCBTYWxlcyIsZS5hbm51YWxfc2FsZXMpLGUuYXVkaWVuY2UmJm4oIkF1ZGllbmNlIixlLmF1ZGllbmNlKSxlLmF1ZGllbmNlX3NlZ21lbnQmJm4oIkF1ZGllbmNlIFNlZ21lbnQiLGUuYXVkaWVuY2Vfc2VnbWVudCksZS5iMmImJm4oIkIyQiIsZS5iMmIpLGUuYjJjJiZuKCJCMkMiLGUuYjJjKSxlLmNvbXBhbnlfbmFtZSYmbigiQ29tcGFueSBOYW1lIixlLmNvbXBhbnlfbmFtZSksZS5kZW1hbmRiYXNlX3NpZCYmbigiU0lEIixlLmRlbWFuZGJhc2Vfc2lkKSxlLmVtcGxveWVlX2NvdW50JiZuKCJFbXBsb3llZSBDb3VudCIsZS5lbXBsb3llZV9jb3VudCksZS5lbXBsb3llZV9yYW5nZSYmbigiRW1wbG95ZWUgUmFuZ2UiLGUuZW1wbG95ZWVfcmFuZ2UpLGUuZm9yYmVzXzIwMDAmJm4oIkZvcmJlcyAyMDAwIixlLmZvcmJlc18yMDAwKSxlLmZvcnR1bmVfMTAwMCYmbigiRm9ydHVuZSAxMDAwIixlLmZvcnR1bmVfMTAwMCksZS5pbmR1c3RyeSYmbigiSW5kdXN0cnkiLGUuaW5kdXN0cnkpLGUucmV2ZW51ZV9yYW5nZSYmbigiUmV2ZW51ZSBSYW5nZSIsZS5yZXZlbnVlX3JhbmdlKSxlLnN1Yl9pbmR1c3RyeSYmbigiU3ViIEluZHVzdHJ5IixlLnN1Yl9pbmR1c3RyeSksZS50cmFmZmljJiZuKCJUcmFmZmljIixlLnRyYWZmaWMpLGUud2F0Y2hfbGlzdF9hY2NvdW50X3N0YXR1cyYmbigiV2F0Y2ggTGlzdCBBY2NvdW50IFN0YXR1cyIsZS53YXRjaF9saXN0X2FjY291bnRfc3RhdHVzKSxlLndhdGNoX2xpc3RfYWNjb3VudF90eXBlJiZuKCJXYXRjaCBMaXN0IEFjY291bnQgVHlwZSIsZS53YXRjaF9saXN0X2FjY291bnRfdHlwZSl9fSksNTAwKX12YXIgYT0hMSxvPXdpbmRvdy5EZW1hbmRiYXNlO28/dCgpOk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csIkRlbWFuZGJhc2UiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG99LHNldDpmdW5jdGlvbihlKXtvPWUsYXx8KGE9ITAsdCgpKX19KX12YXIgbj0hMTtfdXhhLnB1c2goWyJhZnRlclBhZ2VWaWV3IixmdW5jdGlvbih0KXtufHwobj0hMCxlKCkpfV0pfSksImRlbWFuZGJhc2UtY2FwIil9XSk7LyogaW50ZWdyYXRpb24tbWVkYWxsaWEgMi42LjAgKi8KIWZ1bmN0aW9uKGUpe3ZhciBpPXt9O2Z1bmN0aW9uIHQobil7aWYoaVtuXSlyZXR1cm4gaVtuXS5leHBvcnRzO3ZhciBhPWlbbl09e2k6bixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW25dLmNhbGwoYS5leHBvcnRzLGEsYS5leHBvcnRzLHQpLGEubD0hMCxhLmV4cG9ydHN9dC5tPWUsdC5jPWksdC5kPWZ1bmN0aW9uKGUsaSxuKXt0Lm8oZSxpKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSx7ZW51bWVyYWJsZTohMCxnZXQ6bn0pfSx0LnI9ZnVuY3Rpb24oZSl7InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0sdC50PWZ1bmN0aW9uKGUsaSl7aWYoMSZpJiYoZT10KGUpKSw4JmkpcmV0dXJuIGU7aWYoNCZpJiYib2JqZWN0Ij09dHlwZW9mIGUmJmUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2lmKHQucihuKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobiwiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6ZX0pLDImaSYmInN0cmluZyIhPXR5cGVvZiBlKWZvcih2YXIgYSBpbiBlKXQuZChuLGEsZnVuY3Rpb24oaSl7cmV0dXJuIGVbaV19LmJpbmQobnVsbCxhKSk7cmV0dXJuIG59LHQubj1mdW5jdGlvbihlKXt2YXIgaT1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gdC5kKGksImEiLGkpLGl9LHQubz1mdW5jdGlvbihlLGkpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKX0sdC5wPSIiLHQodC5zPTApfShbZnVuY3Rpb24oZSxpLHQpeyJ1c2Ugc3RyaWN0Ijt0LnIoaSksZnVuY3Rpb24oZSxpKXt0cnl7ZSgpfWNhdGNoKGUpe3dpbmRvdy5fdXhhPXdpbmRvdy5fdXhhfHxbXSxfdXhhLnB1c2goWyJsb2dTbmlwcGV0RXJyb3IiLGksZS5tZXNzYWdlXSl9fSgoZnVuY3Rpb24oKXt3aW5kb3cuX3V4YT13aW5kb3cuX3V4YXx8W10sQ1NfQ09ORi5pbnRlZ3JhdGlvbnM9Q1NfQ09ORi5pbnRlZ3JhdGlvbnN8fFtdLENTX0NPTkYuaW50ZWdyYXRpb25zLnB1c2goIk1lZGFsbGlhIik7dmFyIGU9ITE7ZnVuY3Rpb24gaShpLHQsbixhKXt2YXIgcj0hMDsiTE9BRF9DTElDS1RBTEVfUFRDIj09PUNTX0NPTkYudGFnRGVwbG95bWVudE1vZGUmJihyPSExKSxpPSJGQl9NRF8iK2ksX3V4YS5wdXNoKFsidHJhY2tEeW5hbWljVmFyaWFibGUiLHtrZXk6aSx2YWx1ZTp0fV0pLGUmJiJldHIiPT09biYmKHI/d2luZG93LkNsaWNrVGFsZUV2ZW50VHJpZ2dlciYmQ2xpY2tUYWxlRXZlbnRUcmlnZ2VyKCJARVRAICIraSk6X3V4YS5wdXNoKFsidHJhY2tFdmVudFRyaWdnZXJSZWNvcmRpbmciLGldKSksYSYmKF91eGEucHVzaChbInNldFF1ZXJ5IixhXSksciYmZT93aW5kb3cuQ2xpY2tUYWxlTG9naWNhbFdpdGhVcGxvYWRQYWdlJiZDbGlja1RhbGVMb2dpY2FsV2l0aFVwbG9hZFBhZ2Uod2luZG93LmxvY2F0aW9uLmhyZWYpOl91eGEucHVzaChbInRyYWNrUGFnZXZpZXciLHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZV0pKX1mdW5jdGlvbiB0KHQpe2Z1bmN0aW9uIG4oKXtmdW5jdGlvbiB0KCl7ZT0hMDt2YXIgaT1mdW5jdGlvbihlLGkpe2V8fChlPSJtaXNzaW5nRnJvbUR5bmFtaWNTbmlwcGV0Iik7dmFyIHQ9aTtpc05hTih0KSYmKGk9MCk7dmFyIG49IiI7X3V4YS5wdXNoKFsiaXNSZWNvcmRpbmciXSkmJihuPSImcmVjb3JkaW5nVHlwZT1jcyIpO3ZhciBhPV91eGEucHVzaChbImdldFNlc3Npb25EYXRhIl0pO2lmKGEpe3ZhciByPWEucHJvamVjdElkLG89YS51c2VySWQsZD1hLnNlc3Npb25OdW1iZXIsYz1hLnBhZ2VOdW1iZXIsbD1jLWk7cmV0dXJuIGk+PWMmJihsPWMpLDA9PT10JiYobD0xKSwiaHR0cHM6Ly9hcHAuY29udGVudHNxdWFyZS5jb20vcXVpY2stcGxheWJhY2svaW5kZXguaHRtbD9waWQ9IityKyImdXU9IitvKyImc249IitkKyImcHZpZD0iK2wrbisiJnZkPSIrZX19KCJtZCIpO2kmJih3aW5kb3cuQ2xpY2tUYWxlLkthbXB5bGVMaW5rPWksQ1NfQ09ORi5pbnRlZ3JhdGlvbnNfaGFuZGxlcj1DU19DT05GLmludGVncmF0aW9uc19oYW5kbGVyfHx7fSxDU19DT05GLmludGVncmF0aW9uc19oYW5kbGVyLm1lZGFsbGlhPWkpfWZ1bmN0aW9uIG4oKXt3aW5kb3cuQ2xpY2tUYWxlSXNSZWNvcmRpbmcmJkNsaWNrVGFsZUlzUmVjb3JkaW5nKCk/dCgpOndpbmRvdy5DbGlja1RhbGVTdWJzY3JpYmUmJkNsaWNrVGFsZVN1YnNjcmliZSgicmVjb3JkaW5nIix0KX13aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiTURpZ2l0YWxfRmVlZGJhY2tfQnV0dG9uX0NsaWNrZWQiLChmdW5jdGlvbihlKXtpZihlJiZlLmRldGFpbCYmZS5kZXRhaWwuRm9ybV9JRCl7dmFyIHQ9ZS5kZXRhaWwuRm9ybV9JRC50b1N0cmluZygpO2koIkZlZWRiYWNrIEJ1dHRvbiBDbGlja2VkIiwiU3VydmV5IElEIDogIit0LDAsImNzX21lZGFsbGlhPWZlZWRiYWNrX2J1dHRvbl9jbGlja2VkXyIrdCl9fSkpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJNRGlnaXRhbF9JbnZpdGVfRGlzcGxheWVkIiwoZnVuY3Rpb24oZSl7aWYoZSYmZS5kZXRhaWwmJmUuZGV0YWlsLkZvcm1fSUQpe3ZhciB0PWUuZGV0YWlsLkZvcm1fSUQudG9TdHJpbmcoKTtpKCJGZWVkYmFjayBJbnZpdGUgRGlzcGxheWVkIiwiU3VydmV5IElEIDogIit0LDAsImNzX21lZGFsbGlhPWZlZWRiYWNrX2ludml0ZV9kaXNwbGF5ZWRfIit0KX19KSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIk1EaWdpdGFsX0ludml0ZV9BY2NlcHRlZCIsKGZ1bmN0aW9uKGUpe2lmKGUmJmUuZGV0YWlsJiZlLmRldGFpbC5Gb3JtX0lEKXt2YXIgdD1lLmRldGFpbC5Gb3JtX0lELnRvU3RyaW5nKCk7aSgiRmVlZGJhY2sgSW52aXRlIEFjY2VwdGVkIiwiU3VydmV5IElEIDogIit0LDAsImNzX21lZGFsbGlhPWZlZWRiYWNrX2ludml0ZV9hY2NlcHRlZF8iK3QpfX0pKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiTURpZ2l0YWxfU3VibWl0X0ZlZWRiYWNrIiwoZnVuY3Rpb24oZSl7aWYoZSYmZS5kZXRhaWwpe3ZhciB0PWUuZGV0YWlsO2lmKHQuRmVlZGJhY2tfVVVJRCYmdC5Gb3JtX0lEJiZ0LkZvcm1fVHlwZSl7dmFyIG49dC5Gb3JtX0lELnRvU3RyaW5nKCksYT10LkZlZWRiYWNrX1VVSUQscj10LkZvcm1fVHlwZTtpKCJGZWVkYmFjayBTdWJtaXR0ZWQiLCJTdXJ2ZXkgSUQgOiAiK24sImV0ciIsImNzX21lZGFsbGlhPWZlZWRiYWNrX3N1Ym1pdHRlZF8iK24pLGkoIkZlZWRiYWNrIFVVSUQiLGEpLGkoIkZlZWRiYWNrIEZvcm0gVHlwZSIscil9aWYodC5Db250ZW50KWZvcih2YXIgbz0wO288dC5Db250ZW50Lmxlbmd0aDtvKyspaWYodC5Db250ZW50W29dLnR5cGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJncmFkaW5nIik+LTF8fHQuQ29udGVudFtvXS50eXBlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigibnBzIik+LTEpe3ZhciBkPXQuQ29udGVudFtvXS52YWx1ZTtpZihkKXt2YXIgYz1wYXJzZUludChkKSxsPXQuQ29udGVudFtvXS51bmlxdWVfbmFtZTsibnVtYmVyIj09dHlwZW9mIGMmJih0LkNvbnRlbnRbb10udHlwZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoIm5wcyIpPi0xP2koIk5QUyBSYXRpbmcgIitsLGMpOmkoIlJhdGluZyAiK2wsYykpfX19fSkpLF91eGEucHVzaChbImlzUmVjb3JkaW5nIl0pP3QoKTp3aW5kb3cuQ2xpY2tUYWxlU3Vic2NyaWJlP24oKTood2luZG93LkNsaWNrVGFsZU9uUmVhZHlMaXN0PXdpbmRvdy5DbGlja1RhbGVPblJlYWR5TGlzdHx8W10sQ2xpY2tUYWxlT25SZWFkeUxpc3QucHVzaChuKSl9dmFyIGE9ITEscj13aW5kb3cuTURJR0lUQUw7cj9uKCk6T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywiTURJR0lUQUwiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHJ9LHNldDpmdW5jdGlvbihlKXtyPWUsYXx8KGE9ITAsbigpKX19KX12YXIgbj0hMTtfdXhhLnB1c2goWyJhZnRlclBhZ2VWaWV3IixmdW5jdGlvbihlKXtufHwobj0hMCx0KCkpfV0pfSksIm1lZGFsbGlhLWNhcCIpfV0pOy8qIGludGVncmF0aW9uLW9wdGltaXplbHkgMi4zLjAgKi8KIWZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Z1bmN0aW9uIG4oaSl7aWYodFtpXSlyZXR1cm4gdFtpXS5leHBvcnRzO3ZhciBhPXRbaV09e2k6aSxsOiExLGV4cG9ydHM6e319O3JldHVybiBlW2ldLmNhbGwoYS5leHBvcnRzLGEsYS5leHBvcnRzLG4pLGEubD0hMCxhLmV4cG9ydHN9bi5tPWUsbi5jPXQsbi5kPWZ1bmN0aW9uKGUsdCxpKXtuLm8oZSx0KXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7ZW51bWVyYWJsZTohMCxnZXQ6aX0pfSxuLnI9ZnVuY3Rpb24oZSl7InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0sbi50PWZ1bmN0aW9uKGUsdCl7aWYoMSZ0JiYoZT1uKGUpKSw4JnQpcmV0dXJuIGU7aWYoNCZ0JiYib2JqZWN0Ij09dHlwZW9mIGUmJmUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgaT1PYmplY3QuY3JlYXRlKG51bGwpO2lmKG4ucihpKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaSwiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6ZX0pLDImdCYmInN0cmluZyIhPXR5cGVvZiBlKWZvcih2YXIgYSBpbiBlKW4uZChpLGEsZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19LmJpbmQobnVsbCxhKSk7cmV0dXJuIGl9LG4ubj1mdW5jdGlvbihlKXt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gbi5kKHQsImEiLHQpLHR9LG4ubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sbi5wPSIiLG4obi5zPTApfShbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtuLnIodCksZnVuY3Rpb24oZSx0KXt0cnl7ZSgpfWNhdGNoKGUpe3dpbmRvdy5fdXhhPXdpbmRvdy5fdXhhfHxbXSxfdXhhLnB1c2goWyJsb2dTbmlwcGV0RXJyb3IiLHQsZS5tZXNzYWdlXSl9fSgoZnVuY3Rpb24oKXt3aW5kb3cuX3V4YT13aW5kb3cuX3V4YXx8W10sQ1NfQ09ORi5pbnRlZ3JhdGlvbnM9Q1NfQ09ORi5pbnRlZ3JhdGlvbnN8fFtdLENTX0NPTkYuaW50ZWdyYXRpb25zLnB1c2goIk9wdGltaXplbHkiKTt2YXIgZT0hMTtfdXhhLnB1c2goWyJhZnRlclBhZ2VWaWV3IixmdW5jdGlvbih0KXtlfHwoZT0hMCxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7c2V0VGltZW91dCgoZnVuY3Rpb24oKXt2YXIgZT1bXTtmdW5jdGlvbiB0KCl7dmFyIHQsbixhPWkuZ2V0JiZpLmdldCgic3RhdGUiKTtpZihhJiZhLmdldENhbXBhaWduU3RhdGVzJiYiZnVuY3Rpb24iPT10eXBlb2YgYS5nZXRDYW1wYWlnblN0YXRlcyYmIm9iamVjdCI9PXR5cGVvZiBhLmdldENhbXBhaWduU3RhdGVzKCkpZm9yKHZhciByPWEuZ2V0Q2FtcGFpZ25TdGF0ZXMoe2lzQWN0aXZlOiEwfSksbz1PYmplY3Qua2V5cyhyKSx1PTA7dTxvLmxlbmd0aDt1KyspaWYoLTE9PT1lLmluZGV4T2Yob1t1XSkpe2UucHVzaChvW3VdKTt2YXIgYz1yW29bdV1dO2lmKGMuZXhwZXJpbWVudCl7dmFyIHA9IiIsZj0iIjtwPWMuZXhwZXJpbWVudC5uYW1lP2MuY2FtcGFpZ25OYW1lOmMuZXhwZXJpbWVudC5pZCxmPWMuZXhwZXJpbWVudC5jYW1wYWlnbk5hbWUmJmMuZXhwZXJpbWVudC5uYW1lP2MuZXhwZXJpbWVudC5uYW1lKyIgLSAiK2MudmFyaWF0aW9uLm5hbWU6Yy52YXJpYXRpb24ubmFtZT9jLnZhcmlhdGlvbi5uYW1lOmMudmFyaWF0aW9uLmlkLGMuaXNJbkNhbXBhaWduSG9sZGJhY2smJihmKz0iIFtIb2xkYmFja10iKSxwJiZmJiYobj1mLHQ9IkFCX09QXyIrKHQ9cCksX3V4YS5wdXNoKFsidHJhY2tEeW5hbWljVmFyaWFibGUiLHtrZXk6dCx2YWx1ZTpufV0pKX19fXQoKSx3aW5kb3cub3B0aW1pemVseT13aW5kb3cub3B0aW1pemVseXx8W10saS5wdXNoKHt0eXBlOiJhZGRMaXN0ZW5lciIsZmlsdGVyOnt0eXBlOiJsaWZlY3ljbGUiLG5hbWU6ImNhbXBhaWduRGVjaWRlZCJ9LGhhbmRsZXI6dH0pfSksNTAwKX12YXIgbj0hMSxpPXdpbmRvdy5vcHRpbWl6ZWx5O2k/dCgpOk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csIm9wdGltaXplbHkiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGl9LHNldDpmdW5jdGlvbihlKXtpPWUsbnx8KG49ITAsdCgpKX19KX0oKSl9XSl9KSwib3B0aW1pemVseS1jYXAiKX1dKTsvKiBpbnRlZ3JhdGlvbi11c2FiaWxsYSAyLjcuMCAqLwohZnVuY3Rpb24oZSl7dmFyIGE9e307ZnVuY3Rpb24gaShuKXtpZihhW25dKXJldHVybiBhW25dLmV4cG9ydHM7dmFyIHQ9YVtuXT17aTpuLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbbl0uY2FsbCh0LmV4cG9ydHMsdCx0LmV4cG9ydHMsaSksdC5sPSEwLHQuZXhwb3J0c31pLm09ZSxpLmM9YSxpLmQ9ZnVuY3Rpb24oZSxhLG4pe2kubyhlLGEpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxhLHtlbnVtZXJhYmxlOiEwLGdldDpufSl9LGkucj1mdW5jdGlvbihlKXsidW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSxpLnQ9ZnVuY3Rpb24oZSxhKXtpZigxJmEmJihlPWkoZSkpLDgmYSlyZXR1cm4gZTtpZig0JmEmJiJvYmplY3QiPT10eXBlb2YgZSYmZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoaS5yKG4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJkZWZhdWx0Iix7ZW51bWVyYWJsZTohMCx2YWx1ZTplfSksMiZhJiYic3RyaW5nIiE9dHlwZW9mIGUpZm9yKHZhciB0IGluIGUpaS5kKG4sdCxmdW5jdGlvbihhKXtyZXR1cm4gZVthXX0uYmluZChudWxsLHQpKTtyZXR1cm4gbn0saS5uPWZ1bmN0aW9uKGUpe3ZhciBhPWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiBpLmQoYSwiYSIsYSksYX0saS5vPWZ1bmN0aW9uKGUsYSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGEpfSxpLnA9IiIsaShpLnM9MCl9KFtmdW5jdGlvbihlLGEsaSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSxhKXtlfHwoZT0ibWlzc2luZ0Zyb21EeW5hbWljU25pcHBldCIpO3ZhciBpPWE7aXNOYU4oaSkmJihhPTApO3ZhciBuPSIiO191eGEucHVzaChbImlzUmVjb3JkaW5nIl0pJiYobj0iJnJlY29yZGluZ1R5cGU9Y3MiKTt2YXIgdD1fdXhhLnB1c2goWyJnZXRTZXNzaW9uRGF0YSJdKTtpZih0KXt2YXIgcj10LnByb2plY3RJZCxvPXQudXNlcklkLGw9dC5zZXNzaW9uTnVtYmVyLGM9dC5wYWdlTnVtYmVyLHU9Yy1hO3JldHVybiBhPj1jJiYodT1jKSwwPT09aSYmKHU9MSksImh0dHBzOi8vYXBwLmNvbnRlbnRzcXVhcmUuY29tL3F1aWNrLXBsYXliYWNrL2luZGV4Lmh0bWw/cGlkPSIrcisiJnV1PSIrbysiJnNuPSIrbCsiJnB2aWQ9Iit1K24rIiZ2ZD0iK2V9fWkucihhKSxmdW5jdGlvbihlLGEpe3RyeXtlKCl9Y2F0Y2goZSl7d2luZG93Ll91eGE9d2luZG93Ll91eGF8fFtdLF91eGEucHVzaChbImxvZ1NuaXBwZXRFcnJvciIsYSxlLm1lc3NhZ2VdKX19KChmdW5jdGlvbigpe3dpbmRvdy5fdXhhPXdpbmRvdy5fdXhhfHxbXSxDU19DT05GLmludGVncmF0aW9ucz1DU19DT05GLmludGVncmF0aW9uc3x8W10sQ1NfQ09ORi5pbnRlZ3JhdGlvbnMucHVzaCgiVXNhYmlsbGEiKTt2YXIgZT0hMTtmdW5jdGlvbiBhKGEsaSxuLHQpe3ZhciByPSEwOyJMT0FEX0NMSUNLVEFMRV9QVEMiPT09Q1NfQ09ORi50YWdEZXBsb3ltZW50TW9kZSYmKHI9ITEpLGE9IkZCX1VCXyIrYSxfdXhhLnB1c2goWyJ0cmFja0R5bmFtaWNWYXJpYWJsZSIse2tleTphLHZhbHVlOml9XSksZSYmImV0ciI9PT1uJiYocj93aW5kb3cuQ2xpY2tUYWxlRXZlbnRUcmlnZ2VyJiZDbGlja1RhbGVFdmVudFRyaWdnZXIoIkBFVEAgIithKTpfdXhhLnB1c2goWyJ0cmFja0V2ZW50VHJpZ2dlclJlY29yZGluZyIsYV0pKSx0JiYoX3V4YS5wdXNoKFsic2V0UXVlcnkiLHRdKSxyJiZlP3dpbmRvdy5DbGlja1RhbGVMb2dpY2FsV2l0aFVwbG9hZFBhZ2UmJkNsaWNrVGFsZUxvZ2ljYWxXaXRoVXBsb2FkUGFnZSh3aW5kb3cubG9jYXRpb24uaHJlZik6X3V4YS5wdXNoKFsidHJhY2tQYWdldmlldyIsd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lXSkpfWZ1bmN0aW9uIGkoaSl7ZnVuY3Rpb24gdCgpe3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dmFyIGksdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibGlnaHRuaW5nanMtZnJhbWUtdXNhYmlsbGFfbGl2ZSIpO2lmKHQmJnQuY29udGVudFdpbmRvdyYmdC5jb250ZW50V2luZG93LnVzYWJpbGxhX2xpdmVfc2V0dGluZ3Mpe3ZhciByPShpPXQuY29udGVudFdpbmRvdy51c2FiaWxsYV9saXZlX3NldHRpbmdzLmV2ZW50Q2FsbGJhY2ssZnVuY3Rpb24ocixvLGwsYyx1KXtpJiZpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgcz11O2lmKCJGZWVkYmFjazpPcGVuIj09b3x8IkNhbXBhaWduOk9wZW4iPT09byl7ZnVuY3Rpb24gZCgpe2U9ITA7dmFyIGE9bigidWIiKTthJiZ0LmNvbnRlbnRXaW5kb3cudXNhYmlsbGFfbGl2ZV9zZXR0aW5ncy5sb2NhbF9kYXRhJiZ0LmNvbnRlbnRXaW5kb3cudXNhYmlsbGFfbGl2ZV9zZXR0aW5ncy5sb2NhbF9kYXRhLmN1c3RvbSYmKHQuY29udGVudFdpbmRvdy51c2FiaWxsYV9saXZlX3NldHRpbmdzLmxvY2FsX2RhdGEuY3VzdG9tLkNvbnRlbnRzcXVhcmVSZXBsYXk9YSl9ZnVuY3Rpb24gcCgpe3dpbmRvdy5DbGlja1RhbGVJc1JlY29yZGluZyYmQ2xpY2tUYWxlSXNSZWNvcmRpbmcoKT9kKCk6d2luZG93LkNsaWNrVGFsZVN1YnNjcmliZSYmQ2xpY2tUYWxlU3Vic2NyaWJlKCJyZWNvcmRpbmciLGQpfXZhciBnPV91eGEucHVzaChbImlzUmVjb3JkaW5nIl0pO2c/ZCgpOndpbmRvdy5DbGlja1RhbGVTdWJzY3JpYmU/cCgpOih3aW5kb3cuQ2xpY2tUYWxlT25SZWFkeUxpc3Q9d2luZG93LkNsaWNrVGFsZU9uUmVhZHlMaXN0fHxbXSxDbGlja1RhbGVPblJlYWR5TGlzdC5wdXNoKHApKX1pZigiRmVlZGJhY2s6T3BlbiI9PW8mJmEoIkZlZWRiYWNrIERpc3BsYXllZCAoQWxsIFN1cnZleXMpIiwidHJ1ZSIsMCwiY3NfdXNhYmlsbGE9ZmVlZGJhY2tfZGlzcGxheWVkIiksIkZlZWRiYWNrOlN1Y2Nlc3MiPT09byYmKGEoIkZlZWRiYWNrIFN1Ym1pdHRlZCAoQWxsIFN1cnZleXMpIiwidHJ1ZSIsImV0ciIsImNzX3VzYWJpbGxhPWZlZWRiYWNrX3N1Ym1pdHRlZCIpLHMpKWZvcih2YXIgYj1PYmplY3Qua2V5cyhzKSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBfPWJbZl0sdj1zW2JbZl1dLG09IiI7ImVtYWlsIiE9XyYmImNvbW1lbnQiIT1fJiYiY3VzdG9tIiE9XyYmKCJyYXRpbmciPT09Xz9tPSJGZWVkYmFjayBNb29kIFJhdGluZyI6Im5wcyI9PT1fP209IkZlZWRiYWNrIE5QUyBSYXRpbmciOiJwZXJmb3JtYW5jZSI9PT1fJiYobT0iRmVlZGJhY2sgUGVyZm9ybWFuY2UgUmF0aW5nIiksaXNOYU4odil8fCh2PXBhcnNlSW50KHYpKSxtJiZ2JiZhKG0sdikpfWlmKCJDYW1wYWlnbjpPcGVuIj09PW8mJmEoIkNhbXBhaWduIERpc3BsYXllZCIsbCwwLCJjc191c2FiaWxsYT1jYW1wYWlnbl9kaXNwbGF5ZWRfIitsKSwiQ2FtcGFpZ246UGFnZSBTd2l0Y2giPT09byYmcy5kYXRhKWZvcih2YXIgdz1PYmplY3Qua2V5cyhzLmRhdGEpLHk9MDt5PHcubGVuZ3RoO3krKyl7dmFyIEM9d1t5XSxrPXMuZGF0YVt3W3ldXSxoPSIiO2lmKCJlbWFpbCIhPUMpaWYoaD0ibW9vZCI9PT1DPyJDYW1wYWlnbiBNb29kIFJhdGluZyI6Im5wcyI9PT1DPyJDYW1wYWlnbiBOUFMgUmF0aW5nIjpDLCJvYmplY3QiPT10eXBlb2Ygaylmb3IodmFyIFM9T2JqZWN0LmtleXMoayksTz0wO088Uy5sZW5ndGg7TysrKXt2YXIgVD1TW09dLHg9a1tTW09dXTtpc05hTih4KXx8KHg9cGFyc2VJbnQoeCkpLGlzTmFOKFQpJiZoJiZUJiZ4JiZhKGgrIiAiK1QseCl9ZWxzZSBpc05hTihrKXx8KGs9cGFyc2VJbnQoaykpLGgmJmsmJmEoaCxrKX0iQ2FtcGFpZ246U3VjY2VzcyI9PT1vJiZhKCJDYW1wYWlnbiBTdWJtaXR0ZWQiLGwsImV0ciIsImNzX3VzYWJpbGxhPWNhbXBhaWduX3N1Ym1pdHRlZF8iK2wpfSk7d2luZG93LnVzYWJpbGxhX2xpdmUoInNldEV2ZW50Q2FsbGJhY2siLHIpfX0pLDUwMCl9dmFyIHI9ITEsbz13aW5kb3cudXNhYmlsbGFfbGl2ZTtvP3QoKTpPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCJ1c2FiaWxsYV9saXZlIix7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBvfSxzZXQ6ZnVuY3Rpb24oZSl7bz1lLHJ8fChyPSEwLHQoKSl9fSl9dmFyIHQ9ITE7X3V4YS5wdXNoKFsiYWZ0ZXJQYWdlVmlldyIsZnVuY3Rpb24oZSl7dHx8KHQ9ITAsaSgpKX1dKX0pLCJ1c2FiaWxsYS1jYXAiKX1dKTshZnVuY3Rpb24odCl7dmFyIGU9e307ZnVuY3Rpb24gcihpKXtpZihlW2ldKXJldHVybiBlW2ldLmV4cG9ydHM7dmFyIG49ZVtpXT17aTppLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIHRbaV0uY2FsbChuLmV4cG9ydHMsbixuLmV4cG9ydHMsciksbi5sPSEwLG4uZXhwb3J0c31yLm09dCxyLmM9ZSxyLmQ9ZnVuY3Rpb24odCxlLGkpe3Iubyh0LGUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHtlbnVtZXJhYmxlOiEwLGdldDppfSl9LHIucj1mdW5jdGlvbih0KXsidW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSxyLnQ9ZnVuY3Rpb24odCxlKXtpZigxJmUmJih0PXIodCkpLDgmZSlyZXR1cm4gdDtpZig0JmUmJiJvYmplY3QiPT10eXBlb2YgdCYmdCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBpPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoci5yKGkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLCJkZWZhdWx0Iix7ZW51bWVyYWJsZTohMCx2YWx1ZTp0fSksMiZlJiYic3RyaW5nIiE9dHlwZW9mIHQpZm9yKHZhciBuIGluIHQpci5kKGksbixmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0uYmluZChudWxsLG4pKTtyZXR1cm4gaX0sci5uPWZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIHR9O3JldHVybiByLmQoZSwiYSIsZSksZX0sci5vPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfSxyLnA9IiIscihyLnM9Mil9KFtmdW5jdGlvbih0LGUscil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxmdW5jdGlvbih0KXt0LkNvbnRlbnRTcXVhcmU9IkNPTlRFTlRTUVVBUkUiLHQuTG9hZGVkQnlDbGlja3RhbGU9IkxPQURFRF9CWV9DTElDS1RBTEUiLHQuTG9hZENsaWNrdGFsZVB0Yz0iTE9BRF9DTElDS1RBTEVfUFRDIix0LkR1YWxDb2xsZWN0aW9uUmV2aWV3PSJEVUFMX0NPTExFQ1RJT05fUkVWSUVXIix0LkR1YWxDb2xsZWN0aW9uPSJEVUFMX0NPTExFQ1RJT04ifShlLlRhZ0RlcGxveW1lbnRNb2RlfHwoZS5UYWdEZXBsb3ltZW50TW9kZT17fSkpfSxmdW5jdGlvbih0LGUscil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT0vKEBpbXBvcnRccyt1cmxccypcKFxzKihbIiddKT8oW14iJyldKykoXDIpXHMqXCkpfChAaW1wb3J0XHMrKFsiJ10pKFteIiddKylcNil8KHVybFxzKlwoXHMqKFsiJ10pPyhbXiInKV0rKShcOSlccypcKSkvZztmdW5jdGlvbiBuKHQsZSl7cmV0dXJuIHQucmVwbGFjZShpLChmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxyPTA7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3JdPWFyZ3VtZW50c1tyXTt2YXIgaT10WzNdfHx0WzddLG49dFsxMF0sbz0oaXx8bikudHJpbSgpLHM9aT8iQGltcG9ydCAiOiIiO3JldHVybiBzKyJ1cmwoIitlKG8pKyIpIn0pKX1lLnJlcGxhY2VJbj1uLGUuZXh0cmFjdEZyb209ZnVuY3Rpb24odCl7dmFyIGU9W107cmV0dXJuIG4odCwoZnVuY3Rpb24odCl7cmV0dXJuIGUucHVzaCh0KSx0fSkpLGV9fSxmdW5jdGlvbih0LGUscil7InVzZSBzdHJpY3QiO3IucihlKTt2YXIgaT17fTtyLnIoaSksci5kKGksImdldCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEt9KSksci5kKGksImdldFJlcXVlc3RQYXJhbWV0ZXJzIiwoZnVuY3Rpb24oKXtyZXR1cm4gUX0pKTt2YXIgbj17fTtyLnIobiksci5kKG4sImdldFJlcXVlc3RQYXJhbWV0ZXJzIiwoZnVuY3Rpb24oKXtyZXR1cm4gRGl9KSk7dmFyIG89e25vZGVGdW5jdGlvbnM6WyJjaGlsZE5vZGVzIiwiaGFzQ2hpbGROb2RlcyIsInBhcmVudE5vZGUiLCJuZXh0U2libGluZyJdLGNvbnN0cnVjdG9yczp7RGF0ZToiY3NEYXRlIixKU09OOiJjc0pTT04iLEFycmF5OiJjc0FycmF5IixTdHJpbmc6ImNzU3RyaW5nIixVUkw6ImNzVVJMIn19O2Z1bmN0aW9uIHModCxlKXt2YXIgcj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgcixpPXQ7aSYmIShyPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSxlKSk7KWk9T2JqZWN0LmdldFByb3RvdHlwZU9mKGkpO3JldHVybiByfSh0LGUpO3JldHVybihudWxsPT1yP3ZvaWQgMDpyLmdldCk/ci5nZXQ6KG51bGw9PXI/dm9pZCAwOnIudmFsdWUpP3IudmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tlXX19ZnVuY3Rpb24gYSh0KXtPYmplY3Qua2V5cyhvLmNvbnN0cnVjdG9ycykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7d2luZG93W28uY29uc3RydWN0b3JzW2VdXT10W2VdfSkpLG8ubm9kZUZ1bmN0aW9ucy5mb3JFYWNoKChmdW5jdGlvbihlKXt3aW5kb3dbImNzTm9kZSIrZV09cyh0Lk5vZGUucHJvdG90eXBlLGUpfSkpfXRyeXshZnVuY3Rpb24oKXthKHdpbmRvdyk7dmFyIHQ9ZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTt0LmlkPSJjcy1uYXRpdmUtZnJhbWUiLHQuc3R5bGUuZGlzcGxheT0ibm9uZSIsdC5zZXRBdHRyaWJ1dGUoInRpdGxlIiwiSW50ZW50aW9uYWxseSBibGFuayIpO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNzLW5hdGl2ZS1mcmFtZS1ob2xkZXIiKTtyZXR1cm4gZS5zdHlsZS5kaXNwbGF5PSJub25lIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGUpLGUuaW5uZXJIVE1MPXQub3V0ZXJIVE1MLGUuZmlyc3RFbGVtZW50Q2hpbGQuY29udGVudFdpbmRvd30oKTt0JiYod2luZG93LkNTUHVyZVdpbmRvdz10LGEod2luZG93LkNTUHVyZVdpbmRvdykpfSgpfWNhdGNoKHQpe3dpbmRvdy5DU1Byb3RlY3RuYXRpdmVGdW5jdGlvbnNFcnJvcnM9SlNPTi5zdHJpbmdpZnkodCl9ZnVuY3Rpb24gYyh0KXtyZXR1cm4gY3NTdHJpbmcucHJvdG90eXBlLnJlcGxhY2UuY2FsbCh0LC8oWyM7JiwuKyp+JzoiIV4kW1xdKCk8PT58LyU/QGB7fVxcIF0pL2csIlxcJDEiKX1mdW5jdGlvbiB1KHQpe3JldHVybiB0Lm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREV9ZnVuY3Rpb24gcCh0KXtyZXR1cm4gdC5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFfWZ1bmN0aW9uIGwodCl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiB1KHQpJiYibGluayI9PT10LmxvY2FsTmFtZX0odCkmJiJzdHlsZXNoZWV0Ij09PXQucmVsfWZ1bmN0aW9uIGgodCl7cmV0dXJuIHUodCkmJiJpbWciPT09dC5sb2NhbE5hbWV9ZnVuY3Rpb24gZih0KXtyZXR1cm4gdSh0KSYmInN0eWxlIj09PXQubG9jYWxOYW1lfWZ1bmN0aW9uIGQodCl7cmV0dXJuIHUodCkmJiJpbnB1dCI9PT10LmxvY2FsTmFtZX1mdW5jdGlvbiB5KHQpe3JldHVybiB1KHQpJiYic2NyaXB0Ij09PXQubG9jYWxOYW1lfWZ1bmN0aW9uIHYodCl7c3dpdGNoKHQubm9kZVR5cGUpe2Nhc2UgTm9kZS5ET0NVTUVOVF9OT0RFOmNhc2UgTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fWZ1bmN0aW9uIG0odCl7Zm9yKHZhciBlPXQscj1bZV07bnVsbCE9PWNzTm9kZXBhcmVudE5vZGUuYXBwbHkoZSk7KWU9Y3NOb2RlcGFyZW50Tm9kZS5hcHBseShlKSxjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwocixlKTtyZXR1cm4gZyhlKSYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHIsImRldGFjaGVkIikse2FuY2VzdG9yczpyLHNlbGVjdGlvblJvb3Q6ZX19ZnVuY3Rpb24gZyh0KXtyZXR1cm4gay5pc1ZhbGlkRWxlbWVudCh0KX1mdW5jdGlvbiBTKHQpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpfWZ1bmN0aW9uIEUoKXtyZXR1cm4gRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc3x8RWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yfHxFbGVtZW50LnByb3RvdHlwZS5tb3pNYXRjaGVzU2VsZWN0b3J8fEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yfHxFbGVtZW50LnByb3RvdHlwZS5vTWF0Y2hlc1NlbGVjdG9yfHxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3J9dmFyIHc9RSgpO2Z1bmN0aW9uIEModCxlLHIpe2lmKCJkZXRhY2hlZCI9PT10fHw5PT09dC5ub2RlVHlwZSlyZXR1cm4gMDt2YXIgaT1jc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChTKGNzTm9kZWNoaWxkTm9kZXMuYXBwbHkodCkpLChmdW5jdGlvbih0KXtyZXR1cm4gMT09PXQubm9kZVR5cGUmJiFmdW5jdGlvbih0LGUpe3JldHVybiEhZSYmY3NBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGUsKGZ1bmN0aW9uKGUpe3JldHVybiB3LmNhbGwodCxlKX0pKX0odCxyLnJlbGlhYmxlU2VsZWN0b3JzKSYmY3NTdHJpbmcucHJvdG90eXBlLnRvTG93ZXJDYXNlLmNhbGwodC5sb2NhbE5hbWUpPT09Y3NTdHJpbmcucHJvdG90eXBlLnRvTG93ZXJDYXNlLmNhbGwoZS5sb2NhbE5hbWUpfSkpO3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoaSxlKX12YXIgUj1bL1xkezR9LywvXmVtYmVyXGQrJC9dO2Z1bmN0aW9uIGIodCxlLHIsaSl7dmFyIG49aS5keW5hbWljSWRSZWdleHx8bnVsbCxvPWZ1bmN0aW9uKHQpe3JldHVybiBjKGNzU3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZS5jYWxsKHQubG9jYWxOYW1lKSl9KHQpO2lmKGZ1bmN0aW9uKHQsZSl7dmFyIHI9VCh0KTtyZXR1cm4gciYmY3NTdHJpbmcucHJvdG90eXBlLm1hdGNoLmNhbGwociwvXltcdy1dKyQvKSYmQSgiZGF0YS1jcy1vdmVycmlkZS1pZCIscixlKX0odCxyKSlyZXR1cm57aGFzVW5pcXVlSWRlbnRpZmllcjohMCxlbGVtZW50U2VsZWN0b3I6bysnW2RhdGEtY3Mtb3ZlcnJpZGUtaWQ9IicrVCh0KSsnIl0nfTt2YXIgcz1mdW5jdGlvbih0KXt2YXIgZT10LmdldEF0dHJpYnV0ZSgiaWQiKTtyZXR1cm4gZT9jKGUpOmV9KHQpO2lmKGZ1bmN0aW9uKHQsZSxyLGkpe3JldHVybiBlJiYhZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPT1UKHQpfSh0KSYmIWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdC5oYXNBdHRyaWJ1dGUoImRhdGEtY3MtZHluYW1pYy1pZCIpfHxmdW5jdGlvbih0LGUpe3ZhciByPSExO3QmJmUmJihyPWUudGVzdCh0KSk7cmV0dXJuIHQmJihjc0FycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoUiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUudGVzdCh0KX0pKXx8cil9KGUscil9KHQsZSxpKSYmZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYmQSgiaWQiLHQsZSl9KGUscil9KHQscyxyLG4pKXJldHVybntoYXNVbmlxdWVJZGVudGlmaWVyOiEwLGVsZW1lbnRTZWxlY3RvcjpvKyIjIitzfTt2YXIgYT1mdW5jdGlvbih0LGUpe3ZhciByO3JldHVybiBudWxsPT09KHI9ZS5yZWxpYWJsZVNlbGVjdG9ycyl8fHZvaWQgMD09PXI/dm9pZCAwOnIuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIHcuY2FsbCh0LGUpfSkpfSh0LGkpO3JldHVybiBhP3toYXNVbmlxdWVJZGVudGlmaWVyOiExLGVsZW1lbnRTZWxlY3RvcjpvKyJbIithKyJdKCIrZnVuY3Rpb24odCxlLHIpe2lmKCJkZXRhY2hlZCI9PT10fHw5PT09dC5ub2RlVHlwZSlyZXR1cm4gMDt2YXIgaT1jc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChTKGNzTm9kZWNoaWxkTm9kZXMuYXBwbHkodCkpLChmdW5jdGlvbih0KXtyZXR1cm4gMT09PXQubm9kZVR5cGUmJncuY2FsbCh0LHIpfSkpO3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoaSxlKX0oZSx0LGEpKyIpIn06e2hhc1VuaXF1ZUlkZW50aWZpZXI6ITEsZWxlbWVudFNlbGVjdG9yOm8rIjplcSgiK0MoZSx0LGkpKyIpIn19ZnVuY3Rpb24gVCh0KXtyZXR1cm4gdC5nZXRBdHRyaWJ1dGUoImRhdGEtY3Mtb3ZlcnJpZGUtaWQiKX1mdW5jdGlvbiBBKHQsZSxyKXt0cnl7cmV0dXJuIDE9PT1yLnF1ZXJ5U2VsZWN0b3JBbGwoIlsiK3QrJz0iJytlKyciXScpLmxlbmd0aH1jYXRjaCh0KXtpZigiU3ludGF4RXJyb3IiIT09dC5uYW1lKXRocm93IHR9cmV0dXJuITF9dmFyIGs7ZnVuY3Rpb24gUCh0LGUscil7dmFyIGk9Y3NBcnJheS5wcm90b3R5cGUuc2hpZnQuY2FsbCh0KTtpZigwPT09dC5sZW5ndGgpcmV0dXJuIE8oaSxyKTt2YXIgbj1iKGksdFswXSxlLHIpLG89bi5lbGVtZW50U2VsZWN0b3Iscz1uLmhhc1VuaXF1ZUlkZW50aWZpZXI7aWYoIXIuZnVsbFBhdGgmJnMpcmV0dXJuIiIrTyh0W3QubGVuZ3RoLTFdLHIpK287dmFyIGE9UCh0LGUscik7cmV0dXJuKGE/YSsiPiI6IiIpK299ZnVuY3Rpb24gTyh0LGUpe2lmKCJkZXRhY2hlZCI9PT10KXJldHVybiJ8ZGV0YWNoZWR8IjtpZih0Lmhvc3Qpe3ZhciByPW0odC5ob3N0KTtyZXR1cm4gUChyLmFuY2VzdG9ycyxyLnNlbGVjdGlvblJvb3QsZSkrInxzaGFkb3ctcm9vdHwifXJldHVybiAxMT09PXQubm9kZVR5cGU/InxmcmFnbWVudHwiOiIifWZ1bmN0aW9uIF8oKXtyZXR1cm4gTWF0aC5mbG9vcihxLm5vdygpLzFlMyl9ZnVuY3Rpb24gSSgpe31mdW5jdGlvbiBOKHQsZSl7cmV0dXJuIDA9PT1jc1N0cmluZy5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbCh0LGUsMCl9ZnVuY3Rpb24gTSh0LGUpe3JldHVybi0xIT09Y3NTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0LGUsdC5sZW5ndGgtZS5sZW5ndGgpfSFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiEhdCYmImxvY2FsTmFtZSJpbiB0JiYiZ2V0QXR0cmlidXRlImluIHQmJiJoYXNBdHRyaWJ1dGUiaW4gdCYmInBhcmVudE5vZGUiaW4gdH1mdW5jdGlvbiByKHQpe3JldHVybiB0JiYianF1ZXJ5ImluIHQmJjE9PT10Lmxlbmd0aD90WzBdOnR9dC5JTlZBTElEX0VMRU1FTlQ9IklOVkFMSURfRUxFTUVOVCIsdC5pc1ZhbGlkRWxlbWVudD1lLHQuZ2V0RWxlbWVudFBhdGg9ZnVuY3Rpb24oaSxuKXt2b2lkIDA9PT1uJiYobj17ZnVsbFBhdGg6ITEsZHluYW1pY0lkUmVnZXg6bnVsbH0pO3ZhciBvPXIoaSk7aWYobz09PWRvY3VtZW50KXJldHVybiIiO2lmKCFlKG8pKXJldHVybiB0LklOVkFMSURfRUxFTUVOVDt2YXIgcz1tKG8pO3JldHVybiBQKHMuYW5jZXN0b3JzLHMuc2VsZWN0aW9uUm9vdCxuKX0sdC5nZXRFbGVtZW50UGF0aEFuZEZpcnN0QW5jaG9yUGFyZW50PWZ1bmN0aW9uKGksbil7dm9pZCAwPT09biYmKG49e2Z1bGxQYXRoOiExLGR5bmFtaWNJZFJlZ2V4Om51bGx9KTt2YXIgbz1yKGkpO2lmKG89PT1kb2N1bWVudClyZXR1cm57cGF0aDoiIixmaXJzdEFuY2hvclBhcmVudDpudWxsfTtpZighZShvKSlyZXR1cm57cGF0aDp0LklOVkFMSURfRUxFTUVOVCxmaXJzdEFuY2hvclBhcmVudDpudWxsfTt2YXIgcz1mdW5jdGlvbih0KXtmb3IodmFyIGUscj10LGk9W3JdLG49bnVsbDtudWxsIT09Y3NOb2RlcGFyZW50Tm9kZS5hcHBseShyKTspbnVsbD09PW4mJih1KGU9cikmJiJhIj09PWUubG9jYWxOYW1lKSYmKG49ciksY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKGksY3NOb2RlcGFyZW50Tm9kZS5hcHBseShyKSkscj1jc05vZGVwYXJlbnROb2RlLmFwcGx5KHIpO3JldHVybiBnKHIpJiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoaSwiZGV0YWNoZWQiKSx7Zmlyc3RBbmNob3JQYXJlbnQ6bixhbmNlc3RvcnM6aSxzZWxlY3Rpb25Sb290OnJ9fShvKSxhPXMuZmlyc3RBbmNob3JQYXJlbnQ7cmV0dXJue3BhdGg6UChzLmFuY2VzdG9ycyxzLnNlbGVjdGlvblJvb3QsbiksZmlyc3RBbmNob3JQYXJlbnQ6YX19fShrfHwoaz17fSkpLHdpbmRvdy5DU1BhdGhDb21wdXRhdGlvbj13aW5kb3cuQ1NQYXRoQ29tcHV0YXRpb258fGs7ZnVuY3Rpb24gTCh0KXtyZXR1cm4gRCgpPHR9ZnVuY3Rpb24gRCgpe3JldHVybiBNYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKS8xMDB9dmFyIHgsVixxPXtub3c6ZnVuY3Rpb24oKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIHBlcmZvcm1hbmNlJiZwZXJmb3JtYW5jZS5ub3c/cGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCtNYXRoLnJvdW5kKHBlcmZvcm1hbmNlLm5vdygpKTpjc0RhdGUubm93KCl9fSxVPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnRyYWNrZXJEb21haW49dC50cmFja2VyRG9tYWluLHRoaXMubG9nZ2VyRG9tYWluPXQuZWQsdGhpcy5taW5Mb2dMZXZlbD10LmxvZ0xldmVsLHRoaXMucHJvamVjdElkPXQucHJvamVjdElkLHRoaXMuc3RhdHVzPXQuc3RhdHVzLHRoaXMuaG9zdG5hbWVzPXQuaG9zdG5hbWVzLHRoaXMuaWZyYW1lc1RyYWNraW5nPSEhdC5pZnJhbWVzVHJhY2tpbmcsdGhpcy5jcm9zc0RvbWFpblRyYWNraW5nPSEhdC5jcm9zc0RvbWFpblRyYWNraW5nLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVUcmFja2luZz0hIXQuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVUcmFja2luZyx0aGlzLmNvbnNlbnRSZXF1aXJlZD0hIXQuY29uc2VudFJlcXVpcmVkLHRoaXMuYWxsb3dTdWJkb21haW5zPSEhdC5hbGxvd1N1YmRvbWFpbnMsdGhpcy52aXNpdG9yQ29va2llVGltZW91dD10LnZpc2l0b3JDb29raWVUaW1lb3V0fHwzNDE2NGU2LHRoaXMuc2FtcGxlUmF0ZT10LnNhbXBsZVJhdGUsdGhpcy5yZXBsYXlSZWNvcmRpbmdSYXRlPXQucmVwbGF5UmVjb3JkaW5nUmF0ZSx0aGlzLnZhbGlkYXRpb25SYXRlPXQudmFsaWRhdGlvblJhdGUsdGhpcy5sYXN0VHJhY2tpbmdEcmF3PXQubGFzdFRyYWNraW5nRHJhd3x8MSx0aGlzLnVzZUh0dHBzPSEwLHRoaXMucmVjb3JkaW5nRG9tYWluPXQucmVjb3JkaW5nRG9tYWluLHRoaXMuZU1lcmNoYW5kaXNpbmdFbmFibGVkPXQuZU1lcmNoYW5kaXNpbmdFbmFibGVkLHRoaXMubW91c2VNb3ZlSGVhdG1hcEVuYWJsZWQ9dC5tb3VzZU1vdmVIZWF0bWFwRW5hYmxlZCx0aGlzLmF1dG9JbnNpZ2h0c0VuYWJsZWQ9dC5hdXRvSW5zaWdodHNFbmFibGVkLHRoaXMuanNFcnJvcnNFbmFibGVkPXQuanNFcnJvcnNFbmFibGVkLHRoaXMuYXBpRXJyb3JzRW5hYmxlZD10LmFwaUVycm9yc0VuYWJsZWQsdGhpcy50cmlnZ2VyU2Vzc2lvblJlcGxheUVuYWJsZWQ9dC50cmlnZ2VyU2Vzc2lvblJlcGxheUVuYWJsZWQsdGhpcy50cmlnZ2VyU2Vzc2lvblJlcGxheVJlZ2V4PXRoaXMuYnVpbGRSZWdleEZyb21Db25maWd1cmF0aW9uKHQudHJpZ2dlclNlc3Npb25SZXBsYXlSZWdleCksdGhpcy5tZXRyaWNSYXRlPXZvaWQgMD09PXQubWV0cmljUmF0ZT8wOnQubWV0cmljUmF0ZSx0aGlzLmR5bmFtaWNJZFJlZ2V4PXQuZHluYW1pY0lkUmVnZXg/bmV3IFJlZ0V4cCh0LmR5bmFtaWNJZFJlZ2V4KTpudWxsLHRoaXMud2hpdGVsaXN0ZWRBdHRyaWJ1dGVzPXQud2hpdGVsaXN0ZWRBdHRyaWJ1dGVzfHxbXSx0aGlzLnJlcGxheVJlY29yZGluZ1VubWFza2VkVXJsUmVnZXg9dGhpcy5idWlsZFJlZ2V4RnJvbUNvbmZpZ3VyYXRpb24odC5yZXBsYXlSZWNvcmRpbmdVbm1hc2tlZFVybFJlZ2V4KSx0aGlzLnJlcGxheVJlY29yZGluZ01hc2tlZFVybFJlZ2V4PXRoaXMuYnVpbGRSZWdleEZyb21Db25maWd1cmF0aW9uKHQucmVwbGF5UmVjb3JkaW5nTWFza2VkVXJsUmVnZXgpLHRoaXMudGFnRGVwbG95bWVudE1vZGU9dC50YWdEZXBsb3ltZW50TW9kZSx0aGlzLmR1YWxDb2xsZWN0aW9uVGFnRG9tYWluPXQuZHVhbENvbGxlY3Rpb25UYWdEb21haW58fG51bGwsdGhpcy5wdGNEb21haW49dC5wdGNEb21haW58fG51bGwsdGhpcy5wdGNHdWlkPXQucHRjR3VpZHx8bnVsbCx0aGlzLnNlY3VyZUNvb2tpZXNFbmFibGVkPSEhdC5zZWN1cmVDb29raWVzRW5hYmxlZCx0aGlzLnB0Y1NoYTUxMj10LnB0Y1NoYTUxMnx8bnVsbCx0aGlzLnB0Y1NuYXBzaG90UGF0aD10LnB0Y1NuYXBzaG90UGF0aHx8bnVsbCx0aGlzLmVtaXREZWJ1Z0V2ZW50cz0hMSx0aGlzLnVzZU1hbGthUGlwZWxpbmU9dC51c2VNYWxrYVBpcGVsaW5lLHRoaXMubWFsa2FRdW90YVNlcnZpY2VEb21haW49dC5tYWxrYVF1b3RhU2VydmljZURvbWFpbnx8bnVsbCx0aGlzLm1hbGthUmVjb3JkaW5nRG9tYWluPXQubWFsa2FSZWNvcmRpbmdEb21haW58fG51bGwsdGhpcy50ZXh0VmlzaWJpbGl0eUVuYWJsZWQ9dC50ZXh0VmlzaWJpbGl0eUVuYWJsZWQsdGhpcy5leHBlcmltZW50YWw9dC5leHBlcmltZW50YWx8fHt9LHRoaXMubWFsa2FFdHJFbmFibGVkPSEhdC5tYWxrYUV0ckVuYWJsZWQsdGhpcy5tYWxrYVVybEVuYWJsZWQ9ISF0Lm1hbGthVXJsRW5hYmxlZH1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0VHJhY2tlclVyaT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3RvY29sKCkrIjovLyIrdGhpcy50cmFja2VyRG9tYWlufSx0LnByb3RvdHlwZS5nZXRSZWNvcmRpbmdVcmk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm90b2NvbCgpKyI6Ly8iKyh0aGlzLnVzZU1hbGthUGlwZWxpbmUmJnRoaXMubWFsa2FSZWNvcmRpbmdEb21haW4/dGhpcy5tYWxrYVJlY29yZGluZ0RvbWFpbjp0aGlzLnJlY29yZGluZ0RvbWFpbil9LHQucHJvdG90eXBlLmdldFF1b3RhU2VydmljZVVyaT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3RvY29sKCkrIjovLyIrdGhpcy5tYWxrYVF1b3RhU2VydmljZURvbWFpbn0sdC5wcm90b3R5cGUuZ2V0TG9nZ2VyVXJpPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvdG9jb2woKSsiOi8vIit0aGlzLmxvZ2dlckRvbWFpbn0sdC5wcm90b3R5cGUucHJvdG9jb2w9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51c2VIdHRwcz8iaHR0cHMiOiJodHRwIn0sdC5wcm90b3R5cGUuaXNQcm9qZWN0QWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PT10aGlzLnN0YXR1c30sdC5wcm90b3R5cGUucHJvY2Vzc09wdGlvbk92ZXJyaWRlcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3QmJnQuZm9yRWFjaCYmdC5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgcj10WzBdLGk9dC5zbGljZSgxKTtpZigic2V0T3B0aW9uIj09PXIpe3ZhciBuPWlbMF0sbz1pWzFdO2Uuc2V0T3ZlcnJpZGFibGVGaWVsZChuLG8pfX0pKX0sdC5wcm90b3R5cGUuc2V0T3ZlcnJpZGFibGVGaWVsZD1mdW5jdGlvbih0LGUpeyJ0cmFja2VyRG9tYWluIj09PXQmJih0aGlzLnRyYWNrZXJEb21haW49ZSksInJlY29yZGluZ0RvbWFpbiI9PT10JiYodGhpcy5yZWNvcmRpbmdEb21haW49ZSksImxvZ2dlckRvbWFpbiI9PT10JiYodGhpcy5sb2dnZXJEb21haW49ZSksIm1pbkxvZ0xldmVsIj09PXQmJih0aGlzLm1pbkxvZ0xldmVsPWUpLCJ1c2VIdHRwcyI9PT10JiYodGhpcy51c2VIdHRwcz0hIWUpfSx0LnByb3RvdHlwZS5idWlsZFJlZ2V4RnJvbUNvbmZpZ3VyYXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIHQ/bmV3IFJlZ0V4cCgiXiIrdCsiJCIpOm51bGx9LHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7cmV0dXJue3BpZDoiIit0aGlzLnByb2plY3RJZH19LHQucHJvdG90eXBlLnVwZGF0ZUR5bmFtaWNGaWVsZHM9ZnVuY3Rpb24odCxlKXsiZW1pdERlYnVnRXZlbnRzIj09PXQmJih0aGlzLmVtaXREZWJ1Z0V2ZW50cz1lKSwibWluTG9nTGV2ZWwiPT09dCYmKHRoaXMubWluTG9nTGV2ZWw9ZSl9LHR9KCksaj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLndpbmRvdz10LHRoaXMuY29uZj1lfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5pbklmcmFtZUNvbnRleHQ9dGhpcy53aW5kb3cuc2VsZiE9PXRoaXMud2luZG93LnRvcCx0aGlzLmNvbmYuaWZyYW1lc1RyYWNraW5nJiZ0aGlzLmluSWZyYW1lQ29udGV4dD90aGlzLnRvcFdpbmRvd1RyYWNrZXI9ITE6dGhpcy50b3BXaW5kb3dUcmFja2VyPSEwfSx0LnByb3RvdHlwZS5pc0luSWZyYW1lQ29udGV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluSWZyYW1lQ29udGV4dH0sdC5wcm90b3R5cGUuaXNUb3BXaW5kb3dUcmFja2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9wV2luZG93VHJhY2tlcn0sdH0oKTshZnVuY3Rpb24odCl7dC5kZWJ1Zz0iZGVidWciLHQud2Fybj0id2FybiIsdC5lcnJvcj0iZXJyb3IiLHQuY3JpdGljYWw9ImNyaXRpY2FsIn0oeHx8KHg9e30pKSxmdW5jdGlvbih0KXt0LnRvUXVlcnk9ZnVuY3Rpb24odCl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbChjc0FycmF5LnByb3RvdHlwZS5tYXAuY2FsbChPYmplY3Qua2V5cyh0KSwoZnVuY3Rpb24oZSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChlKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHRbZV0pfSkpLCImIil9fShWfHwoVj17fSkpO3ZhciB6LEI9ZnVuY3Rpb24oKXtyZXR1cm4oQj1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbiBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSYmKHRbbl09ZVtuXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LEY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5kb21haW5Vcmk9dCx0aGlzLnBhdGg9ZSx0aGlzLmJlZm9yZVJlcXVlc3RDYWxsYmFja3M9W10sdGhpcy5hZnRlclJlcXVlc3RDYWxsYmFja3M9W119cmV0dXJuIHQucHJvdG90eXBlLnNldFJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3RoaXMucmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnM9dH0sdC5wcm90b3R5cGUuYmVmb3JlPWZ1bmN0aW9uKHQpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmJlZm9yZVJlcXVlc3RDYWxsYmFja3MsdCl9LHQucHJvdG90eXBlLmFmdGVyPWZ1bmN0aW9uKHQpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmFmdGVyUmVxdWVzdENhbGxiYWNrcyx0KX0sdC5wcm90b3R5cGUucmV0cmlldmVQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnM/Y3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwoY3NBcnJheS5wcm90b3R5cGUubWFwLmNhbGwodGhpcy5yZXF1ZXN0UGFyYW1ldGVyc1Byb3ZpZGVycywoZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0UmVxdWVzdFBhcmFtZXRlcnMoKX0pKSwoZnVuY3Rpb24odCxlKXtyZXR1cm4gQihCKHt9LHQpLGUpfSkpOnt9fSx0fSgpLEg9KHo9ZnVuY3Rpb24odCxlKXtyZXR1cm4oej1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKHQsZSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9dH16KHQsZSksdC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKTooci5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IHIpfSksRz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscil7cmV0dXJuIHQuY2FsbCh0aGlzLGUscil8fHRoaXN9cmV0dXJuIEgoZSx0KSxlLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKCl7Y3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuYmVmb3JlUmVxdWVzdENhbGxiYWNrcywoZnVuY3Rpb24odCl7cmV0dXJuIHQoKX0pKTt2YXIgdD10aGlzLnJldHJpZXZlUGFyYW1ldGVycygpO3RoaXMuYWRkQ2FjaGVCdXN0aW5nKHQpO3ZhciBlPVYudG9RdWVyeSh0KTt0aGlzLmdlbmVyYXRlUGl4ZWwoZSksY3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuYWZ0ZXJSZXF1ZXN0Q2FsbGJhY2tzLChmdW5jdGlvbih0KXtyZXR1cm4gdCgpfSkpfSxlLnByb3RvdHlwZS5nZW5lcmF0ZVBpeGVsPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB3aW5kb3cuSW1hZ2UoMSwxKTtlLm9ubG9hZD1JLGUub25lcnJvcj1JLGUuc3JjPXRoaXMuZG9tYWluVXJpKyh0aGlzLnBhdGg/Ii8iK3RoaXMucGF0aDoiIikrIj8iK3R9LGUucHJvdG90eXBlLmFkZENhY2hlQnVzdGluZz1mdW5jdGlvbih0KXt0LnI9Y3NTdHJpbmcucHJvdG90eXBlLnNsaWNlLmNhbGwoIiIrTWF0aC5yYW5kb20oKSwyLDgpfSxlfShGKSxXPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMucHJvamVjdENvbmZpZ3VyYXRpb249dCx0aGlzLmJhc2ljTG9nUmVxdWVzdFBhcmFtZXRlcj1lfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5yZXF1ZXN0PW5ldyBHKHRoaXMucHJvamVjdENvbmZpZ3VyYXRpb24uZ2V0TG9nZ2VyVXJpKCkpLHRoaXMucmVxdWVzdC5zZXRSZXF1ZXN0UGFyYW1ldGVyc1Byb3ZpZGVycyh0aGlzLHRoaXMuYmFzaWNMb2dSZXF1ZXN0UGFyYW1ldGVyKX0sdC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbih0KXt0aGlzLmxvZz10LHRoaXMucmVxdWVzdC5zZW5kKCl9LHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7cmV0dXJue2E6dGhpcy5sb2cuYXBwLGw6dGhpcy5sb2cubGV2ZWwsbTp0aGlzLmxvZy5tZXNzYWdlLHM6dGhpcy5sb2cuc3RhY2t0cmFjZX19LHR9KCksWD0vW2EtekEtWjAtOS5fJSstXSsoPzpAfCU0MClbYS16QS1aMC05LiUtX10rKCg/OlwufCUyW2VFXSlbYS16QS1aMC05LV0rKSsvZyxZPS9bYS16QS1aMC05K18tXSg/OkB8JTQwKS8sSj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmFub255bWl6ZT1mdW5jdGlvbih0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJlkudGVzdCh0KT9jc1N0cmluZy5wcm90b3R5cGUucmVwbGFjZS5jYWxsKHQsWCwiQ1NfQU5PTllNSVpFRF9FTUFJTCIpOnR9LHQucHJvdG90eXBlLmFub255bWl6ZUZpZWxkcz1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXM7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlLChmdW5jdGlvbihlKXt0W2VdPXIuYW5vbnltaXplKHRbZV0pfSkpLHR9LHR9KCk7ZnVuY3Rpb24gSygpe3JldHVybiIxMC4xNC4yIn1mdW5jdGlvbiBRKCl7cmV0dXJue3Y6IjEwLjE0LjIifX12YXIgWiwkPWZ1bmN0aW9uKCl7cmV0dXJuKCQ9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHI9MSxpPWFyZ3VtZW50cy5sZW5ndGg7cjxpO3IrKylmb3IodmFyIG4gaW4gZT1hcmd1bWVudHNbcl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbikmJih0W25dPWVbbl0pO3JldHVybiB0fSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx0dD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLnBpaT1lfXJldHVybiB0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybiAkKCQoe2Q6IiIrcS5ub3coKSxwOnRoaXMucGlpLmFub255bWl6ZSh3aW5kb3cubG9jYXRpb24uaHJlZiksdTpuYXZpZ2F0b3IudXNlckFnZW50fSx0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0UmVxdWVzdFBhcmFtZXRlcnMoKSkse3Y6IjEwLjE0LjIifSl9LHR9KCk7IWZ1bmN0aW9uKHQpe3RbdC5kZWJ1Zz0wXT0iZGVidWciLHRbdC53YXJuPTFdPSJ3YXJuIix0W3QuZXJyb3I9Ml09ImVycm9yIix0W3QuY3JpdGljYWw9M109ImNyaXRpY2FsIn0oWnx8KFo9e30pKTt2YXIgZXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt2YXIgaTt0aGlzLnBhcmVudExvZ0NvbnRleHQ9ZSx0aGlzLnBpaT1uZXcgSix0aGlzLm1pbkxvZ0xldmVsPVpbeC53YXJuXSx0aGlzLmlzTG9nZ2luZ0FjdGl2ZT0hMSx0aGlzLm1pbkxvZ0xldmVsPVpbdC5taW5Mb2dMZXZlbHx8eC53YXJuXTt2YXIgbj10LnZhbGlkYXRpb25SYXRlPj0wP3QudmFsaWRhdGlvblJhdGU6MTA7dGhpcy5pc0xvZ2dpbmdBY3RpdmU9TChuKSx0aGlzLnJlcXVlc3Q9cnx8bmV3IFcodCxuZXcgdHQodCx0aGlzLnBpaSkpLHRoaXMubG9nVHJhY2s9KChpPXt9KVt4LmRlYnVnXT1bXSxpW3gud2Fybl09W10saVt4LmVycm9yXT1bXSxpW3guY3JpdGljYWxdPVtdLGkpLHRoaXMuc25pcHBldExvZ0NvdW50ZXI9e30sdGhpcy5yZXF1ZXN0LmluaXQoKX1yZXR1cm4gdC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbih0LGUscil7aWYodm9pZCAwPT09ZSYmKGU9IiIpLHZvaWQgMD09PXImJihyPXgud2FybiksdGhpcy5pc0xvZ2dpbmdBbGxvd2VkKHIsZSkpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmxvZ1RyYWNrW3JdLGV8fCIiKTt2YXIgaT17bWVzc2FnZTp0aGlzLmdldE1lc3NhZ2UodCxlKSxzdGFja3RyYWNlOnRoaXMuZ2V0U3RhY2t0cmFjZSh0KSxhcHA6InV4YSIsbGV2ZWw6cn07dGhpcy5yZXF1ZXN0LnNlbmQoaSl9fSx0LnByb3RvdHlwZS5nZXRNZXNzYWdlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dCBpbnN0YW5jZW9mIEVycm9yP3RoaXMucGlpLmFub255bWl6ZSh0Lm1lc3NhZ2V8fHQudG9TdHJpbmcoKSk6dDtyZXR1cm4gZSYmKHIrPSIgRXJyb3JDb2RlOiAiK2UpLHJ9LHQucHJvdG90eXBlLmdldFN0YWNrdHJhY2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBFcnJvcj8odC5zdGFja3x8Ik5vIHN0YWNrdHJhY2UiKSsiICIrdGhpcy5nZXRDb250ZXh0KCk6dGhpcy5nZXRDb250ZXh0KCl9LHQucHJvdG90eXBlLmdldENvbnRleHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudExvZ0NvbnRleHQuZ2V0VmlzaXRvclNlcnZpY2UoKSxlPW51bGw9PXQ/dm9pZCAwOnQuZ2V0VmlzaXRvcigpO2lmKCFlKXJldHVybiJObyBjb250ZXh0Ijt2YXIgcj10aGlzLnBhcmVudExvZ0NvbnRleHQuZ2V0U2Vzc2lvblNlcnZpY2UoKSxpPXImJnIuZ2V0U2Vzc2lvbigpLG49e3VzZXJJZDplLmlkLHNlc3Npb25OdW1iZXI6ZS52aXNpdHNDb3VudCxwYWdlTnVtYmVyOmkmJmkucGFnZU51bWJlcn07cmV0dXJuIGNzSlNPTi5zdHJpbmdpZnkobil9LHQucHJvdG90eXBlLmlzTG9nZ2luZ0FsbG93ZWQ9ZnVuY3Rpb24odCxlKXtpZighdGhpcy5pc0xvZ2dpbmdBY3RpdmV8fFpbdF08dGhpcy5taW5Mb2dMZXZlbClyZXR1cm4hMTtpZigwPT09KG51bGw9PWU/dm9pZCAwOmUuaW5kZXhPZigic25pcHBldC0iLDApKSlyZXR1cm4gdGhpcy5pc0xvZ2dpbmdBbGxvd2VkRm9yU25pcHBldHMoZSk7dmFyIHI9dGhpcy5sb2dUcmFja1t0XTtyZXR1cm4hKHIubGVuZ3RoPj01KSYmKCFlfHwhY3NBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKHIsKGZ1bmN0aW9uKHQpe3JldHVybiB0PT09ZX0pKSl9LHQucHJvdG90eXBlLmlzTG9nZ2luZ0FsbG93ZWRGb3JTbmlwcGV0cz1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbiB0aGlzLnNuaXBwZXRMb2dDb3VudGVyPyEodGhpcy5zbmlwcGV0TG9nQ291bnRlclt0XT49NSkmJih0aGlzLnNuaXBwZXRMb2dDb3VudGVyW3RdKz0xLCEwKToodGhpcy5zbmlwcGV0TG9nQ291bnRlclt0XT0xLCEwKX0sdH0oKSxydD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7ZnVuY3Rpb24gaXQodCl7cmV0dXJuIHJ0LmhyZWY9dCxydC5ocmVmfWZ1bmN0aW9uIG50KHQpe2lmKCFOKHQsImh0dHA6Ly8iKSYmIU4odCwiaHR0cHM6Ly8iKSlyZXR1cm4iIjt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7cmV0dXJuIGUuaHJlZj10LGRlY29kZVVSSUNvbXBvbmVudChlLmhvc3RuYW1lKX1mdW5jdGlvbiBvdCh0LGUpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIE0odCwiLiIrZSl8fHQ9PT1lfHwiIj09PWV9KSl9dmFyIHN0LGF0LGN0LHV0OyFmdW5jdGlvbih0KXt0LlBhcmVudD0icGFyZW50Iix0LkNoaWxkPSJjaGlsZCJ9KHN0fHwoc3Q9e30pKSxmdW5jdGlvbih0KXt0LkRpc2NvdmVyeT0iZGlzY292ZXJ5Iix0LlN0b3A9InN0b3AiLHQuQ2hpbGRMb2dNZXNzYWdlPSJjaGlsZExvZ01lc3NhZ2UiLHQuQW5hbHlzaXNFdmVudD0iYW5hbHlzaXNFdmVudCIsdC5KYXZhc2NyaXB0RXJyb3I9ImphdmFzY3JpcHRFcnJvciIsdC5BcGlFcnJvcj0iYXBpRXJyb3IiLHQuRW1lcmNoYW5kaXNpbmdNZXNzYWdlPSJlbWVyY2hhbmRpc2luZ01lc3NhZ2UiLHQuQ29tbWFuZHM9ImNvbW1hbmRzIn0oYXR8fChhdD17fSkpLCh1dD1jdHx8KGN0PXt9KSkuYnVpbGRCYXNlTWVzc2FnZT1mdW5jdGlvbih0LGUscixpKXt2YXIgbj17dHlwZTp0LGZyb206ZSxwaWQ6cixzaWduYXR1cmU6IkNTX0lGUkFNRV9NRVNTQUdFIn07cmV0dXJuIHZvaWQgMCE9PWkmJmk+PTAmJihuLmlkPWkpLG59LHV0LmlzTWVzc2FnZVZhbGlkPWZ1bmN0aW9uKHQsZSxyLGkpe3ZhciBuPW50KHQub3JpZ2luKTtyZXR1cm4hIXQuZGF0YSYmISF0LmRhdGEudHlwZSYmIkNTX0lGUkFNRV9NRVNTQUdFIj09PXQuZGF0YS5zaWduYXR1cmUmJnQuZGF0YS5mcm9tPT09ZSYmdC5kYXRhLnBpZD09PXImJm90KG4saSl9LHV0LnNlbmRNZXNzYWdlPWZ1bmN0aW9uKHQsZSxyKXt0LnBvc3RNZXNzYWdlKHIsZSl9O3ZhciBwdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5jb25maWd1cmF0aW9uPXR9cmV0dXJuIHQucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24odCxlLHIpe3ZvaWQgMD09PWUmJihlPSIiKSx2b2lkIDA9PT1yJiYocj14Lndhcm4pO3ZhciBpPXttZXNzYWdlOnQsZXJyb3JDb2RlOmUsbGV2ZWw6cn0sbj1jdC5idWlsZEJhc2VNZXNzYWdlKGF0LkNoaWxkTG9nTWVzc2FnZSxzdC5DaGlsZCx0aGlzLmNvbmZpZ3VyYXRpb24ucHJvamVjdElkKTtuLmNvbnRlbnQ9aSxjdC5zZW5kTWVzc2FnZSh3aW5kb3cucGFyZW50LCIqIixuKX0sdH0oKSxsdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24odCxlKXt0aGlzLnZpc2l0b3JTZXJ2aWNlPXQsdGhpcy5zZXNzaW9uU2VydmljZT1lfSx0LnByb3RvdHlwZS5nZXRWaXNpdG9yU2VydmljZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZpc2l0b3JTZXJ2aWNlfSx0LnByb3RvdHlwZS5nZXRTZXNzaW9uU2VydmljZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlc3Npb25TZXJ2aWNlfSx0fSgpO2Z1bmN0aW9uIGh0KHQpe3JldHVybiB2dCh0KSYmKCJudW1iZXIiPT10eXBlb2YgdHx8dCBpbnN0YW5jZW9mIE51bWJlcikmJiFpc05hTih0KX1mdW5jdGlvbiBmdCh0KXtyZXR1cm4gdD09PXBhcnNlSW50KHQsMTApfWZ1bmN0aW9uIGR0KHQpe3JldHVybiB2dCh0KSYmKCJzdHJpbmciPT10eXBlb2YgdHx8dCBpbnN0YW5jZW9mIGNzU3RyaW5nKX1mdW5jdGlvbiB5dCh0KXtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIHR9ZnVuY3Rpb24gdnQodCl7cmV0dXJuIHZvaWQgMCE9PXR9ZnVuY3Rpb24gbXQodCl7cmV0dXJuIHZ0KHQpJiZudWxsIT09dH1mdW5jdGlvbiBndCh0KXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdH1mdW5jdGlvbiBTdCh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEVsZW1lbnR9dmFyIEV0LHd0LEN0LFJ0LGJ0LFR0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5zZXRTdHJhdGVneT1mdW5jdGlvbihlKXt0LnN0cmF0ZWd5PWV9LHQuZ2V0U3RyYXRlZ3k9ZnVuY3Rpb24oKXtyZXR1cm4gdC5zdHJhdGVneX0sdC5kZWJ1Zz1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSIiKSx0aGlzLnN0cmF0ZWd5LnNlbmQodCxlLHguZGVidWcpfSx0Lndhcm49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0iIiksdGhpcy5zdHJhdGVneS5zZW5kKHQsZSx4Lndhcm4pfSx0LmVycm9yPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9IiIpLHRoaXMuc3RyYXRlZ3kuc2VuZCh0LGUseC5lcnJvcil9LHQuY3JpdGljYWw9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0iIiksdGhpcy5zdHJhdGVneS5zZW5kKHQsZSx4LmNyaXRpY2FsKX0sdC50cnlUb0V4ZWN1dGU9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgaT1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKylpW25dPWFyZ3VtZW50c1tuXTt0cnl7dmFyIG89ZS5hcHBseSh2b2lkIDAsaSk7cmV0dXJuIHZ0KHdpbmRvdy5Qcm9taXNlKSYmbyBpbnN0YW5jZW9mIHdpbmRvdy5Qcm9taXNlP28udGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIHR9KSwoZnVuY3Rpb24oZSl7cmV0dXJuIHIuZXJyb3IoZSx0KX0pKTpvfWNhdGNoKGUpe3RyeXtyLmVycm9yKGUsdCl9Y2F0Y2godCl7fX19fSx0fSgpLEF0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLHIsaSl7dmFyIG49ci50b1N0cmluZygpLG89dHx8KGUuY29uc3RydWN0b3ImJmUuY29uc3RydWN0b3IubmFtZSkrIi4iK24scz1pLnZhbHVlO2kudmFsdWU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07cmV0dXJuIFR0LnRyeVRvRXhlY3V0ZShvLHMuYmluZCh0aGlzKSkuYXBwbHkodm9pZCAwLHQpfX19OyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3ZhciBlPW5ldyBSZWdFeHAoIihefDspWyBdKiIrdCsiPShbXjtdKikiKS5leGVjKGRvY3VtZW50LmNvb2tpZSk7cmV0dXJuIGU/ZGVjb2RlVVJJQ29tcG9uZW50KGVbMl0pOm51bGx9ZnVuY3Rpb24gcihlLHIsbixvLHMsYSl7dmFyIGM9ZW5jb2RlVVJJQ29tcG9uZW50KCIiK3IpLHU9bj09PXQuQ1VSUkVOVF9ET01BSU4/dm9pZCAwOm4scD1pKG8pLGw9ZSsiPSIrYysocD8iO2V4cGlyZXM9IitwLnRvVVRDU3RyaW5nKCk6IiIpKyI7cGF0aD0vIisobXQodSk/Ijtkb21haW49Iit1OiIiKTtyZXR1cm4gdnQocykmJnMhPT1DdC5Ob3RTZXQmJihsPWwrIjtTYW1lU2l0ZT0iK3MpLHZ0KGEpJiZhPT09UnQuWWVzJiYobCs9IjtTZWN1cmUiKSxkb2N1bWVudC5jb29raWU9bCwhMH1mdW5jdGlvbiBpKHQpe3JldHVybiBodCh0KT9uZXcgY3NEYXRlKHEubm93KCkrdCk6dH1mdW5jdGlvbiBuKHQsaSl7ZSh0KSYmcih0LCIiLGksLTEpLGUodCkmJnIodCwiIixpLC0xLEN0Lk5vbmUsUnQuWWVzKX10LkNVUlJFTlRfRE9NQUlOPSJDVVJSRU5UX0RPTUFJTiIsdC5nZXQ9ZSx0LnNldD1yLHQudG9FeHBpcmVEYXRlPWksdC5yZW1vdmU9bix0LmlzQ29va2llUHJlc2VudD1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5jb29raWUubGVuZ3RoPjB9LHQuZ2V0Um9vdERvbWFpbj1mdW5jdGlvbih0LGkpe3ZhciBvPWUoIl9jc19yb290LWRvbWFpbiIpO2lmKG51bGwhPT1vJiYiMSIhPT1vKXJldHVybiBvO2Zvcih2YXIgcz1jc1N0cmluZy5wcm90b3R5cGUuc3BsaXQuY2FsbCh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUsIi4iKSxhPWNzQXJyYXkucHJvdG90eXBlLnBvcC5jYWxsKHMpO3MubGVuZ3RoJiYobnVsbD09PW98fCIxIj09PW8pOylyKCJfY3Nfcm9vdC1kb21haW4iLGE9Y3NBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKFtjc0FycmF5LnByb3RvdHlwZS5wb3AuY2FsbChzKSxhXSwiLiIpLGEsdm9pZCAwLHQsaSksbz1lKCJfY3Nfcm9vdC1kb21haW4iKTtyZXR1cm4gbigiX2NzX3Jvb3QtZG9tYWluIixhKSxhfX0oRXR8fChFdD17fSkpLGZ1bmN0aW9uKHQpe3QuYnJvd3NlcklzU2FmYXJpVjEyPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IudmVuZG9yJiZjc1N0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHdpbmRvdy5uYXZpZ2F0b3IudmVuZG9yLCJBcHBsZSIpPi0xJiZ3aW5kb3cubmF2aWdhdG9yLmFwcFZlcnNpb24mJmNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwod2luZG93Lm5hdmlnYXRvci5hcHBWZXJzaW9uLCJWZXJzaW9uLzEyLiIpPi0xfX0od3R8fCh3dD17fSkpLGZ1bmN0aW9uKHQpe3QuTm9uZT0iTm9uZSIsdC5MYXg9IkxheCIsdC5Ob3RTZXQ9IlgifShDdHx8KEN0PXt9KSksZnVuY3Rpb24odCl7dFt0Llllcz0xXT0iWWVzIix0W3QuTm89MF09Ik5vIn0oUnR8fChSdD17fSkpLGZ1bmN0aW9uKHQpe3RbdC5OT1RfRk9VTkQ9MF09Ik5PVF9GT1VORCIsdFt0LkVYUElSRUQ9MV09IkVYUElSRUQiLHRbdC5GT1VORD0yXT0iRk9VTkQifShidHx8KGJ0PXt9KSk7dmFyIGt0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy51cmxTZXJ2aWNlPWUsdGhpcy5jb29raWVDaGVja2VyPXIsdGhpcy5zdXBwb3J0c1NhbWVTaXRlPSExLHRoaXMuc2FtZVNpdGVGbGFnPUN0Lk5vdFNldCx0aGlzLnNlY3VyZUZsYWc9UnQuTm8sdGhpcy5jYWNoZXM9e319cmV0dXJuIHQucHJvdG90eXBlLmdldFNhbWVTaXRlRmxhZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNhbWVTaXRlRmxhZ30sdC5wcm90b3R5cGUuZ2V0U2VjdXJlRmxhZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlY3VyZUZsYWd9LHQucHJvdG90eXBlLmdldERvbWFpbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbWFpbn0sdC5wcm90b3R5cGUuZ2V0Um9vdERvbWFpbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3REb21haW59LHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvbXB1dGVTYW1lU2l0ZUZsYWcoKSxlPXRoaXMuY29tcHV0ZVNlY3VyZUZsYWcoKTt0aGlzLnN1cHBvcnRzU2FtZVNpdGU9dGhpcy5jaGVja1NhbWVTaXRlRnJvbUNvbnRleHQodCxlKSx0aGlzLnN1cHBvcnRzU2FtZVNpdGU/KHRoaXMuc2FtZVNpdGVGbGFnPXQsdGhpcy5zZWN1cmVGbGFnPWUpOnRoaXMuY29uZmlndXJhdGlvbi5zZWN1cmVDb29raWVzRW5hYmxlZCYmImh0dHBzOiI9PT10aGlzLnVybFNlcnZpY2UuZ2V0VXJsUHJvdG9jb2woKSYmKHRoaXMuc2VjdXJlRmxhZz1SdC5ZZXMpLHRoaXMucm9vdERvbWFpbj10aGlzLmNvbXB1dGVSb290RG9tYWluKCksdGhpcy5kb21haW49dGhpcy5jb21wdXRlRG9tYWluKHRoaXMucm9vdERvbWFpbil9LHQucHJvdG90eXBlLmNoZWNrU2FtZVNpdGVGcm9tQ29udGV4dD1mdW5jdGlvbihlLHIpe3JldHVybiF3dC5icm93c2VySXNTYWZhcmlWMTIoKSYmKEV0LnNldCh0LkNPT0tJRV9URVNUX0ZPUl9TQU1FX1NJVEUsIlRlc3Qgc2FtZSBzaXRlIix0LkNVUlJFTlRfRE9NQUlOLHZvaWQgMCxlLHIpLCEhRXQuZ2V0KHQuQ09PS0lFX1RFU1RfRk9SX1NBTUVfU0lURSkmJihFdC5yZW1vdmUodC5DT09LSUVfVEVTVF9GT1JfU0FNRV9TSVRFLHQuQ1VSUkVOVF9ET01BSU4pLCEwKSl9LHQucHJvdG90eXBlLmNvbXB1dGVTYW1lU2l0ZUZsYWc9ZnVuY3Rpb24oKXtyZXR1cm4iaHR0cDoiPT09dGhpcy51cmxTZXJ2aWNlLmdldFVybFByb3RvY29sKCk/Q3QuTGF4OnRoaXMuY29va2llQ2hlY2tlci5pc1NhbWVTaXRlTm9uZVNlY3VyZU5lZWRlZCgpfHx0aGlzLmNvbmZpZ3VyYXRpb24uY3Jvc3NEb21haW5UcmFja2luZz9DdC5Ob25lOkN0LkxheH0sdC5wcm90b3R5cGUuY29tcHV0ZVNlY3VyZUZsYWc9ZnVuY3Rpb24oKXtyZXR1cm4iaHR0cDoiPT09dGhpcy51cmxTZXJ2aWNlLmdldFVybFByb3RvY29sKCk/UnQuTm86dGhpcy5jb25maWd1cmF0aW9uLnNlY3VyZUNvb2tpZXNFbmFibGVkfHx0aGlzLmNvbmZpZ3VyYXRpb24uY3Jvc3NEb21haW5UcmFja2luZ3x8dGhpcy5jb29raWVDaGVja2VyLmlzU2FtZVNpdGVOb25lU2VjdXJlTmVlZGVkKCk/UnQuWWVzOlJ0Lk5vfSx0LnByb3RvdHlwZS5pc1NhbWVTaXRlU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3VwcG9ydHNTYW1lU2l0ZX0sdC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSxyKXt2YXIgaT1FdC50b0V4cGlyZURhdGUocik7RXQuc2V0KHQsZSx0aGlzLmRvbWFpbixpLHRoaXMuZ2V0U2FtZVNpdGVGbGFnKCksdGhpcy5nZXRTZWN1cmVGbGFnKCkpfSx0LnByb3RvdHlwZS5zZXRXaXRoQ2FjaGU9ZnVuY3Rpb24odCxlLHIsaSl7dGhpcy5zZXQodCxlLHIpLHRoaXMuY2FjaGVzW3RdPXt2YWx1ZTplLGV4cGlyZXM6aX19LHQucHJvdG90eXBlLmdldFdpdGhDYWNoZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNhY2hlc1t0XTtyZXR1cm4gZT9lJiZxLm5vdygpPD1lLmV4cGlyZXM/e3ZhbHVlOmUudmFsdWUsc3RhdHVzOmJ0LkZPVU5EfTp7dmFsdWU6ZS52YWx1ZSxzdGF0dXM6YnQuRVhQSVJFRH06e3ZhbHVlOnRoaXMuZ2V0KHQpLHN0YXR1czpidC5OT1RfRk9VTkR9fSx0LnByb3RvdHlwZS5yZWZyZXNoQ2FjaGVFeHBpcnk9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLmNhY2hlc1t0XTtyJiYoci5leHBpcmVzPWUpfSx0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IFJlZ0V4cCgiKF58OylbIF0qIit0KyI9KFteO10qKSIpLmV4ZWMoZG9jdW1lbnQuY29va2llKTtyZXR1cm4gZT9kZWNvZGVVUklDb21wb25lbnQoZVsyXSk6bnVsbH0sdC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9ZXx8dGhpcy5kb21haW47RXQucmVtb3ZlKHQsciksZGVsZXRlIHRoaXMuY2FjaGVzW3RdfSx0LnByb3RvdHlwZS5jb21wdXRlUm9vdERvbWFpbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29va2llQ2hlY2tlci5pc1NhbWVTaXRlTm9uZVNlY3VyZU5lZWRlZCgpJiZ0aGlzLmlzU2FtZVNpdGVTdXBwb3J0ZWQoKSxlPXQ/Q3QuTm9uZTp2b2lkIDAscj10P1J0Llllczp2b2lkIDA7cmV0dXJuIEV0LmdldFJvb3REb21haW4oZSxyKX0sdC5wcm90b3R5cGUuY29tcHV0ZURvbWFpbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb25maWd1cmF0aW9uLmFsbG93U3ViZG9tYWlucz90OkV0LkNVUlJFTlRfRE9NQUlOfSx0LkNVUlJFTlRfRE9NQUlOPSJDVVJSRU5UX0RPTUFJTiIsdC5DT09LSUVfVEVTVF9GT1JfU0FNRV9TSVRFPSJfY3Nfc2FtZV9zaXRlIix0fSgpLFB0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmlmcmFtZUNvbnRleHQ9dCx0aGlzLmNvb2tpZUVuYWJsZWQ9ITEsdGhpcy51c2VTYW1lU2l0ZU5vbmVTZWN1cmVDb29raWU9ITF9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXtpZih0aGlzLmlmcmFtZUNvbnRleHQuaXNUb3BXaW5kb3dUcmFja2VyKCkmJiJjb29raWUiaW4gZG9jdW1lbnQpe2lmKCF0aGlzLmlmcmFtZUNvbnRleHQuaXNJbklmcmFtZUNvbnRleHQoKSYmRXQuaXNDb29raWVQcmVzZW50KCkpcmV0dXJuIHRoaXMuY29va2llRW5hYmxlZD0hMCx2b2lkKHRoaXMudXNlU2FtZVNpdGVOb25lU2VjdXJlQ29va2llPSExKTtpZihFdC5zZXQoIl9jc190IiwiMSIsRXQuQ1VSUkVOVF9ET01BSU4pLG51bGwhPT1FdC5nZXQoIl9jc190IikpcmV0dXJuIHRoaXMuY29va2llRW5hYmxlZD0hMCx0aGlzLnVzZVNhbWVTaXRlTm9uZVNlY3VyZUNvb2tpZT0hMSx2b2lkIEV0LnJlbW92ZSgiX2NzX3QiLEV0LkNVUlJFTlRfRE9NQUlOKTtFdC5zZXQoIl9jc190IiwiMSIsRXQuQ1VSUkVOVF9ET01BSU4sdm9pZCAwLEN0Lk5vbmUsUnQuWWVzKSxudWxsIT09RXQuZ2V0KCJfY3NfdCIpJiYodGhpcy5jb29raWVFbmFibGVkPSEwLHRoaXMudXNlU2FtZVNpdGVOb25lU2VjdXJlQ29va2llPSEwLEV0LnJlbW92ZSgiX2NzX3QiLEV0LkNVUlJFTlRfRE9NQUlOKSl9fSx0LnByb3RvdHlwZS5hcmVDb29raWVzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvb2tpZUVuYWJsZWR9LHQucHJvdG90eXBlLmlzU2FtZVNpdGVOb25lU2VjdXJlTmVlZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXNlU2FtZVNpdGVOb25lU2VjdXJlQ29va2llfSx0fSgpO3ZhciBPdCxfdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQuY2hlY2s9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09T2JqZWN0LmFzc2lnbnx8dGhpcy50cnlPYmplY3RBc3NpZ24oKX0sdC50cnlPYmplY3RBc3NpZ249ZnVuY3Rpb24oKXt0cnl7dmFyIHQ9e30sZT1PYmplY3QuYXNzaWduKHQse2E6MX0se2I6MixjOntkOjR9fSkscj17YToxLGI6MixjOntkOjR9fTtyZXR1cm4gY3NKU09OLnN0cmluZ2lmeShlKT09PWNzSlNPTi5zdHJpbmdpZnkocikmJmNzSlNPTi5zdHJpbmdpZnkodCk9PT1jc0pTT04uc3RyaW5naWZ5KHIpfWNhdGNoKHQpe3JldHVybiExfX0sdH0oKSxJdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLmNvb2tpZUNoZWNrZXI9ZX1yZXR1cm4gdC5wcm90b3R5cGUuY2FuVHJhY2s9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Jyb3dzaW5nQ29udGV4dFN1cHBvcnRlZCgpJiZ0aGlzLmNhblRyYWNrUHJvamVjdCgpJiZ0aGlzLmNvb2tpZUNoZWNrZXIuYXJlQ29va2llc0VuYWJsZWQoKSYmZnVuY3Rpb24oKXt2YXIgdD0iQ1NMb2NhbFN0b3JhZ2VUZXN0Ijt0cnl7cmV0dXJuIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHQsdCksbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odCksITB9Y2F0Y2godCl7cmV0dXJuITF9fSgpfSx0LnByb3RvdHlwZS5jYW5UcmFja0luSWZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCcm93c2luZ0NvbnRleHRTdXBwb3J0ZWQoKSYmdGhpcy5jYW5UcmFja1Byb2plY3QoKX0sdC5wcm90b3R5cGUuY2FuVHJhY2tQcm9qZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5pc1Byb2plY3RBY3RpdmUoKSYmb3Qod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLHRoaXMuY29uZmlndXJhdGlvbi5ob3N0bmFtZXMpfSx0LnByb3RvdHlwZS5pc0Jyb3dzaW5nQ29udGV4dFN1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzRG9jUHJlcmVuZGVyZWQoKSYmdGhpcy5pc0Jyb3dzZXJTdXBwb3J0ZWQoKSYmX3QuY2hlY2soKX0sdC5wcm90b3R5cGUuaXNEb2NQcmVyZW5kZXJlZD1mdW5jdGlvbigpe3JldHVybiJ2aXNpYmlsaXR5U3RhdGUiaW4gZG9jdW1lbnQmJiJwcmVyZW5kZXIiPT09ZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlfSx0LnByb3RvdHlwZS5pc0Jyb3dzZXJTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4icGFnZVhPZmZzZXQiaW4gd2luZG93JiYicGFnZVlPZmZzZXQiaW4gd2luZG93JiYib25wYWdlaGlkZSJpbiB3aW5kb3cmJiJKU09OImluIHdpbmRvdyYmInBhcnNlImluIHdpbmRvdy5KU09OJiYic3RyaW5naWZ5ImluIHdpbmRvdy5KU09OJiYiYWRkRXZlbnRMaXN0ZW5lciJpbiB3aW5kb3cmJiJyZW1vdmVFdmVudExpc3RlbmVyImluIHdpbmRvdyYmIk5vZGUiaW4gd2luZG93JiYiZmlsdGVyImluIGNzQXJyYXkucHJvdG90eXBlJiYiZm9yRWFjaCJpbiBjc0FycmF5LnByb3RvdHlwZSYmInF1ZXJ5U2VsZWN0b3JBbGwiaW4gZG9jdW1lbnQmJiJub3ciaW4gRGF0ZSYmImtleXMiaW4gT2JqZWN0JiYicGVyZm9ybWFuY2UiaW4gd2luZG93fSx0fSgpOyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiB0LmdldCgiX2NzX2N2YXJzIil9dC5nZXQ9ZnVuY3Rpb24odCl7dmFyIHI9ZSh0KTtyZXR1cm4gbnVsbCE9PXI/d2luZG93LkpTT04ucGFyc2Uocik6bnVsbH0sdC5nZXRSYXc9ZSx0LnNldFJhdz1mdW5jdGlvbih0LGUscil7ZS5zZXQoIl9jc19jdmFycyIsdCksci5zZXRDb29raWUoIl9jc19jdmFycyIsdCl9LHQucmVtb3ZlPWZ1bmN0aW9uKHQsZSl7dC5kZWxldGUoIl9jc19jdmFycyIpLGUucmVtb3ZlQ29va2llKCJfY3NfY3ZhcnMiKX0sdC5pc1ZhbGlkQ3VzdG9tVmFyU3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdH19KE90fHwoT3Q9e30pKTt2YXIgTnQsTXQsTHQsRHQseHQsVnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyLGksbixvKXt0aGlzLnZpc2l0b3JTZXJ2aWNlPXQsdGhpcy5zZXNzaW9uU2VydmljZT1lLHRoaXMuZXhjbHVzaW9uU2VydmljZT1yLHRoaXMuY29uZmlndXJhdGlvbj1pLHRoaXMuY29va2llU2VydmljZT1uLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlPW99cmV0dXJuIHQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybntleGNsdXNpb246dGhpcy5leGNsdXNpb25TZXJ2aWNlLmdldEFwcGxpZWRUcmFja2luZ0RyYXcoKSx2aXNpdG9yOnRoaXMudmlzaXRvclNlcnZpY2UuZ2V0VmlzaXRvcigpLHNlc3Npb246dGhpcy5zZXNzaW9uU2VydmljZS5nZXRTZXNzaW9uKCksY3ZhcnM6T3QuZ2V0UmF3KHRoaXMuY29va2llU2VydmljZSl9fSx0LnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXt0JiYodC5leGNsdXNpb24/dGhpcy5leGNsdWRlKCk6dGhpcy5pbmNsdWRlKHQpKX0sdC5wcm90b3R5cGUuZXhjbHVkZT1mdW5jdGlvbigpe3RoaXMuZXhjbHVzaW9uU2VydmljZS5leGNsdWRlKHRoaXMuY29uZmlndXJhdGlvbiksdGhpcy52aXNpdG9yU2VydmljZS5yZW1vdmVDdXJyZW50VmlzaXRvcigpLHRoaXMuc2Vzc2lvblNlcnZpY2UucmVtb3ZlQ3VycmVudFNlc3Npb24oKSxPdC5yZW1vdmUodGhpcy5jb29raWVTZXJ2aWNlLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlKX0sdC5wcm90b3R5cGUuaW5jbHVkZT1mdW5jdGlvbih0KXt0aGlzLmV4Y2x1c2lvblNlcnZpY2UucmVtb3ZlRXhjbHVzaW9uKCksdGhpcy52aXNpdG9yU2VydmljZS5zZXRWaXNpdG9yKHQudmlzaXRvciksdC5zZXNzaW9uP3RoaXMuc2Vzc2lvblNlcnZpY2Uuc2V0U2Vzc2lvbih0LnNlc3Npb24pOnRoaXMuc2Vzc2lvblNlcnZpY2UucmVtb3ZlQ3VycmVudFNlc3Npb24oKSx0LmN2YXJzP090LnNldFJhdyh0LmN2YXJzLHRoaXMuY29va2llU2VydmljZSx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZSk6T3QucmVtb3ZlKHRoaXMuY29va2llU2VydmljZSx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZSl9LHR9KCkscXQ9L14oKFthLXowLTlcLV0pKyhcLlswLTldKyl7Nn0pKFwuKE5vbmV8TGF4fFgpXC4oMHwxKSk/JC87IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbChbdC5pZCx0LmNyZWF0aW9uVGltZXN0YW1wLHQudmlzaXRzQ291bnQsdC5oaXRUaW1lc3RhbXAsdC5sYXN0VmlzaXRUaW1lc3RhbXAsdC5hcHBsaWVkVHJhY2tpbmdEcmF3LHQuZXhwaXJlcyx0LnNhbWVTaXRlLHQuc2VjdXJlZF0sIi4iKX1mdW5jdGlvbiByKHQpe3ZhciBlPWNzU3RyaW5nLnByb3RvdHlwZS5zcGxpdC5jYWxsKHQsIi4iKSxyPWVbMF0saT1lWzFdLG49ZVsyXSxvPWVbM10scz1lWzRdLGE9ZVs1XSxjPWVbNl0sdT1lWzddLHA9ZVs4XTtyZXR1cm57aWQ6cixjcmVhdGlvblRpbWVzdGFtcDpOdW1iZXIoaSksdmlzaXRzQ291bnQ6TnVtYmVyKG4pLGhpdFRpbWVzdGFtcDpOdW1iZXIobyksbGFzdFZpc2l0VGltZXN0YW1wOk51bWJlcihzKSxhcHBsaWVkVHJhY2tpbmdEcmF3Ok51bWJlcihhKSxleHBpcmVzOk51bWJlcihjKSxzYW1lU2l0ZTp1fHx2b2lkIDAsc2VjdXJlZDpwP051bWJlcihwKTp2b2lkIDB9fXQuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0KCJfY3NfaWQiKTtyZXR1cm4gZT9yKGUpOm51bGx9LHQuc2V0PWZ1bmN0aW9uKHQscixpKXt2YXIgbj1uZXcgY3NEYXRlKHQuZXhwaXJlcyksbz1lKHQpO3Iuc2V0KCJfY3NfaWQiLG8sbiksaS5zZXRDb29raWUoIl9jc19pZCIsbyxuKX0sdC5yZW1vdmU9ZnVuY3Rpb24odCxlLHIpe2UuZGVsZXRlKCJfY3NfaWQiLHQpLHIucmVtb3ZlQ29va2llKCJfY3NfaWQiKX0sdC50b1N0cmluZz1lLHQuZnJvbVN0cmluZz1yLHQuaXNWYWxpZFZpc2l0b3JTdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIHF0LnRlc3QodCl9fShOdHx8KE50PXt9KSksZnVuY3Rpb24odCl7dC5SRVBMQVlfUkVDT1JESU5HX0RJU0FCTEVEPSIxIix0LlJFUExBWV9SRUNPUkRJTkdfRU5BQkxFRD0iMyIsdC5UUklHR0VSX1JFUExBWV9SRUNPUkRJTkdfRU5BQkxFRD0iNSJ9KE10fHwoTXQ9e30pKSxmdW5jdGlvbih0KXt0Lk5PVF9SRUNPUkRFRD0iMCIsdC5URU1QT1JBUklMWV9SRUNPUkRFRD0iVCIsdC5HTE9CQUxfU0FNUExJTkc9IjUiLHQuVVJMX1NBTVBMSU5HPSI2Iix0LkVUUl9TQU1QTElORz0iNyJ9KEx0fHwoTHQ9e30pKSxmdW5jdGlvbih0KXt0LkVUUl9PRkY9IjAiLHQuRVRSX09OPSIxIn0oRHR8fChEdD17fSkpLGZ1bmN0aW9uKHQpe3QuRVRSX0xFR0FDWT0iMCIsdC5FVFJfU0VTU0lPTj0iMSIsdC5FVFJfUEFHRT0iMiJ9KHh0fHwoeHQ9e30pKTt2YXIgVXQsanQ9L15cZCtcLlswMTM1NjdUXShcLlswMV0pPyhcLlxkKyk/JC8senQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5jb29raWVTZXJ2aWNlPXQsdGhpcy5jcm9zc0RvbWFpblNpbmdsZUlmcmFtZVNlcnZpY2U9ZX1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3ZhciByPXRoaXMuZ2V0UmF3U2Vzc2lvbihlKTtyZXR1cm4gdGhpcy5pc1ZhbGlkKHIpP3QuZnJvbVN0cmluZyhyKTpudWxsfSx0LnByb3RvdHlwZS5nZXRSYXdTZXNzaW9uPWZ1bmN0aW9uKGUpe2lmKGUpe3ZhciByPXRoaXMuY29va2llU2VydmljZS5nZXQoIl9jc19zIik7cmV0dXJuIHQucmVtb3ZlQ29va2llVGltZXN0YW1wKHIpfXZhciBpPXRoaXMuY29va2llU2VydmljZS5nZXRXaXRoQ2FjaGUoIl9jc19zIiksbj1pLnZhbHVlLG89aS5zdGF0dXMscz10LnJlbW92ZUNvb2tpZVRpbWVzdGFtcChuKTtpZihvIT09YnQuRVhQSVJFRClyZXR1cm4gczt2YXIgYT10aGlzLmNvb2tpZVNlcnZpY2UuZ2V0KCJfY3NfcyIpO2lmKCFhKXJldHVybiBudWxsO3ZhciBjPWNzU3RyaW5nLnByb3RvdHlwZS5zcGxpdC5jYWxsKGEsIi4iKTtpZighdC5pc1Nlc3Npb25XaXRoVGltZXN0YW1wVmFsdWUoYykpcmV0dXJuIGE7dmFyIHU9Y1tjLmxlbmd0aC0xXSxwPXBhcnNlSW50KHUsMTApO3JldHVybiBpc05hTihwKXx8dGhpcy5jb29raWVTZXJ2aWNlLnJlZnJlc2hDYWNoZUV4cGlyeSgiX2NzX3MiLHApLHN9LHQuaXNTZXNzaW9uV2l0aFRpbWVzdGFtcFZhbHVlPWZ1bmN0aW9uKHQpe3JldHVybiAxMz09PXRbdC5sZW5ndGgtMV0ubGVuZ3RofSx0LnJlbW92ZUNvb2tpZVRpbWVzdGFtcD1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4gbnVsbDt2YXIgcj1jc1N0cmluZy5wcm90b3R5cGUuc3BsaXQuY2FsbChlLCIuIik7cmV0dXJuIHQuaXNTZXNzaW9uV2l0aFRpbWVzdGFtcFZhbHVlKHIpP2NzQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbChjc0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHIsMCwtMSksIi4iKTplfSx0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0xOGU1KTt2YXIgcj1xLm5vdygpK2UsaT10aGlzLnRvU3RyaW5nKHQpO2krPSIuIityLHRoaXMuY29va2llU2VydmljZS5zZXRXaXRoQ2FjaGUoIl9jc19zIixpLGUsciksdGhpcy5jcm9zc0RvbWFpblNpbmdsZUlmcmFtZVNlcnZpY2Uuc2V0Q29va2llKCJfY3NfcyIsaSxlKX0sdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe3RoaXMuY29va2llU2VydmljZS5kZWxldGUoIl9jc19zIix0KSx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZS5yZW1vdmVDb29raWUoIl9jc19zIil9LHQucHJvdG90eXBlLmlzVmFsaWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lJiZ0LmlzVmFsaWRTZXNzaW9uU3RyaW5nKGUpfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbih0KXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKFt0LnBhZ2VOdW1iZXIsdC5yZWNvcmRpbmdTdGF0ZSx0LmV0clN0YXRlXSwiLiIpfSx0LmZyb21SYXdTdHJpbmc9ZnVuY3Rpb24oZSl7dmFyIHI9dC5yZW1vdmVDb29raWVUaW1lc3RhbXAoZSk7cmV0dXJuIG51bGwhPT1yP3QuZnJvbVN0cmluZyhyKTpudWxsfSx0LmZyb21TdHJpbmc9ZnVuY3Rpb24odCl7dmFyIGU9Y3NTdHJpbmcucHJvdG90eXBlLnNwbGl0LmNhbGwodCwiLiIpLHI9ZVswXSxpPWVbMV0sbj1lWzJdO3JldHVybntyZWNvcmRpbmdTdGF0ZTppLGV0clN0YXRlOm51bGwhPW4/bjpEdC5FVFJfT0ZGLHBhZ2VOdW1iZXI6cGFyc2VJbnQociwxMCl9fSx0LmlzVmFsaWRTZXNzaW9uU3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiBqdC50ZXN0KHQpfSx0fSgpOyhVdHx8KFV0PXt9KSkuZnJvbVJhdz1mdW5jdGlvbih0KXtyZXR1cm57ZXhjbHVzaW9uOk51bWJlcih0Ll9jc19leCl8fDAsdmlzaXRvcjp0Ll9jc19pZD9OdC5mcm9tU3RyaW5nKHQuX2NzX2lkKTpudWxsLHNlc3Npb246dC5fY3Nfcz96dC5mcm9tUmF3U3RyaW5nKHQuX2NzX3MpOm51bGwsY3ZhcnM6dC5fY3NfY3ZhcnN8fG51bGx9fTt2YXIgQnQsRnQ9L15bMC05XSskLyxIdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMubG9jYXRpb249dCx0aGlzLmNvb2tpZVNlcnZpY2U9ZSx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZT1yfXJldHVybiB0LnByb3RvdHlwZS5leGNsdWRlPWZ1bmN0aW9uKHQpe3RoaXMuY29va2llU2VydmljZS5zZXQoIl9jc19leCIsY3NTdHJpbmcodC5sYXN0VHJhY2tpbmdEcmF3KSwyNTkyZTYpLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlLnNldENvb2tpZSgiX2NzX2V4IiwiIit0Lmxhc3RUcmFja2luZ0RyYXcsMjU5MmU2KX0sdC5wcm90b3R5cGUucmVtb3ZlRXhjbHVzaW9uPWZ1bmN0aW9uKCl7dGhpcy5jb29raWVTZXJ2aWNlLmRlbGV0ZSgiX2NzX2V4IiksdGhpcy5jcm9zc0RvbWFpblNpbmdsZUlmcmFtZVNlcnZpY2UucmVtb3ZlQ29va2llKCJfY3NfZXgiKX0sdC5wcm90b3R5cGUuaXNFeGNsdWRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0V4Y2x1c2lvbkNvb2tpZSgpfHx0aGlzLmhhc0V4Y2x1c2lvbkluVVJMKCl9LHQucHJvdG90eXBlLmhhc0V4Y2x1c2lvbkNvb2tpZT1mdW5jdGlvbigpe3JldHVybiAwIT09dGhpcy5nZXRBcHBsaWVkVHJhY2tpbmdEcmF3KCl9LHQucHJvdG90eXBlLmdldEFwcGxpZWRUcmFja2luZ0RyYXc9ZnVuY3Rpb24oKXtyZXR1cm4gTnVtYmVyKHRoaXMuY29va2llU2VydmljZS5nZXQoIl9jc19leCIpKX0sdC5wcm90b3R5cGUuaGFzRXhjbHVzaW9uSW5VUkw9ZnVuY3Rpb24oKXtyZXR1cm4gY3NTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLmxvY2F0aW9uLmhyZWYsIl9jc19leCIpPjB9LHQuaXNWYWxpZEV4Y2x1c2lvblN0cmluZz1mdW5jdGlvbih0KXtyZXR1cm4gRnQudGVzdCh0KX0sdH0oKTshZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXt2YXIgZT1bIl9jc19leCIsIl9jc19pZCIsIl9jc19zIiwiX2NzX2N2YXJzIl07cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmV2ZXJ5LmNhbGwoT2JqZWN0LmtleXModCksKGZ1bmN0aW9uKHQpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZSx0KT49MH0pKX10LmlzUmF3RG9tYWluU3RhdGU9ZSx0LmlzVmFsaWQ9ZnVuY3Rpb24odCl7cmV0dXJuISFlKHQpJiYoKCF0Ll9jc19pZHx8TnQuaXNWYWxpZFZpc2l0b3JTdHJpbmcodC5fY3NfaWQpKSYmKCF0Ll9jc19zfHx6dC5pc1ZhbGlkU2Vzc2lvblN0cmluZyh0Ll9jc19zKSkmJighdC5fY3NfZXh8fEh0LmlzVmFsaWRFeGNsdXNpb25TdHJpbmcodC5fY3NfZXgpKSYmKCF0Ll9jc19jdmFyc3x8T3QuaXNWYWxpZEN1c3RvbVZhclN0cmluZyh0Ll9jc19jdmFycykpKX19KEJ0fHwoQnQ9e30pKTt2YXIgR3QsV3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy54ZGZyYW1lT3BlbmVyPXQsdGhpcy5sb2NhdGlvbj1lfXJldHVybiB0LnByb3RvdHlwZS5yZXRyaWV2ZT1mdW5jdGlvbihlLHIpe3ZhciBpPXRoaXM7dGhpcy5jYWxsYmFjaz1yLHRoaXMucmV0cmlldmVkU3RhdGVzPVtdLHRoaXMueGRmcmFtZU9yaWdpbnM9Y3NBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoY3NBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoZSwoZnVuY3Rpb24odCl7cmV0dXJuIGkuaXNOb3RDdXJyZW50SG9zdG5hbWUodCl9KSksdC5nZXRYZGZyYW1lT3JpZ2luKSx0aGlzLnhkZnJhbWVPcGVuZXIub25NZXNzYWdlKChmdW5jdGlvbih0KXtpLmhhbmRsZVhkZnJhbWVNZXNzYWdlKHQpfSkpLHRoaXMueGRmcmFtZU9wZW5lci5vblRpbWVvdXQoKGZ1bmN0aW9uKCl7aS5oYW5kbGVUaW1lb3V0KCl9KSksdGhpcy54ZGZyYW1lT3BlbmVyLnN0YXJ0KCksY3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNzQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMueGRmcmFtZU9yaWdpbnMsdC5nZXRYZGZyYW1lVXJsKSwoZnVuY3Rpb24odCl7cmV0dXJuIGkueGRmcmFtZU9wZW5lci5vcGVuKHQpfSkpfSx0LnByb3RvdHlwZS5oYW5kbGVYZGZyYW1lTWVzc2FnZT1mdW5jdGlvbih0KXtpZih0aGlzLmlzWGRmcmFtZU1lc3NhZ2UodCkpe3ZhciBlPXQuZGF0YTtpZighQnQuaXNWYWxpZChlKSl0aHJvdyB0aGlzLnhkZnJhbWVPcGVuZXIuc3RvcCgpLCJJbnZhbGlkIGRvbWFpbiBzdGF0ZTogIitjc0pTT04uc3RyaW5naWZ5KHQuZGF0YSkrIiBmcm9tICIrdC5vcmlnaW47Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMucmV0cmlldmVkU3RhdGVzLGUpfXRoaXMuYWxsTWVzc2FnZXNBcmVJbigpJiYodGhpcy54ZGZyYW1lT3BlbmVyLnN0b3AoKSx0aGlzLmNhbGxiYWNrKGNzQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMucmV0cmlldmVkU3RhdGVzLFV0LmZyb21SYXcpKSl9LHQucHJvdG90eXBlLmhhbmRsZVRpbWVvdXQ9ZnVuY3Rpb24oKXtUdC53YXJuKCJ4ZGZyYW1lOiBhbGwgbWVzc2FnZXMgbm90IHJlY2VpdmVkIil9LHQucHJvdG90eXBlLmlzWGRmcmFtZU1lc3NhZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLnhkZnJhbWVPcmlnaW5zLHQub3JpZ2luKT4tMX0sdC5wcm90b3R5cGUuYWxsTWVzc2FnZXNBcmVJbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJldHJpZXZlZFN0YXRlcy5sZW5ndGg9PT10aGlzLnhkZnJhbWVPcmlnaW5zLmxlbmd0aH0sdC5wcm90b3R5cGUuaXNOb3RDdXJyZW50SG9zdG5hbWU9ZnVuY3Rpb24odCl7cmV0dXJuIU0odGhpcy5sb2NhdGlvbi5ob3N0bmFtZSx0KX0sdC5nZXRYZGZyYW1lT3JpZ2luPWZ1bmN0aW9uKHQpe3JldHVybiJodHRwczovL2NzeGQuIit0fSx0LmdldFhkZnJhbWVVcmw9ZnVuY3Rpb24odCl7cmV0dXJuIHQrIi94ZGZyYW1lLTEuMC4wLmh0bWwifSx0fSgpLFh0PWZ1bmN0aW9uKHQsZSxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz9lOm51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUodCxlLHIsaSk7ZWxzZSBmb3IodmFyIGE9dC5sZW5ndGgtMTthPj0wO2EtLSkobj10W2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKGUscixzKTpuKGUscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHMpLHN9LFl0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciB0PXRoaXM7dGhpcy5BTExfTUVTU0FHRVNfUkVDRUlWRURfVElNRU9VVD0zZTMsdGhpcy5zY29wZWRIYW5kbGVNZXNzYWdlPWZ1bmN0aW9uKGUpe3QuaGFuZGxlTWVzc2FnZShlKX19cmV0dXJuIHQucHJvdG90eXBlLm9uTWVzc2FnZT1mdW5jdGlvbih0KXt0aGlzLm9uTWVzc2FnZUNhbGxiYWNrPXR9LHQucHJvdG90eXBlLm9uVGltZW91dD1mdW5jdGlvbih0KXt0aGlzLm9uVGltZW91dENhbGxiYWNrPXR9LHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsdGhpcy5zY29wZWRIYW5kbGVNZXNzYWdlKSx0aGlzLnRpbWVvdXRJZD13aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0Lm9uVGltZW91dENhbGxiYWNrKCl9KSx0aGlzLkFMTF9NRVNTQUdFU19SRUNFSVZFRF9USU1FT1VUKX0sdC5wcm90b3R5cGUub3Blbj1mdW5jdGlvbih0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTtyZXR1cm4gZS5zcmM9dCxlLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGUuc2V0QXR0cmlidXRlKCJ0aXRsZSIsIkludGVudGlvbmFsbHkgYmxhbmsiKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGUpLGV9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsdGhpcy5zY29wZWRIYW5kbGVNZXNzYWdlKSx3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkKSx0aGlzLm9uTWVzc2FnZUNhbGxiYWNrPUksdGhpcy5vblRpbWVvdXRDYWxsYmFjaz1JfSx0LnByb3RvdHlwZS5oYW5kbGVNZXNzYWdlPWZ1bmN0aW9uKHQpe3RoaXMub25NZXNzYWdlQ2FsbGJhY2sodCl9LFh0KFtBdCgiWGRmcmFtZU1lc3NhZ2UiKV0sdC5wcm90b3R5cGUsImhhbmRsZU1lc3NhZ2UiLG51bGwpLHR9KCksSnQ9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKTooaS5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IGkpfX0oKSxLdD1mdW5jdGlvbih0LGUscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLGkpO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKG49dFthXSkmJihzPShvPDM/bihzKTpvPjM/bihlLHIscyk6bihlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSxRdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscil7dmFyIGk9dC5jYWxsKHRoaXMsZSxyKXx8dGhpcztyZXR1cm4gaS5hZnRlclJlcXVlc3REYXRhUmV0cmlldmVkQ2FsbGJhY2tzPVtdLGkucmVxdWVzdEhlYWRlcnM9W10saS50aW1lb3V0PTAsaX1yZXR1cm4gSnQoZSx0KSxlLnByb3RvdHlwZS5zZXRDb21wcmVzc2lvbk9wdGlvbnM9ZnVuY3Rpb24odCxlKXt0aGlzLmNvbXByZXNzb3I9dCx0aGlzLmNvbXByZXNzaW9uT3V0cHV0VHlwZT1lfSxlLnByb3RvdHlwZS5zZXRSZXF1ZXN0UGF5bG9hZFByb3ZpZGVyPWZ1bmN0aW9uKHQpe3RoaXMucmVxdWVzdFBheWxvYWRQcm92aWRlcj10fSxlLnByb3RvdHlwZS5zZXRSZXF1ZXN0SGVhZGVyPWZ1bmN0aW9uKHQpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLnJlcXVlc3RIZWFkZXJzLHQpfSxlLnByb3RvdHlwZS5hZnRlclByb3ZpZGVyc0NhbGxlZD1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5hZnRlclJlcXVlc3REYXRhUmV0cmlldmVkQ2FsbGJhY2tzLHQpfSxlLnByb3RvdHlwZS5vbkxvYWQ9ZnVuY3Rpb24odCl7dGhpcy5vbkxvYWRDYWxsYmFjaz10fSxlLnByb3RvdHlwZS5vbkVycm9yPWZ1bmN0aW9uKHQpe3RoaXMub25FcnJvckNhbGxiYWNrPXR9LGUucHJvdG90eXBlLm9uVGltZW91dD1mdW5jdGlvbih0LGUpe3RoaXMudGltZW91dD10LHRoaXMub25UaW1lb3V0Q2FsbGJhY2s9ZX0sZS5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7Y3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuYmVmb3JlUmVxdWVzdENhbGxiYWNrcywoZnVuY3Rpb24odCl7cmV0dXJuIHQoKX0pKTt2YXIgZT10aGlzLnJldHJpZXZlUGFyYW1ldGVycygpLHI9Vi50b1F1ZXJ5KGUpLGk9dGhpcy5yZXRyaWV2ZVBheWxvYWQoKTtjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5hZnRlclJlcXVlc3REYXRhUmV0cmlldmVkQ2FsbGJhY2tzLChmdW5jdGlvbih0KXtyZXR1cm4gdCgpfSkpLHRoaXMuY29tcHJlc3NvciYmdGhpcy5jb21wcmVzc2lvbk91dHB1dFR5cGU/dGhpcy5jb21wcmVzc29yLmNvbXByZXNzKHRoaXMuY29tcHJlc3Npb25PdXRwdXRUeXBlLGksKGZ1bmN0aW9uKGUpe3QuZG9TZW5kKHIsZSl9KSk6dGhpcy5kb1NlbmQocixpKX0sZS5wcm90b3R5cGUucmV0cmlldmVQYXlsb2FkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVxdWVzdFBheWxvYWRQcm92aWRlcj90aGlzLnJlcXVlc3RQYXlsb2FkUHJvdmlkZXIuZ2V0UmVxdWVzdFBheWxvYWQoKToiIn0sZS5wcm90b3R5cGUuZG9TZW5kPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZW5kWE1MSHR0cFJlcXVlc3QodCxlKSxjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5hZnRlclJlcXVlc3RDYWxsYmFja3MsKGZ1bmN0aW9uKHQpe3JldHVybiB0KCl9KSl9LGUucHJvdG90eXBlLnNlbmRYTUxIdHRwUmVxdWVzdD1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXM7aWYobnVsbCE9PXdpbmRvdy5YTUxIdHRwUmVxdWVzdCl7dmFyIGk9bmV3IFhNTEh0dHBSZXF1ZXN0O2kub3BlbigiUE9TVCIsdGhpcy5kb21haW5VcmkrIi8iK3RoaXMucGF0aCsiPyIrdCwhMCk7Zm9yKHZhciBuPTAsbz10aGlzLnJlcXVlc3RIZWFkZXJzO248by5sZW5ndGg7bisrKXt2YXIgcz1vW25dO2kuc2V0UmVxdWVzdEhlYWRlcihzLm5hbWUscy52YWx1ZSl9dGhpcy5vbkxvYWRDYWxsYmFjayYmKGkub25sb2FkPWZ1bmN0aW9uKCl7ci5vbkxvYWRDYWxsYmFjayhpKX0pLHRoaXMub25FcnJvckNhbGxiYWNrJiYoaS5vbmVycm9yPWZ1bmN0aW9uKCl7ci5vbkVycm9yQ2FsbGJhY2soKX0pLHRoaXMudGltZW91dCYmdGhpcy5vblRpbWVvdXRDYWxsYmFjayYmKGkudGltZW91dD10aGlzLnRpbWVvdXQsaS5vbnRpbWVvdXQ9ZnVuY3Rpb24oKXtyLm9uVGltZW91dENhbGxiYWNrKCl9KSxpLnNlbmQoZSl9fSxLdChbQXQoIlBPU1QgcmVxdWVzdCIpXSxlLnByb3RvdHlwZSwiZG9TZW5kIixudWxsKSxlfShGKTshZnVuY3Rpb24odCl7dFt0Lk1VVEFUSU9OX0lOU0VSVD0xXT0iTVVUQVRJT05fSU5TRVJUIix0W3QuTVVUQVRJT05fUkVNT1ZFPTJdPSJNVVRBVElPTl9SRU1PVkUiLHRbdC5NVVRBVElPTl9BVFRSSUJVVEU9M109Ik1VVEFUSU9OX0FUVFJJQlVURSIsdFt0Lk1VVEFUSU9OX0NIQVJBQ1RFUl9EQVRBPTRdPSJNVVRBVElPTl9DSEFSQUNURVJfREFUQSIsdFt0LklOSVRJQUxfRE9NPTVdPSJJTklUSUFMX0RPTSIsdFt0LlNDUk9MTD02XT0iU0NST0xMIix0W3QuTU9VU0VfTU9WRT03XT0iTU9VU0VfTU9WRSIsdFt0LkNMSUNLPThdPSJDTElDSyIsdFt0LlJFU0laRT05XT0iUkVTSVpFIix0W3QuSU5QVVRfQ0hFQ0tBQkxFPTEwXT0iSU5QVVRfQ0hFQ0tBQkxFIix0W3QuSU5QVVRfU0VMRUNUPTExXT0iSU5QVVRfU0VMRUNUIix0W3QuSU5QVVRfVEVYVD0xMl09IklOUFVUX1RFWFQiLHRbdC5IQVNIX0NIQU5HRT0xM109IkhBU0hfQ0hBTkdFIix0W3QuQ09OU0VOVF9HUkFOVEVEPTE0XT0iQ09OU0VOVF9HUkFOVEVEIix0W3QuQ09OU0VOVF9XSVRIRFJBV049MTVdPSJDT05TRU5UX1dJVEhEUkFXTiIsdFt0Lk1PVVNFX09WRVI9MTZdPSJNT1VTRV9PVkVSIix0W3QuVklTSUJJTElUWV9DSEFOR0U9MTddPSJWSVNJQklMSVRZX0NIQU5HRSIsdFt0LlNUWUxFU0hFRVRfUlVMRV9JTlNFUlQ9MThdPSJTVFlMRVNIRUVUX1JVTEVfSU5TRVJUIix0W3QuU1RBVElDX1JFU09VUkNFX1VSTD0xOV09IlNUQVRJQ19SRVNPVVJDRV9VUkwiLHRbdC5QRVJGT1JNQU5DRV9USU1JTkdTPTIwXT0iUEVSRk9STUFOQ0VfVElNSU5HUyIsdFt0LkFUVEFDSF9TSEFET1c9MjJdPSJBVFRBQ0hfU0hBRE9XIix0W3QuU1RZTEVTSEVFVF9DU1NfVEVYVF9VUERBVEU9MjNdPSJTVFlMRVNIRUVUX0NTU19URVhUX1VQREFURSIsdFt0Lk1PVVNFX0RPV049MjRdPSJNT1VTRV9ET1dOIix0W3QuTU9VU0VfVVA9MjVdPSJNT1VTRV9VUCIsdFt0LkpBVkFTQ1JJUFRfRVJST1I9MjZdPSJKQVZBU0NSSVBUX0VSUk9SIix0W3QuUEFHRV9FVkVOVD0yN109IlBBR0VfRVZFTlQiLHRbdC5BUElfRVJST1I9MjhdPSJBUElfRVJST1IiLHRbdC5URVhUX1ZJU0lCSUxJVFk9MjldPSJURVhUX1ZJU0lCSUxJVFkifShHdHx8KEd0PXt9KSk7ZnVuY3Rpb24gWnQodCxlKXt2b2lkIDA9PT1lJiYoZT0hMCksdC5ib3VuZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0LnR5cGUsdC5saXN0ZW5lcixlKX1mdW5jdGlvbiAkdCh0LGUpe3ZvaWQgMD09PWUmJihlPSEwKSx0LmJvdW5kRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHQudHlwZSx0Lmxpc3RlbmVyLGUpfXZhciB0ZSxlZT1mdW5jdGlvbigpe3JldHVybihlZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbiBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSYmKHRbbl09ZVtuXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlPWZ1bmN0aW9uKHQsZSxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz9lOm51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUodCxlLHIsaSk7ZWxzZSBmb3IodmFyIGE9dC5sZW5ndGgtMTthPj0wO2EtLSkobj10W2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKGUscixzKTpuKGUscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHMpLHN9LGllPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHIsaSl7dmFyIG49dGhpczt0aGlzLnNlbGVjdG9yPWUsdGhpcy5ub2RlSWRlbnRpZmllcj1yLHRoaXMuc2Vuc2l0aXZlQ29udGVudD1pLHRoaXMuZG9jdW1lbnRzPVtdLHRoaXMub25FdmVudENhbGxiYWNrcz1bXSx0aGlzLmV2ZW50SGFuZGxlcnM9W3t0eXBlOiJjaGFuZ2UiLGxpc3RlbmVyOnRoaXMuc2VsZWN0b3Iub24odC53aGl0ZUxpc3RlZENoZWNrYWJsZUlucHV0c1NlbGVjdG9yLChmdW5jdGlvbih0KXtyZXR1cm4gbi5pbnB1dENoZWNrYWJsZUxpc3RlbmVyKHQudGFyZ2V0KX0pKX0se3R5cGU6ImNoYW5nZSIsbGlzdGVuZXI6dGhpcy5zZWxlY3Rvci5vbigic2VsZWN0IiwoZnVuY3Rpb24odCl7cmV0dXJuIG4uaW5wdXRTZWxlY3RMaXN0ZW5lcih0LnRhcmdldCl9KSl9LHt0eXBlOiJrZXl1cCIsbGlzdGVuZXI6dGhpcy5zZWxlY3Rvci5vbih0LndoaXRlTGlzdGVkVGV4dElucHV0U2VsZWN0b3IsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlucHV0VGV4dExpc3RlbmVyKHQudGFyZ2V0KX0pKX0se3R5cGU6InNjcm9sbCIsbGlzdGVuZXI6ZnVuY3Rpb24odCl7cmV0dXJuIG4uc2Nyb2xsTGlzdGVuZXIodC50YXJnZXQpfX0se3R5cGU6Im1vdXNlb3ZlciIsbGlzdGVuZXI6ZnVuY3Rpb24odCl7cmV0dXJuIG4ubW91c2VPdmVyTGlzdGVuZXIodCl9fSx7dHlwZToiY2xpY2siLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3JldHVybiBuLmNsaWNrTGlzdGVuZXIodCl9fSx7dHlwZToibW91c2Vkb3duIixsaXN0ZW5lcjpmdW5jdGlvbih0KXtyZXR1cm4gbi5tb3VzZURvd25MaXN0ZW5lcih0KX19LHt0eXBlOiJtb3VzZXVwIixsaXN0ZW5lcjpmdW5jdGlvbih0KXtyZXR1cm4gbi5tb3VzZVVwTGlzdGVuZXIodCl9fV0sdGhpcy5pbml0U3Vic2NyaWJlcnMoKX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdFN1YnNjcmliZXJzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLm5vZGVJZGVudGlmaWVyLm9uSWRlbnRpZmllckFkZGVkKChmdW5jdGlvbihlKXt2KGUpJiZ0LmJpbmRIYW5kbGVycyhlKX0pKSx0aGlzLm5vZGVJZGVudGlmaWVyLm9uSWRlbnRpZmllclJlbW92ZWQoKGZ1bmN0aW9uKGUpe3YoZSkmJnQudW5iaW5kSGFuZGxlcnMoZSl9KSl9LHQucHJvdG90eXBlLm9uRXZlbnQ9ZnVuY3Rpb24odCl7Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMub25FdmVudENhbGxiYWNrcywoZnVuY3Rpb24oZSl7ZS5kYXRlPXEubm93KCksdChlKX0pKX0sdC5wcm90b3R5cGUudHJpZ2dlckNhbGxiYWNrcz1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5vbkV2ZW50Q2FsbGJhY2tzLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0KX0pKX0sdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXJJbml0aWFsRXZlbnRzKCl9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLnVuYmluZEFsbEhhbmRsZXJzKCl9LHQucHJvdG90eXBlLmJpbmRIYW5kbGVycz1mdW5jdGlvbih0KXstMT09PWNzQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLmRvY3VtZW50cyx0KSYmKGNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmRvY3VtZW50cyx0KSxjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5ldmVudEhhbmRsZXJzLChmdW5jdGlvbihlKXtyZXR1cm4gWnQoZWUoe2JvdW5kRWxlbWVudDp0fSxlKSl9KSkpfSx0LnByb3RvdHlwZS51bmJpbmRIYW5kbGVycz1mdW5jdGlvbih0KXt0aGlzLmRvY3VtZW50cz1jc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0aGlzLmRvY3VtZW50cywoZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT10fSkpLGNzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmV2ZW50SGFuZGxlcnMsKGZ1bmN0aW9uKGUpe3JldHVybiAkdChlZSh7Ym91bmRFbGVtZW50OnR9LGUpKX0pKX0sdC5wcm90b3R5cGUudW5iaW5kQWxsSGFuZGxlcnM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2NzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmRvY3VtZW50cywoZnVuY3Rpb24oZSl7cmV0dXJuIHQudW5iaW5kSGFuZGxlcnMoZSl9KSl9LHQucHJvdG90eXBlLnRyaWdnZXJJbml0aWFsRXZlbnRzPWZ1bmN0aW9uKCl7dGhpcy5pbml0aWFsVGV4dElucHV0TGlzdGVuZXIoKSx0aGlzLmluaXRpYWxTY3JvbGxMaXN0ZW5lcigpLHRoaXMuaW5pdGlhbFNlbGVjdExpc3RlbmVyKCksdGhpcy5pbml0aWFsQ2hlY2thYmxlTGlzdGVuZXIoKX0sdC5wcm90b3R5cGUuaW5pdGlhbFRleHRJbnB1dExpc3RlbmVyPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodC53aGl0ZUxpc3RlZFRleHRJbnB1dFNlbGVjdG9yKSxyPTA7cjxlLmxlbmd0aDtyKz0xKXt2YXIgaT1lLml0ZW0ocik7aS52YWx1ZS5sZW5ndGg+MCYmdGhpcy5pbnB1dFRleHRMaXN0ZW5lcihpKX19LHQucHJvdG90eXBlLmluaXRpYWxTY3JvbGxMaXN0ZW5lcj1mdW5jdGlvbigpe2Zvcih2YXIgdD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLGU9MDtlPHQubGVuZ3RoO2UrPTEpe3ZhciByPXRbZV0saT10aGlzLmdldFNjcm9sbFBvc2l0aW9uKHIpLG49aS50b3Asbz1pLmxlZnQ7MD09PW4mJjA9PT1vfHx0aGlzLnNjcm9sbExpc3RlbmVyKHIpfX0sdC5wcm90b3R5cGUuaW5pdGlhbFNlbGVjdExpc3RlbmVyPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzZWxlY3QiKSxlPTA7ZTx0Lmxlbmd0aDtlKz0xKXRoaXMuaW5wdXRTZWxlY3RMaXN0ZW5lcih0W2VdKX0sdC5wcm90b3R5cGUuaW5pdGlhbENoZWNrYWJsZUxpc3RlbmVyPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodC53aGl0ZUxpc3RlZENoZWNrYWJsZUlucHV0c1NlbGVjdG9yKSxyPTA7cjxlLmxlbmd0aDtyKz0xKXRoaXMuaW5wdXRDaGVja2FibGVMaXN0ZW5lcihlW3JdKX0sdC5wcm90b3R5cGUuZ2V0U2Nyb2xsUG9zaXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1kb2N1bWVudD97dG9wOndpbmRvdy5wYWdlWU9mZnNldCxsZWZ0OndpbmRvdy5wYWdlWE9mZnNldH06e3RvcDp0LnNjcm9sbFRvcCxsZWZ0OnQuc2Nyb2xsTGVmdH19LHQucHJvdG90eXBlLnNjcm9sbExpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5ub2RlSWRlbnRpZmllci5pZklkZW50aWZpZWQodCwoZnVuY3Rpb24ocil7aWYoIWUuc2Vuc2l0aXZlQ29udGVudC5pc1NlbnNpdGl2ZUVsZW1lbnROb2RlKHQpKXt2YXIgaT1lLmdldFNjcm9sbFBvc2l0aW9uKHQpO2UudHJpZ2dlckNhbGxiYWNrcyh7dHlwZTpHdC5TQ1JPTEwsYXJnczpbcixpLmxlZnQsaS50b3BdfSl9fSkpfSx0LnByb3RvdHlwZS5tb3VzZU92ZXJMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMubm9kZUlkZW50aWZpZXIuaWZJZGVudGlmaWVkKHQudGFyZ2V0LChmdW5jdGlvbih0KXtlLnRyaWdnZXJDYWxsYmFja3Moe3R5cGU6R3QuTU9VU0VfT1ZFUixhcmdzOlt0XX0pfSkpfSx0LnByb3RvdHlwZS5jbGlja0xpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5ub2RlSWRlbnRpZmllci5pZklkZW50aWZpZWQodC50YXJnZXQsKGZ1bmN0aW9uKHQpe2UudHJpZ2dlckNhbGxiYWNrcyh7dHlwZTpHdC5DTElDSyxhcmdzOlt0XX0pfSkpfSx0LnByb3RvdHlwZS5tb3VzZURvd25MaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMubm9kZUlkZW50aWZpZXIuaWZJZGVudGlmaWVkKHQudGFyZ2V0LChmdW5jdGlvbihyKXtlLnRyaWdnZXJDYWxsYmFja3Moe3R5cGU6R3QuTU9VU0VfRE9XTixhcmdzOltyLHQuYnV0dG9uXX0pfSkpfSx0LnByb3RvdHlwZS5tb3VzZVVwTGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLm5vZGVJZGVudGlmaWVyLmlmSWRlbnRpZmllZCh0LnRhcmdldCwoZnVuY3Rpb24ocil7ZS50cmlnZ2VyQ2FsbGJhY2tzKHt0eXBlOkd0Lk1PVVNFX1VQLGFyZ3M6W3IsdC5idXR0b25dfSl9KSl9LHQucHJvdG90eXBlLmlucHV0Q2hlY2thYmxlTGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLm5vZGVJZGVudGlmaWVyLmlmSWRlbnRpZmllZCh0LChmdW5jdGlvbihyKXtlLnNlbnNpdGl2ZUNvbnRlbnQuaXNTZW5zaXRpdmVFbGVtZW50Tm9kZSh0KXx8ZS50cmlnZ2VyQ2FsbGJhY2tzKHt0eXBlOkd0LklOUFVUX0NIRUNLQUJMRSxhcmdzOltyLHQuY2hlY2tlZF19KX0pKX0sdC5wcm90b3R5cGUuaW5wdXRTZWxlY3RMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMubm9kZUlkZW50aWZpZXIuaWZJZGVudGlmaWVkKHQsKGZ1bmN0aW9uKHIpe2Uuc2Vuc2l0aXZlQ29udGVudC5pc1NlbnNpdGl2ZUVsZW1lbnROb2RlKHQpfHxlLnRyaWdnZXJDYWxsYmFja3Moe3R5cGU6R3QuSU5QVVRfU0VMRUNULGFyZ3M6W3IsdC5zZWxlY3RlZEluZGV4XX0pfSkpfSx0LnByb3RvdHlwZS5pbnB1dFRleHRMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMubm9kZUlkZW50aWZpZXIuaWZJZGVudGlmaWVkKHQsKGZ1bmN0aW9uKHIpe2Uuc2Vuc2l0aXZlQ29udGVudC5pc1NlbnNpdGl2ZUVsZW1lbnROb2RlKHQpfHxlLnRyaWdnZXJDYWxsYmFja3Moe3R5cGU6R3QuSU5QVVRfVEVYVCxhcmdzOltyLGNzU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlLmNhbGwodC52YWx1ZSwvXFMvZywi4oCiIildfSl9KSl9LHQud2hpdGVMaXN0ZWRUZXh0SW5wdXRTZWxlY3Rvcj1jc0FycmF5LnByb3RvdHlwZS5qb2luLmNhbGwoWyJ0ZXh0YXJlYSIsImlucHV0Om5vdChbdHlwZV0pIiwnaW5wdXRbdHlwZT0idGV4dCJdJywnaW5wdXRbdHlwZT0iZW1haWwiXScsJ2lucHV0W3R5cGU9InNlYXJjaCJdJywnaW5wdXRbdHlwZT0idGVsIl0nLCdpbnB1dFt0eXBlPSJ1cmwiXSddLCIsIiksdC53aGl0ZUxpc3RlZENoZWNrYWJsZUlucHV0c1NlbGVjdG9yPWNzQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbChbJ2lucHV0W3R5cGU9ImNoZWNrYm94Il0nLCdpbnB1dFt0eXBlPSJyYWRpbyJdJ10sIiwiKSxyZShbQXQoInNjcm9sbCIpXSx0LnByb3RvdHlwZSwic2Nyb2xsTGlzdGVuZXIiLG51bGwpLHJlKFtBdCgibW91c2VPdmVyIildLHQucHJvdG90eXBlLCJtb3VzZU92ZXJMaXN0ZW5lciIsbnVsbCkscmUoW0F0KCJjbGljayIpXSx0LnByb3RvdHlwZSwiY2xpY2tMaXN0ZW5lciIsbnVsbCkscmUoW0F0KCJtb3VzZWRvd24iKV0sdC5wcm90b3R5cGUsIm1vdXNlRG93bkxpc3RlbmVyIixudWxsKSxyZShbQXQoIm1vdXNldXAiKV0sdC5wcm90b3R5cGUsIm1vdXNlVXBMaXN0ZW5lciIsbnVsbCkscmUoW0F0KCJjaGVja2FibGUiKV0sdC5wcm90b3R5cGUsImlucHV0Q2hlY2thYmxlTGlzdGVuZXIiLG51bGwpLHJlKFtBdCgic2VsZWN0IildLHQucHJvdG90eXBlLCJpbnB1dFNlbGVjdExpc3RlbmVyIixudWxsKSxyZShbQXQoInRleHQiKV0sdC5wcm90b3R5cGUsImlucHV0VGV4dExpc3RlbmVyIixudWxsKSx0fSgpLG5lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7dmFyIGk9dGhpczt0aGlzLm11dGF0aW9uU2VyaWFsaXplcj10LHRoaXMubXV0YXRpb25PYnNlcnZlcj1lLHRoaXMuc3RhdGljUmVzb3VyY2VVcmxUcmFja2VyPXIsdGhpcy5tdXRhdGlvbk9ic2VydmVyLm9uQ2hhcmFjdGVyRGF0YU11dGF0aW9uKChmdW5jdGlvbih0KXtyZXR1cm4gaS5jaGFyYWN0ZXJEYXRhTXV0YXRpb24odCl9KSksdGhpcy5tdXRhdGlvbk9ic2VydmVyLm9uQXR0cmlidXRlc011dGF0aW9uKChmdW5jdGlvbih0KXtyZXR1cm4gaS5hdHRyaWJ1dGVzTXV0YXRpb24odCl9KSksdGhpcy5tdXRhdGlvbk9ic2VydmVyLm9uQ2hpbGRMaXN0TXV0YXRpb24oKGZ1bmN0aW9uKHQpe3JldHVybiBpLmNoaWxkTGlzdE11dGF0aW9uKHQpfSkpLHRoaXMubXV0YXRpb25PYnNlcnZlci5vbkF0dGFjaFNoYWRvd011dGF0aW9uKChmdW5jdGlvbih0KXtyZXR1cm4gaS5hdHRhY2hTaGFkb3dFdmVudCh0KX0pKX1yZXR1cm4gdC5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXt0aGlzLm9uRXZlbnRDYWxsYmFjaz10fSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMubXV0YXRpb25PYnNlcnZlci5zdGFydCgpLHRoaXMucmVjb3JkSW5pdGlhbERvbSgpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5tdXRhdGlvbk9ic2VydmVyLnN0b3AoKX0sdC5wcm90b3R5cGUucmVjb3JkSW5pdGlhbERvbT1mdW5jdGlvbigpe3ZhciB0PXRoaXMubXV0YXRpb25TZXJpYWxpemVyLnNlcmlhbGl6ZURvY3VtZW50KGRvY3VtZW50KTt0aGlzLm9uRXZlbnRDYWxsYmFjayh7YXJnczp0LGRhdGU6cS5ub3coKSx0eXBlOkd0LklOSVRJQUxfRE9NfSl9LHQucHJvdG90eXBlLmF0dGFjaFNoYWRvd0V2ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubXV0YXRpb25TZXJpYWxpemVyLnNlcmlhbGl6ZUF0dGFjaFNoYWRvd0V2ZW50KHQpO2UmJnRoaXMub25FdmVudENhbGxiYWNrKHthcmdzOmUsZGF0ZTp0LmRhdGUsdHlwZTpHdC5BVFRBQ0hfU0hBRE9XfSl9LHQucHJvdG90eXBlLmF0dHJpYnV0ZXNNdXRhdGlvbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm11dGF0aW9uU2VyaWFsaXplci5zZXJpYWxpemVNdXRhdGlvbkF0dHJpYnV0ZSh0KTtlJiYodGhpcy5vbkV2ZW50Q2FsbGJhY2soe2FyZ3M6ZSxkYXRlOnQuZGF0ZSx0eXBlOkd0Lk1VVEFUSU9OX0FUVFJJQlVURX0pLHRoaXMuc3RhdGljUmVzb3VyY2VVcmxUcmFja2VyLnNjYW5BdHRyaWJ1dGUodC50YXJnZXQsdC5hdHRyaWJ1dGVOYW1lKSl9LHQucHJvdG90eXBlLmNoYXJhY3RlckRhdGFNdXRhdGlvbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm11dGF0aW9uU2VyaWFsaXplci5zZXJpYWxpemVNdXRhdGlvbkNoYXJhY3RlckRhdGEodCk7ZSYmKHRoaXMub25FdmVudENhbGxiYWNrKHthcmdzOmUsZGF0ZTp0LmRhdGUsdHlwZTpHdC5NVVRBVElPTl9DSEFSQUNURVJfREFUQX0pLHRoaXMuc3RhdGljUmVzb3VyY2VVcmxUcmFja2VyLnNjYW5UZXh0KHQudGFyZ2V0KSl9LHQucHJvdG90eXBlLmNoaWxkTGlzdE11dGF0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMscj10aGlzLm11dGF0aW9uU2VyaWFsaXplci5zZXJpYWxpemVNdXRhdGlvbkNoaWxkTGlzdCh0KTtpZihyKXt2YXIgaT1yLnJlbW92ZWROb2RlcyxuPXIuYWRkZWROb2RlcztpLmZvckVhY2goKGZ1bmN0aW9uKHIpe2Uub25FdmVudENhbGxiYWNrKHthcmdzOnIsZGF0ZTp0LmRhdGUsdHlwZTpHdC5NVVRBVElPTl9SRU1PVkV9KX0pKSxuLmZvckVhY2goKGZ1bmN0aW9uKHIpe2Uub25FdmVudENhbGxiYWNrKHthcmdzOnIsZGF0ZTp0LmRhdGUsdHlwZTpHdC5NVVRBVElPTl9JTlNFUlR9KX0pKX19LHR9KCksb2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuc3RvcmFnZUNoYXJzVXNlZD0wLHRoaXMubWF4U3RvcmVkQ2hhcnM9MCx0aGlzLm1heFN0b3JlZENoYXJzPXQvMn1yZXR1cm4gdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3RoaXMuc3RvcmFnZUNoYXJzVXNlZCs9dC5sZW5ndGh9LHQucHJvdG90eXBlLmlzVGhyZXNob2xkUmVhY2hlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JhZ2VDaGFyc1VzZWQ+dGhpcy5tYXhTdG9yZWRDaGFyc30sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLnN0b3JhZ2VDaGFyc1VzZWQ9MH0sdH0oKSxzZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3ZvaWQgMD09PXQmJih0PVtdKSx2b2lkIDA9PT1lJiYoZT17fSksdm9pZCAwPT09ciYmKHI9NTEyZTMpLHRoaXMuZXZlbnRzPXQsdGhpcy5yZXF1ZXN0UGFyYW1ldGVycz1lLHRoaXMuc2l6ZUNvdW50ZXI9bmV3IG9lKHIpfXJldHVybiB0LnByb3RvdHlwZS5hZGRFdmVudD1mdW5jdGlvbih0KXt0aGlzLnNpemVDb3VudGVyLmFkZChjc0pTT04uc3RyaW5naWZ5KHQpKSxjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5ldmVudHMsdCl9LHQucHJvdG90eXBlLmV2ZW50c0NvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXZlbnRzLmxlbmd0aH0sdC5wcm90b3R5cGUuY2xlYXJFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLnNpemVDb3VudGVyLnJlc2V0KCksdGhpcy5ldmVudHM9W119LHQucHJvdG90eXBlLmlzRnVsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemVDb3VudGVyLmlzVGhyZXNob2xkUmVhY2hlZCgpfHx0aGlzLmV2ZW50c0NvdW50KCk+PTEwMH0sdC5wcm90b3R5cGUuc2V0UmVxdWVzdFBhcmFtZXRlcnNGcm9tUHJvdmlkZXI9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRSZXF1ZXN0UGFyYW1ldGVycygpO2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0aGlzLnJlcXVlc3RQYXJhbWV0ZXJzW3JdPWVbcl0pfSx0LnByb3RvdHlwZS5yZW1vdmVSZXF1ZXN0UGFyYW1ldGVyPWZ1bmN0aW9uKHQpe3RoaXMucmVxdWVzdFBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkodCkmJmRlbGV0ZSB0aGlzLnJlcXVlc3RQYXJhbWV0ZXJzW3RdfSx0LnByb3RvdHlwZS5nZXRFdmVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ldmVudHN9LHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXlsb2FkPWZ1bmN0aW9uKCl7cmV0dXJuIGNzSlNPTi5zdHJpbmdpZnkodGhpcy5ldmVudHMpfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcXVlc3RQYXJhbWV0ZXJzfSx0fSgpLGFlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuaW5kZXg9MX1yZXR1cm4gdC5wcm90b3R5cGUuaW5jcmVtZW50PWZ1bmN0aW9uKCl7dGhpcy5pbmRleCs9MX0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmluZGV4PTF9LHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7cmV0dXJue3JpOiIiK3RoaXMuaW5kZXh9fSx0fSgpLGNlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlLHIpe3ZhciBpPXQucHJlZml4KyIuIitlLG49dC5jcmVhdGVFdmVudChpLHtkZXRhaWw6cn0pO251bGwhPT1uJiZkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG4pfSx0LmNyZWF0ZUV2ZW50PWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9e30pLCJmdW5jdGlvbiI9PXR5cGVvZiBDdXN0b21FdmVudClyZXR1cm4gbmV3IEN1c3RvbUV2ZW50KHQsZSk7dmFyIHI9dGhpcy50cnlUb0NyZWF0ZUN1c3RvbUV2ZW50KCk7aWYobnVsbD09PXIpcmV0dXJuIG51bGw7dmFyIGk9ZS5idWJibGVzLG49dm9pZCAwIT09aSYmaSxvPWUuY2FuY2VsYWJsZSxzPXZvaWQgMCE9PW8mJm8sYT1lLmRldGFpbDtyZXR1cm4gci5pbml0Q3VzdG9tRXZlbnQodCxuLHMsYSkscn0sdC50cnlUb0NyZWF0ZUN1c3RvbUV2ZW50PWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBkb2N1bWVudC5jcmVhdGVFdmVudCgiQ3VzdG9tRXZlbnQiKX1jYXRjaCh0KXtyZXR1cm4gbnVsbH19LHQucHJlZml4PSJjcy50cmFja2luZyIsdH0oKSx1ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmlzU3RhcnRlZD0hMX1yZXR1cm4gdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmlzU3RhcnRlZHx8KHRoaXMuaXNTdGFydGVkPSEwLHRoaXMub25TdGFydCgpKX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuaXNTdGFydGVkJiYodGhpcy5pc1N0YXJ0ZWQ9ITEsdGhpcy5vblN0b3AoKSl9LHQucHJvdG90eXBlLnJlc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLnN0b3AoKSx0aGlzLnN0YXJ0KCl9LHR9KCkscGU9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKTooaS5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IGkpfX0oKSxsZT1mdW5jdGlvbigpe3JldHVybihsZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbiBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSYmKHRbbl09ZVtuXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGhlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyLGksbixvLHMsYSxjLHUscCxsLGgsZixkLHksdixtKXt2YXIgZz10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGcuY29uZmlndXJhdGlvbj1lLGcucmVjb3JkaW5nUmVxdWVzdD1yLGcucmVjb3JkaW5nQmF0Y2g9aSxnLnJlcXVlc3RQYXJhbWV0ZXJzPW4sZy5yZXF1ZXN0SW5kZXg9byxnLnN0eWxlU2hlZXRSdWxlVHJhY2tlcj1zLGcucmVjb3JkaW5nTXV0YXRpb25zVHJhY2tlcj1hLGcucmVjb3JkaW5nUGFnZUV2ZW50c1RyYWNrZXI9YyxnLnJlY29yZGluZ0Jyb3dzZXJFdmVudHNUcmFja2VyPXUsZy5zZXNzaW9uUmVuZXdlcj1wLGcuc3RhdGljUmVzb3VyY2VVcmxUcmFja2VyPWwsZy5yZWNvcmRpbmdQZXJmb3JtYW5jZVRpbWluZ3NUcmFja2VyPWgsZy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlcj1mLGcuamF2YVNjcmlwdEVycm9yc0Fub255bWl6ZXI9ZCxnLmFwaUVycm9yc1RyYWNrZXI9eSxnLnRleHRWaXNpYmlsaXR5VHJhY2tlcj12LGcuYXBpRXJyb3JzQW5vbnltaXplcj1tLGcuamF2YVNjcmlwdEVycm9yc0NvdW50PTAsZy5hcGlFcnJvcnNDb3VudD0wLGcuZXZlbnRFbWl0dGVyPW5ldyBjZSxnLmNhblNlbmRFdmVudHM9ITAsZy5vbkV2ZW50PWZ1bmN0aW9uKHQpe3JldHVybiBnLnByb2Nlc3NFdmVudCh0KX0sZ31yZXR1cm4gcGUoZSx0KSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5iaW5kUmVjb3JkaW5nUmVxdWVzdCgpLHRoaXMuYmluZFRyYWNrZXJzKCl9LGUucHJvdG90eXBlLmJpbmRSZWNvcmRpbmdSZXF1ZXN0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnJlY29yZGluZ1JlcXVlc3Quc2V0UmVxdWVzdFBheWxvYWRQcm92aWRlcih0aGlzLnJlY29yZGluZ0JhdGNoKSx0aGlzLnJlY29yZGluZ1JlcXVlc3Quc2V0UmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnModGhpcy5yZWNvcmRpbmdCYXRjaCksdGhpcy5yZWNvcmRpbmdSZXF1ZXN0LmFmdGVyUHJvdmlkZXJzQ2FsbGVkKChmdW5jdGlvbigpe3QucmVjb3JkaW5nQmF0Y2guY2xlYXJFdmVudHMoKSx0LnJlcXVlc3RJbmRleC5pbmNyZW1lbnQoKSx0LnJlY29yZGluZ0JhdGNoLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyKHQucmVxdWVzdFBhcmFtZXRlcnMpfSkpfSxlLnByb3RvdHlwZS5iaW5kVHJhY2tlcnM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuc3R5bGVTaGVldFJ1bGVUcmFja2VyLm9uRXZlbnQodGhpcy5vbkV2ZW50KSx0aGlzLnJlY29yZGluZ011dGF0aW9uc1RyYWNrZXIub25FdmVudCh0aGlzLm9uRXZlbnQpLHRoaXMucmVjb3JkaW5nQnJvd3NlckV2ZW50c1RyYWNrZXIub25FdmVudCh0aGlzLm9uRXZlbnQpLHRoaXMucmVjb3JkaW5nUGFnZUV2ZW50c1RyYWNrZXIub25FdmVudCh0aGlzLm9uRXZlbnQpLHRoaXMuc3RhdGljUmVzb3VyY2VVcmxUcmFja2VyLm9uRXZlbnQodGhpcy5vbkV2ZW50KSx0aGlzLnJlY29yZGluZ1BlcmZvcm1hbmNlVGltaW5nc1RyYWNrZXIub25FdmVudCh0aGlzLm9uRXZlbnQpLHRoaXMudGV4dFZpc2liaWxpdHlUcmFja2VyLm9uRXZlbnQodGhpcy5vbkV2ZW50KSx0aGlzLmphdmFTY3JpcHRFcnJvcnNUcmFja2VyLm9uRXZlbnQoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2Nlc3NKYXZhc2NyaXB0RXJyb3IoZSl9KSksdGhpcy5hcGlFcnJvcnNUcmFja2VyLm9uRXZlbnQoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2Nlc3NBcGlFcnJvcihlKX0pKX0sZS5wcm90b3R5cGUuYmxvY2tTZW5kaW5nRXZlbnRzPWZ1bmN0aW9uKCl7dGhpcy5jYW5TZW5kRXZlbnRzPSExfSxlLnByb3RvdHlwZS5hbGxvd1NlbmRpbmdFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLmNhblNlbmRFdmVudHM9ITB9LGUucHJvdG90eXBlLnByb2Nlc3NFdmVudD1mdW5jdGlvbih0KXt0aGlzLnNlc3Npb25SZW5ld2VyLmlzU2Vzc2lvblZhbGlkKCkmJih0aGlzLnJlY29yZGluZ0JhdGNoLmFkZEV2ZW50KHQpLHRoaXMucmVjb3JkaW5nQmF0Y2guaXNGdWxsKCkmJnRoaXMucHVzaEV2ZW50cygpLHRoaXMuY29uZmlndXJhdGlvbi5lbWl0RGVidWdFdmVudHMmJnRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoInJlY29yZGluZ0V2ZW50IixsZShsZSh7fSx0KSx7dHlwZU5hbWU6R3RbdC50eXBlXX0pKSl9LGUucHJvdG90eXBlLm9uU3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLnJlY29yZGluZ0JhdGNoLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyKHRoaXMucmVxdWVzdFBhcmFtZXRlcnMpLHRoaXMucmVjb3JkaW5nUGVyZm9ybWFuY2VUaW1pbmdzVHJhY2tlci5zdGFydCgpLHRoaXMuc3R5bGVTaGVldFJ1bGVUcmFja2VyLnN0YXJ0KCksdGhpcy50ZXh0VmlzaWJpbGl0eVRyYWNrZXIuc3RhcnQoKSx0aGlzLnJlY29yZGluZ011dGF0aW9uc1RyYWNrZXIuc3RhcnQoKSx0aGlzLnJlY29yZGluZ0Jyb3dzZXJFdmVudHNUcmFja2VyLnN0YXJ0KCksdGhpcy5yZWNvcmRpbmdQYWdlRXZlbnRzVHJhY2tlci5zdGFydCgpLHRoaXMuY29uZmlndXJhdGlvbi5qc0Vycm9yc0VuYWJsZWQmJnRoaXMuamF2YVNjcmlwdEVycm9yc1RyYWNrZXIuc3RhcnQoKSx0aGlzLmNvbmZpZ3VyYXRpb24uYXBpRXJyb3JzRW5hYmxlZCYmdGhpcy5hcGlFcnJvcnNUcmFja2VyLnN0YXJ0KCksdGhpcy5jb25maWd1cmF0aW9uLmVtaXREZWJ1Z0V2ZW50cyYmdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgicmVwbGF5UmVjb3JkaW5nU3RhcnRlZCIpfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXt0aGlzLnN0eWxlU2hlZXRSdWxlVHJhY2tlci5zdG9wKCksdGhpcy5yZWNvcmRpbmdNdXRhdGlvbnNUcmFja2VyLnN0b3AoKSx0aGlzLnJlY29yZGluZ0Jyb3dzZXJFdmVudHNUcmFja2VyLnN0b3AoKSx0aGlzLnJlY29yZGluZ1BhZ2VFdmVudHNUcmFja2VyLnN0b3AoKSx0aGlzLmphdmFTY3JpcHRFcnJvcnNUcmFja2VyLnN0b3AoKSx0aGlzLmFwaUVycm9yc1RyYWNrZXIuc3RvcCgpLHRoaXMudGV4dFZpc2liaWxpdHlUcmFja2VyLnN0b3AoKX0sZS5wcm90b3R5cGUuY2xlYXJTdGF0ZXM9ZnVuY3Rpb24oKXt0aGlzLnB1c2hFdmVudHMoKSx0aGlzLnJlcXVlc3RJbmRleC5yZXNldCgpLHRoaXMucmVtb3ZlRXRyUmVxdWVzdFBhcmFtZXRlcnMoKSx0aGlzLnJlY29yZGluZ0JhdGNoLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyKHRoaXMucmVxdWVzdFBhcmFtZXRlcnMpLHRoaXMuamF2YVNjcmlwdEVycm9yc0NvdW50PTAsdGhpcy5hcGlFcnJvcnNDb3VudD0wfSxlLnByb3RvdHlwZS5wdXNoRXZlbnRzPWZ1bmN0aW9uKCl7dGhpcy5yZWNvcmRpbmdCYXRjaC5ldmVudHNDb3VudCgpPjAmJnRoaXMuY2FuU2VuZEV2ZW50cyYmKHRoaXMuaXNTdGFydGVkP3RoaXMucmVjb3JkaW5nUmVxdWVzdC5zZW5kKCk6dGhpcy5yZWNvcmRpbmdCYXRjaC5jbGVhckV2ZW50cygpKX0sZS5wcm90b3R5cGUucHJvY2Vzc0FwaUVycm9yPWZ1bmN0aW9uKHQpe3RoaXMuYXBpRXJyb3JzQ291bnQ8ZS5NQVhfQVBJX0VSUk9SX0NPVU5UJiYodGhpcy5vbkV2ZW50KHt0eXBlOkd0LkFQSV9FUlJPUixkYXRlOnEubm93KCksYXJnczpbdGhpcy5hcGlFcnJvcnNBbm9ueW1pemVyLmFub255bWl6ZSh0KV19KSx0aGlzLmFwaUVycm9yc0NvdW50PXRoaXMuYXBpRXJyb3JzQ291bnQrMSl9LGUucHJvdG90eXBlLnByb2Nlc3NKYXZhc2NyaXB0RXJyb3I9ZnVuY3Rpb24odCl7dGhpcy5qYXZhU2NyaXB0RXJyb3JzQ291bnQ8ZS5NQVhfSkFWQVNDUklQVF9FUlJPUl9DT1VOVCYmKHRoaXMub25FdmVudCh7dHlwZTpHdC5KQVZBU0NSSVBUX0VSUk9SLGRhdGU6cS5ub3coKSxhcmdzOlt0aGlzLmphdmFTY3JpcHRFcnJvcnNBbm9ueW1pemVyLmFub255bWl6ZSh0KV19KSx0aGlzLmphdmFTY3JpcHRFcnJvcnNDb3VudD10aGlzLmphdmFTY3JpcHRFcnJvcnNDb3VudCsxKX0sZS5wcm90b3R5cGUuc2V0RXRyUmVxdWVzdFBhcmFtZXRlcnM9ZnVuY3Rpb24odCl7dGhpcy5pc1N0YXJ0ZWQmJih0PT09eHQuRVRSX1NFU1NJT04/dGhpcy5yZWNvcmRpbmdCYXRjaC5zZXRSZXF1ZXN0UGFyYW1ldGVyc0Zyb21Qcm92aWRlcih7Z2V0UmVxdWVzdFBhcmFtZXRlcnM6ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4odD17fSlbZS5FVFJTX1BBUkFNRVRFUl09ZS5FVFJfQUNUSVZFLHR9fSk6dD09PXh0LkVUUl9QQUdFJiZ0aGlzLnJlY29yZGluZ0JhdGNoLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyKHtnZXRSZXF1ZXN0UGFyYW1ldGVyczpmdW5jdGlvbigpe3ZhciB0O3JldHVybih0PXt9KVtlLkVUUlBfUEFSQU1FVEVSXT1lLkVUUl9BQ1RJVkUsdH19KSl9LGUucHJvdG90eXBlLnJlbW92ZUV0clJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7dGhpcy5yZWNvcmRpbmdCYXRjaC5yZW1vdmVSZXF1ZXN0UGFyYW1ldGVyKGUuRVRSUF9QQVJBTUVURVIpLHRoaXMucmVjb3JkaW5nQmF0Y2gucmVtb3ZlUmVxdWVzdFBhcmFtZXRlcihlLkVUUlNfUEFSQU1FVEVSKX0sZS5wcm90b3R5cGUuY2xlYXJFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLnJlY29yZGluZ0JhdGNoLmNsZWFyRXZlbnRzKCl9LGUucHJvdG90eXBlLm9uQ3VzdG9tRXJyb3JFdmVudD1mdW5jdGlvbih0KXt0aGlzLnByb2Nlc3NKYXZhc2NyaXB0RXJyb3IodCl9LGUucHJvdG90eXBlLm9uUGFnZUV2ZW50PWZ1bmN0aW9uKHQpe3RoaXMudHJpZ2dlclBhZ2VFdmVudCh0KX0sZS5wcm90b3R5cGUub25FdmVudFRyaWdnZXJSZWNvcmRpbmc9ZnVuY3Rpb24odCxlKXt0aGlzLnNldEV0clJlcXVlc3RQYXJhbWV0ZXJzKGUpLHRoaXMudHJpZ2dlclBhZ2VFdmVudCh0KX0sZS5wcm90b3R5cGUudHJpZ2dlclBhZ2VFdmVudD1mdW5jdGlvbih0KXt0aGlzLnJlY29yZGluZ0JhdGNoLmFkZEV2ZW50KHt0eXBlOkd0LlBBR0VfRVZFTlQsZGF0ZTpxLm5vdygpLGFyZ3M6W3tldmVudE5hbWU6Y3NTdHJpbmcucHJvdG90eXBlLnNsaWNlLmNhbGwodCwwLGUuTUFYX1BBR0VfRVZFTlRfTEVOR1RIKX1dfSl9LGUucHJvdG90eXBlLnRyaWdnZXJDb25zZW50R3JhbnRlZD1mdW5jdGlvbigpe3RoaXMucmVjb3JkaW5nQmF0Y2guYWRkRXZlbnQoe2RhdGU6cS5ub3coKSx0eXBlOkd0LkNPTlNFTlRfR1JBTlRFRH0pfSxlLnByb3RvdHlwZS50cmlnZ2VyQ29uc2VudFdpdGhkcmF3bj1mdW5jdGlvbigpe3RoaXMucmVjb3JkaW5nQmF0Y2guYWRkRXZlbnQoe2RhdGU6cS5ub3coKSx0eXBlOkd0LkNPTlNFTlRfV0lUSERSQVdOfSl9LGUuTUFYX1BBR0VfRVZFTlRfTEVOR1RIPTI1NSxlLk1BWF9KQVZBU0NSSVBUX0VSUk9SX0NPVU5UPTIwLGUuTUFYX0FQSV9FUlJPUl9DT1VOVD0yMCxlLkVUUlBfUEFSQU1FVEVSPSJldHJwIixlLkVUUlNfUEFSQU1FVEVSPSJldHJzIixlLkVUUl9BQ1RJVkU9IjEiLGV9KHVlKSxmZT1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihpLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgaSl9fSgpLGRlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyLGksbil7dmFyIG89dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLnJlY29yZGluZ1JlY292ZXJ5UmVxdWVzdD1lLG8ucmVjb3JkaW5nQmF0Y2g9cixvLnJlY292ZXJ5U3RvcmFnZT1pLG8uY29uZmlndXJhdGlvbj1uLG8ucGFnZUNoYW5nZUhhbmRsZXI9ZnVuY3Rpb24oKXt0cnl7dmFyIHQ9by5yZWNvcmRpbmdCYXRjaC5nZXRSZXF1ZXN0UGFyYW1ldGVycygpO2lmKCFvLmhhc1ZhbGlkUmVjb3JkaW5nVHlwZSh0LnJ0KXx8MD09PW8ucmVjb3JkaW5nQmF0Y2guZXZlbnRzQ291bnQoKSlyZXR1cm47by5yZWNvdmVyeVN0b3JhZ2Uuc2F2ZSh7bWV0YWRhdGE6dCxldmVudHM6by5yZWNvcmRpbmdCYXRjaC5nZXRFdmVudHMoKX0pfWNhdGNoKHQpe319LG99cmV0dXJuIGZlKGUsdCksZS5wcm90b3R5cGUub25TdGFydD1mdW5jdGlvbigpe3RoaXMuYWRkUGFnZUNoYW5nZUxpc3RlbmVyKCl9LGUucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbigpe3RoaXMucmVtb3ZlUGFnZUNoYW5nZUxpc3RlbmVyKCl9LGUucHJvdG90eXBlLnJlY292ZXI9ZnVuY3Rpb24oKXt0aGlzLnNlbmRQZXJzaXN0ZWRSZWNvcmRpbmdzKCl9LGUucHJvdG90eXBlLnNlbmRQZXJzaXN0ZWRSZWNvcmRpbmdzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMucmVjb3ZlcnlTdG9yYWdlLnJlY292ZXIoKSxyPWUucmF3QmF0Y2hlcyxpPWUucmVjb3ZlcmVkU2l6ZTtpZigwIT09ci5sZW5ndGgpe3ZhciBuPWNzQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKHIsKGZ1bmN0aW9uKGUpe3ZhciByPWUubWV0YWRhdGE7cmV0dXJuIHQuaGFzVmFsaWRSZWNvcmRpbmdUeXBlKHIucnQpfSkpLChmdW5jdGlvbihlKXt2YXIgcj1lLGk9ci5tZXRhZGF0YSxuPXIuZXZlbnRzLG89bmV3IHNlKG4saSk7cmV0dXJuIHQucmVjb3JkaW5nUmVjb3ZlcnlSZXF1ZXN0LnNldFJlcXVlc3RQYXlsb2FkUHJvdmlkZXIobyksdC5yZWNvcmRpbmdSZWNvdmVyeVJlcXVlc3Quc2V0UmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnMobyksdC5yZWNvcmRpbmdSZWNvdmVyeVJlcXVlc3Quc2VuZCgpLGV9KSk7aT4xMDQ4NTc2JiZUdC53YXJuKCJcbiAgICAgICAgU2l6ZSBvZiBkYXRhIHJldHJpZXZlZCBmcm9tIGxvY2FsIHN0b3JhZ2UgIitpKyIgZXhjZWVkcyAxMDQ4NTc2LlxuICAgICAgICBOdW1iZXIgb2YgdGFicyBzYXZlZCBpbiBsb2NhbCBzdG9yYWdlOiAiK24ubGVuZ3RoKyJcbiAgICAgICIpfX0sZS5wcm90b3R5cGUuYWRkUGFnZUNoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKCl7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInBhZ2VoaWRlIix0aGlzLnBhZ2VDaGFuZ2VIYW5kbGVyKX0sZS5wcm90b3R5cGUucmVtb3ZlUGFnZUNoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKCl7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInBhZ2VoaWRlIix0aGlzLnBhZ2VDaGFuZ2VIYW5kbGVyKX0sZS5wcm90b3R5cGUuaGFzVmFsaWRSZWNvcmRpbmdUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiF0aGlzLmNvbmZpZ3VyYXRpb24udXNlTWFsa2FQaXBlbGluZXx8ISF0JiZ0IT09THQuVEVNUE9SQVJJTFlfUkVDT1JERUR9LGV9KHVlKSx5ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsaSxuLG8scyl7dGhpcy5jb25zZW50U2VydmljZT10LHRoaXMuZG9tU2VyaWFsaXplcj1lLHRoaXMubm9kZUlkZW50aWZpZXI9cix0aGlzLnNlbnNpdGl2ZUNvbnRlbnQ9aSx0aGlzLmFub255bWl6YXRpb249bix0aGlzLmNvbmZpZ3VyYXRpb249byx0aGlzLnVybFNlcnZpY2U9c31yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMucmVzZXRBbm9ueW1pemF0aW9uKCl9LHQucHJvdG90eXBlLnNlcmlhbGl6ZURvY3VtZW50PWZ1bmN0aW9uKHQpe3BlcmZvcm1hbmNlLm1hcmsoImNzLXN0YXJ0LXNlcmlhbGl6ZURvY3VtZW50Iik7dmFyIGU9dGhpcy5kb21TZXJpYWxpemVyLnNlcmlhbGl6ZSh0LHtmb3JjZUNoaWxkcmVuU2VyaWFsaXphdGlvbjohMCx3aXRoQW5vbnltaXphdGlvbjp0aGlzLnVzZUFub255bWl6YXRpb259KTtyZXR1cm4gcGVyZm9ybWFuY2UubWFyaygiY3MtZW5kLXNlcmlhbGl6ZURvY3VtZW50IikscGVyZm9ybWFuY2UubWVhc3VyZSgiY3MtbWVhc3VyZS1zZXJpYWxpemVEb2N1bWVudCIsImNzLXN0YXJ0LXNlcmlhbGl6ZURvY3VtZW50IiwiY3MtZW5kLXNlcmlhbGl6ZURvY3VtZW50IiksW2VdfSx0LnByb3RvdHlwZS5zZXJpYWxpemVNdXRhdGlvbkNoYXJhY3RlckRhdGE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5ub2RlSWRlbnRpZmllci5pZklkZW50aWZpZWQodC50YXJnZXQsKGZ1bmN0aW9uKHIpe3ZhciBpPXQudGFyZ2V0O2lmKGkuZGF0YSE9PXQub2xkVmFsdWUpcmV0dXJuW3IsZS51c2VBbm9ueW1pemF0aW9uP2UuYW5vbnltaXphdGlvbi5hbm9ueW1pemVUZXh0SWZOZWVkZWQoaSk6aS5kYXRhXX0pKX0sdC5wcm90b3R5cGUuc2VyaWFsaXplQXR0YWNoU2hhZG93RXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC50YXJnZXQscj10LnNoYWRvd1Jvb3Q7aWYodGhpcy5ub2RlSWRlbnRpZmllci5oYXNJZGVudGlmaWVyKGUpJiYhdGhpcy5ub2RlSWRlbnRpZmllci5oYXNJZGVudGlmaWVyKHIpKXJldHVyblt0aGlzLm5vZGVJZGVudGlmaWVyLmdldElkKGUpLHRoaXMuZG9tU2VyaWFsaXplci5zZXJpYWxpemUocildfSx0LnByb3RvdHlwZS5zZXJpYWxpemVNdXRhdGlvbkF0dHJpYnV0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLHI9dC50YXJnZXQsaT10LmF0dHJpYnV0ZU5hbWUsbj10LmF0dHJpYnV0ZU5hbWVzcGFjZTtyZXR1cm4gdGhpcy5ub2RlSWRlbnRpZmllci5pZklkZW50aWZpZWQodC50YXJnZXQsKGZ1bmN0aW9uKG8pe2lmKCFlLnNlbnNpdGl2ZUNvbnRlbnQuaXNTZW5zaXRpdmVBdHRyaWJ1dGVOYW1lKHIsaSkpe3ZhciBzPXQudGFyZ2V0LmdldEF0dHJpYnV0ZU5TKG4saSk7aWYocyE9PXQub2xkVmFsdWUpcmV0dXJuIHM9ZS5hbm9ueW1pemF0aW9uLmFub255bWl6ZUF0dHJpYnV0ZUlmTmVlZGVkKGUudXNlQW5vbnltaXphdGlvbixpLHMpLFtvLG4saSxzXX19KSl9LHQucHJvdG90eXBlLnNlcmlhbGl6ZU11dGF0aW9uQ2hpbGRMaXN0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMubm9kZUlkZW50aWZpZXIuaWZJZGVudGlmaWVkKHQudGFyZ2V0LChmdW5jdGlvbihyKXtpZighZS5zZW5zaXRpdmVDb250ZW50LmlzU2Vuc2l0aXZlRWxlbWVudE5vZGUodC50YXJnZXQpKXJldHVybntyZW1vdmVkTm9kZXM6ZS5zZXJpYWxpemVSZW1vdmVkTm9kZXModCksYWRkZWROb2RlczplLnNlcmlhbGl6ZUFkZGVkTm9kZXModCxyKX19KSl9LHQucHJvdG90eXBlLnNlcmlhbGl6ZVJlbW92ZWROb2Rlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10scj0wO3I8dC5yZW1vdmVkTm9kZXMubGVuZ3RoO3IrPTEpe3ZhciBpPXRoaXMubm9kZUlkZW50aWZpZXIucG9wSWQodC5yZW1vdmVkTm9kZXNbcl0pO2kmJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChlLFtpXSl9cmV0dXJuIGV9LHQucHJvdG90eXBlLnNlcmlhbGl6ZUFkZGVkTm9kZXM9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9W10saT10Lm5leHRTaWJsaW5nP3RoaXMubm9kZUlkZW50aWZpZXIuaWZJZGVudGlmaWVkKHQubmV4dFNpYmxpbmcsKGZ1bmN0aW9uKHQpe3JldHVybiB0fSkpOm51bGwsbj0wO248dC5hZGRlZE5vZGVzLmxlbmd0aDtuKz0xKXt2YXIgbz10LmFkZGVkTm9kZXNbbl07aWYoIXRoaXMubm9kZUlkZW50aWZpZXIuaGFzSWRlbnRpZmllcihvKSl7dmFyIHM9dGhpcy5kb21TZXJpYWxpemVyLnNlcmlhbGl6ZShvLHt3aXRoQW5vbnltaXphdGlvbjp0aGlzLnVzZUFub255bWl6YXRpb259KTtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwocixbZSxpLHNdKX19cmV0dXJuIHJ9LHQucHJvdG90eXBlLnJlc2V0QW5vbnltaXphdGlvbj1mdW5jdGlvbigpe3RoaXMudXNlQW5vbnltaXphdGlvbj0hdGhpcy5jb25zZW50U2VydmljZS5pc0FsbG93ZWRCeUNvbnNlbnQoKSx0aGlzLnVzZUFub255bWl6YXRpb24/dGhpcy5jb25maWd1cmF0aW9uLnJlcGxheVJlY29yZGluZ1VubWFza2VkVXJsUmVnZXgmJnRoaXMuY29uZmlndXJhdGlvbi5yZXBsYXlSZWNvcmRpbmdVbm1hc2tlZFVybFJlZ2V4LnRlc3QodGhpcy51cmxTZXJ2aWNlLmdldFVybCgpKSYmKHRoaXMudXNlQW5vbnltaXphdGlvbj0hMSk6dGhpcy5jb25maWd1cmF0aW9uLnJlcGxheVJlY29yZGluZ01hc2tlZFVybFJlZ2V4JiZ0aGlzLmNvbmZpZ3VyYXRpb24ucmVwbGF5UmVjb3JkaW5nTWFza2VkVXJsUmVnZXgudGVzdCh0aGlzLnVybFNlcnZpY2UuZ2V0VXJsKCkpJiYodGhpcy51c2VBbm9ueW1pemF0aW9uPSEwKX0sdH0oKSx2ZT1mdW5jdGlvbih0LGUscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLGkpO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKG49dFthXSkmJihzPShvPDM/bihzKTpvPjM/bihlLHIscyk6bihlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSxtZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3ZhciBpPXRoaXM7dGhpcy5tb25rZXlQYXRjaGVyPXQsdGhpcy5ub2RlSWRlbnRpZmllcj1lLHRoaXMuc3RhdGljUmVzb3VyY2VVcmxUcmFja2VyPXIsdGhpcy5jYW5UcmFja1J1bGVJbnNlcnRpb25zKCkmJih0aGlzLmluc2VydFJ1bGVJbnRlcmNlcHRvcj10aGlzLm1vbmtleVBhdGNoZXIuY3JlYXRlU3luY0Z1bmN0aW9uSW50ZXJjZXB0b3Ioe3RhcmdldDp3aW5kb3cuQ1NTU3R5bGVTaGVldC5wcm90b3R5cGUsbWV0aG9kTmFtZToiaW5zZXJ0UnVsZSIsaG9vazpmdW5jdGlvbih0KXt2YXIgZT10LmNvbnRleHQscj10LmFyZ3M7cmV0dXJuIGkuc2VuZEluc2VydGlvbihlLHIpfX0pKSx0aGlzLmNhblRyYWNrU3R5bGVEZWNsYXJhdGlvbkNoYW5nZXMoKSYmKHRoaXMuY3NzVGV4dEludGVyY2VwdG9yPXRoaXMubW9ua2V5UGF0Y2hlci5jcmVhdGVEZXNjcmlwdG9ySW50ZXJjZXB0b3Iod2luZG93LkNTU1N0eWxlRGVjbGFyYXRpb24ucHJvdG90eXBlLCJjc3NUZXh0IiwoZnVuY3Rpb24odCxlKXtyZXR1cm4gaS5zZXRTdHlsZURlY2xhcmF0aW9uQ3NzVGV4dCh0LGUpfSkpKX1yZXR1cm4gdC5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXt0aGlzLm9uRXZlbnRDYWxsYmFjaz10fSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuaW5zZXJ0UnVsZUludGVyY2VwdG9yJiZ0aGlzLmluc2VydFJ1bGVJbnRlcmNlcHRvci5hY3RpdmF0ZSgpLHRoaXMuY3NzVGV4dEludGVyY2VwdG9yJiZ0aGlzLmNzc1RleHRJbnRlcmNlcHRvci5hY3RpdmF0ZSgpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5pbnNlcnRSdWxlSW50ZXJjZXB0b3ImJnRoaXMuaW5zZXJ0UnVsZUludGVyY2VwdG9yLmRlYWN0aXZhdGUoKSx0aGlzLmNzc1RleHRJbnRlcmNlcHRvciYmdGhpcy5jc3NUZXh0SW50ZXJjZXB0b3IuZGVhY3RpdmF0ZSgpfSx0LnByb3RvdHlwZS5zZXRTdHlsZURlY2xhcmF0aW9uQ3NzVGV4dD1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMsaT10aGlzLmdldFN5bGVTaGVldCh0KTtpJiZpLm93bmVyTm9kZSYmdGhpcy5ub2RlSWRlbnRpZmllci5pZklkZW50aWZpZWQoaS5vd25lck5vZGUsKGZ1bmN0aW9uKG4pe3ZhciBvPXIuaW5kZXhPZlJ1bGUoaS5jc3NSdWxlcyx0LnBhcmVudFJ1bGUpO3Iub25FdmVudENhbGxiYWNrKHtkYXRlOnEubm93KCksdHlwZTpHdC5TVFlMRVNIRUVUX0NTU19URVhUX1VQREFURSxhcmdzOltuLG8sZV19KSxyLnN0YXRpY1Jlc291cmNlVXJsVHJhY2tlci5zY2FuQ3NzU3RyaW5nKGUpfSkpfSx0LnByb3RvdHlwZS5nZXRTeWxlU2hlZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnRSdWxlO3JldHVybiBlJiZlLnBhcmVudFN0eWxlU2hlZXR9LHQucHJvdG90eXBlLmluZGV4T2ZSdWxlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChjc0FycmF5LmZyb20odCksZSl9LHQucHJvdG90eXBlLmNhblRyYWNrUnVsZUluc2VydGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LkNTU1N0eWxlU2hlZXQmJndpbmRvdy5DU1NTdHlsZVNoZWV0LnByb3RvdHlwZSYmImZ1bmN0aW9uIj09dHlwZW9mIHdpbmRvdy5DU1NTdHlsZVNoZWV0LnByb3RvdHlwZS5pbnNlcnRSdWxlfSx0LnByb3RvdHlwZS5jYW5UcmFja1N0eWxlRGVjbGFyYXRpb25DaGFuZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5DU1NTdHlsZURlY2xhcmF0aW9uJiZ3aW5kb3cuQ1NTU3R5bGVEZWNsYXJhdGlvbi5wcm90b3R5cGUmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkNTU1N0eWxlRGVjbGFyYXRpb24ucHJvdG90eXBlLCJjc3NUZXh0Iil9LHQucHJvdG90eXBlLnNlbmRJbnNlcnRpb249ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLGk9ZVswXSxuPWVbMV07dGhpcy5ub2RlSWRlbnRpZmllci5pZklkZW50aWZpZWQodC5vd25lck5vZGUsKGZ1bmN0aW9uKHQpe3Iub25FdmVudENhbGxiYWNrKHtkYXRlOnEubm93KCksdHlwZTpHdC5TVFlMRVNIRUVUX1JVTEVfSU5TRVJULGFyZ3M6dnQobik/W3QsaSxuXTpbdCxpXX0pLHIuc3RhdGljUmVzb3VyY2VVcmxUcmFja2VyLnNjYW5Dc3NTdHJpbmcoaSl9KSl9LHZlKFtBdCgic3R5bGVTaGVldFJ1bGVUcmFja2VyLnNldFN0eWxlRGVjbGFyYXRpb25Dc3NUZXh0IildLHQucHJvdG90eXBlLCJzZXRTdHlsZURlY2xhcmF0aW9uQ3NzVGV4dCIsbnVsbCksdmUoW0F0KCJzdHlsZVNoZWV0UnVsZVRyYWNrZXIuc2VuZEluc2VydGlvbiIpXSx0LnByb3RvdHlwZSwic2VuZEluc2VydGlvbiIsbnVsbCksdH0oKSxnZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmJlZm9yZVNlcmlhbGl6ZT1mdW5jdGlvbih0LGUpe3JldHVybiB0fSx0LnByb3RvdHlwZS5iZWZvcmVTZXJpYWxpemVDaGlsZHJlbj1mdW5jdGlvbih0LGUscil7cmV0dXJuIGV9LHQucHJvdG90eXBlLmJlZm9yZVNlcmlhbGl6ZUF0dHJpYnV0ZXM9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBlfSx0LnByb3RvdHlwZS5zZXJpYWxpemVOb2RlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZX0sdC5wcm90b3R5cGUuc2VyaWFsaXplRWxlbWVudE5vZGU9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBlfSx0LnByb3RvdHlwZS5zZXJpYWxpemVBdHRyaWJ1dGU9ZnVuY3Rpb24odCxlLHIsaSl7cmV0dXJuIHJ9LHQucHJvdG90eXBlLnNlcmlhbGl6ZVRleHROb2RlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZX0sdC5wcm90b3R5cGUuc2VyaWFsaXplQ29tbWVudE5vZGU9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBlfSx0LnByb3RvdHlwZS5zZXJpYWxpemVEb2N0eXBlTm9kZT1mdW5jdGlvbih0LGUscil7cmV0dXJuIGV9LHQucHJvdG90eXBlLnNlcmlhbGl6ZURvY3VtZW50Tm9kZT1mdW5jdGlvbih0LGUscil7cmV0dXJuIGV9LHQucHJvdG90eXBlLnNlcmlhbGl6ZVNoYWRvd1Jvb3ROb2RlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZX0sdH0oKSxTZT1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihpLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgaSl9fSgpLEVlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGUuaWRlbnRpZmllckFkZGVkSGFuZGxlcnM9W10sZS5pZGVudGlmaWVyUmVtb3ZlZEhhbmRsZXJzPVtdLGUuY3VycmVudENzSWQ9MSxlfXJldHVybiBTZShlLHQpLGUucHJvdG90eXBlLmJlZm9yZVNlcmlhbGl6ZT1mdW5jdGlvbih0LGUpe3JldHVybiBlLmZvcmNlQ2hpbGRyZW5TZXJpYWxpemF0aW9uJiZ0aGlzLnBvcElkKHQpLHR9LGUucHJvdG90eXBlLmJlZm9yZVNlcmlhbGl6ZUNoaWxkcmVuPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcztyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoZSwoZnVuY3Rpb24odCl7cmV0dXJuIXIuaGFzSWRlbnRpZmllcih0KX0pKX0sZS5wcm90b3R5cGUuc2VyaWFsaXplTm9kZT1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMuY3VycmVudENzSWQ7cmV0dXJuIHRoaXMuY3VycmVudENzSWQrPTEsdC5fX2NvbnRlbnRzcXVhcmVfaWRlbnRpZmllcj1yLGUuY3NJZD1yLHRoaXMubm90aWZ5U3Vic2NyaWJlcnModGhpcy5pZGVudGlmaWVyQWRkZWRIYW5kbGVycyx0KSxlfSxlLnByb3RvdHlwZS5pZklkZW50aWZpZWQ9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmhhc0lkZW50aWZpZXIodCkpcmV0dXJuIGUodGhpcy5nZXRJZCh0KSl9LGUucHJvdG90eXBlLmdldElkPWZ1bmN0aW9uKHQpe3JldHVybiB0Ll9fY29udGVudHNxdWFyZV9pZGVudGlmaWVyfSxlLnByb3RvdHlwZS5vbklkZW50aWZpZXJBZGRlZD1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5pZGVudGlmaWVyQWRkZWRIYW5kbGVycyx0KX0sZS5wcm90b3R5cGUub25JZGVudGlmaWVyUmVtb3ZlZD1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5pZGVudGlmaWVyUmVtb3ZlZEhhbmRsZXJzLHQpfSxlLnByb3RvdHlwZS5wb3BJZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldElkKHQpO2RlbGV0ZSB0Ll9fY29udGVudHNxdWFyZV9pZGVudGlmaWVyLHRoaXMubm90aWZ5U3Vic2NyaWJlcnModGhpcy5pZGVudGlmaWVyUmVtb3ZlZEhhbmRsZXJzLHQpO2Zvcih2YXIgcj10LmZpcnN0Q2hpbGQ7bnVsbCE9PXI7cj1jc05vZGVuZXh0U2libGluZy5hcHBseShyKSl0aGlzLnBvcElkKHIpO3ZhciBpPXQuc2hhZG93Um9vdDtyZXR1cm4gaSYmdGhpcy5wb3BJZChpKSxlfSxlLnByb3RvdHlwZS5oYXNJZGVudGlmaWVyPWZ1bmN0aW9uKHQpe3JldHVybiJfX2NvbnRlbnRzcXVhcmVfaWRlbnRpZmllciJpbiB0fSxlLnByb3RvdHlwZS5ub3RpZnlTdWJzY3JpYmVycz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgcj0wLGk9dDtyPGkubGVuZ3RoO3IrKyl7KDAsaVtyXSkoZSl9fSxlfShnZSksd2U9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKTooaS5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IGkpfX0oKSxDZT1bInZhbHVlIiwiY2hlY2tlZCIsInNyYyIsImRhdGEiLCJhbHQiXSxSZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5waWlNYXNraW5nU2VydmljZT1lLHJ9cmV0dXJuIHdlKGUsdCksZS5wcm90b3R5cGUuYmVmb3JlU2VyaWFsaXplQ2hpbGRyZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5pc1NlbnNpdGl2ZUVsZW1lbnROb2RlKHQpP1tdOmV9LGUucHJvdG90eXBlLmJlZm9yZVNlcmlhbGl6ZUF0dHJpYnV0ZXM9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzO3JldHVybiB0aGlzLmlzU2Vuc2l0aXZlRWxlbWVudE5vZGUodCkmJihjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSx0aGlzLmNyZWF0ZVNlbnNpdGl2ZUVsZW1lbnREaW1lbnNpb25zQXR0cmlidXRlKHQpKSx0aGlzLmlzRGF0YUNTTWFza05lZWRlZCh0KSYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKGUsZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKCJkYXRhLWNzLW1hc2siKSkpLGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGUsKGZ1bmN0aW9uKGUpe3JldHVybiFyLmlzU2Vuc2l0aXZlQXR0cmlidXRlTmFtZSh0LGUubmFtZSl9KSl9LGUucHJvdG90eXBlLmlzU2Vuc2l0aXZlRWxlbWVudE5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHUodCkmJih0aGlzLnBpaU1hc2tpbmdTZXJ2aWNlLmNoZWNrTm9kZU1hdGNoKHQpfHx5KHQpfHx0aGlzLmlzU2Vuc2l0aXZlSW1hZ2VFbGVtZW50KHQpKX0sZS5wcm90b3R5cGUuaXNTZW5zaXRpdmVBdHRyaWJ1dGVOYW1lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucGlpTWFza2luZ1NlcnZpY2UuY2hlY2tBdHRyaWJ1dGVNYXRjaCh0LGUpfHx0aGlzLmlzU2Vuc2l0aXZlRWxlbWVudE5vZGUodCkmJi0xIT09Y3NBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKENlLGUpfHx0aGlzLmlzU2Vuc2l0aXZlSW5wdXRWYWx1ZSh0LGUpfSxlLnByb3RvdHlwZS5pc1NlbnNpdGl2ZUltYWdlRWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm4hIWgodCkmJk4odC5zcmMsImRhdGE6Iil9LGUucHJvdG90eXBlLmlzU2Vuc2l0aXZlSW5wdXRWYWx1ZT1mdW5jdGlvbih0LGUpe3JldHVybiBkKHQpJiYidmFsdWUiPT09ZSYmImJ1dHRvbiIhPT10LmdldEF0dHJpYnV0ZSgidHlwZSIpfSxlLnByb3RvdHlwZS5pc0RhdGFDU01hc2tOZWVkZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIXkodCkmJiF0Lmhhc0F0dHJpYnV0ZSgiZGF0YS1jcy1tYXNrIil9LGUucHJvdG90eXBlLmNyZWF0ZVNlbnNpdGl2ZUVsZW1lbnREaW1lbnNpb25zQXR0cmlidXRlPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscj1kb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoInN0eWxlIik7cmV0dXJuIHIudmFsdWU9IndpZHRoOiAiK2Uud2lkdGgrInB4OyBoZWlnaHQ6ICIrZS5oZWlnaHQrInB4OyIscn0sZX0oZ2UpLGJlPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksVGU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTAscj1hcmd1bWVudHMubGVuZ3RoO2U8cjtlKyspdCs9YXJndW1lbnRzW2VdLmxlbmd0aDt2YXIgaT1BcnJheSh0KSxuPTA7Zm9yKGU9MDtlPHI7ZSsrKWZvcih2YXIgbz1hcmd1bWVudHNbZV0scz0wLGE9by5sZW5ndGg7czxhO3MrKyxuKyspaVtuXT1vW3NdO3JldHVybiBpfSxBZT1bImlkIiwiY2xhc3MiLCJzdHlsZSIsInNyYyIsInNyY3NldCIsInNpemVzIiwiaHJlZiIsInJlbCIsInR5cGUiLCJ3aWR0aCIsImhlaWdodCIsIm1lZGlhIiwiYWxpZ24iLCJkaXIiLCJiZ2NvbG9yIiwiY29sb3IiLCJib3JkZXIiLCJjb2xzcGFuIiwicm93c3BhbiIsImNvbHMiLCJyb3dzIiwic2l6ZSIsInN0YXJ0IiwiZGF0YS1jcy1vdmVycmlkZS1pZCJdLGtlPS9bXlxzXS9nLFBlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyKXt2YXIgaT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkucGlpPWUsaS5jb25maWd1cmF0aW9uPXIsaS5hbGxXaGl0ZWxpc3RlZEF0dHJpYnV0ZXM9W10saX1yZXR1cm4gYmUoZSx0KSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5hbGxXaGl0ZWxpc3RlZEF0dHJpYnV0ZXM9VGUoQWUsdGhpcy5jb25maWd1cmF0aW9uLndoaXRlbGlzdGVkQXR0cmlidXRlcyl9LGUucHJvdG90eXBlLmJlZm9yZVNlcmlhbGl6ZUNoaWxkcmVuPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdGhpcy5pc1N0eWxlT3JXaGl0ZWxpc3RlZEVsZW1lbnQodCkmJihyLndpdGhBbm9ueW1pemF0aW9uPSExKSxlfSxlLnByb3RvdHlwZS5zZXJpYWxpemVOb2RlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gZS5hbm9ueW1pemVkPXIud2l0aEFub255bWl6YXRpb24sZX0sZS5wcm90b3R5cGUuc2VyaWFsaXplQXR0cmlidXRlPWZ1bmN0aW9uKHQsZSxyLGkpe3IuYW5vbnltaXplZD1pLndpdGhBbm9ueW1pemF0aW9uO3ZhciBuPXRoaXMuYW5vbnltaXplQXR0cmlidXRlSWZOZWVkZWQoaS53aXRoQW5vbnltaXphdGlvbixlLm5hbWUsZS52YWx1ZSk7cmV0dXJuIHIudmFsdWU9dGhpcy5waWlBbm9ueW1pemVBdHRyaWJ1dGVJZk5lZWRlZChlLm5hbWUsbikscn0sZS5wcm90b3R5cGUuc2VyaWFsaXplVGV4dE5vZGU9ZnVuY3Rpb24odCxlLHIpe3ZhciBpPXIud2l0aEFub255bWl6YXRpb24/dGhpcy5hbm9ueW1pemVUZXh0SWZOZWVkZWQodCk6dC5kYXRhO3JldHVybiBlLmRhdGE9dGhpcy5waWkuYW5vbnltaXplKGkpLGV9LGUucHJvdG90eXBlLmFub255bWl6ZVRleHRJZk5lZWRlZD1mdW5jdGlvbih0KXt2YXIgZT10LmRhdGEscj1jc05vZGVwYXJlbnROb2RlLmFwcGx5KHQpO3JldHVybiByJiZ0aGlzLmlzU3R5bGVPcldoaXRlbGlzdGVkRWxlbWVudChyKT9lOnRoaXMuYW5vbnltaXplVGV4dChlKX0sZS5wcm90b3R5cGUuYW5vbnltaXplQXR0cmlidXRlSWZOZWVkZWQ9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0JiZudWxsIT09cj90aGlzLmlzV2hpdGVsaXN0ZWRBdHRyaWJ1dGUoZSk/cjoiIjpyfSxlLnByb3RvdHlwZS5waWlBbm9ueW1pemVBdHRyaWJ1dGVJZk5lZWRlZD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmlzV2hpdGVsaXN0ZWRBdHRyaWJ1dGUodCk/ZTp0aGlzLnBpaS5hbm9ueW1pemUoZSl9LGUucHJvdG90eXBlLmFub255bWl6ZVRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIGNzU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlLmNhbGwodCxrZSwiYSIpfSxlLnByb3RvdHlwZS5zZXRXaGl0ZWxpc3RlZEVsZW1lbnRzU2VsZWN0b3I9ZnVuY3Rpb24odCl7dGhpcy53aGl0ZWxpc3RlZEVsZW1lbnRzU2VsZWN0b3I9dH0sZS5wcm90b3R5cGUuaXNXaGl0ZWxpc3RlZEF0dHJpYnV0ZT1mdW5jdGlvbih0KXtyZXR1cm4tMSE9PWNzQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLmFsbFdoaXRlbGlzdGVkQXR0cmlidXRlcyx0KX0sZS5wcm90b3R5cGUuaXNXaGl0ZWxpc3RlZEVsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHUodCkmJih0Lmhhc0F0dHJpYnV0ZSgiZGF0YS1jcy1jYXB0dXJlIil8fHRoaXMuZWxlbWVudE1hdGNoZXNXaGl0ZWxpc3RlZFNlbGVjdG9ycyh0KSl9LGUucHJvdG90eXBlLmlzU3R5bGVPcldoaXRlbGlzdGVkRWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm4gZih0KXx8dGhpcy5pc1doaXRlbGlzdGVkRWxlbWVudCh0KX0sZS5wcm90b3R5cGUuZWxlbWVudE1hdGNoZXNXaGl0ZWxpc3RlZFNlbGVjdG9ycz1mdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMud2hpdGVsaXN0ZWRFbGVtZW50c1NlbGVjdG9yJiZFKCkuY2FsbCh0LHRoaXMud2hpdGVsaXN0ZWRFbGVtZW50c1NlbGVjdG9yKX0sZX0oZ2UpLE9lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnByZWZpeFN0b3JhZ2VOYW1lPXQ7dmFyIGU9Y3NTdHJpbmcucHJvdG90eXBlLnNsaWNlLmNhbGwoIiIrTWF0aC5yYW5kb20oKSwyLDgpO3RoaXMuc3RvcmFnZU5hbWU9IiIrdGhpcy5wcmVmaXhTdG9yYWdlTmFtZStlfXJldHVybiB0LnByb3RvdHlwZS5zYXZlPWZ1bmN0aW9uKHQpe2xvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuc3RvcmFnZU5hbWUsY3NKU09OLnN0cmluZ2lmeSh0KSl9LHQucHJvdG90eXBlLnJlY292ZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9MCxyPVtdO3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5nZXRTdG9yYWdlS2V5cygpLChmdW5jdGlvbihpKXt2YXIgbj1sb2NhbFN0b3JhZ2UuZ2V0SXRlbShpKTtpZihudWxsIT09bil7ZSs9bi5sZW5ndGg7dmFyIG89dC5wYXJzZVN0b3JlZEl0ZW0obixpKTtvJiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwocixvKSx0LnJlbW92ZUl0ZW0oaSl9fSkpLHtyYXdCYXRjaGVzOnIscmVjb3ZlcmVkU2l6ZTplfX0sdC5wcm90b3R5cGUuZ2V0U3RvcmFnZUtleXM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8bG9jYWxTdG9yYWdlLmxlbmd0aDtlKz0xKXt2YXIgcj1sb2NhbFN0b3JhZ2Uua2V5KGUpO3ImJk4ocix0aGlzLnByZWZpeFN0b3JhZ2VOYW1lKSYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHQscil9cmV0dXJuIHR9LHQucHJvdG90eXBlLnJlbW92ZUl0ZW09ZnVuY3Rpb24odCl7bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odCl9LHQucHJvdG90eXBlLnBhcnNlU3RvcmVkSXRlbT1mdW5jdGlvbih0LGUpe3RyeXtyZXR1cm4gY3NKU09OLnBhcnNlKHQpfWNhdGNoKHIpe3JldHVybiBUdC5lcnJvcigiSW52YWxpZCBpdGVtIGluIGxvY2FsU3RvcmFnZS4oa2V5OiIrZSsiOyB2YWx1ZToiK3QrIikiKSxudWxsfX0sdH0oKSxfZT1mdW5jdGlvbigpe3JldHVybihfZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbiBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSYmKHRbbl09ZVtuXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LEllPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt0aGlzLnJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzPXR9cmV0dXJuIHQucHJvdG90eXBlLmFkZFByb3ZpZGVyPWZ1bmN0aW9uKHQpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLnJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzLHQpfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLnJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzLChmdW5jdGlvbih0LGUpe3JldHVybiBfZShfZSh7fSxlLmdldFJlcXVlc3RQYXJhbWV0ZXJzKCkpLHQpfSkse30pfSx0fSgpLE5lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmFzeW5jVGFza0ZhY3Rvcnk9dCx0aGlzLnVzZXJBY3RpdmU9ITEsdGhpcy5wZW5kaW5nSW5hY3Rpdml0eT1udWxsfXJldHVybiB0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMudXNlckFjdGl2ZT0hMCx0aGlzLmNyZWF0ZVBlbmRpbmdJbmFjdGl2aXR5KCl9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLnVzZXJBY3RpdmU9ITEsdGhpcy5jbGVhclBlbmRpbmdJbmFjdGl2aXR5KCl9LHQucHJvdG90eXBlLnRyYWNrQWN0aXZpdHk9ZnVuY3Rpb24oKXt0aGlzLnVzZXJBY3RpdmV8fCh0aGlzLm9uQWN0aXZpdHlSZXN1bWVkQ2FsbGJhY2soKSx0aGlzLnVzZXJBY3RpdmU9ITApLHRoaXMuY2xlYXJQZW5kaW5nSW5hY3Rpdml0eSgpLHRoaXMuY3JlYXRlUGVuZGluZ0luYWN0aXZpdHkoKX0sdC5wcm90b3R5cGUuY3JlYXRlUGVuZGluZ0luYWN0aXZpdHk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMucGVuZGluZ0luYWN0aXZpdHk9dGhpcy5hc3luY1Rhc2tGYWN0b3J5LmNyZWF0ZSgicmVjb3JkZWQgdXNlciBpbmFjdGl2ZSIsKGZ1bmN0aW9uKCl7dC51c2VyQWN0aXZlPSExLHQuY2xlYXJQZW5kaW5nSW5hY3Rpdml0eSgpLHQub25BY3Rpdml0eVN0b3BwZWRDYWxsYmFjaygpfSksNWUzKX0sdC5wcm90b3R5cGUuY2xlYXJQZW5kaW5nSW5hY3Rpdml0eT1mdW5jdGlvbigpe251bGwhPT10aGlzLnBlbmRpbmdJbmFjdGl2aXR5JiYodGhpcy5wZW5kaW5nSW5hY3Rpdml0eS5jYW5jZWwoKSx0aGlzLnBlbmRpbmdJbmFjdGl2aXR5PW51bGwpfSx0LnByb3RvdHlwZS5pc1VzZXJBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51c2VyQWN0aXZlfSx0LnByb3RvdHlwZS5vbkFjdGl2aXR5U3RvcHBlZD1mdW5jdGlvbih0KXt0aGlzLm9uQWN0aXZpdHlTdG9wcGVkQ2FsbGJhY2s9dH0sdC5wcm90b3R5cGUub25BY3Rpdml0eVJlc3VtZWQ9ZnVuY3Rpb24odCl7dGhpcy5vbkFjdGl2aXR5UmVzdW1lZENhbGxiYWNrPXR9LHR9KCksTWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt2YXIgaT10aGlzO3RoaXMudGFza05hbWU9dCx0aGlzLnRhc2s9ZSx0aGlzLnRpbWVvdXQ9cix0aGlzLnRpbWVvdXRJZD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe2kuZXhlY3V0ZSgpfSksdGhpcy50aW1lb3V0KX1yZXR1cm4gdC5wcm90b3R5cGUuZXhlY3V0ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7VHQudHJ5VG9FeGVjdXRlKHRoaXMudGFza05hbWUsKGZ1bmN0aW9uKCl7dC50YXNrKCl9KSkoKX0sdC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkKX0sdH0oKSxMZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0LGUscil7cmV0dXJuIG5ldyBNZSh0LGUscil9LHR9KCk7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1baSgpXTtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50JiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCksZG9jdW1lbnQuYm9keSYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHQsZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQsZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQpLE1hdGgubWF4LmFwcGx5KE1hdGgsdCl9ZnVuY3Rpb24gcigpe3JldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGh9ZnVuY3Rpb24gaSgpe3JldHVybiB3aW5kb3cuaW5uZXJIZWlnaHR9ZnVuY3Rpb24gbigpe3JldHVybiB3aW5kb3cuaW5uZXJXaWR0aH1mdW5jdGlvbiBvKCl7cmV0dXJuIHNjcmVlbi53aWR0aH1mdW5jdGlvbiBzKCl7cmV0dXJuIHNjcmVlbi5oZWlnaHR9dC5kb2N1bWVudEhlaWdodD1lLHQuZG9jdW1lbnRXaWR0aD1yLHQud2luZG93SGVpZ2h0PWksdC53aW5kb3dXaWR0aD1uLHQuc2NyZWVuV2lkdGg9byx0LnNjcmVlbkhlaWdodD1zLHQud2luZG93T2Zmc2V0WD1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cucGFnZVhPZmZzZXR9LHQud2luZG93T2Zmc2V0WT1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cucGFnZVlPZmZzZXR9LHQuZ2V0UmVxdWVzdFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXtyZXR1cm57ZHc6IiIrcigpLGRoOiIiK2UoKSx3dzoiIituKCksd2g6IiIraSgpLHN3OiIiK28oKSxzaDoiIitzKCl9fX0odGV8fCh0ZT17fSkpO3ZhciBEZT1mdW5jdGlvbih0LGUscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLGkpO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKG49dFthXSkmJihzPShvPDM/bihzKTpvPjM/bihlLHIscyk6bihlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSx4ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt2YXIgcj10aGlzO3RoaXMubG9jYXRpb249dCx0aGlzLnBpaT1lLHRoaXMuZXZlbnRIYW5kbGVycz1be2JvdW5kRWxlbWVudDp3aW5kb3csdHlwZToicmVzaXplIixsaXN0ZW5lcjpmdW5jdGlvbigpe3JldHVybiByLnJlc2l6ZUxpc3RlbmVyKCl9fSx7Ym91bmRFbGVtZW50OndpbmRvdyx0eXBlOiJoYXNoY2hhbmdlIixsaXN0ZW5lcjpmdW5jdGlvbigpe3JldHVybiByLmhhc2hDaGFuZ2VMaXN0ZW5lcigpfX0se2JvdW5kRWxlbWVudDp3aW5kb3csdHlwZToibW91c2Vtb3ZlIixsaXN0ZW5lcjpmdW5jdGlvbih0KXtyZXR1cm4gci5tb3VzZU1vdmVMaXN0ZW5lcih0KX19LHtib3VuZEVsZW1lbnQ6ZG9jdW1lbnQsdHlwZToidmlzaWJpbGl0eWNoYW5nZSIsbGlzdGVuZXI6ZnVuY3Rpb24oKXtyZXR1cm4gci52aXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXIoKX19XX1yZXR1cm4gdC5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXt0aGlzLm9uRXZlbnRDYWxsYmFjaz1mdW5jdGlvbihlKXtlLmRhdGU9cS5ub3coKSx0KGUpfX0sdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmJpbmRIYW5kbGVycygpLHRoaXMudHJpZ2dlckluaXRpYWxFdmVudHMoKX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMudW5iaW5kSGFuZGxlcnMoKX0sdC5wcm90b3R5cGUuYmluZEhhbmRsZXJzPWZ1bmN0aW9uKCl7Y3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuZXZlbnRIYW5kbGVycywoZnVuY3Rpb24odCl7cmV0dXJuIFp0KHQpfSkpfSx0LnByb3RvdHlwZS51bmJpbmRIYW5kbGVycz1mdW5jdGlvbigpe2NzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmV2ZW50SGFuZGxlcnMsKGZ1bmN0aW9uKHQpe3JldHVybiAkdCh0KX0pKX0sdC5wcm90b3R5cGUudHJpZ2dlckluaXRpYWxFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLnJlc2l6ZUxpc3RlbmVyKCksdGhpcy5oYXNoQ2hhbmdlTGlzdGVuZXIoKX0sdC5wcm90b3R5cGUucmVzaXplTGlzdGVuZXI9ZnVuY3Rpb24oKXt0aGlzLm9uRXZlbnRDYWxsYmFjayh7dHlwZTpHdC5SRVNJWkUsYXJnczpbdGUud2luZG93V2lkdGgoKSx0ZS53aW5kb3dIZWlnaHQoKV19KX0sdC5wcm90b3R5cGUuaGFzaENoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKCl7dGhpcy5vbkV2ZW50Q2FsbGJhY2soe3R5cGU6R3QuSEFTSF9DSEFOR0UsYXJnczpbdGhpcy5waWkuYW5vbnltaXplKHRoaXMubG9jYXRpb24uaHJlZildfSl9LHQucHJvdG90eXBlLnZpc2liaWxpdHlDaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbigpe3RoaXMub25FdmVudENhbGxiYWNrKHt0eXBlOkd0LlZJU0lCSUxJVFlfQ0hBTkdFLGFyZ3M6W2RvY3VtZW50LnZpc2liaWxpdHlTdGF0ZV19KX0sdC5wcm90b3R5cGUubW91c2VNb3ZlTGlzdGVuZXI9ZnVuY3Rpb24odCl7dGhpcy5vbkV2ZW50Q2FsbGJhY2soe3R5cGU6R3QuTU9VU0VfTU9WRSxhcmdzOlt0LmNsaWVudFgsdC5jbGllbnRZXX0pfSxEZShbQXQoInJlc2l6ZSIpXSx0LnByb3RvdHlwZSwicmVzaXplTGlzdGVuZXIiLG51bGwpLERlKFtBdCgiaGFzaENoYW5nZSIpXSx0LnByb3RvdHlwZSwiaGFzaENoYW5nZUxpc3RlbmVyIixudWxsKSxEZShbQXQoInZpc2liaWxpdHlDaGFuZ2UiKV0sdC5wcm90b3R5cGUsInZpc2liaWxpdHlDaGFuZ2VMaXN0ZW5lciIsbnVsbCksRGUoW0F0KCJtb3VzZU1vdmUiKV0sdC5wcm90b3R5cGUsIm1vdXNlTW92ZUxpc3RlbmVyIixudWxsKSx0fSgpLFZlPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCkscWU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIsaSxuKXt2YXIgbz10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG8ucmVjb3JkaW5nUGFnZUV2ZW50c1RyYWNrZXI9ZSxvLnJlY29yZGluZ011dGF0aW9uc1RyYWNrZXI9cixvLnJlY29yZGluZ0FjdGl2aXR5VHJhY2tlcj1pLG8ucmVjb3JkaW5nUmVxdWVzdD1uLG8ucmVjb3JkaW5nUmVxdWVzdER1cmluZ0luYWN0aXZpdHlDb3VudD0wLG8uaXNNdXRhdGlvblRyYWNrZXJTdG9wcGVkPSExLG99cmV0dXJuIFZlKGUsdCksZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5yZWNvcmRpbmdQYWdlRXZlbnRzVHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbigpe3QucmVjb3JkaW5nQWN0aXZpdHlUcmFja2VyLnRyYWNrQWN0aXZpdHkoKSx0LnJlY29yZGluZ1JlcXVlc3REdXJpbmdJbmFjdGl2aXR5Q291bnQ9MH0pKSx0aGlzLnJlY29yZGluZ1JlcXVlc3QuYWZ0ZXIoKGZ1bmN0aW9uKCl7dC5yZWNvcmRpbmdSZXF1ZXN0RHVyaW5nSW5hY3Rpdml0eUNvdW50Kz0xLHQuc3RvcE11dGF0aW9uVHJhY2tlcklmTmVlZGVkKCl9KSksdGhpcy5yZWNvcmRpbmdBY3Rpdml0eVRyYWNrZXIub25BY3Rpdml0eVN0b3BwZWQoKGZ1bmN0aW9uKCl7dC5zdG9wTXV0YXRpb25UcmFja2VySWZOZWVkZWQoKX0pKSx0aGlzLnJlY29yZGluZ0FjdGl2aXR5VHJhY2tlci5vbkFjdGl2aXR5UmVzdW1lZCgoZnVuY3Rpb24oKXt0LmlzTXV0YXRpb25UcmFja2VyU3RvcHBlZCYmKHQucmVjb3JkaW5nTXV0YXRpb25zVHJhY2tlci5zdGFydCgpLHQuaXNNdXRhdGlvblRyYWNrZXJTdG9wcGVkPSExKX0pKX0sZS5wcm90b3R5cGUub25TdGFydD1mdW5jdGlvbigpe3RoaXMucmVjb3JkaW5nQWN0aXZpdHlUcmFja2VyLnN0YXJ0KCl9LGUucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbigpe3RoaXMucmVjb3JkaW5nQWN0aXZpdHlUcmFja2VyLnN0b3AoKX0sZS5wcm90b3R5cGUuc3RvcE11dGF0aW9uVHJhY2tlcklmTmVlZGVkPWZ1bmN0aW9uKCl7IXRoaXMuaXNNdXRhdGlvblRyYWNrZXJTdG9wcGVkJiYhdGhpcy5yZWNvcmRpbmdBY3Rpdml0eVRyYWNrZXIuaXNVc2VyQWN0aXZlKCkmJnRoaXMucmVjb3JkaW5nUmVxdWVzdER1cmluZ0luYWN0aXZpdHlDb3VudD49MiYmKHRoaXMucmVjb3JkaW5nTXV0YXRpb25zVHJhY2tlci5zdG9wKCksdGhpcy5pc011dGF0aW9uVHJhY2tlclN0b3BwZWQ9ITApfSxlfSh1ZSksVWU9cigxKSxqZT1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MCxyPWFyZ3VtZW50cy5sZW5ndGg7ZTxyO2UrKyl0Kz1hcmd1bWVudHNbZV0ubGVuZ3RoO3ZhciBpPUFycmF5KHQpLG49MDtmb3IoZT0wO2U8cjtlKyspZm9yKHZhciBvPWFyZ3VtZW50c1tlXSxzPTAsYT1vLmxlbmd0aDtzPGE7cysrLG4rKylpW25dPW9bc107cmV0dXJuIGl9O2Z1bmN0aW9uIHplKHQpe3ZhciBlPWNzU3RyaW5nLnByb3RvdHlwZS50cmltLmNhbGwodCk7aWYoIiI9PT10KXJldHVybltdO3ZhciByLGk9KHI9ZSxjc1N0cmluZy5wcm90b3R5cGUuc3BsaXQuY2FsbChyLC9ccyguKykvKSksbj1pWzBdLG89aVsxXTtyZXR1cm4gbz8oTShuLCIsIil8fChvPWZ1bmN0aW9uKHQpe3JldHVybiBjc1N0cmluZy5wcm90b3R5cGUuc3BsaXQuY2FsbCh0LC8sKC4rKS8pWzFdfHwiIn0obykpLGplKFtCZShuKV0semUobykpKTpbQmUobildfWZ1bmN0aW9uIEJlKHQpe3JldHVybiBjc1N0cmluZy5wcm90b3R5cGUuc3BsaXQuY2FsbCh0LC8sJC8pWzBdfXZhciBGZSxIZT1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihpLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgaSl9fSgpLEdlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBIZShlLHQpLGUucHJvdG90eXBlLm9uRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5vbkV2ZW50Q2FsbGJhY2s9dH0sZS5wcm90b3R5cGUuc2VyaWFsaXplRWxlbWVudE5vZGU9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0aGlzLnNjYW5FbGVtZW50KHQpLGV9LGUucHJvdG90eXBlLmJlZm9yZVNlcmlhbGl6ZUNoaWxkcmVuPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdGhpcy5zY2FuU3R5bGVFbGVtZW50KHQsZSksZX0sZS5wcm90b3R5cGUuc2NhbkVsZW1lbnQ9ZnVuY3Rpb24odCl7dGhpcy5zY2FuRWxlbWVudEF0dHJpYnV0ZXModCl9LGUucHJvdG90eXBlLnNjYW5BdHRyaWJ1dGU9ZnVuY3Rpb24odCxlKXt0aGlzLnNjYW5FbGVtZW50QXR0cmlidXRlcyh0LGUpfSxlLnByb3RvdHlwZS5zY2FuVGV4dD1mdW5jdGlvbih0KXtwKHQpJiZjc05vZGVwYXJlbnROb2RlLmFwcGx5KHQpJiZmKGNzTm9kZXBhcmVudE5vZGUuYXBwbHkodCkpJiZ0aGlzLnNjYW5Dc3NTdHJpbmcodC5kYXRhKX0sZS5wcm90b3R5cGUuc2NhblN0eWxlRWxlbWVudD1mdW5jdGlvbih0LGUpe2lmKGYodCkpZm9yKHZhciByPTAsaT1lO3I8aS5sZW5ndGg7cisrKXt2YXIgbj1pW3JdO3AobikmJnRoaXMuc2NhbkNzc1N0cmluZyhuLmRhdGEpfX0sZS5wcm90b3R5cGUuc2NhbkVsZW1lbnRBdHRyaWJ1dGVzPWZ1bmN0aW9uKHQsZSl7dGhpcy5zY2FuQ3NzTGluayh0LGUpLHRoaXMuc2NhbkltYWdlKHQsZSksdGhpcy5zY2FuU3R5bGVBdHRyaWJ1dGUodCxlKX0sZS5wcm90b3R5cGUuc2NhbkNzc0xpbms9ZnVuY3Rpb24odCxlKXshbCh0KXx8ZSYmImhyZWYiIT09ZXx8IXQuaHJlZnx8dGhpcy5vblN0YXRpY1Jlc291cmNlVXJsKHQuaHJlZil9LGUucHJvdG90eXBlLnNjYW5JbWFnZT1mdW5jdGlvbih0LGUpe2godCkmJihlJiYic3JjIiE9PWV8fCF0LnNyY3x8dGhpcy5pc0RhdGFVcmwodC5zcmMpfHxudWxsPT09dC5nZXRBdHRyaWJ1dGUoInNyYyIpfHx0aGlzLmlzSGFzaFN0YXJ0VXJsKHQuZ2V0QXR0cmlidXRlKCJzcmMiKSl8fHRoaXMub25TdGF0aWNSZXNvdXJjZVVybCh0LnNyYyksZSYmInNyY3NldCIhPT1lfHwhdC5zcmNzZXR8fHRoaXMuc2NhblNyY3NldCh0LnNyY3NldCkpfSxlLnByb3RvdHlwZS5zY2FuU3R5bGVBdHRyaWJ1dGU9ZnVuY3Rpb24odCxlKXtpZigoIWV8fCJzdHlsZSI9PT1lKSYmdC5oYXNBdHRyaWJ1dGUoInN0eWxlIikpe3ZhciByPXQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpO2lmKCJzdHJpbmciIT10eXBlb2Ygcil0aHJvdyBuZXcgRXJyb3IoIlVuZXhwZWN0ZWQgc3R5bGU6ICIrdC5vdXRlckhUTUwpO3RoaXMuc2NhbkNzc1N0cmluZyhyKX19LGUucHJvdG90eXBlLmlzSGFzaFN0YXJ0VXJsPWZ1bmN0aW9uKHQpe3JldHVybiBOKHQsIiMiKX0sZS5wcm90b3R5cGUuaXNEYXRhVXJsPWZ1bmN0aW9uKHQpe3JldHVybiBOKHQsImRhdGE6Iil9LGUucHJvdG90eXBlLnNjYW5Dc3NTdHJpbmc9ZnVuY3Rpb24odCl7dGhpcy5wcm9jZXNzUmF3VXJscyhPYmplY3QoVWUuZXh0cmFjdEZyb20pKHQpKX0sZS5wcm90b3R5cGUuc2NhblNyY3NldD1mdW5jdGlvbih0KXt0aGlzLnByb2Nlc3NSYXdVcmxzKHplKHQpKX0sZS5wcm90b3R5cGUucHJvY2Vzc1Jhd1VybHM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGNzQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKHQsKGZ1bmN0aW9uKHQpe3JldHVybiFlLmlzRGF0YVVybCh0KX0pKSwoZnVuY3Rpb24odCl7cmV0dXJuIWUuaXNIYXNoU3RhcnRVcmwodCl9KSksKGZ1bmN0aW9uKHQpe3JldHVybiBpdCh0KX0pKSwoZnVuY3Rpb24odCl7cmV0dXJuIGUub25TdGF0aWNSZXNvdXJjZVVybCh0KX0pKX0sZS5wcm90b3R5cGUub25TdGF0aWNSZXNvdXJjZVVybD1mdW5jdGlvbih0KXt0aGlzLm9uRXZlbnRDYWxsYmFjayh7ZGF0ZTpxLm5vdygpLHR5cGU6R3QuU1RBVElDX1JFU09VUkNFX1VSTCxhcmdzOlt0XX0pfSxlfShnZSk7IWZ1bmN0aW9uKHQpe3QuUkVRVUVTVF9TVEFSVD0icmVxdWVzdFN0YXJ0Iix0LkRPTV9JTlRFUkFDVElWRT0iZG9tSW50ZXJhY3RpdmUifShGZXx8KEZlPXt9KSk7dmFyIFdlLFhlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLndpbmRvd1BlcmZvcm1hbmNlPXQucGVyZm9ybWFuY2V9cmV0dXJuIHQucHJvdG90eXBlLm9uRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5vbkV2ZW50Q2FsbGJhY2s9dH0sdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmFyZVRpbWluZ3NBdmFpbGFibGUoKSYmdGhpcy5yZWNvcmRQZXJmb3JtYW5jZVRpbWluZ3MoKX0sdC5wcm90b3R5cGUucmVjb3JkUGVyZm9ybWFuY2VUaW1pbmdzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRQZXJmb3JtYW5jZVRpbWluZ3MoKTt0aGlzLm9uRXZlbnRDYWxsYmFjayh7YXJnczp0LGRhdGU6cS5ub3coKSx0eXBlOkd0LlBFUkZPUk1BTkNFX1RJTUlOR1N9KX0sdC5wcm90b3R5cGUuYXJlVGltaW5nc0F2YWlsYWJsZT1mdW5jdGlvbigpe3JldHVybiEoIXRoaXMud2luZG93UGVyZm9ybWFuY2V8fCF0aGlzLndpbmRvd1BlcmZvcm1hbmNlLnRpbWluZyl9LHQucHJvdG90eXBlLmdldFBlcmZvcm1hbmNlVGltaW5ncz1mdW5jdGlvbigpe3JldHVyblt7cGVyZm9ybWFuY2VUaW1pbmc6RmUuUkVRVUVTVF9TVEFSVCx0aW1lc3RhbXA6dGhpcy53aW5kb3dQZXJmb3JtYW5jZS50aW1pbmcucmVxdWVzdFN0YXJ0fSx7cGVyZm9ybWFuY2VUaW1pbmc6RmUuRE9NX0lOVEVSQUNUSVZFLHRpbWVzdGFtcDp0aGlzLndpbmRvd1BlcmZvcm1hbmNlLnRpbWluZy5kb21JbnRlcmFjdGl2ZX1dfSx0fSgpLFllPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksSmU9ZnVuY3Rpb24odCxlLHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP2U6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZSh0LGUscixpKTtlbHNlIGZvcih2YXIgYT10Lmxlbmd0aC0xO2E+PTA7YS0tKShuPXRbYV0pJiYocz0obzwzP24ocyk6bz4zP24oZSxyLHMpOm4oZSxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIscyksc30sS2U9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIpe3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5tb25rZXlQYXRjaGVyPWUsaS5ub2RlSWRlbnRpZmllcj1yLGl9cmV0dXJuIFllKGUsdCksZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuaW5pdEludGVyY2VwdG9ycygpLHRoaXMuaW5pdFN1YnNjcmliZXJzKCksdGhpcy5pbml0TXV0YXRpb25PYnNlcnZlcigpfSxlLnByb3RvdHlwZS5pbml0TXV0YXRpb25PYnNlcnZlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5vYnNlcnZlcj1uZXcgTXV0YXRpb25PYnNlcnZlcigoZnVuY3Rpb24oZSl7dC5oYW5kbGVNdXRhdGlvbnMoZSl9KSl9LGUucHJvdG90eXBlLmluaXRJbnRlcmNlcHRvcnM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuc3VwcG9ydEF0dGFjaFNoYWRvdygpJiYodGhpcy5hdHRhY2hTaGFkb3dJbnRlcmNlcHRvcj10aGlzLm1vbmtleVBhdGNoZXIuY3JlYXRlU3luY0Z1bmN0aW9uSW50ZXJjZXB0b3Ioe3RhcmdldDpFbGVtZW50LnByb3RvdHlwZSxtZXRob2ROYW1lOiJhdHRhY2hTaGFkb3ciLGhvb2s6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5jb250ZXh0LGk9ZS5yZXN1bHQ7cmV0dXJuIHQuaGFuZGxlQXR0YWNoU2hhZG93KHIsaSl9fSkpLHRoaXMuc3VwcG9ydENyZWF0ZVNoYWRvd1Jvb3QoKSYmKHRoaXMuY3JlYXRlU2hhZG93Um9vdEludGVyY2VwdG9yPXRoaXMubW9ua2V5UGF0Y2hlci5jcmVhdGVTeW5jRnVuY3Rpb25JbnRlcmNlcHRvcih7dGFyZ2V0OkVsZW1lbnQucHJvdG90eXBlLG1ldGhvZE5hbWU6ImNyZWF0ZVNoYWRvd1Jvb3QiLGhvb2s6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5jb250ZXh0LGk9ZS5yZXN1bHQ7cmV0dXJuIHQuaGFuZGxlQXR0YWNoU2hhZG93KHIsaSl9fSkpfSxlLnByb3RvdHlwZS5pbml0U3Vic2NyaWJlcnM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMubm9kZUlkZW50aWZpZXIub25JZGVudGlmaWVyQWRkZWQoKGZ1bmN0aW9uKGUpe3YoZSkmJnQub2JzZXJ2ZShlKX0pKX0sZS5wcm90b3R5cGUub25DaGlsZExpc3RNdXRhdGlvbj1mdW5jdGlvbih0KXt0aGlzLmNoaWxkTGlzdE11dGF0aW9uQ2FsbGJhY2s9dH0sZS5wcm90b3R5cGUub25DaGFyYWN0ZXJEYXRhTXV0YXRpb249ZnVuY3Rpb24odCl7dGhpcy5jaGFyYWN0ZXJEYXRhTXV0YXRpb25DYWxsYmFjaz10fSxlLnByb3RvdHlwZS5vbkF0dHJpYnV0ZXNNdXRhdGlvbj1mdW5jdGlvbih0KXt0aGlzLmF0dHJpYnV0ZXNNdXRhdGlvbkNhbGxiYWNrPXR9LGUucHJvdG90eXBlLm9uQXR0YWNoU2hhZG93TXV0YXRpb249ZnVuY3Rpb24odCl7dGhpcy5hdHRhY2hTaGFkb3dNdXRhdGlvbkNhbGxiYWNrPXR9LGUucHJvdG90eXBlLm9ic2VydmU9ZnVuY3Rpb24odCl7aWYoIXRoaXMuaXNTdGFydGVkKXRocm93IG5ldyBFcnJvcigiTXV0YXRpb25PYnNlcnZlclNlcnZpY2Ugbm90IHN0YXJ0ZWQiKTt0aGlzLm9ic2VydmVyLm9ic2VydmUodCx7c3VidHJlZTohMCxhdHRyaWJ1dGVzOiEwLGNoaWxkTGlzdDohMCxjaGFyYWN0ZXJEYXRhOiEwLGF0dHJpYnV0ZU9sZFZhbHVlOiEwLGNoYXJhY3RlckRhdGFPbGRWYWx1ZTohMH0pfSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5hdHRhY2hTaGFkb3dJbnRlcmNlcHRvciYmdGhpcy5hdHRhY2hTaGFkb3dJbnRlcmNlcHRvci5hY3RpdmF0ZSgpLHRoaXMuY3JlYXRlU2hhZG93Um9vdEludGVyY2VwdG9yJiZ0aGlzLmNyZWF0ZVNoYWRvd1Jvb3RJbnRlcmNlcHRvci5hY3RpdmF0ZSgpfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXt0aGlzLmF0dGFjaFNoYWRvd0ludGVyY2VwdG9yJiZ0aGlzLmF0dGFjaFNoYWRvd0ludGVyY2VwdG9yLmRlYWN0aXZhdGUoKSx0aGlzLmNyZWF0ZVNoYWRvd1Jvb3RJbnRlcmNlcHRvciYmdGhpcy5jcmVhdGVTaGFkb3dSb290SW50ZXJjZXB0b3IuZGVhY3RpdmF0ZSgpLHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpfSxlLnByb3RvdHlwZS5zdXBwb3J0QXR0YWNoU2hhZG93PWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5FbGVtZW50JiZ3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUmJiJmdW5jdGlvbiI9PXR5cGVvZiB3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuYXR0YWNoU2hhZG93fSxlLnByb3RvdHlwZS5zdXBwb3J0Q3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cuRWxlbWVudCYmd2luZG93LkVsZW1lbnQucHJvdG90eXBlJiYiZnVuY3Rpb24iPT10eXBlb2Ygd2luZG93LkVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3R9LGUucHJvdG90eXBlLmhhbmRsZU11dGF0aW9ucz1mdW5jdGlvbih0KXtmb3IodmFyIGU9cS5ub3coKSxyPTA7cjx0Lmxlbmd0aDtyKz0xKXt2YXIgaT10W3JdO3N3aXRjaChpLmRhdGU9ZSxpLnR5cGUpe2Nhc2UiYXR0cmlidXRlcyI6dGhpcy5hdHRyaWJ1dGVzTXV0YXRpb25DYWxsYmFjayhpKTticmVhaztjYXNlImNoYXJhY3RlckRhdGEiOnRoaXMuY2hhcmFjdGVyRGF0YU11dGF0aW9uQ2FsbGJhY2soaSk7YnJlYWs7Y2FzZSJjaGlsZExpc3QiOnRoaXMuY2hpbGRMaXN0TXV0YXRpb25DYWxsYmFjayhpKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigibXV0YXRpb24gdHlwZSBpcyBub3Qgc3VwcG9ydGVkIil9fX0sZS5wcm90b3R5cGUuaGFuZGxlQXR0YWNoU2hhZG93PWZ1bmN0aW9uKHQsZSl7dGhpcy5hdHRhY2hTaGFkb3dNdXRhdGlvbkNhbGxiYWNrKHtzaGFkb3dSb290OmUsZGF0ZTpxLm5vdygpLHRhcmdldDp0fSl9LEplKFtBdCgibXV0YXRpb25zIildLGUucHJvdG90eXBlLCJoYW5kbGVNdXRhdGlvbnMiLG51bGwpLGV9KHVlKSxRZT1mdW5jdGlvbigpe3JldHVybihRZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbiBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSYmKHRbbl09ZVtuXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LFplPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wLHI9YXJndW1lbnRzLmxlbmd0aDtlPHI7ZSsrKXQrPWFyZ3VtZW50c1tlXS5sZW5ndGg7dmFyIGk9QXJyYXkodCksbj0wO2ZvcihlPTA7ZTxyO2UrKylmb3IodmFyIG89YXJndW1lbnRzW2VdLHM9MCxhPW8ubGVuZ3RoO3M8YTtzKyssbisrKWlbbl09b1tzXTtyZXR1cm4gaX07IWZ1bmN0aW9uKHQpe3RbdC5XZWJFbGVtZW50PTBdPSJXZWJFbGVtZW50Iix0W3QuTW9iaWxlVmlldz0xXT0iTW9iaWxlVmlldyIsdFt0LldlYlZpZXdDb250YWluZXI9Ml09IldlYlZpZXdDb250YWluZXIifShXZXx8KFdlPXt9KSk7dmFyICRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnByb2Nlc3NvcnM9dH1yZXR1cm4gdC5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciByPVFlKHt9LGUpLGk9dC5ub2RlVHlwZSxuPWNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMucHJvY2Vzc29ycywoZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5iZWZvcmVTZXJpYWxpemUodCxyKX0pLHQpO3N3aXRjaChpKXtjYXNlIE5vZGUuRUxFTUVOVF9OT0RFOnJldHVybiB0aGlzLnNlcmlhbGl6ZUVsZW1lbnROb2RlKG4scik7Y2FzZSBOb2RlLlRFWFRfTk9ERTpyZXR1cm4gdGhpcy5zZXJpYWxpemVUZXh0Tm9kZShuLHIpO2Nhc2UgTm9kZS5DT01NRU5UX05PREU6cmV0dXJuIHRoaXMuc2VyaWFsaXplQ29tbWVudE5vZGUobixyKTtjYXNlIE5vZGUuRE9DVU1FTlRfVFlQRV9OT0RFOnJldHVybiB0aGlzLnNlcmlhbGl6ZURvY3R5cGVOb2RlKG4scik7Y2FzZSBOb2RlLkRPQ1VNRU5UX05PREU6cmV0dXJuIHRoaXMuc2VyaWFsaXplRG9jdW1lbnROb2RlKG4scik7Y2FzZSBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREU6cmV0dXJuIHRoaXMuc2VyaWFsaXplRG9jdW1lbnRGcmFnbWVudE5vZGUobixyKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcigic2VyaWFsaXphdGlvbiBpcyBub3Qgc3VwcG9ydGVkIChub2RlVHlwZTogIitpKyIpIil9fSx0LnByb3RvdHlwZS5zZXJpYWxpemVFbGVtZW50Tm9kZT1mdW5jdGlvbih0LGUpe3ZhciByLGk9Y3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcy5wcm9jZXNzb3JzLChmdW5jdGlvbihyLGkpe3ZhciBuPWkuc2VyaWFsaXplTm9kZSh0LHIsZSk7cmV0dXJuIGkuc2VyaWFsaXplRWxlbWVudE5vZGUodCxuLGUpfSkse2F0dHJpYnV0ZXM6W119KTsocj1jc0FycmF5LnByb3RvdHlwZS5wdXNoKS5jYWxsLmFwcGx5KHIsWmUoW2kuYXR0cmlidXRlc10sdGhpcy5zZXJpYWxpemVBdHRyaWJ1dGVzKHQsZSkpKTt2YXIgbj10LnNoYWRvd1Jvb3Q7cmV0dXJuIG4mJihpLnNoYWRvd1Jvb3Q9dGhpcy5zZXJpYWxpemVTaGFkb3dSb290Tm9kZShuLGUpKSxpLmNoaWxkcmVuPXRoaXMuc2VyaWFsaXplQ2hpbGRyZW4odCxlKSxpfSx0LnByb3RvdHlwZS5zZXJpYWxpemVBdHRyaWJ1dGVzPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcyxpPVModC5hdHRyaWJ1dGVzKTtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoY3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcy5wcm9jZXNzb3JzLChmdW5jdGlvbihyLGkpe3JldHVybiBpLmJlZm9yZVNlcmlhbGl6ZUF0dHJpYnV0ZXModCxyLGUpfSksaSksKGZ1bmN0aW9uKGkpe3JldHVybiByLnNlcmlhbGl6ZUF0dHJpYnV0ZSh0LGksZSl9KSl9LHQucHJvdG90eXBlLnNlcmlhbGl6ZUF0dHJpYnV0ZT1mdW5jdGlvbih0LGUscil7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMucHJvY2Vzc29ycywoZnVuY3Rpb24oaSxuKXtyZXR1cm4gbi5zZXJpYWxpemVBdHRyaWJ1dGUodCxlLGkscil9KSx7fSl9LHQucHJvdG90eXBlLnNlcmlhbGl6ZUNoaWxkcmVuPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcyxpPVMoY3NOb2RlY2hpbGROb2Rlcy5hcHBseSh0KSk7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMucHJvY2Vzc29ycywoZnVuY3Rpb24ocixpKXtyZXR1cm4gaS5iZWZvcmVTZXJpYWxpemVDaGlsZHJlbih0LHIsZSl9KSxpKSwoZnVuY3Rpb24odCl7cmV0dXJuIHIuc2VyaWFsaXplKHQsZSl9KSl9LHQucHJvdG90eXBlLnNlcmlhbGl6ZVRleHROb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMucHJvY2Vzc29ycywoZnVuY3Rpb24ocixpKXt2YXIgbj1pLnNlcmlhbGl6ZU5vZGUodCxyLGUpO3JldHVybiBpLnNlcmlhbGl6ZVRleHROb2RlKHQsbixlKX0pLHt9KX0sdC5wcm90b3R5cGUuc2VyaWFsaXplQ29tbWVudE5vZGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcy5wcm9jZXNzb3JzLChmdW5jdGlvbihyLGkpe3ZhciBuPWkuc2VyaWFsaXplTm9kZSh0LHIsZSk7cmV0dXJuIGkuc2VyaWFsaXplQ29tbWVudE5vZGUodCxuLGUpfSkse30pfSx0LnByb3RvdHlwZS5zZXJpYWxpemVEb2N0eXBlTm9kZT1mdW5jdGlvbih0LGUpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLnByb2Nlc3NvcnMsKGZ1bmN0aW9uKHIsaSl7dmFyIG49aS5zZXJpYWxpemVOb2RlKHQscixlKTtyZXR1cm4gaS5zZXJpYWxpemVEb2N0eXBlTm9kZSh0LG4sZSl9KSx7fSl9LHQucHJvdG90eXBlLnNlcmlhbGl6ZURvY3VtZW50Tm9kZT1mdW5jdGlvbih0LGUpe3ZhciByPWNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMucHJvY2Vzc29ycywoZnVuY3Rpb24ocixpKXt2YXIgbj1pLnNlcmlhbGl6ZU5vZGUodCxyLGUpO3JldHVybiBpLnNlcmlhbGl6ZURvY3VtZW50Tm9kZSh0LG4sZSl9KSx7fSk7cmV0dXJuIHIuY2hpbGRyZW49dGhpcy5zZXJpYWxpemVDaGlsZHJlbih0LGUpLHJ9LHQucHJvdG90eXBlLnNlcmlhbGl6ZVNoYWRvd1Jvb3ROb2RlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9Y3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcy5wcm9jZXNzb3JzLChmdW5jdGlvbihyLGkpe3ZhciBuPWkuc2VyaWFsaXplTm9kZSh0LHIsZSk7cmV0dXJuIGkuc2VyaWFsaXplU2hhZG93Um9vdE5vZGUodCxuLGUpfSkse30pO3JldHVybiByLmNoaWxkcmVuPXRoaXMuc2VyaWFsaXplQ2hpbGRyZW4odCxlKSxyfSx0LnByb3RvdHlwZS5zZXJpYWxpemVEb2N1bWVudEZyYWdtZW50Tm9kZT1mdW5jdGlvbih0LGUpe2lmKHQubW9kZSlyZXR1cm4gdGhpcy5zZXJpYWxpemVTaGFkb3dSb290Tm9kZSh0LGUpO3Rocm93IG5ldyBFcnJvcigiTm90IGltcGxlbWVudGVkIHlldC4iKX0sdH0oKSx0cj1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihpLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgaSl9fSgpLGVyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiB0cihlLHQpLGUucHJvdG90eXBlLmJlZm9yZVNlcmlhbGl6ZUNoaWxkcmVuPWZ1bmN0aW9uKHQsZSl7aWYoZih0KSl7dmFyIHI9dGhpcy5jc3NSdWxlcyh0KTt0aGlzLmlzRW1wdHlTdHlsZUVsZW1lbnRXaXRoUnVsZXModCxyKSYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKGUsdGhpcy5jcmVhdGVUZXh0Tm9kZUZyb21SdWxlcyhyKSl9cmV0dXJuIGV9LGUucHJvdG90eXBlLmNzc1J1bGVzPWZ1bmN0aW9uKHQpe3RyeXt2YXIgZT10LnNoZWV0O2lmKCFlKXJldHVybjtyZXR1cm4gZS5jc3NSdWxlc3x8ZS5ydWxlc31jYXRjaCh0KXtpZigiU2VjdXJpdHlFcnJvciIhPT10Lm5hbWUmJiJJbnZhbGlkQWNjZXNzRXJyb3IiIT09dC5uYW1lKXRocm93IHQ7cmV0dXJufX0sZS5wcm90b3R5cGUuaXNFbXB0eVN0eWxlRWxlbWVudFdpdGhSdWxlcz1mdW5jdGlvbih0LGUpe3ZhciByPXQudGV4dENvbnRlbnR8fCIiO3JldHVybi9eXHMqJC8udGVzdChyKSYmdm9pZCAwIT09ZSYmMCE9PWUubGVuZ3RofSxlLnByb3RvdHlwZS5jcmVhdGVUZXh0Tm9kZUZyb21SdWxlcz1mdW5jdGlvbih0KXt2YXIgZT1jc0FycmF5LnByb3RvdHlwZS5qb2luLmNhbGwoY3NBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoUyh0KSwoZnVuY3Rpb24odCl7cmV0dXJuIHQuY3NzVGV4dH0pKSwiIik7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGUpfSxlLnByb3RvdHlwZS5zZXJpYWxpemVOb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUubm9kZVR5cGU9dC5ub2RlVHlwZSxlLmZvcm1hdD1XZS5XZWJFbGVtZW50LGV9LGUucHJvdG90eXBlLnNlcmlhbGl6ZUVsZW1lbnROb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUubG9jYWxOYW1lPXQubG9jYWxOYW1lLGUubmFtZXNwYWNlVVJJPXQubmFtZXNwYWNlVVJJLGV9LGUucHJvdG90eXBlLnNlcmlhbGl6ZUF0dHJpYnV0ZT1mdW5jdGlvbih0LGUscil7cmV0dXJuIHIubmFtZT1lLm5hbWUsci52YWx1ZT1lLnZhbHVlLHIubmFtZXNwYWNlVVJJPW51bGwhPT1lLm5hbWVzcGFjZVVSST9lLm5hbWVzcGFjZVVSSToiIixyfSxlLnByb3RvdHlwZS5zZXJpYWxpemVUZXh0Tm9kZT1mdW5jdGlvbih0LGUpe3JldHVybiBlLmRhdGE9dC5kYXRhLGV9LGUucHJvdG90eXBlLnNlcmlhbGl6ZUNvbW1lbnROb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZGF0YT10LmRhdGEsZX0sZS5wcm90b3R5cGUuc2VyaWFsaXplRG9jdHlwZU5vZGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5uYW1lPXQubmFtZSxlLnB1YmxpY0lkPXQucHVibGljSWQsZS5zeXN0ZW1JZD10LnN5c3RlbUlkLGV9LGUucHJvdG90eXBlLnNlcmlhbGl6ZURvY3VtZW50Tm9kZT1mdW5jdGlvbih0LHIpe3JldHVybiByLmJhc2VVUkk9ZS5nZXRCYXNlVVJJKHQpLHJ9LGUucHJvdG90eXBlLnNlcmlhbGl6ZVNoYWRvd1Jvb3ROb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUubW9kZT10Lm1vZGUsZX0sZS5nZXRCYXNlVVJJPWZ1bmN0aW9uKHQpe3ZhciBlPXQuYmFzZVVSSTtpZihudWxsPT1lKXt2YXIgcj10LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJiYXNlIik7ZT0wIT09ci5sZW5ndGg/clswXS5ocmVmOnQuVVJMfXJldHVybiBlfSxlfShnZSkscnI9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnByb2Nlc3NvcnM9dH10LnByb3RvdHlwZS51bnNlcmlhbGl6ZT1mdW5jdGlvbih0KXtpZih2b2lkIDAhPT10LmZvcm1hdCYmdC5mb3JtYXQhPT1XZS5XZWJFbGVtZW50KXRocm93IG5ldyBFcnJvcigidW5zZXJpYWxpemF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgKGZvcm1hdDogIit0LmZvcm1hdCsiKSIpO3ZhciBlPXQubm9kZVR5cGU7c3dpdGNoKGUpe2Nhc2UgTm9kZS5FTEVNRU5UX05PREU6cmV0dXJuIHRoaXMudW5zZXJpYWxpemVFbGVtZW50Tm9kZSh0KTtjYXNlIE5vZGUuVEVYVF9OT0RFOnJldHVybiB0aGlzLnVuc2VyaWFsaXplVGV4dE5vZGUodCk7Y2FzZSBOb2RlLkNPTU1FTlRfTk9ERTpyZXR1cm4gdGhpcy51bnNlcmlhbGl6ZUNvbW1lbnROb2RlKHQpO2Nhc2UgTm9kZS5ET0NVTUVOVF9UWVBFX05PREU6cmV0dXJuIHRoaXMudW5zZXJpYWxpemVEb2N0eXBlTm9kZSh0KTtjYXNlIE5vZGUuRE9DVU1FTlRfTk9ERTpyZXR1cm4gdGhpcy51bnNlcmlhbGl6ZURvY3VtZW50Tm9kZSh0KTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcigidW5zZXJpYWxpemF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgKG5vZGVUeXBlOiAiK2UrIikiKX19LHQucHJvdG90eXBlLnVuc2VyaWFsaXplU2hhZG93Um9vdD1mdW5jdGlvbih0LGUpe3ZhciByPWNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMucHJvY2Vzc29ycywoZnVuY3Rpb24ocixpKXt2YXIgbj1pLnVuc2VyaWFsaXplU2hhZG93Um9vdCh0LGUscik7cmV0dXJuIGkudW5zZXJpYWxpemVOb2RlKGUsbil9KSxudWxsKTtyZXR1cm4gdGhpcy51bnNlcmlhbGl6ZUNoaWxkcmVuKHIsZS5jaGlsZHJlbikscn0sdC5wcm90b3R5cGUudW5zZXJpYWxpemVFbGVtZW50Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT1jc0FycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLnByb2Nlc3NvcnMsKGZ1bmN0aW9uKGUscil7dmFyIGk9ci51bnNlcmlhbGl6ZUVsZW1lbnROb2RlKHQsZSk7cmV0dXJuIHIudW5zZXJpYWxpemVOb2RlKHQsaSl9KSxudWxsKTtyZXR1cm4gdGhpcy51bnNlcmlhbGl6ZUF0dHJpYnV0ZXMoZSx0LmF0dHJpYnV0ZXMpLHRoaXMudW5zZXJpYWxpemVDaGlsZHJlbihlLHQuY2hpbGRyZW4pLHQuc2hhZG93Um9vdCYmdGhpcy51bnNlcmlhbGl6ZVNoYWRvd1Jvb3QoZSx0LnNoYWRvd1Jvb3QpLGV9LHQucHJvdG90eXBlLnVuc2VyaWFsaXplQ2hpbGRyZW49ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzO2NzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChTKGUpLChmdW5jdGlvbihlKXtyZXR1cm4gdC5hcHBlbmRDaGlsZChyLnVuc2VyaWFsaXplKGUpKX0pKX0sdC5wcm90b3R5cGUudW5zZXJpYWxpemVBdHRyaWJ1dGVzPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcztjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoUyhlKSwoZnVuY3Rpb24oZSl7dHJ5e3IudW5zZXJpYWxpemVBdHRyaWJ1dGUodCxlKX1jYXRjaCh0KXt9fSkpfSx0LnByb3RvdHlwZS51bnNlcmlhbGl6ZUF0dHJpYnV0ZT1mdW5jdGlvbih0LGUpe2NzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMucHJvY2Vzc29ycywoZnVuY3Rpb24odCxyKXtyZXR1cm4gci51bnNlcmlhbGl6ZUF0dHJpYnV0ZShlLHQpfSksdCl9LHQucHJvdG90eXBlLnVuc2VyaWFsaXplVGV4dE5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMucHJvY2Vzc29ycywoZnVuY3Rpb24oZSxyKXt2YXIgaT1yLnVuc2VyaWFsaXplVGV4dE5vZGUodCxlKTtyZXR1cm4gci51bnNlcmlhbGl6ZU5vZGUodCxpKX0pLG51bGwpfSx0LnByb3RvdHlwZS51bnNlcmlhbGl6ZUNvbW1lbnROb2RlPWZ1bmN0aW9uKHQpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLnByb2Nlc3NvcnMsKGZ1bmN0aW9uKGUscil7dmFyIGk9ci51bnNlcmlhbGl6ZUNvbW1lbnROb2RlKHQsZSk7cmV0dXJuIHIudW5zZXJpYWxpemVOb2RlKHQsaSl9KSxudWxsKX0sdC5wcm90b3R5cGUudW5zZXJpYWxpemVEb2N0eXBlTm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcy5wcm9jZXNzb3JzLChmdW5jdGlvbihlLHIpe3ZhciBpPXIudW5zZXJpYWxpemVEb2N0eXBlTm9kZSh0LGUpO3JldHVybiByLnVuc2VyaWFsaXplTm9kZSh0LGkpfSksbnVsbCl9LHQucHJvdG90eXBlLnVuc2VyaWFsaXplRG9jdW1lbnROb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMscj1jc0FycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLnByb2Nlc3NvcnMsKGZ1bmN0aW9uKGUscil7dmFyIGk9ci51bnNlcmlhbGl6ZURvY3VtZW50Tm9kZSh0LGUpO3JldHVybiByLnVuc2VyaWFsaXplTm9kZSh0LGkpfSksbnVsbCk7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChTKHQuY2hpbGRyZW4pLChmdW5jdGlvbih0KXtyZXR1cm4gci5hcHBlbmRDaGlsZChlLnVuc2VyaWFsaXplKHQpKX0pKSxyfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLnVuc2VyaWFsaXplU2hhZG93Um9vdD1mdW5jdGlvbih0LGUscil7cmV0dXJuIHJ9LHQucHJvdG90eXBlLnVuc2VyaWFsaXplTm9kZT1mdW5jdGlvbih0LGUpe3JldHVybiBlfSx0LnByb3RvdHlwZS51bnNlcmlhbGl6ZUVsZW1lbnROb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV9LHQucHJvdG90eXBlLnVuc2VyaWFsaXplQXR0cmlidXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV9LHQucHJvdG90eXBlLnVuc2VyaWFsaXplVGV4dE5vZGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZX0sdC5wcm90b3R5cGUudW5zZXJpYWxpemVDb21tZW50Tm9kZT1mdW5jdGlvbih0LGUpe3JldHVybiBlfSx0LnByb3RvdHlwZS51bnNlcmlhbGl6ZURvY3R5cGVOb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV9LHQucHJvdG90eXBlLnVuc2VyaWFsaXplRG9jdW1lbnROb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV9LHR9KCkpLGlyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuZG9tUGFyc2VyPW5ldyBET01QYXJzZXJ9cmV0dXJuIHQucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5odG1sU2FuaXRpemVyKHQpO3JldHVybiB0aGlzLnBhcnNlSHRtbEVsZW1lbnQoIjwiK2UrIiAvPiIpfSx0LnByb3RvdHlwZS5jcmVhdGVBdHRyaWJ1dGU9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLmh0bWxTYW5pdGl6ZXIodCksaT10aGlzLnBhcnNlSHRtbEVsZW1lbnQoIjxkaXYgIityKyc9IiI+PC9kaXY+Jyksbj1pLmdldEF0dHJpYnV0ZU5vZGUocik7cmV0dXJuIGkucmVtb3ZlQXR0cmlidXRlTm9kZShuKSxuLnZhbHVlPWUsbn0sdC5wcm90b3R5cGUucGFyc2VIdG1sRWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kb21QYXJzZXIucGFyc2VGcm9tU3RyaW5nKHQsInRleHQvaHRtbCIpLmJvZHkuY2hpbGRyZW5bMF19LHQucHJvdG90eXBlLmh0bWxTYW5pdGl6ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGNzU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlLmNhbGwodCwvW1xzPD5cL1wwXS9nLCIiKX0sdH0oKSxucj1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihpLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgaSl9fSgpLG9yPShmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5kb2N1bWVudD1lLHIuZGlydHlFbGVtZW50QnVpbGRlcj1uZXcgaXIscn1ucihlLHQpLGUucHJvdG90eXBlLnVuc2VyaWFsaXplU2hhZG93Um9vdD1mdW5jdGlvbih0LGUpe3JldHVybiBlLm1vZGUsdC5hdHRhY2hTaGFkb3coe21vZGU6Im9wZW4ifSl9LGUucHJvdG90eXBlLnVuc2VyaWFsaXplRWxlbWVudE5vZGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRUYWdOYW1lKHQpLHI9dC5uYW1lc3BhY2VVUkk7dHJ5e3JldHVybiB0aGlzLmlzWGh0bWxOYW1lc3BhY2UocikmJmUuaW5kZXhPZigiOiIpPi0xP3RoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlKTp0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhyLGUpfWNhdGNoKHQpe3N3aXRjaCh0Lm5hbWUpe2Nhc2UiSW52YWxpZENoYXJhY3RlckVycm9yIjpyZXR1cm4gdGhpcy5kaXJ0eUVsZW1lbnRCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoZSk7ZGVmYXVsdDp0aHJvdyB0fX19LGUucHJvdG90eXBlLnVuc2VyaWFsaXplQXR0cmlidXRlPWZ1bmN0aW9uKHQsZSl7dHJ5e2Uuc2V0QXR0cmlidXRlTlModC5uYW1lc3BhY2VVUkksdC5uYW1lLHQudmFsdWUpfWNhdGNoKHIpe3N3aXRjaChyLm5hbWUpe2Nhc2UiTmFtZXNwYWNlRXJyb3IiOmUuc2V0QXR0cmlidXRlKHQubmFtZSx0LnZhbHVlKTticmVhaztjYXNlIkludmFsaWRDaGFyYWN0ZXJFcnJvciI6ZS5zZXRBdHRyaWJ1dGVOb2RlKHRoaXMuZGlydHlFbGVtZW50QnVpbGRlci5jcmVhdGVBdHRyaWJ1dGUodC5uYW1lLHQudmFsdWUpKTticmVhaztkZWZhdWx0OnRocm93IHJ9fXJldHVybiBlfSxlLnByb3RvdHlwZS51bnNlcmlhbGl6ZVRleHROb2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHQuZGF0YSl9LGUucHJvdG90eXBlLnVuc2VyaWFsaXplQ29tbWVudE5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZG9jdW1lbnQuY3JlYXRlQ29tbWVudCh0LmRhdGEpfSxlLnByb3RvdHlwZS51bnNlcmlhbGl6ZURvY3R5cGVOb2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50VHlwZSh0Lm5hbWUsdC5wdWJsaWNJZCx0LnN5c3RlbUlkKX0sZS5wcm90b3R5cGUudW5zZXJpYWxpemVEb2N1bWVudE5vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudChudWxsLG51bGwsbnVsbCl9LGUucHJvdG90eXBlLmlzWGh0bWxOYW1lc3BhY2U9ZnVuY3Rpb24odCl7cmV0dXJuImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPT09dH0sZS5wcm90b3R5cGUuaXNTdmdOYW1lc3BhY2U9ZnVuY3Rpb24odCl7cmV0dXJuImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj09PXR9LGUucHJvdG90eXBlLmdldFRhZ05hbWU9ZnVuY3Rpb24odCl7dmFyIGU9dCxyPWUubG9jYWxOYW1lLGk9ZS50YWdOYW1lO3JldHVybiByfHwodGhpcy5pc1N2Z05hbWVzcGFjZSh0Lm5hbWVzcGFjZVVSSSk/aTppLnRvTG93ZXJDYXNlKCkpfX0ocnIpLGZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCkpLHNyPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wLHI9YXJndW1lbnRzLmxlbmd0aDtlPHI7ZSsrKXQrPWFyZ3VtZW50c1tlXS5sZW5ndGg7dmFyIGk9QXJyYXkodCksbj0wO2ZvcihlPTA7ZTxyO2UrKylmb3IodmFyIG89YXJndW1lbnRzW2VdLHM9MCxhPW8ubGVuZ3RoO3M8YTtzKyssbisrKWlbbl09b1tzXTtyZXR1cm4gaX0sYXI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdC5jYWxsKHRoaXMsc3IoW25ldyBlcl0sZSkpfHx0aGlzfXJldHVybiBvcihlLHQpLGV9KCRlKTtmdW5jdGlvbiBjcigpe3ZhciB0LGU9KHQ9bmV3IEVycm9yKS5zdGFjaz9jc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChjc1N0cmluZy5wcm90b3R5cGUuc3BsaXQuY2FsbCh0LnN0YWNrLCJcbiIpLChmdW5jdGlvbih0KXtyZXR1cm4iRXJyb3IiIT09dCYmLTE9PT1jc1N0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGNzU3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZS5jYWxsKHQpLCJwcm9taXNlICIpJiYtMT09PWNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodCwiW25hdGl2ZSBjb2RlXSIpfSkpOltdO2lmKDA9PT1lLmxlbmd0aClyZXR1cm4iIjt2YXIgcj1mdW5jdGlvbih0KXtyZXR1cm4gdC5sZW5ndGg+MD91cih0WzBdKToiIn0oZSk7cmV0dXJuIiI9PT1yfHwwPT09KGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodCwoZnVuY3Rpb24odCl7cmV0dXJuLTE9PT1jc1N0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHQsZSl9KSl9KGUscikpLmxlbmd0aD8iIjp1cihlWzBdKX1mdW5jdGlvbiB1cih0KXt2YXIgZSxyPSIiO2U9dDt2YXIgaT0oLTEhPT1jc1N0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGUsIkAiKT9uZXcgUmVnRXhwKCJAKC4rKTooXFxkKyk6KFxcZCspJCIpOm5ldyBSZWdFeHAoIlxcKCguKyk6KFxcZCspOihcXGQrKVxcKSIpKS5leGVjKHQpO3JldHVybiBpJiYocj1pWzFdKSxyfXZhciBwcixscj1mdW5jdGlvbigpe3JldHVybihscj1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbiBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSYmKHRbbl09ZVtuXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGhyPWZ1bmN0aW9uKHQsZSxyLGkpe3JldHVybiBuZXcocnx8KHI9UHJvbWlzZSkpKChmdW5jdGlvbihuLG8pe2Z1bmN0aW9uIHModCl7dHJ5e2MoaS5uZXh0KHQpKX1jYXRjaCh0KXtvKHQpfX1mdW5jdGlvbiBhKHQpe3RyeXtjKGkudGhyb3codCkpfWNhdGNoKHQpe28odCl9fWZ1bmN0aW9uIGModCl7dmFyIGU7dC5kb25lP24odC52YWx1ZSk6KGU9dC52YWx1ZSxlIGluc3RhbmNlb2Ygcj9lOm5ldyByKChmdW5jdGlvbih0KXt0KGUpfSkpKS50aGVuKHMsYSl9YygoaT1pLmFwcGx5KHQsZXx8W10pKS5uZXh0KCkpfSkpfSxmcj1mdW5jdGlvbih0LGUpe3ZhciByLGksbixvLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmblswXSl0aHJvdyBuWzFdO3JldHVybiBuWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIG89e25leHQ6YSgwKSx0aHJvdzphKDEpLHJldHVybjphKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYob1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxvO2Z1bmN0aW9uIGEobyl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihvKXtpZihyKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO3M7KXRyeXtpZihyPTEsaSYmKG49MiZvWzBdP2kucmV0dXJuOm9bMF0/aS50aHJvd3x8KChuPWkucmV0dXJuKSYmbi5jYWxsKGkpLDApOmkubmV4dCkmJiEobj1uLmNhbGwoaSxvWzFdKSkuZG9uZSlyZXR1cm4gbjtzd2l0Y2goaT0wLG4mJihvPVsyJm9bMF0sbi52YWx1ZV0pLG9bMF0pe2Nhc2UgMDpjYXNlIDE6bj1vO2JyZWFrO2Nhc2UgNDpyZXR1cm4gcy5sYWJlbCsrLHt2YWx1ZTpvWzFdLGRvbmU6ITF9O2Nhc2UgNTpzLmxhYmVsKyssaT1vWzFdLG89WzBdO2NvbnRpbnVlO2Nhc2UgNzpvPXMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobj1zLnRyeXMsKG49bi5sZW5ndGg+MCYmbltuLmxlbmd0aC0xXSl8fDYhPT1vWzBdJiYyIT09b1swXSkpe3M9MDtjb250aW51ZX1pZigzPT09b1swXSYmKCFufHxvWzFdPm5bMF0mJm9bMV08blszXSkpe3MubGFiZWw9b1sxXTticmVha31pZig2PT09b1swXSYmcy5sYWJlbDxuWzFdKXtzLmxhYmVsPW5bMV0sbj1vO2JyZWFrfWlmKG4mJnMubGFiZWw8blsyXSl7cy5sYWJlbD1uWzJdLHMub3BzLnB1c2gobyk7YnJlYWt9blsyXSYmcy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlfW89ZS5jYWxsKHQscyl9Y2F0Y2godCl7bz1bNix0XSxpPTB9ZmluYWxseXtyPW49MH1pZig1Jm9bMF0pdGhyb3cgb1sxXTtyZXR1cm57dmFsdWU6b1swXT9vWzFdOnZvaWQgMCxkb25lOiEwfX0oW28sYV0pfX19LGRyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuZGVmYXVsdEhvb2tQcmVwYXJlQXJncz1mdW5jdGlvbih0LGUpe3JldHVybntjb250ZXh0OnQsYXJnczplfX19cmV0dXJuIHQucHJvdG90eXBlLmNvcHlGdW5jdGlvblNpZ25hdHVyZT1mdW5jdGlvbih0LGUpe3QucHJvdG90eXBlPWUucHJvdG90eXBlLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJ0b1N0cmluZyIse3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGUudG9TdHJpbmcoKX19KX0sdC5wcm90b3R5cGUuY3JlYXRlU3luY0Z1bmN0aW9uSW50ZXJjZXB0b3I9ZnVuY3Rpb24odCl7dmFyIGUscj10LnRhcmdldCxpPXQubWV0aG9kTmFtZSxuPXQuaG9vayxvPXQuaG9va1ByZXBhcmVBcmdzLHM9dm9pZCAwPT09bz90aGlzLmRlZmF1bHRIb29rUHJlcGFyZUFyZ3M6byxhPXQub3B0aW9ucztpZighKG51bGw9PT0oZT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHIsaSkpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLndyaXRhYmxlKSlyZXR1cm4gVHQud2FybigiQ2Fubm90IGludGVyY2VwdCByZWFkIG9ubHkgZnVuY3Rpb24gJyIraSsiJyBvZiBvYmplY3QgJyIrcisiJyIpLG51bGw7dmFyIGM9ITEsdT1yW2ldO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB1KXt2YXIgcD1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt2YXIgcixpPXModGhpcyx0KSxvPXUuYXBwbHkodGhpcyx0KTtjJiYoYSYmYS53aXRoQ2FsbGVyTmFtZSYmKHI9Y3IoKSksVHQudHJ5VG9FeGVjdXRlKCJTeW5jRnVuY3Rpb25JbnRlcmNlcHRvciIsKGZ1bmN0aW9uKCl7bihscihscih7cmVzdWx0Om99LGkpLHtjYWxsZXJOYW1lOnJ9KSl9KSkoKSk7cmV0dXJuIG99O3RoaXMuY29weUZ1bmN0aW9uU2lnbmF0dXJlKHAsdSkscltpXT1wfXJldHVybnthY3RpdmF0ZTpmdW5jdGlvbigpe3JldHVybiBjPSEwfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGM9ITF9fX0sdC5wcm90b3R5cGUuY3JlYXRlQXN5bmNGdW5jdGlvbkludGVyY2VwdG9yPWZ1bmN0aW9uKHQpe3ZhciBlLHI9dC50YXJnZXQsaT10Lm1ldGhvZE5hbWUsbj10Lmhvb2ssbz10Lmhvb2tQcmVwYXJlQXJncyxzPXZvaWQgMD09PW8/dGhpcy5kZWZhdWx0SG9va1ByZXBhcmVBcmdzOm8sYT10Lm9wdGlvbnM7aWYoIShudWxsPT09KGU9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLGkpKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS53cml0YWJsZSkpcmV0dXJuIFR0Lndhcm4oIkNhbm5vdCBpbnRlcmNlcHQgcmVhZCBvbmx5IGZ1bmN0aW9uICciK2krIicgb2Ygb2JqZWN0ICciK3IrIiciKSxudWxsO3ZhciBjPSExLHU9cltpXTtpZigiZnVuY3Rpb24iPT10eXBlb2YgdSl7dmFyIHA9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07cmV0dXJuIGhyKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSxyLGk7cmV0dXJuIGZyKHRoaXMsKGZ1bmN0aW9uKG8pe3JldHVybiBlPXModGhpcyx0KSxyPXUuYXBwbHkodGhpcyx0KSxjJiYoYSYmYS53aXRoQ2FsbGVyTmFtZSYmKGk9Y3IoKSksVHQudHJ5VG9FeGVjdXRlKCJBc3luY0Z1bmN0aW9uSW50ZXJjZXB0b3IiLChmdW5jdGlvbigpe24obHIobHIoe3Jlc3VsdDpyfSxlKSx7Y2FsbGVyTmFtZTppfSkpfSkpKCkpLFsyLHJdfSkpfSkpfTt0aGlzLmNvcHlGdW5jdGlvblNpZ25hdHVyZShwLHUpLHJbaV09cH1yZXR1cm57YWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gYz0hMH0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3JldHVybiBjPSExfX19LHQucHJvdG90eXBlLmNyZWF0ZURlc2NyaXB0b3JJbnRlcmNlcHRvcj1mdW5jdGlvbih0LGUscil7dmFyIGk9ITEsbj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsZSk7aWYobil7aWYoIW4uY29uZmlndXJhYmxlKXJldHVybiBUdC53YXJuKCJDYW5ub3QgaW50ZXJjZXB0IHJlYWQgb25seSBwcm9wZXJ0eSAnIitlKyInIG9mIG9iamVjdCAnIit0KyInIiksbnVsbDtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLGxyKGxyKHt9LG4uZ2V0P3tnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX06e30pLG4uc2V0P3tzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9YXJndW1lbnRzLG89bi5zZXQuYXBwbHkodGhpcyxlKTtyZXR1cm4gaSYmVHQudHJ5VG9FeGVjdXRlKCJEZXNjcmlwdG9ySW50ZXJjZXB0b3IiLChmdW5jdGlvbigpe3IodCxlWzBdKX0pKSgpLG99fTp7fSkpfXJldHVybnthY3RpdmF0ZTpmdW5jdGlvbigpe3JldHVybiBpPSEwfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGk9ITF9fX0sdH0oKSx5cj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLnNlZW5HbG9iYWxseUJ1ZmZlcj1bXSx0aGlzLnNlZW5JblZpZXdQb3J0QnVmZmVyPVtdfXJldHVybiB0LnByb3RvdHlwZS5pc0Z1bGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWVuR2xvYmFsbHlCdWZmZXIubGVuZ3RoPj10LkJBVENIX1NJWkV8fHRoaXMuc2VlbkluVmlld1BvcnRCdWZmZXIubGVuZ3RoPj10LkJBVENIX1NJWkV9LHQucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuc2Vlbkdsb2JhbGx5QnVmZmVyLmxlbmd0aCYmMD09PXRoaXMuc2VlbkluVmlld1BvcnRCdWZmZXIubGVuZ3RofSx0LnByb3RvdHlwZS5hZGRJZEluR2xvYmFsbHk9ZnVuY3Rpb24odCl7Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMuc2Vlbkdsb2JhbGx5QnVmZmVyLHQpfSx0LnByb3RvdHlwZS5hZGRJZEluVmlld1BvcnQ9ZnVuY3Rpb24odCl7Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMuc2VlbkluVmlld1BvcnRCdWZmZXIsdCl9LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5zZWVuR2xvYmFsbHlCdWZmZXI9W10sdGhpcy5zZWVuSW5WaWV3UG9ydEJ1ZmZlcj1bXX0sdC5wcm90b3R5cGUuZ2V0SWRzU2Vlbkdsb2JhbGx5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Vlbkdsb2JhbGx5QnVmZmVyfSx0LnByb3RvdHlwZS5nZXRJZHNTZWVuSW5WaWV3cG9ydD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlZW5JblZpZXdQb3J0QnVmZmVyfSx0LkJBVENIX1NJWkU9MjAsdH0oKSx2cj1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MCxyPWFyZ3VtZW50cy5sZW5ndGg7ZTxyO2UrKyl0Kz1hcmd1bWVudHNbZV0ubGVuZ3RoO3ZhciBpPUFycmF5KHQpLG49MDtmb3IoZT0wO2U8cjtlKyspZm9yKHZhciBvPWFyZ3VtZW50c1tlXSxzPTAsYT1vLmxlbmd0aDtzPGE7cysrLG4rKylpW25dPW9bc107cmV0dXJuIGl9Oyhwcnx8KHByPXt9KSkuZmluZE5lc3RlZFNoYWRvd0hvc3RzPWZ1bmN0aW9uIHQoZSl7Zm9yKHZhciByLGk9W10sbj0wLG89ZnVuY3Rpb24odCl7dmFyIGU9Uyh0LnF1ZXJ5U2VsZWN0b3JBbGwoIioiKSk7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGUsKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNoYWRvd1Jvb3R9KSl9KGUpO248by5sZW5ndGg7bisrKXt2YXIgcz1vW25dOyhyPWNzQXJyYXkucHJvdG90eXBlLnB1c2gpLmNhbGwuYXBwbHkocix2cihbaSxzXSx0KHMuc2hhZG93Um9vdCkpKX1yZXR1cm4gaX07dmFyIG1yLGdyPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wLHI9YXJndW1lbnRzLmxlbmd0aDtlPHI7ZSsrKXQrPWFyZ3VtZW50c1tlXS5sZW5ndGg7dmFyIGk9QXJyYXkodCksbj0wO2ZvcihlPTA7ZTxyO2UrKylmb3IodmFyIG89YXJndW1lbnRzW2VdLHM9MCxhPW8ubGVuZ3RoO3M8YTtzKyssbisrKWlbbl09b1tzXTtyZXR1cm4gaX07IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7dmFyIGU9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxyPWUubGVmdCsuNSplLndpZHRoLGk9ZS50b3ArLjUqZS5oZWlnaHQsbj1kb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHIsaSk7cmV0dXJuKG51bGw9PW4/dm9pZCAwOm4uc2hhZG93Um9vdCk/dC5nZXRSb290Tm9kZSgpLmVsZW1lbnRGcm9tUG9pbnQocixpKTpufXQuZmluZEFsbEVsZW1lbnRzPWZ1bmN0aW9uKHQsZSl7dmFyIHI7dm9pZCAwPT09ZSYmKGU9ZG9jdW1lbnQpO2Zvcih2YXIgaT1TKGUucXVlcnlTZWxlY3RvckFsbCh0KSksbj0wLG89cHIuZmluZE5lc3RlZFNoYWRvd0hvc3RzKGUpO248by5sZW5ndGg7bisrKXt2YXIgcz1TKG9bbl0uc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yQWxsKHQpKTsocj1jc0FycmF5LnByb3RvdHlwZS5wdXNoKS5jYWxsLmFwcGx5KHIsZ3IoW2ldLHMpKX1yZXR1cm4gaX0sdC5nZXRUb3BFbGVtZW50PWUsdC5pc1Zpc2libGVJbkRvY3VtZW50PWZ1bmN0aW9uKHQpe3JldHVybiFmdW5jdGlvbih0KXt2YXIgZT10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiBlLnJpZ2h0K3RlLndpbmRvd09mZnNldFgoKTwwfHxlLmJvdHRvbSt0ZS53aW5kb3dPZmZzZXRZKCk8MH0odCkmJiFmdW5jdGlvbih0KXt2YXIgZSxyPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpO3JldHVybiAwPT09dC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aHx8ImhpZGRlbiI9PT1yLnZpc2liaWxpdHl8fCJjb2xsYXBzZSI9PT1yLnZpc2liaWxpdHl8fCIwIj09PXIub3BhY2l0eXx8Im9wYWNpdHkoMCkiPT09ci5maWx0ZXJ8fChlPXIuY29sb3IsL15yZ2JhXChcZCssIFxkKywgXGQrLCAwXCkkLy50ZXN0KGUpKX0odCkmJiFmdW5jdGlvbih0KXt2YXIgcj1lKHQpO3JldHVybiF0LmNvbnRhaW5zKHIpJiZudWxsIT09cn0odCl9LHQuaXNJblZpZXdQb3J0PWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09ZSh0KX19KG1yfHwobXI9e30pKTt2YXIgU3I9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKTooaS5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IGkpfX0oKSxFcj1mdW5jdGlvbih0LGUscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLGkpO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKG49dFthXSkmJihzPShvPDM/bihzKTpvPjM/bihlLHIscyk6bihlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSx3cj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscixpKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uY29uZmlndXJhdGlvbj1lLG4ubm9kZUlkZW50aWZpZXI9cixuLnRleHRWaXNpYmlsaXR5RGVsYXk9aSxuLmlzU3RhcnRlZD0hMSxuLnNlZW5JblZpZXdQb3J0PW5ldyBTZXQsbi5zZWVuR2xvYmFsbHk9bmV3IFNldCxuLnRleHRWaXNpYmlsaXR5QmF0Y2g9bmV3IHlyLG59cmV0dXJuIFNyKGUsdCksZS5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXt0aGlzLm9uRXZlbnRDYWxsYmFjaz10fSxlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5pc1N0YXJ0ZWR8fHRoaXMuY29uZmlndXJhdGlvbi50ZXh0VmlzaWJpbGl0eUVuYWJsZWQmJndpbmRvdy5JbnRlcnNlY3Rpb25PYnNlcnZlciYmKHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXI9bmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChmdW5jdGlvbihlLHIpe3QuaGFuZGxlSW50ZXJzZWN0aW9uKGUscil9KSxlLklOVEVSU0VDVElPTl9PUFRJT05TKSx0aGlzLm11dGF0aW9uT2JzZXJ2ZXI9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoKGZ1bmN0aW9uKGUpe3QuaGFuZGxlTXV0YXRpb25zKGUpfSkpLHRoaXMuaXNTdGFydGVkPSEwKX0sZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuaXNTdGFydGVkJiYodGhpcy50ZXh0VmlzaWJpbGl0eUJhdGNoLmlzRW1wdHkoKXx8dGhpcy5vblRleHRWaXNpYmlsaXR5KCksdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlci5kaXNjb25uZWN0KCksdGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKSx0aGlzLnNlZW5JblZpZXdQb3J0LmNsZWFyKCksdGhpcy5zZWVuR2xvYmFsbHkuY2xlYXIoKSx0aGlzLmlzU3RhcnRlZD0hMSl9LGUucHJvdG90eXBlLnNlcmlhbGl6ZVRleHROb2RlPWZ1bmN0aW9uKHQsZSxyKXtpZighdGhpcy5pc1N0YXJ0ZWR8fHIud2l0aEFub255bWl6YXRpb24pcmV0dXJuIGU7dmFyIGk9Y3NTdHJpbmcucHJvdG90eXBlLnRyaW0uY2FsbCh0LmRhdGEpLG49dC5wYXJlbnRFbGVtZW50O2lmKCIiIT09aSYmbiYmIWYobikmJiF5KG4pKXtpZighbXIuaXNWaXNpYmxlSW5Eb2N1bWVudChuKSlyZXR1cm4gdGhpcy5vYnNlcnZlTXV0YXRpb24obiksdGhpcy5vYnNlcnZlSW50ZXJzZWN0aW9uKG4pLGU7dmFyIG89bXIuaXNJblZpZXdQb3J0KG4pO298fHRoaXMub2JzZXJ2ZUludGVyc2VjdGlvbihuKSx0aGlzLnByb2Nlc3NUZXh0VmlzaWJpbGl0eUZyb21TZXJpYWxpemF0aW9uKG4sbyl9cmV0dXJuIGV9LGUucHJvdG90eXBlLm9ic2VydmVJbnRlcnNlY3Rpb249ZnVuY3Rpb24odCl7dGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlci5vYnNlcnZlKHQpfSxlLnByb3RvdHlwZS5vYnNlcnZlTXV0YXRpb249ZnVuY3Rpb24odCl7dGhpcy5tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodCx7YXR0cmlidXRlRmlsdGVyOmUuTVVUQVRJT05fQVRUUklCVVRFX0ZJTFRFUn0pfSxlLnByb3RvdHlwZS5wcm9jZXNzVGV4dFZpc2liaWxpdHlBZnRlckRlbGF5PWZ1bmN0aW9uKHQsZSxyKXttci5pc1Zpc2libGVJbkRvY3VtZW50KHQpJiYodGhpcy5wdXNoSWRTZWVuR2xvYmFsbHkoZSksbXIuaXNJblZpZXdQb3J0KHQpJiZyJiYodGhpcy5wdXNoSWRTZWVuSW5WaWV3UG9ydChlKSx0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyLnVub2JzZXJ2ZSh0KSksdGhpcy50ZXh0VmlzaWJpbGl0eUJhdGNoLmlzRnVsbCgpJiZ0aGlzLm9uVGV4dFZpc2liaWxpdHkoKSl9LGUucHJvdG90eXBlLnByb2Nlc3NUZXh0VmlzaWJpbGl0eUZyb21TZXJpYWxpemF0aW9uPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpczt0aGlzLm5vZGVJZGVudGlmaWVyLmlmSWRlbnRpZmllZCh0LChmdW5jdGlvbihpKXtyLnNlZW5JblZpZXdQb3J0LmhhcyhpKXx8c2V0VGltZW91dCgoZnVuY3Rpb24oKXtyLnByb2Nlc3NUZXh0VmlzaWJpbGl0eUFmdGVyRGVsYXkodCxpLGUpLHIuc2Vlbkdsb2JhbGx5LmhhcyhpKXx8ci5vYnNlcnZlTXV0YXRpb24odCksIXIuc2VlbkluVmlld1BvcnQuaGFzKGkpJiZlJiZyLm9ic2VydmVJbnRlcnNlY3Rpb24odCl9KSxyLnRleHRWaXNpYmlsaXR5RGVsYXkpfSkpfSxlLnByb3RvdHlwZS5wcm9jZXNzVGV4dFZpc2liaWxpdHlGcm9tTXV0YXRpb249ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLm5vZGVJZGVudGlmaWVyLmlmSWRlbnRpZmllZCh0LChmdW5jdGlvbihyKXtlLnNlZW5JblZpZXdQb3J0LmhhcyhyKXx8ZS5wcm9jZXNzVGV4dFZpc2liaWxpdHkodCxyKX0pKX0sZS5wcm90b3R5cGUucHJvY2Vzc1RleHRWaXNpYmlsaXR5RnJvbUludGVyc2VjdGlvbj1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXM7dGhpcy5ub2RlSWRlbnRpZmllci5pZklkZW50aWZpZWQodCwoZnVuY3Rpb24oaSl7ci5zZWVuSW5WaWV3UG9ydC5oYXMoaSk/ZS51bm9ic2VydmUodCk6ci5wcm9jZXNzVGV4dFZpc2liaWxpdHkodCxpKX0pKX0sZS5wcm90b3R5cGUucHJvY2Vzc1RleHRWaXNpYmlsaXR5PWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcyxpPXRoaXMuaXNWaXNpYmxlSW5WaWV3UG9ydCh0KTtzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiByLnByb2Nlc3NUZXh0VmlzaWJpbGl0eUFmdGVyRGVsYXkodCxlLGkpfSksdGhpcy50ZXh0VmlzaWJpbGl0eURlbGF5KX0sZS5wcm90b3R5cGUuaGFuZGxlTXV0YXRpb25zPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXM7Y3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHQsKGZ1bmN0aW9uKHQpe3ZhciBpPXQuYXR0cmlidXRlTmFtZTtpJiYtMSE9PWNzQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChlLk1VVEFUSU9OX0FUVFJJQlVURV9GSUxURVIsaSkmJnIucHJvY2Vzc1RleHRWaXNpYmlsaXR5RnJvbU11dGF0aW9uKHQudGFyZ2V0KX0pKX0sZS5wcm90b3R5cGUuaGFuZGxlSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcztjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodCwoZnVuY3Rpb24odCl7dC5pc0ludGVyc2VjdGluZyYmci5wcm9jZXNzVGV4dFZpc2liaWxpdHlGcm9tSW50ZXJzZWN0aW9uKHQudGFyZ2V0LGUpfSkpfSxlLnByb3RvdHlwZS5pc1Zpc2libGVJblZpZXdQb3J0PWZ1bmN0aW9uKHQpe3JldHVybiBtci5pc1Zpc2libGVJbkRvY3VtZW50KHQpJiZtci5pc0luVmlld1BvcnQodCl9LGUucHJvdG90eXBlLnB1c2hJZFNlZW5JblZpZXdQb3J0PWZ1bmN0aW9uKHQpe3RoaXMuc2VlbkluVmlld1BvcnQuaGFzKHQpfHwodGhpcy5zZWVuSW5WaWV3UG9ydC5hZGQodCksdGhpcy50ZXh0VmlzaWJpbGl0eUJhdGNoLmFkZElkSW5WaWV3UG9ydCh0KSl9LGUucHJvdG90eXBlLnB1c2hJZFNlZW5HbG9iYWxseT1mdW5jdGlvbih0KXt0aGlzLnNlZW5HbG9iYWxseS5oYXModCl8fCh0aGlzLnNlZW5HbG9iYWxseS5hZGQodCksdGhpcy50ZXh0VmlzaWJpbGl0eUJhdGNoLmFkZElkSW5HbG9iYWxseSh0KSl9LGUucHJvdG90eXBlLm9uVGV4dFZpc2liaWxpdHk9ZnVuY3Rpb24oKXt2YXIgdD17dmlzaWJsZUdsb2JhbGx5OnRoaXMudGV4dFZpc2liaWxpdHlCYXRjaC5nZXRJZHNTZWVuR2xvYmFsbHkoKSx2aXNpYmxlSW5WaWV3UG9ydDp0aGlzLnRleHRWaXNpYmlsaXR5QmF0Y2guZ2V0SWRzU2VlbkluVmlld3BvcnQoKX07dGhpcy5vbkV2ZW50Q2FsbGJhY2soe3R5cGU6R3QuVEVYVF9WSVNJQklMSVRZLGRhdGU6cS5ub3coKSxhcmdzOlt0XX0pLHRoaXMudGV4dFZpc2liaWxpdHlCYXRjaC5jbGVhcigpfSxlLklOVEVSU0VDVElPTl9PUFRJT05TPXtyb290Om51bGwscm9vdE1hcmdpbjoiMHB4Iix0aHJlc2hvbGQ6LjV9LGUuTVVUQVRJT05fQVRUUklCVVRFX0ZJTFRFUj1bInN0eWxlIiwiY2xhc3MiLCJoaWRkZW4iXSxFcihbQXQoIlRleHRWaXNpYmlsaXR5VHJhY2tlci5wcm9jZXNzVGV4dFZpc2liaWxpdHlBZnRlckRlbGF5IildLGUucHJvdG90eXBlLCJwcm9jZXNzVGV4dFZpc2liaWxpdHlBZnRlckRlbGF5IixudWxsKSxFcihbQXQoIlRleHRWaXNpYmlsaXR5VHJhY2tlci5wcm9jZXNzVGV4dFZpc2liaWxpdHlGcm9tU2VyaWFsaXphdGlvbiIpXSxlLnByb3RvdHlwZSwicHJvY2Vzc1RleHRWaXNpYmlsaXR5RnJvbVNlcmlhbGl6YXRpb24iLG51bGwpLEVyKFtBdCgiVGV4dFZpc2liaWxpdHlUcmFja2VyLnByb2Nlc3NUZXh0VmlzaWJpbGl0eUZyb21NdXRhdGlvbiIpXSxlLnByb3RvdHlwZSwicHJvY2Vzc1RleHRWaXNpYmlsaXR5RnJvbU11dGF0aW9uIixudWxsKSxFcihbQXQoIlRleHRWaXNpYmlsaXR5VHJhY2tlci5wcm9jZXNzVGV4dFZpc2liaWxpdHlGcm9tSW50ZXJzZWN0aW9uIildLGUucHJvdG90eXBlLCJwcm9jZXNzVGV4dFZpc2liaWxpdHlGcm9tSW50ZXJzZWN0aW9uIixudWxsKSxFcihbQXQoIlRleHRWaXNpYmlsaXR5VHJhY2tlci5oYW5kbGVNdXRhdGlvbnMiKV0sZS5wcm90b3R5cGUsImhhbmRsZU11dGF0aW9ucyIsbnVsbCksRXIoW0F0KCJUZXh0VmlzaWJpbGl0eVRyYWNrZXIuaGFuZGxlSW50ZXJzZWN0aW9uIildLGUucHJvdG90eXBlLCJoYW5kbGVJbnRlcnNlY3Rpb24iLG51bGwpLGV9KGdlKSxDcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsaSxuLG8scyxhLGMsdSxwLGwsaCxmLGQseSx2KXt0aGlzLnNlc3Npb25TZXJ2aWNlPXQsdGhpcy5jb25maWd1cmF0aW9uPWUsdGhpcy5jb21wcmVzc29yPXIsdGhpcy5zZWxlY3Rvcj1pLHRoaXMuY29uc2VudFNlcnZpY2U9bix0aGlzLmJhc2ljUGFyYW1ldGVycz1vLHRoaXMuY29tbWFuZHNTZXJ2aWNlPXMsdGhpcy5waWk9YSx0aGlzLnNlc3Npb25SZW5ld2VyPWMsdGhpcy51cmxTZXJ2aWNlPXUsdGhpcy5waWlNYXNraW5nU2VydmljZT1wLHRoaXMuamF2YVNjcmlwdEVycm9yc1RyYWNrZXI9bCx0aGlzLmphdmFTY3JpcHRFcnJvcnNBbm9ueW1pemVyPWgsdGhpcy5hcGlFcnJvcnNUcmFja2VyPWYsdGhpcy5hcGlFcnJvcnNBbm9ueW1pemVyPWQsdGhpcy5kZWJ1Z1NlcnZpY2U9eSx0aGlzLmN1c3RvbUV2ZW50RW1pdHRlcj12fXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPW5ldyBkcixyPW5ldyBFZSxpPW5ldyBSZSh0aGlzLnBpaU1hc2tpbmdTZXJ2aWNlKTt0aGlzLmFub255bWl6YXRpb25TZXJ2aWNlPW5ldyBQZSh0aGlzLnBpaSx0aGlzLmNvbmZpZ3VyYXRpb24pLHRoaXMuYW5vbnltaXphdGlvblNlcnZpY2UuaW5pdCgpO3ZhciBuPW5ldyBHZSxvPW5ldyBLZShlLHIpLHM9W3IsaSx0aGlzLmFub255bWl6YXRpb25TZXJ2aWNlLG5dLGE9bmV3IHdyKHRoaXMuY29uZmlndXJhdGlvbixyLDFlMyk7dGhpcy5jb25maWd1cmF0aW9uLnRleHRWaXNpYmlsaXR5RW5hYmxlZCYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHMsYSk7dmFyIGM9bmV3IGFyKHMpO3RoaXMucmVjb3JkaW5nQmF0Y2g9bmV3IHNlO3ZhciB1PW5ldyBhZSxwPW5ldyBJZSh1LHRoaXMuYmFzaWNQYXJhbWV0ZXJzKTt0aGlzLmNvbmZpZ3VyYXRpb24udXNlTWFsa2FQaXBlbGluZSYmcC5hZGRQcm92aWRlcih7Z2V0UmVxdWVzdFBhcmFtZXRlcnM6ZnVuY3Rpb24oKXtyZXR1cm57cnQ6Y3NBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKHQuc2Vzc2lvblNlcnZpY2UuZ2V0UmVjb3JkaW5nU3RhdGVzKCkpfX19KTt2YXIgbD10aGlzLmNyZWF0ZVJlY29yZGluZ1Bvc3RSZXF1ZXN0KHRoaXMuY29tcHJlc3Nvcik7dGhpcy5tdXRhdGlvblNlcmlhbGl6ZXI9bmV3IHllKHRoaXMuY29uc2VudFNlcnZpY2UsYyxyLGksdGhpcy5hbm9ueW1pemF0aW9uU2VydmljZSx0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy51cmxTZXJ2aWNlKSx0aGlzLm11dGF0aW9uU2VyaWFsaXplci5pbml0KCk7dmFyIGg9bmV3IGllKHRoaXMuc2VsZWN0b3IscixpKSxmPW5ldyBuZSh0aGlzLm11dGF0aW9uU2VyaWFsaXplcixvLG4pO3RoaXMucmVjb3JkaW5nU2VydmljZT1uZXcgaGUodGhpcy5jb25maWd1cmF0aW9uLGwsdGhpcy5yZWNvcmRpbmdCYXRjaCxwLHUsbmV3IG1lKGUscixuKSxmLGgsbmV3IHhlKHdpbmRvdy5sb2NhdGlvbix0aGlzLnBpaSksdGhpcy5zZXNzaW9uUmVuZXdlcixuLG5ldyBYZSh3aW5kb3cpLHRoaXMuamF2YVNjcmlwdEVycm9yc1RyYWNrZXIsdGhpcy5qYXZhU2NyaXB0RXJyb3JzQW5vbnltaXplcix0aGlzLmFwaUVycm9yc1RyYWNrZXIsYSx0aGlzLmFwaUVycm9yc0Fub255bWl6ZXIpLHRoaXMuY3VzdG9tRXZlbnRFbWl0dGVyLmFkZExpc3RlbmVycyh0aGlzLnJlY29yZGluZ1NlcnZpY2UpLHRoaXMucmVjb3JkaW5nSW5hY3Rpdml0eVNlcnZpY2U9bmV3IHFlKGgsZixuZXcgTmUobmV3IExlKSxsKTt2YXIgZD1uZXcgT2UoImNzUGVyc2lzdGVkIikseT10aGlzLmNyZWF0ZVJlY29yZGluZ1Bvc3RSZXF1ZXN0KHRoaXMuY29tcHJlc3Nvcik7dGhpcy5yZWNvcmRpbmdSZWNvdmVyeVNlcnZpY2U9bmV3IGRlKHksdGhpcy5yZWNvcmRpbmdCYXRjaCxkLHRoaXMuY29uZmlndXJhdGlvbiksby5pbml0KCksdGhpcy5yZWNvcmRpbmdJbmFjdGl2aXR5U2VydmljZS5pbml0KCksdGhpcy5yZWNvcmRpbmdTZXJ2aWNlLmluaXQoKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihbImlzUmVjb3JkaW5nIl0sKGZ1bmN0aW9uKCl7cmV0dXJuIHQuc2Vzc2lvblNlcnZpY2UuaXNSZXBsYXlSZWNvcmRlZCgpfSkpLHRoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKFsic2V0Q2FwdHVyZWRFbGVtZW50c1NlbGVjdG9yIl0sKGZ1bmN0aW9uKGUpe3QuYW5vbnltaXphdGlvblNlcnZpY2Uuc2V0V2hpdGVsaXN0ZWRFbGVtZW50c1NlbGVjdG9yKGUpfSkpLHRoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKFsic2V0UElJU2VsZWN0b3JzIl0sKGZ1bmN0aW9uKGUpe3QucGlpTWFza2luZ1NlcnZpY2Uuc2V0UElJU2VsZWN0b3JzKGUpfSkpfSx0LnByb3RvdHlwZS5vblN0YXJ0VHJhY2tpbmc9ZnVuY3Rpb24oKXt0aGlzLnJlY29yZGluZ1JlY292ZXJ5U2VydmljZS5yZWNvdmVyKCksdGhpcy5zZXNzaW9uU2VydmljZS5pc1JlcGxheVJlY29yZGVkKCkmJih0aGlzLmNvbmZpZ3VyYXRpb24udXNlTWFsa2FQaXBlbGluZSYmdGhpcy5zZXNzaW9uU2VydmljZS5pc1RlbXBvcmFyaWx5UmVjb3JkZWQoKSYmdGhpcy5yZWNvcmRpbmdTZXJ2aWNlLmJsb2NrU2VuZGluZ0V2ZW50cygpLHRoaXMucmVjb3JkaW5nSW5hY3Rpdml0eVNlcnZpY2Uuc3RhcnQoKSx0aGlzLnJlY29yZGluZ1NlcnZpY2Uuc3RhcnQoKSx0aGlzLnJlY29yZGluZ1JlY292ZXJ5U2VydmljZS5zdGFydCgpKX0sdC5wcm90b3R5cGUub25BZnRlckFydGlmaWNpYWxQYWdlVmlldz1mdW5jdGlvbigpe3RoaXMucmVjb3JkaW5nU2VydmljZS5jbGVhclN0YXRlcygpLHRoaXMubXV0YXRpb25TZXJpYWxpemVyLnJlc2V0QW5vbnltaXphdGlvbigpLHRoaXMuc2Vzc2lvblNlcnZpY2UuaXNSZXBsYXlSZWNvcmRlZCgpPyh0aGlzLnJlY29yZGluZ0luYWN0aXZpdHlTZXJ2aWNlLnJlc3RhcnQoKSx0aGlzLnJlY29yZGluZ1NlcnZpY2UucmVzdGFydCgpLHRoaXMucmVjb3JkaW5nUmVjb3ZlcnlTZXJ2aWNlLnJlc3RhcnQoKSk6KHRoaXMucmVjb3JkaW5nSW5hY3Rpdml0eVNlcnZpY2Uuc3RvcCgpLHRoaXMucmVjb3JkaW5nU2VydmljZS5zdG9wKCksdGhpcy5yZWNvcmRpbmdSZWNvdmVyeVNlcnZpY2Uuc3RvcCgpKX0sdC5wcm90b3R5cGUub25CZWZvcmVTZXNzaW9uUmVuZXdhbD1mdW5jdGlvbigpe3RoaXMucmVjb3JkaW5nU2VydmljZS5jbGVhclN0YXRlcygpLHRoaXMucmVjb3JkaW5nSW5hY3Rpdml0eVNlcnZpY2Uuc3RvcCgpLHRoaXMucmVjb3JkaW5nU2VydmljZS5zdG9wKCksdGhpcy5yZWNvcmRpbmdSZWNvdmVyeVNlcnZpY2Uuc3RvcCgpfSx0LnByb3RvdHlwZS5vbk9wdG91dD1mdW5jdGlvbigpe3RoaXMucmVjb3JkaW5nSW5hY3Rpdml0eVNlcnZpY2Uuc3RvcCgpLHRoaXMucmVjb3JkaW5nU2VydmljZS5zdG9wKCksdGhpcy5yZWNvcmRpbmdSZWNvdmVyeVNlcnZpY2Uuc3RvcCgpfSx0LnByb3RvdHlwZS5vbkNvbnNlbnRHcmFudGVkPWZ1bmN0aW9uKCl7dGhpcy5tdXRhdGlvblNlcmlhbGl6ZXIucmVzZXRBbm9ueW1pemF0aW9uKCksdGhpcy5yZWNvcmRpbmdTZXJ2aWNlLnRyaWdnZXJDb25zZW50R3JhbnRlZCgpfSx0LnByb3RvdHlwZS5vbkNvbnNlbnRXaXRoZHJhd249ZnVuY3Rpb24oKXt0aGlzLm11dGF0aW9uU2VyaWFsaXplci5yZXNldEFub255bWl6YXRpb24oKSx0aGlzLnJlY29yZGluZ1NlcnZpY2UudHJpZ2dlckNvbnNlbnRXaXRoZHJhd24oKX0sdC5wcm90b3R5cGUub25SZWNvcmRpbmdTdGF0ZUNoYW5nZT1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXM7dGhpcy5jb25maWd1cmF0aW9uLnVzZU1hbGthUGlwZWxpbmUmJih0PT09THQuTk9UX1JFQ09SREVEJiZlPT09RHQuRVRSX09GRj8odGhpcy5yZWNvcmRpbmdTZXJ2aWNlLmNsZWFyRXZlbnRzKCksdGhpcy5yZWNvcmRpbmdJbmFjdGl2aXR5U2VydmljZS5zdG9wKCksdGhpcy5yZWNvcmRpbmdTZXJ2aWNlLnN0b3AoKSx0aGlzLnJlY29yZGluZ1JlY292ZXJ5U2VydmljZS5zdG9wKCkpOih0aGlzLnJlY29yZGluZ0JhdGNoLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyKHtnZXRSZXF1ZXN0UGFyYW1ldGVyczpmdW5jdGlvbigpe3JldHVybntydDpjc0FycmF5LnByb3RvdHlwZS5qb2luLmNhbGwoci5zZXNzaW9uU2VydmljZS5nZXRSZWNvcmRpbmdTdGF0ZXMoKSl9fX0pLHRoaXMucmVjb3JkaW5nU2VydmljZS5hbGxvd1NlbmRpbmdFdmVudHMoKSx0aGlzLnJlY29yZGluZ1NlcnZpY2UucHVzaEV2ZW50cygpKSl9LHQucHJvdG90eXBlLmNyZWF0ZVJlY29yZGluZ1Bvc3RSZXF1ZXN0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29uZmlndXJhdGlvbi51c2VNYWxrYVBpcGVsaW5lPyJ2Mi9yZWNvcmRpbmciOiJyZWNvcmRpbmciLHI9dGhpcy5jb25maWd1cmF0aW9uLnVzZU1hbGthUGlwZWxpbmU/ImJ5dGVBcnJheSI6ImJhc2U2NCIsaT1uZXcgUXQodGhpcy5jb25maWd1cmF0aW9uLmdldFJlY29yZGluZ1VyaSgpLGUpO3JldHVybiB0aGlzLmRlYnVnU2VydmljZS5pc0NvbXByZXNzaW9uRGlzYWJsZWQoKXx8aS5zZXRDb21wcmVzc2lvbk9wdGlvbnModCxyKSxpfSx0LmlzU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuIk11dGF0aW9uT2JzZXJ2ZXIiaW4gd2luZG93JiYidmlzaWJpbGl0eVN0YXRlImluIGRvY3VtZW50fSx0fSgpLFJyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMudmlzaXRvclNlcnZpY2U9dCx0aGlzLnNlc3Npb25TZXJ2aWNlPWUsdGhpcy5uYXR1cmFsUGFnZVZpZXdTZW50PSExfXJldHVybiB0LnByb3RvdHlwZS5pc05hdHVyYWxQYWdlVmlld1NlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYXR1cmFsUGFnZVZpZXdTZW50fSx0LnByb3RvdHlwZS5zZXROYXR1cmFsUGFnZVZpZXdTZW50PWZ1bmN0aW9uKHQpe3RoaXMubmF0dXJhbFBhZ2VWaWV3U2VudD10fSx0LnByb3RvdHlwZS5nZXRUcmFja2luZ0NvbnRleHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNlc3Npb25LZXkoKSxlPXRoaXMuZ2V0UGFnZU51bWJlcigpO3JldHVybiB0JiZlP3tzZXNzaW9uS2V5OnQscGFnZU51bWJlcjplfTpudWxsfSx0LnByb3RvdHlwZS5nZXRTZXNzaW9uS2V5PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52aXNpdG9yU2VydmljZS5nZXRWaXNpdG9yKCk7cmV0dXJuIHQ/dC5pZCsiLiIrdC52aXNpdHNDb3VudDpudWxsfSx0LnByb3RvdHlwZS5nZXRQYWdlTnVtYmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Vzc2lvblNlcnZpY2UuZG9lc1Nlc3Npb25FeGlzdCgpP3RoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0U2Vzc2lvbigpLnBhZ2VOdW1iZXI6bnVsbH0sdH0oKSxicj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy50cmFja2luZ0NvbnRleHRTZXJ2aWNlPXQsdGhpcy5yZWdpc3RlcmVkQ2FsbGJhY2tzPVtdfXJldHVybiB0LnByb3RvdHlwZS5oYW5kbGVDb21tYW5kPWZ1bmN0aW9uKHQpe2lmKGd0KHQpJiYodGhpcy5yZWdpc3RlckNhbGxiYWNrKHQpLHRoaXMudHJhY2tpbmdDb250ZXh0U2VydmljZS5pc05hdHVyYWxQYWdlVmlld1NlbnQoKSkpe3ZhciBlPXRoaXMudHJhY2tpbmdDb250ZXh0U2VydmljZS5nZXRUcmFja2luZ0NvbnRleHQoKTtudWxsIT09ZSYmdGhpcy5leGVjdXRlQXN5bmModCxlKX19LHQucHJvdG90eXBlLnJlZ2lzdGVyQ2FsbGJhY2s9ZnVuY3Rpb24odCl7Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMucmVnaXN0ZXJlZENhbGxiYWNrcyx0KX0sdC5wcm90b3R5cGUuZXhlY3V0ZVJlZ2lzdGVyZWRDYWxsYmFja3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy50cmFja2luZ0NvbnRleHRTZXJ2aWNlLmdldFRyYWNraW5nQ29udGV4dCgpO251bGwhPT1lJiZjc0FycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0aGlzLnJlZ2lzdGVyZWRDYWxsYmFja3MsKGZ1bmN0aW9uKHIpe3JldHVybiB0LmV4ZWN1dGVBc3luYyhyLGUpfSkpfSx0LnByb3RvdHlwZS5leGVjdXRlQXN5bmM9ZnVuY3Rpb24odCxlKXtzZXRUaW1lb3V0KChmdW5jdGlvbigpe3QoZSl9KSl9LHR9KCksVHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMudHJhY2tpbmdDb250ZXh0U2VydmljZT10LHRoaXMucGVuZGluZ0NhbGxiYWNrcz1bXX1yZXR1cm4gdC5wcm90b3R5cGUuaGFuZGxlQ29tbWFuZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50cmFja2luZ0NvbnRleHRTZXJ2aWNlLmlzTmF0dXJhbFBhZ2VWaWV3U2VudCgpP3RoaXMuYXBwbHlHZXRTZXNzaW9uS2V5KHQpOnZvaWQgdGhpcy5hZGRQZW5kaW5nQ2FsbGJhY2sodCl9LHQucHJvdG90eXBlLmFwcGx5R2V0U2Vzc2lvbktleT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnRyYWNraW5nQ29udGV4dFNlcnZpY2UuZ2V0U2Vzc2lvbktleSgpO3JldHVybiB0aGlzLmhhc0NhbGxiYWNrKHQpJiZudWxsIT09ZSYmdGhpcy5leGVjdXRlQXN5bmModC5jYWxsYmFjayxlKSxlfSx0LnByb3RvdHlwZS5hZGRQZW5kaW5nQ2FsbGJhY2s9ZnVuY3Rpb24odCl7dGhpcy5oYXNDYWxsYmFjayh0KSYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMucGVuZGluZ0NhbGxiYWNrcyx0LmNhbGxiYWNrKX0sdC5wcm90b3R5cGUuZmx1c2hQZW5kaW5nQ2FsbGJhY2tzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMudHJhY2tpbmdDb250ZXh0U2VydmljZS5nZXRTZXNzaW9uS2V5KCk7bnVsbCE9PWUmJmNzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLnBlbmRpbmdDYWxsYmFja3MsKGZ1bmN0aW9uKHIpe3QuZXhlY3V0ZUFzeW5jKHIsZSl9KSksdGhpcy5wZW5kaW5nQ2FsbGJhY2tzPVtdfSx0LnByb3RvdHlwZS5oYXNDYWxsYmFjaz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGJhY2t9LHQucHJvdG90eXBlLmV4ZWN1dGVBc3luYz1mdW5jdGlvbih0LGUpe3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dChlKX0pKX0sdH0oKSxBcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMudmlzaXRvclNlcnZpY2U9dCx0aGlzLnNlc3Npb25TZXJ2aWNlPWUsdGhpcy5jb21tYW5kc1NlcnZpY2U9cn1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy50cmFja2luZ0NvbnRleHRTZXJ2aWNlPW5ldyBScih0aGlzLnZpc2l0b3JTZXJ2aWNlLHRoaXMuc2Vzc2lvblNlcnZpY2UpLHRoaXMuYWZ0ZXJQYWdlVmlld1NlcnZpY2U9bmV3IGJyKHRoaXMudHJhY2tpbmdDb250ZXh0U2VydmljZSksdGhpcy5nZXRTZXNzaW9uS2V5U2VydmljZT1uZXcgVHIodGhpcy50cmFja2luZ0NvbnRleHRTZXJ2aWNlKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihbImdldFNlc3Npb25LZXkiXSwoZnVuY3Rpb24oZSl7cmV0dXJuIHQuZ2V0U2Vzc2lvbktleVNlcnZpY2UuaGFuZGxlQ29tbWFuZChlKX0pKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihbImFmdGVyUGFnZVZpZXciXSwoZnVuY3Rpb24oZSl7dC5hZnRlclBhZ2VWaWV3U2VydmljZS5oYW5kbGVDb21tYW5kKGUpfSkpfSx0LnByb3RvdHlwZS5vbkFmdGVyTmF0dXJhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy50cmFja2luZ0NvbnRleHRTZXJ2aWNlLnNldE5hdHVyYWxQYWdlVmlld1NlbnQoITApLHRoaXMuZ2V0U2Vzc2lvbktleVNlcnZpY2UuZmx1c2hQZW5kaW5nQ2FsbGJhY2tzKCksdGhpcy5hZnRlclBhZ2VWaWV3U2VydmljZS5leGVjdXRlUmVnaXN0ZXJlZENhbGxiYWNrcygpfSx0LnByb3RvdHlwZS5vbkFmdGVyQXJ0aWZpY2lhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy5hZnRlclBhZ2VWaWV3U2VydmljZS5leGVjdXRlUmVnaXN0ZXJlZENhbGxiYWNrcygpfSx0fSgpLGtyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMua2V5PWNzU3RyaW5nLnByb3RvdHlwZS5zbGljZS5jYWxsKHQsMCw1MCksdGhpcy52YWx1ZT1kdChlKT9jc1N0cmluZy5wcm90b3R5cGUuc2xpY2UuY2FsbChlLDAsMjU1KTplfXJldHVybiB0LmlzVmFsaWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZHQodCkmJihkdChlKXx8ZnQoZSkpfSx0fSgpLFByPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksT3I9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIpe3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5iYXRjaD1lLGkucGlpPXIsaS5keW5hbWljVmFyaWFibGVzUXVldWU9W10saX1yZXR1cm4gUHIoZSx0KSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5keW5hbWljVmFyaWFibGVzUXVldWUsKGZ1bmN0aW9uKGUpe3JldHVybiB0LnRyYWNrRHluYW1pY1ZhcmlhYmxlKGUua2V5LGUudmFsdWUpfSkpLHRoaXMuZHluYW1pY1ZhcmlhYmxlc1F1ZXVlPVtdfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLnRyYWNrRHluYW1pY1ZhcmlhYmxlPWZ1bmN0aW9uKHQsZSl7dGhpcy5pc1N0YXJ0ZWQ/a3IuaXNWYWxpZCh0LGUpJiZ0aGlzLmJhdGNoLmFkZChuZXcga3IodGhpcy5waWkuYW5vbnltaXplKHQpLHRoaXMucGlpLmFub255bWl6ZShlKSkpOmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmR5bmFtaWNWYXJpYWJsZXNRdWV1ZSx7a2V5OnQsdmFsdWU6ZX0pfSxlfSh1ZSksX3I9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTAscj1hcmd1bWVudHMubGVuZ3RoO2U8cjtlKyspdCs9YXJndW1lbnRzW2VdLmxlbmd0aDt2YXIgaT1BcnJheSh0KSxuPTA7Zm9yKGU9MDtlPHI7ZSsrKWZvcih2YXIgbz1hcmd1bWVudHNbZV0scz0wLGE9by5sZW5ndGg7czxhO3MrKyxuKyspaVtuXT1vW3NdO3JldHVybiBpfTt2YXIgSXIsTnIsTXIsTHI9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLGZ1bmN0aW9uKGUscixpKXt2YXIgbj1pLnZhbHVlLG89ITE7aS52YWx1ZT1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLHI9W10saT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspcltpXT1hcmd1bWVudHNbaV07b3x8KG89ITAsc2V0VGltZW91dCgoZnVuY3Rpb24oKXtuLmFwcGx5KGUsciksbz0hMX0pLHQpKX19fSxEcj1mdW5jdGlvbih0LGUscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLGkpO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKG49dFthXSkmJihzPShvPDM/bihzKTpvPjM/bihlLHIscyk6bihlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSx4cj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5jb21wcmVzc29yPXQsdGhpcy5iYXRjaD1bXX1yZXR1cm4gdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmJhdGNoLHQpLHRoaXMuc2V0QmF0Y2hSZWFkeUNhbGwoKX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmJhdGNoPVtdfSx0LnByb3RvdHlwZS5vbkJhdGNoUmVhZHk9ZnVuY3Rpb24odCl7dGhpcy5iYXRjaFJlYWR5Q2FsbGJhY2s9dH0sdC5wcm90b3R5cGUuZ2V0UmVxdWVzdFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9e30sZT0wLHI9dGhpcy5iYXRjaDtlPHIubGVuZ3RoO2UrKyl7dmFyIGk9cltlXTt0W2kua2V5XT1pLnZhbHVlfXJldHVybntkdjp0aGlzLmNvbXByZXNzb3IuY29tcHJlc3NTeW5jKGNzSlNPTi5zdHJpbmdpZnkodCkpfX0sdC5wcm90b3R5cGUuc2V0QmF0Y2hSZWFkeUNhbGw9ZnVuY3Rpb24oKXt0aGlzLmJhdGNoUmVhZHlDYWxsYmFjaygpfSxEcihbTHIoKSxBdCgiZHluYW1pY1ZhcmlhYmxlc0JhdGNoUmVhZHkiKV0sdC5wcm90b3R5cGUsInNldEJhdGNoUmVhZHlDYWxsIixudWxsKSx0fSgpLFZyPVsidHJhY2tEeW5hbWljVmFyaWFibGUiXSxxcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsaSxuLG8pe3RoaXMuY29tbWFuZHNTZXJ2aWNlPXQsdGhpcy5zZXNzaW9uU2VydmljZT1lLHRoaXMuY29uZmlndXJhdGlvbj1yLHRoaXMuYmFzaWNQYXJhbWV0ZXJzPWksdGhpcy5jb21wcmVzc29yPW4sdGhpcy5waWk9byx0aGlzLnJlcXVlc3Q9bmV3IEcodGhpcy5jb25maWd1cmF0aW9uLmdldFRyYWNrZXJVcmkoKSwiZHZhciIpLHRoaXMuYmF0Y2g9bmV3IHhyKHRoaXMuY29tcHJlc3NvciksdGhpcy5zZXJ2aWNlPW5ldyBPcih0aGlzLmJhdGNoLHRoaXMucGlpKX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5yZXF1ZXN0LnNldFJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzKHRoaXMuYmFzaWNQYXJhbWV0ZXJzLHRoaXMuYmF0Y2gpLHRoaXMuc2Vzc2lvblNlcnZpY2Uuc2V0RHluYW1pY1ZhcmlhYmxlc1NlcnZpY2UodGhpcy5zZXJ2aWNlKSx0aGlzLmJhdGNoLm9uQmF0Y2hSZWFkeSgoZnVuY3Rpb24oKXtyZXR1cm4gdC5yZXF1ZXN0LnNlbmQoKX0pKSx0aGlzLnJlcXVlc3QuYWZ0ZXIoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYmF0Y2guY2xlYXIoKX0pKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihWciwoZnVuY3Rpb24oZSl7dmFyIHI9dm9pZCAwPT09ZT97fTplLGk9ci5rZXksbj1yLnZhbHVlO3Quc2VydmljZS50cmFja0R5bmFtaWNWYXJpYWJsZShpLG4pfSkpfSx0LnByb3RvdHlwZS5vblN0YXJ0VHJhY2tpbmc9ZnVuY3Rpb24oKXt0aGlzLnNlcnZpY2Uuc3RhcnQoKX0sdH0oKSxVcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmlkPXQsdGhpcy5yZXZlbnVlPWV9cmV0dXJuIHQuZnJvbT1mdW5jdGlvbihlKXt2YXIgcj1uZXcgdChlLmlkLHBhcnNlRmxvYXQoZS5yZXZlbnVlKSk7cmV0dXJuIGlzTmFOKHBhcnNlRmxvYXQoZS50YXgpKXx8KHIudGF4PXBhcnNlRmxvYXQoZS50YXgpKSxpc05hTihwYXJzZUZsb2F0KGUuc2hpcHBpbmcpKXx8KHIuc2hpcHBpbmc9cGFyc2VGbG9hdChlLnNoaXBwaW5nKSksZHQoZS5jdXJyZW5jeSkmJmUuY3VycmVuY3kubGVuZ3RoPD0xMCYmKHIuY3VycmVuY3k9ZS5jdXJyZW5jeSkscn0sdC5wcm90b3R5cGUuaGFzVmFsaWRSZXZlbnVlPWZ1bmN0aW9uKCl7cmV0dXJuIWlzTmFOKHRoaXMucmV2ZW51ZSkmJnRoaXMucmV2ZW51ZT49MH0sdH0oKSxqcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsaSl7dGhpcy5pZD10LHRoaXMubmFtZT1lLHRoaXMucHJpY2U9cix0aGlzLnF1YW50aXR5PWl9cmV0dXJuIHQuZnJvbT1mdW5jdGlvbihlKXtpZighdC5pc1ZhbGlkKGUpKXJldHVybiBudWxsO3ZhciByPW5ldyB0KGUuaWQsZS5uYW1lLHBhcnNlRmxvYXQoZS5wcmljZSkscGFyc2VJbnQoZS5xdWFudGl0eSwxMCkpO3JldHVybiB2dChlLnNrdSkmJihyLnNrdT1lLnNrdSksdnQoZS5jYXRlZ29yeSkmJihyLmNhdGVnb3J5PWUuY2F0ZWdvcnkpLHJ9LHQuaXNWYWxpZD1mdW5jdGlvbih0KXtyZXR1cm4gZHQodC5pZCkmJmR0KHQubmFtZSkmJmh0KHBhcnNlRmxvYXQodC5wcmljZSkpJiZmdChwYXJzZUludCh0LnF1YW50aXR5LDEwKSkmJighdnQodC5za3UpfHxkdCh0LnNrdSkpJiYoIXZ0KHQuY2F0ZWdvcnkpfHxkdCh0LmNhdGVnb3J5KSl9LHR9KCksenI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt0aGlzLnBpaT10LHRoaXMudHJhbnNhY3Rpb25SZXF1ZXN0PWUsdGhpcy5zZXNzaW9uUmVuZXdlcj1yLHRoaXMuY2xlYXIoKX1yZXR1cm4gdC5wcm90b3R5cGUuYWRkVHJhbnNhY3Rpb249ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5waWkuYW5vbnltaXplRmllbGRzKHQsWyJpZCJdKTt0aGlzLnRyYW5zYWN0aW9uPVVyLmZyb20oZSl9LHQucHJvdG90eXBlLmdldFRyYW5zYWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNhY3Rpb259LHQucHJvdG90eXBlLnNlbmRUcmFuc2FjdGlvbj1mdW5jdGlvbigpe3RoaXMuc2Vzc2lvblJlbmV3ZXIuaXNTZXNzaW9uVmFsaWQoKSYmKHRoaXMudHJhbnNhY3Rpb24uaGFzVmFsaWRSZXZlbnVlKCk/dGhpcy50cmFuc2FjdGlvblJlcXVlc3Quc2VuZCgpOlR0Lndhcm4oIlRyYW5zYWN0aW9uIFNlcnZpY2U6IHVuYWJsZSB0byBzZW5kIHRyYW5zYWN0aW9uIHdpdGggaW52YWxpZCBwYXJhbWV0ZXJzIikpfSx0LnByb3RvdHlwZS5hZGRJdGVtPWZ1bmN0aW9uKHQpe2lmKCFndCh0KSl7dmFyIGU9dGhpcy5waWkuYW5vbnltaXplRmllbGRzKHQsWyJpZCIsIm5hbWUiLCJza3UiLCJjYXRlZ29yeSJdKSxyPWpyLmZyb20oZSk7bnVsbCE9PXImJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLnRyYW5zYWN0aW9uSXRlbXMscil9fSx0LnByb3RvdHlwZS5nZXRJdGVtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zYWN0aW9uSXRlbXN9LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy50cmFuc2FjdGlvbj1Vci5mcm9tKHtyZXZlbnVlOk5hTn0pLHRoaXMudHJhbnNhY3Rpb25JdGVtcz1bXX0sdC5wcm90b3R5cGUuZ2V0UmVxdWVzdFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXt2YXIgdD17aWQ6dGhpcy50cmFuc2FjdGlvbi5pZD8iIit0aGlzLnRyYW5zYWN0aW9uLmlkOiIiLHJldmVudWU6IiIrdGhpcy50cmFuc2FjdGlvbi5yZXZlbnVlfTtyZXR1cm4gdnQodGhpcy50cmFuc2FjdGlvbi50YXgpJiYodC50YXg9IiIrdGhpcy50cmFuc2FjdGlvbi50YXgpLHZ0KHRoaXMudHJhbnNhY3Rpb24uc2hpcHBpbmcpJiYodC5zaGlwcGluZz0iIit0aGlzLnRyYW5zYWN0aW9uLnNoaXBwaW5nKSx2dCh0aGlzLnRyYW5zYWN0aW9uLmN1cnJlbmN5KSYmKHQuY3U9IiIrdGhpcy50cmFuc2FjdGlvbi5jdXJyZW5jeSksdC5pdGVtcz13aW5kb3cuSlNPTi5zdHJpbmdpZnkodGhpcy50cmFuc2FjdGlvbkl0ZW1zKSx0fSx0fSgpLEJyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnNrdUl0ZW09Y3NTdHJpbmcucHJvdG90eXBlLnNsaWNlLmNhbGwodCwwLDEwMCl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwic2t1Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2t1SXRlbX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0fSgpLEZyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuY2FydEl0ZW1SZXF1ZXN0PXQsdGhpcy5zZXNzaW9uUmVuZXdlcj1lLHRoaXMuY2FydEl0ZW09bnVsbH1yZXR1cm4gdC5wcm90b3R5cGUuYWRkVG9DYXJ0PWZ1bmN0aW9uKHQpe3RoaXMuaXNWYWxpZFNrdSh0LnNrdSkmJih0aGlzLmNhcnRJdGVtPW5ldyBCcih0LnNrdSksdGhpcy5zZW5kQ2FydEl0ZW0oKSl9LHQucHJvdG90eXBlLmlzVmFsaWRTa3U9ZnVuY3Rpb24odCl7cmV0dXJuIGR0KHQpJiZ0Lmxlbmd0aD4wfSx0LnByb3RvdHlwZS5nZXRDYXJ0SXRlbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNhcnRJdGVtfSx0LnByb3RvdHlwZS5zZW5kQ2FydEl0ZW09ZnVuY3Rpb24oKXt0aGlzLnNlc3Npb25SZW5ld2VyLmlzU2Vzc2lvblZhbGlkKCkmJnRoaXMuY2FydEl0ZW1SZXF1ZXN0LnNlbmQoKX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmNhcnRJdGVtPW51bGx9LHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FydEl0ZW0/e3NrdToiIit0aGlzLmNhcnRJdGVtLnNrdX06e319LHR9KCksSHI9WyJlY29tbWVyY2U6YWRkVG9DYXJ0IiwiZWM6Y2FydDphZGQiXSxHcj1bImVjb21tZXJjZTphZGRUcmFuc2FjdGlvbiIsImVjOnRyYW5zYWN0aW9uOmNyZWF0ZSJdLFdyPVsiZWNvbW1lcmNlOmFkZEl0ZW0iLCJlYzp0cmFuc2FjdGlvbjppdGVtczphZGQiXSxYcj1bImVjb21tZXJjZTpzZW5kIiwiZWM6dHJhbnNhY3Rpb246c2VuZCJdLFlyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixpLG4sbyxzKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLnZpc2l0b3JTZXJ2aWNlPWUsdGhpcy5zZXNzaW9uU2VydmljZT1yLHRoaXMuY29tbWFuZHNTZXJ2aWNlPWksdGhpcy5waWk9bix0aGlzLnNlc3Npb25SZW5ld2VyPW8sdGhpcy51cmxTZXJ2aWNlPXN9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgRyh0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0VHJhY2tlclVyaSgpLCJ0cmFuc2FjdGlvbiIpLGU9bmV3IEcodGhpcy5jb25maWd1cmF0aW9uLmdldFRyYWNrZXJVcmkoKSwiYWRkdG9jYXJ0Iikscj1uZXcgenIodGhpcy5waWksdCx0aGlzLnNlc3Npb25SZW5ld2VyKSxuPW5ldyBGcihlLHRoaXMuc2Vzc2lvblJlbmV3ZXIpO3Quc2V0UmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnModGhpcy5jb25maWd1cmF0aW9uLHRoaXMudmlzaXRvclNlcnZpY2UsdGhpcy5zZXNzaW9uU2VydmljZSx0aGlzLnVybFNlcnZpY2UscixpKSx0LmFmdGVyKChmdW5jdGlvbigpe3IuY2xlYXIoKX0pKSxlLnNldFJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzKHRoaXMuY29uZmlndXJhdGlvbix0aGlzLnZpc2l0b3JTZXJ2aWNlLHRoaXMuc2Vzc2lvblNlcnZpY2UsdGhpcy51cmxTZXJ2aWNlLG4saSksZS5hZnRlcigoZnVuY3Rpb24oKXtuLmNsZWFyKCl9KSksdGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoR3IsKGZ1bmN0aW9uKHQpe3IuYWRkVHJhbnNhY3Rpb24odCl9KSksdGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoV3IsKGZ1bmN0aW9uKHQpe3JldHVybiByLmFkZEl0ZW0odCl9KSksdGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoWHIsKGZ1bmN0aW9uKCl7cmV0dXJuIHIuc2VuZFRyYW5zYWN0aW9uKCl9KSksdGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoSHIsKGZ1bmN0aW9uKHQpe24uYWRkVG9DYXJ0KHQpfSkpfSx0fSgpLEpyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLndpbmRvd1BlcmZvcm1hbmNlPXQucGVyZm9ybWFuY2V9cmV0dXJuIHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7aWYodGhpcy5hcmVUaW1pbmdzVW5hdmFpbGFibGUoKSlyZXR1cm57fTt2YXIgdD10aGlzLmNvbXB1dGUoKTtyZXR1cm57c3RyOnQuc3RhcnRSZW5kZXIsZGk6dC5kb21JbnRlcmFjdGl2ZSxkYzp0LmRvbUNvbXBsZXRlLGZsOnQuZnVsbHlMb2FkZWR9fSx0LnByb3RvdHlwZS5jb21wdXRlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy53aW5kb3dQZXJmb3JtYW5jZS50aW1pbmc7cmV0dXJue3N0YXJ0UmVuZGVyOiIiKyh0LmRvbUxvYWRpbmctdC5yZXF1ZXN0U3RhcnQpLGRvbUludGVyYWN0aXZlOiIiKyh0LmRvbUludGVyYWN0aXZlLXQucmVxdWVzdFN0YXJ0KSxkb21Db21wbGV0ZToiIisodC5kb21Db21wbGV0ZS10LnJlcXVlc3RTdGFydCksZnVsbHlMb2FkZWQ6IiIrKHQubG9hZEV2ZW50RW5kLXQucmVxdWVzdFN0YXJ0KX19LHQucHJvdG90eXBlLmFyZVRpbWluZ3NVbmF2YWlsYWJsZT1mdW5jdGlvbigpe3JldHVybiEodGhpcy53aW5kb3dQZXJmb3JtYW5jZSYmdGhpcy53aW5kb3dQZXJmb3JtYW5jZS50aW1pbmcmJnRoaXMud2luZG93UGVyZm9ybWFuY2UudGltaW5nLmxvYWRFdmVudEVuZD4wKX0sdH0oKTshZnVuY3Rpb24odCl7dFt0LlRBUD0wXT0iVEFQIix0W3QuTE9OR19QUkVTUz0xXT0iTE9OR19QUkVTUyIsdFt0LkRSQUc9Ml09IkRSQUciLHRbdC5GTElDSz0zXT0iRkxJQ0sifShJcnx8KElyPXt9KSksZnVuY3Rpb24odCl7dFt0LlVQPTFdPSJVUCIsdFt0LkRPV049Ml09IkRPV04iLHRbdC5MRUZUPTNdPSJMRUZUIix0W3QuUklHSFQ9NF09IlJJR0hUIn0oTnJ8fChOcj17fSkpLGZ1bmN0aW9uKHQpe3RbdC5SRVNJWkU9MF09IlJFU0laRSIsdFt0LlNDUk9MTD0xXT0iU0NST0xMIix0W3QuTU9VU0VNT1ZFPTJdPSJNT1VTRU1PVkUiLHRbdC5NT1VTRURPV049M109Ik1PVVNFRE9XTiIsdFt0Lk1PVVNFVVA9NF09Ik1PVVNFVVAiLHRbdC5DTElDSz01XT0iQ0xJQ0siLHRbdC5NT1VTRU9WRVI9Nl09Ik1PVVNFT1ZFUiIsdFt0Lk1PVVNFT1VUPTddPSJNT1VTRU9VVCIsdFt0LkNIQU5HRT0xMF09IkNIQU5HRSIsdFt0LkZPQ1VTSU49MTFdPSJGT0NVU0lOIix0W3QuRk9DVVNPVVQ9MTJdPSJGT0NVU09VVCIsdFt0LlRBUD0xNF09IlRBUCJ9KE1yfHwoTXI9e30pKTt2YXIgS3I9ZnVuY3Rpb24oKXt9LFFyPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksWnI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIpe3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5wcm9qZWN0Q29uZmlndXJhdGlvbj1lLGkucGF0aENvbXB1dGF0aW9uPXIsaS5zdXBwb3J0ZWRFdmVudFR5cGVzPVtNci5NT1VTRURPV04sTXIuTU9VU0VVUCxNci5DTElDSyxNci5NT1VTRU9WRVIsTXIuVEFQXSxpfXJldHVybiBRcihlLHQpLGUucHJvdG90eXBlLmlzRXZlbnRUeXBlU3VwcG9ydGVkPWZ1bmN0aW9uKHQpe3JldHVybi0xIT09Y3NBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMuc3VwcG9ydGVkRXZlbnRUeXBlcyx0KX0sZS5wcm90b3R5cGUuZW5oYW5jZUFuYWx5c2lzRXZlbnQ9ZnVuY3Rpb24odCxlKXtpZih0aGlzLnByb2plY3RDb25maWd1cmF0aW9uLmVNZXJjaGFuZGlzaW5nRW5hYmxlZCl7dmFyIHI9dGhpcy5wYXRoQ29tcHV0YXRpb24uZ2V0VGFyZ2V0UGF0aEFuZFRhcmdldExpbmsodCksaT1yLnBhdGgsbj1yLnRhcmdldExpbms7ZS50YXJnZXQ9aSxlLnRhcmdldExpbms9bn1lbHNlIGUudGFyZ2V0PXRoaXMucGF0aENvbXB1dGF0aW9uLmdldFRhcmdldFBhdGgodCksZS50YXJnZXRMaW5rPSIiO3JldHVybiBlfSxlfShLciksJHI9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPT10LnRhcmdldCYmdC50YXJnZXQuc2hhZG93Um9vdCYmdC5jb21wb3NlZFBhdGg/dC5fX2NzT3JpZ2luYWxUYXJnZXR8fHQuY29tcG9zZWRQYXRoKClbMF06dC50YXJnZXR9LHRpPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksZWk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgcj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIucHJvamVjdENvbmZpZ3VyYXRpb249ZSxyLnN1cHBvcnRlZEV2ZW50VHlwZXM9W01yLkNMSUNLLE1yLk1PVVNFRE9XTixNci5NT1VTRVVQLE1yLlRBUF0scn1yZXR1cm4gdGkoZSx0KSxlLnByb3RvdHlwZS5pc0V2ZW50VHlwZVN1cHBvcnRlZD1mdW5jdGlvbih0KXtyZXR1cm4tMSE9PWNzQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLnN1cHBvcnRlZEV2ZW50VHlwZXMsdCl9LGUucHJvdG90eXBlLmVuaGFuY2VBbmFseXNpc0V2ZW50PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5wcm9qZWN0Q29uZmlndXJhdGlvbi5hdXRvSW5zaWdodHNFbmFibGVkKXtlLmNsYXNzTmFtZT0iIixlLnR5cGVBdHRyaWJ1dGU9IiI7dmFyIHI9JHIodCk7ciYmdShyKSYmKGUuY2xhc3NOYW1lPXIuY2xhc3NOYW1lLCh1KGk9cikmJiJidXR0b24iPT09aS5sb2NhbE5hbWV8fGQocikpJiYoZS50eXBlQXR0cmlidXRlPXIudHlwZSkpfXZhciBpO3JldHVybiBlfSxlfShLcikscmk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt2YXIgaT10aGlzO3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMucGF0aENvbXB1dGF0aW9uPWUsdGhpcy5nZXN0dXJlVHJhY2tlcj1yLHRoaXMuYW5hbHlzaXNFdmVudHNFbmhhbmNlcnM9W25ldyBacih0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy5wYXRoQ29tcHV0YXRpb24pLG5ldyBlaSh0aGlzLmNvbmZpZ3VyYXRpb24pXSx0aGlzLmdlc3R1cmVUcmFja2VyLm9uRXZlbnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGkub25UYXAodCxlKX0pKX1yZXR1cm4gdC5wcm90b3R5cGUub25UYXA9ZnVuY3Rpb24odCxlKXtpZih0LnR5cGU9PT1Jci5UQVApe3ZhciByPXRoaXMuYnVpbGRBbmFseXNpc0V2ZW50KGUse3R5cGU6TXIuVEFQfSk7ci50YXJnZXQhPT1rLklOVkFMSURfRUxFTUVOVCYmdGhpcy5vbkV2ZW50Q2FsbGJhY2socil9fSx0LnByb3RvdHlwZS5vbkV2ZW50PWZ1bmN0aW9uKHQpe3RoaXMub25FdmVudENhbGxiYWNrPXR9LHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5nZXN0dXJlVHJhY2tlci5zdGFydCgpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5nZXN0dXJlVHJhY2tlci5zdG9wKCl9LHQucHJvdG90eXBlLmJ1aWxkQW5hbHlzaXNFdmVudD1mdW5jdGlvbih0LGUpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbChjc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0aGlzLmFuYWx5c2lzRXZlbnRzRW5oYW5jZXJzLChmdW5jdGlvbih0KXtyZXR1cm4gdC5pc0V2ZW50VHlwZVN1cHBvcnRlZChlLnR5cGUpfSkpLChmdW5jdGlvbihlLHIpe3JldHVybiByLmVuaGFuY2VBbmFseXNpc0V2ZW50KHQsZSl9KSxlKX0sdH0oKSxpaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmNvbXB1dGU9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLmNvbnZlcnRQaXhlbHNUb0RQcyhlLngpLXRoaXMuY29udmVydFBpeGVsc1RvRFBzKHQueCksaT10aGlzLmNvbnZlcnRQaXhlbHNUb0RQcyhlLnkpLXRoaXMuY29udmVydFBpeGVsc1RvRFBzKHQueSksbj1lLnRpbWUtdC50aW1lO3JldHVybntkdXJhdGlvbjpuLGRpc3RhbmNlOnRoaXMuY29tcHV0ZUdlc3R1cmVEaXN0YW5jZShyLGkpLGRpcmVjdGlvbjp0aGlzLmNvbXB1dGVHZXN0dXJlRGlyZWN0aW9uKHIsaSksdmVsb2NpdHk6dGhpcy5jb21wdXRlR2VzdHVyZVZlbG9jaXR5KHIsaSxuKX19LHQucHJvdG90eXBlLmNvbnZlcnRQaXhlbHNUb0RQcz1mdW5jdGlvbih0KXtyZXR1cm4gdC93aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb30sdC5wcm90b3R5cGUuY29tcHV0ZUdlc3R1cmVEaXN0YW5jZT1mdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLnJvdW5kKE1hdGguc3FydCh0KnQrZSplKSl9LHQucHJvdG90eXBlLmNvbXB1dGVHZXN0dXJlVmVsb2NpdHk9ZnVuY3Rpb24odCxlLHIpe3ZhciBpPXIvMWUzLG49dC9pLG89ZS9pO3JldHVybiBNYXRoLnJvdW5kKE1hdGguYWJzKG4pK01hdGguYWJzKG8pKX0sdC5wcm90b3R5cGUuY29tcHV0ZUdlc3R1cmVEaXJlY3Rpb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5hYnModCk+TWF0aC5hYnMoZSk/dD4wP05yLlJJR0hUOk5yLkxFRlQ6ZT4wP05yLkRPV046TnIuVVB9LHR9KCksbmk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5tZXRyaWNzQ29tcHV0ZXI9bmV3IGlpLHRoaXMucmVzZXQoKX1yZXR1cm4gdC5wcm90b3R5cGUub25HZXN0dXJlPWZ1bmN0aW9uKHQpe3RoaXMub25HZXN0dXJlQ2FsbGJhY2s9dH0sdC5wcm90b3R5cGUuaXNWYWxpZFRvdWNoRXZlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuInRvdWNoZXMiaW4gdCYmImNoYW5nZWRUb3VjaGVzImluIHR9LHQucHJvdG90eXBlLnByb2Nlc3NBY3Rpb25Eb3duPWZ1bmN0aW9uKHQpe3RoaXMuaXNHZXN0dXJlU3RhcnQodCkmJnRoaXMucmVzZXQoKSxjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5wZW5kaW5nSW5wdXRzLHt4OnQudG91Y2hlc1swXS5wYWdlWCx5OnQudG91Y2hlc1swXS5wYWdlWSx0aW1lOmNzRGF0ZS5ub3coKX0pLHRoaXMudGFyZ2V0PSRyKHQpfSx0LnByb3RvdHlwZS5wcm9jZXNzQWN0aW9uTW92ZT1mdW5jdGlvbigpe3RoaXMuaGFzTW92ZT0hMH0sdC5wcm90b3R5cGUucHJvY2Vzc0FjdGlvblVwPWZ1bmN0aW9uKHQpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLnBlbmRpbmdJbnB1dHMse3g6dC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCx5OnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVksdGltZTpjc0RhdGUubm93KCl9KSx0aGlzLmlzVmFsaWRTaW5nbGVUb3VjaEdlc3R1cmUoKSYmdGhpcy5ydW5EZXRlY3Rpb24odCl9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5wZW5kaW5nSW5wdXRzPVtdLHRoaXMudGFyZ2V0PW51bGwsdGhpcy5oYXNNb3ZlPSExfSx0LnByb3RvdHlwZS5ydW5EZXRlY3Rpb249ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5tZXRyaWNzQ29tcHV0ZXIuY29tcHV0ZSh0aGlzLnBlbmRpbmdJbnB1dHNbMF0sdGhpcy5wZW5kaW5nSW5wdXRzWzFdKSxyPXRoaXMuaGFzTW92ZT90aGlzLmNvbXB1dGVTd2lwZUdlc3R1cmUoZSk6dGhpcy5jb21wdXRlUHJlc3NHZXN0dXJlKGUpO3RoaXMub25HZXN0dXJlQ2FsbGJhY2socix0KX0sdC5wcm90b3R5cGUuY29tcHV0ZVN3aXBlR2VzdHVyZT1mdW5jdGlvbih0KXtyZXR1cm57dHlwZTp0LnZlbG9jaXR5PDEwMD9Jci5EUkFHOklyLkZMSUNLLHRhcmdldDp0aGlzLnRhcmdldCx2ZWxvY2l0eTp0LnZlbG9jaXR5LGRpc3RhbmNlOnQuZGlzdGFuY2UsZGlyZWN0aW9uOnQuZGlyZWN0aW9ufX0sdC5wcm90b3R5cGUuY29tcHV0ZVByZXNzR2VzdHVyZT1mdW5jdGlvbih0KXtyZXR1cm57dHlwZTp0LmR1cmF0aW9uPDFlMz9Jci5UQVA6SXIuTE9OR19QUkVTUyx0YXJnZXQ6dGhpcy50YXJnZXR9fSx0LnByb3RvdHlwZS5pc0dlc3R1cmVTdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gMT09PXQudG91Y2hlcy5sZW5ndGh9LHQucHJvdG90eXBlLmlzVmFsaWRTaW5nbGVUb3VjaEdlc3R1cmU9ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXRoaXMucGVuZGluZ0lucHV0cy5sZW5ndGh9LHR9KCksb2k9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZhciBlPXRoaXM7dGhpcy5sb2dnZXI9dCx0aGlzLmV2ZW50SGFuZGxlcnM9W3tib3VuZEVsZW1lbnQ6ZG9jdW1lbnQsdHlwZToidG91Y2hzdGFydCIsbGlzdGVuZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGUucHJvY2Vzc0V2ZW50KHQpfX0se2JvdW5kRWxlbWVudDpkb2N1bWVudCx0eXBlOiJ0b3VjaG1vdmUiLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3JldHVybiBlLnByb2Nlc3NFdmVudCh0KX19LHtib3VuZEVsZW1lbnQ6ZG9jdW1lbnQsdHlwZToidG91Y2hlbmQiLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3JldHVybiBlLnByb2Nlc3NFdmVudCh0KX19XSx0aGlzLmRldGVjdG9yPW5ldyBuaX1yZXR1cm4gdC5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXt0aGlzLmRldGVjdG9yLm9uR2VzdHVyZSh0KX0sdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmNhbkRldGVjdEdlc3R1cmUoKSYmY3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuZXZlbnRIYW5kbGVycywoZnVuY3Rpb24odCl7cmV0dXJuIFp0KHQpfSkpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5jYW5EZXRlY3RHZXN0dXJlKCkmJmNzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmV2ZW50SGFuZGxlcnMsKGZ1bmN0aW9uKHQpe3JldHVybiAkdCh0KX0pKX0sdC5wcm90b3R5cGUuY2FuRGV0ZWN0R2VzdHVyZT1mdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb30sdC5wcm90b3R5cGUucHJvY2Vzc0V2ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5sb2dnZXIudHJ5VG9FeGVjdXRlKCJwcm9jZXNzIGdlc3R1cmUgZXZlbnQiLChmdW5jdGlvbigpe2lmKGUuZGV0ZWN0b3IuaXNWYWxpZFRvdWNoRXZlbnQodCkpc3dpdGNoKHQudHlwZSl7Y2FzZSJ0b3VjaHN0YXJ0IjplLmRldGVjdG9yLnByb2Nlc3NBY3Rpb25Eb3duKHQpO2JyZWFrO2Nhc2UidG91Y2htb3ZlIjplLmRldGVjdG9yLnByb2Nlc3NBY3Rpb25Nb3ZlKCk7YnJlYWs7Y2FzZSJ0b3VjaGVuZCI6ZS5kZXRlY3Rvci5wcm9jZXNzQWN0aW9uVXAodCl9fSkpKCl9LHQuaXNTd2lwZT1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlPT09SXIuRkxJQ0t8fHQudHlwZT09PUlyLkRSQUd9LHR9KCksc2k9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTAscj1hcmd1bWVudHMubGVuZ3RoO2U8cjtlKyspdCs9YXJndW1lbnRzW2VdLmxlbmd0aDt2YXIgaT1BcnJheSh0KSxuPTA7Zm9yKGU9MDtlPHI7ZSsrKWZvcih2YXIgbz1hcmd1bWVudHNbZV0scz0wLGE9by5sZW5ndGg7czxhO3MrKyxuKyspaVtuXT1vW3NdO3JldHVybiBpfTtmdW5jdGlvbiBhaSh0LGUpe3ZhciByLGksbixvLHM9ZnVuY3Rpb24oKXtpPW51bGw7dmFyIGU9cS5ub3coKS1uO289dC5hcHBseSh2b2lkIDAsc2koW2VdLHIpKSxuPW51bGx9O3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKyl0W2FdPWFyZ3VtZW50c1thXTtyZXR1cm4gbnx8KG49cS5ub3coKSksaSYmd2luZG93LmNsZWFyVGltZW91dChpKSxyPXNpKHQpLGk9d2luZG93LnNldFRpbWVvdXQocyxlKSxvfX12YXIgY2ksdWk7KHVpPWNpfHwoY2k9e30pKS5pc0V2ZW50T25TY3JvbGxDb250YWluZXI9ZnVuY3Rpb24odCl7cmV0dXJuISEobXQodCkmJmZ1bmN0aW9uKHQpe3RyeXtpZihtdCh0LnRhcmdldCkpcmV0dXJuITB9Y2F0Y2godCl7fXJldHVybiExfSh0KSYmU3QodC50YXJnZXQpJiZudWxsIT09dC50YXJnZXQuZ2V0QXR0cmlidXRlKCJkYXRhLWNzLXNjcm9sbC1jb250YWluZXIiKSl9LHVpLmdldFNjcm9sbENvbnRhaW5lcj1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJbZGF0YS1jcy1zY3JvbGwtY29udGFpbmVyXSIpfTt2YXIgcGk7KHBpfHwocGk9e30pKS5nZXRSZWxhdGl2ZVBvc2l0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPSRyKHQpO2lmKCEoZSYmU3QoZSkmJmd0KGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSYmbXQodC5wYWdlWCkmJm10KHQucGFnZVkpKSlyZXR1cm57eFJlbDotMSx5UmVsOi0xLHZhbGlkOiExfTt2YXIgcj1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGk9dC5wYWdlWC1yLmxlZnQtdGUud2luZG93T2Zmc2V0WCgpLG49dC5wYWdlWS1yLnRvcC10ZS53aW5kb3dPZmZzZXRZKCk7ZSE9PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmKGkrPWUuc2Nyb2xsTGVmdCxuKz1lLnNjcm9sbFRvcCk7dmFyIG89TWF0aC5tYXgoZS5zY3JvbGxXaWR0aCxyLndpZHRoKSxzPU1hdGgubWF4KGUuc2Nyb2xsSGVpZ2h0LHIuaGVpZ2h0KTtyZXR1cm57eFJlbDpNYXRoLnJvdW5kKGkvbyo2NTUzNSkseVJlbDpNYXRoLnJvdW5kKG4vcyo2NTUzNSksdmFsaWQ6ITB9fTt2YXIgbGk9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKTooaS5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IGkpfX0oKSxoaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscil7dmFyIGk9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLnByb2plY3RDb25maWd1cmF0aW9uPWUsaS5wYXRoQ29tcHV0YXRpb249cixpLnN1cHBvcnRlZEV2ZW50VHlwZXM9W01yLk1PVVNFTU9WRV0saS5jdXJyZW50TW91c2VNb3ZlUGF0aD0iIixpfXJldHVybiBsaShlLHQpLGUucHJvdG90eXBlLmlzRXZlbnRUeXBlU3VwcG9ydGVkPWZ1bmN0aW9uKHQpe3JldHVybi0xIT09Y3NBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMuc3VwcG9ydGVkRXZlbnRUeXBlcyx0KX0sZS5wcm90b3R5cGUuZW5oYW5jZUFuYWx5c2lzRXZlbnQ9ZnVuY3Rpb24odCxlKXtpZighdGhpcy5wcm9qZWN0Q29uZmlndXJhdGlvbi5tb3VzZU1vdmVIZWF0bWFwRW5hYmxlZClyZXR1cm4gZTt2YXIgcj1waS5nZXRSZWxhdGl2ZVBvc2l0aW9uKHQpLGk9ci52YWxpZCxuPXIueFJlbCxvPXIueVJlbDtpZihpKXt2YXIgcz10aGlzLnBhdGhDb21wdXRhdGlvbi5nZXRUYXJnZXRQYXRoKHQpO3MhPT1rLklOVkFMSURfRUxFTUVOVCYmKGUudGFyZ2V0PTAsZS54UmVsPW4sZS55UmVsPW8scyE9PXRoaXMuY3VycmVudE1vdXNlTW92ZVBhdGh8fHRoaXMucHJvamVjdENvbmZpZ3VyYXRpb24uaWZyYW1lc1RyYWNraW5nPyh0aGlzLmN1cnJlbnRNb3VzZU1vdmVQYXRoPXMsZS50YXJnZXRIZWF0bWFwPXMpOmUudGFyZ2V0SGVhdG1hcD0iIil9ZWxzZSB0aGlzLmN1cnJlbnRNb3VzZU1vdmVQYXRoPSIiO3JldHVybiBlfSxlfShLciksZmk9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKTooaS5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IGkpfX0oKSxkaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLnZhbGlkSW5wdXRUeXBlcz1bInRleHQiLCJlbWFpbCIsIm51bWJlciIsInNlYXJjaCIsInRlbCIsInVybCIsInBhc3N3b3JkIl0sZX1yZXR1cm4gZmkoZSx0KSxlLnByb3RvdHlwZS5pc0V2ZW50VHlwZVN1cHBvcnRlZD1mdW5jdGlvbih0KXtyZXR1cm4gTXIuQ0hBTkdFPT09dH0sZS5wcm90b3R5cGUuZW5oYW5jZUFuYWx5c2lzRXZlbnQ9ZnVuY3Rpb24odCxlKXt2YXIgcj0kcih0KTtyZXR1cm4gZChyKSYmY3NBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMudmFsaWRJbnB1dFR5cGVzLHIudHlwZSk+PTAmJihlLmlzQmxhbms9IiI9PT1yLnZhbHVlKSxlfSxlfShLcikseWk9ZnVuY3Rpb24odCxlLHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP2U6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZSh0LGUscixpKTtlbHNlIGZvcih2YXIgYT10Lmxlbmd0aC0xO2E+PTA7YS0tKShuPXRbYV0pJiYocz0obzwzP24ocyk6bz4zP24oZSxyLHMpOm4oZSxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIscyksc30sdmk9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTAscj1hcmd1bWVudHMubGVuZ3RoO2U8cjtlKyspdCs9YXJndW1lbnRzW2VdLmxlbmd0aDt2YXIgaT1BcnJheSh0KSxuPTA7Zm9yKGU9MDtlPHI7ZSsrKWZvcih2YXIgbz1hcmd1bWVudHNbZV0scz0wLGE9by5sZW5ndGg7czxhO3MrKyxuKyspaVtuXT1vW3NdO3JldHVybiBpfSxtaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3ZhciBpLG4sbyxzLGEsYyx1LHA9dGhpczt0aGlzLnByb2plY3RDb25maWd1cmF0aW9uPXQsdGhpcy5wYXRoQ29tcHV0YXRpb249ZSx0aGlzLnNlbGVjdG9yPXIsdGhpcy5GT0NVU0FCTEVfRUxFTUVOVFNfU0VMRUNUT1I9InNlbGVjdCwgc2VsZWN0ICosIGlucHV0LCB0ZXh0YXJlYSIsdGhpcy5DSEFOR0VBQkxFX0VMRU1FTlRTX1NFTEVDVE9SPSJzZWxlY3QsIHNlbGVjdCAqLCBpbnB1dCwgdGV4dGFyZWEiLHRoaXMuSE9WRVJBQkxFX0VMRU1FTlRTX1NFTEVDVE9SPSJhLCBhICosIGJ1dHRvbiwgYnV0dG9uICosIHNlbGVjdCwgc2VsZWN0ICosIGlucHV0LCB0ZXh0YXJlYSIsdGhpcy5ERUJPVU5DRV9EVVJBVElPTj0xNTAsdGhpcy5USFJPVFRMRV9EVVJBVElPTj00MDAsdGhpcy5zY3JvbGxDb250YWluZXJEaW1lbnNpb25TZW50PSExLHRoaXMuZGVib3VuY2VkU2Nyb2xsRXZlbnRDYWxsYmFjaz1haSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gcC5zY3JvbGxMaXN0ZW5lcih0LGUpfSksdGhpcy5ERUJPVU5DRV9EVVJBVElPTiksdGhpcy5kZWJvdW5jZWRSZXNpemVFdmVudENhbGxiYWNrPWFpKChmdW5jdGlvbih0KXtyZXR1cm4gcC5yZXNpemVMaXN0ZW5lcih0KX0pLHRoaXMuREVCT1VOQ0VfRFVSQVRJT04pLHRoaXMudGhyb3R0bGVkTW91c2VNb3ZlQ2FsbGJhY2s9KGk9ZnVuY3Rpb24odCl7cmV0dXJuIHAubW91c2VNb3ZlTGlzdGVuZXIodCl9LG49dGhpcy5USFJPVFRMRV9EVVJBVElPTixzPVtdLGE9bnVsbCxjPTAsdT1mdW5jdGlvbigpe2M9cS5ub3coKSxhPW51bGwsbz1pLmFwcGx5KHZvaWQgMCxzKX0sZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dmFyIHI9cS5ub3coKTtjfHwoYz1yKTt2YXIgcD1uLShyLWMpO3JldHVybiBzPV9yKHQpLHA8PTB8fHA+bj8oYz1yLG89aS5hcHBseSh2b2lkIDAscyksYT8od2luZG93LmNsZWFyVGltZW91dChhKSxhPW51bGwpOnM9W10pOmF8fChhPXdpbmRvdy5zZXRUaW1lb3V0KHUscCkpLG99KSx0aGlzLmdsb2JhbEhhbmRsZXJzPVt7Ym91bmRFbGVtZW50OndpbmRvdyx0eXBlOiJyZXNpemUiLGxpc3RlbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHAuZGVib3VuY2VkUmVzaXplRXZlbnRDYWxsYmFjaygpfX0se2JvdW5kRWxlbWVudDpkb2N1bWVudCx0eXBlOiJzY3JvbGwiLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3JldHVybiBwLmRlYm91bmNlZFNjcm9sbEV2ZW50Q2FsbGJhY2sodCl9fSx7Ym91bmRFbGVtZW50OndpbmRvdyx0eXBlOiJtb3VzZW1vdmUiLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3AudGhyb3R0bGVkTW91c2VNb3ZlQ2FsbGJhY2socC5wcmVzZXJ2ZUV2ZW50Rm9yQXN5bmNVc2UodCkpfX0se2JvdW5kRWxlbWVudDpkb2N1bWVudCx0eXBlOiJtb3VzZWRvd24iLGxpc3RlbmVyOmZ1bmN0aW9uKHQpe3JldHVybiBwLm1vdXNlRG93bkxpc3RlbmVyKHQpfX0se2JvdW5kRWxlbWVudDpkb2N1bWVudCx0eXBlOiJtb3VzZXVwIixsaXN0ZW5lcjpmdW5jdGlvbih0KXtyZXR1cm4gcC5tb3VzZVVwTGlzdGVuZXIodCl9fSx7Ym91bmRFbGVtZW50OmRvY3VtZW50LHR5cGU6ImNsaWNrIixsaXN0ZW5lcjpmdW5jdGlvbih0KXtyZXR1cm4gcC5jbGlja0xpc3RlbmVyKHQpfX1dLHRoaXMub25TZWxlY3RvckhhbmRsZXJzPVt7Ym91bmRFbGVtZW50OmRvY3VtZW50LHR5cGU6Im1vdXNlb3ZlciIsbGlzdGVuZXI6dGhpcy5zZWxlY3Rvci5vbih0aGlzLkhPVkVSQUJMRV9FTEVNRU5UU19TRUxFQ1RPUiwoZnVuY3Rpb24odCl7cmV0dXJuIHAubW91c2VPdmVyTGlzdGVuZXIodCl9KSl9LHtib3VuZEVsZW1lbnQ6ZG9jdW1lbnQsdHlwZToibW91c2VvdXQiLGxpc3RlbmVyOnRoaXMuc2VsZWN0b3Iub24odGhpcy5IT1ZFUkFCTEVfRUxFTUVOVFNfU0VMRUNUT1IsKGZ1bmN0aW9uKHQpe3JldHVybiBwLm1vdXNlT3V0TGlzdGVuZXIodCl9KSl9LHtib3VuZEVsZW1lbnQ6ZG9jdW1lbnQsdHlwZToiZm9jdXNpbiIsbGlzdGVuZXI6dGhpcy5zZWxlY3Rvci5vbih0aGlzLkZPQ1VTQUJMRV9FTEVNRU5UU19TRUxFQ1RPUiwoZnVuY3Rpb24odCl7cmV0dXJuIHAuZm9jdXNJbkxpc3RlbmVyKHQpfSkpfSx7Ym91bmRFbGVtZW50OmRvY3VtZW50LHR5cGU6ImZvY3Vzb3V0IixsaXN0ZW5lcjp0aGlzLnNlbGVjdG9yLm9uKHRoaXMuRk9DVVNBQkxFX0VMRU1FTlRTX1NFTEVDVE9SLChmdW5jdGlvbih0KXtyZXR1cm4gcC5mb2N1c091dExpc3RlbmVyKHQpfSkpfSx7Ym91bmRFbGVtZW50OmRvY3VtZW50LHR5cGU6ImNoYW5nZSIsbGlzdGVuZXI6dGhpcy5zZWxlY3Rvci5vbih0aGlzLkNIQU5HRUFCTEVfRUxFTUVOVFNfU0VMRUNUT1IsKGZ1bmN0aW9uKHQpe3JldHVybiBwLmNoYW5nZUxpc3RlbmVyKHQpfSkpfV0sdGhpcy5hbmFseXNpc0V2ZW50c0VuaGFuY2Vycz1bbmV3IFpyKHRoaXMucHJvamVjdENvbmZpZ3VyYXRpb24sdGhpcy5wYXRoQ29tcHV0YXRpb24pLG5ldyBoaSh0aGlzLnByb2plY3RDb25maWd1cmF0aW9uLHRoaXMucGF0aENvbXB1dGF0aW9uKSxuZXcgZWkodGhpcy5wcm9qZWN0Q29uZmlndXJhdGlvbiksbmV3IGRpXX1yZXR1cm4gdC5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXt0aGlzLm9uRXZlbnRDYWxsYmFjaz10fSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0U3VwcG9ydGVkSGFuZGxlcnMoKTtjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodCwoZnVuY3Rpb24odCl7cmV0dXJuIFp0KHQpfSkpLHRoaXMucmVzaXplTGlzdGVuZXIoKX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0U3VwcG9ydGVkSGFuZGxlcnMoKTtjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodCwoZnVuY3Rpb24odCl7cmV0dXJuICR0KHQpfSkpfSx0LnByb3RvdHlwZS5nZXRTdXBwb3J0ZWRIYW5kbGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdG9yLmlzTWF0Y2hlc1NlbGVjdG9yU3VwcG9ydGVkKCk/dmkodGhpcy5nbG9iYWxIYW5kbGVycyx0aGlzLm9uU2VsZWN0b3JIYW5kbGVycyk6KFR0Lndhcm4oIkVsZW1lbnQubWF0Y2hlcyBpcyBub3QgaW1wbGVtZW50ZWQgeWV0IiksdGhpcy5nbG9iYWxIYW5kbGVycyl9LHQucHJvdG90eXBlLnJlc2l6ZUxpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPWNpLmdldFNjcm9sbENvbnRhaW5lcigpLHI9U3QoZSk7ciYmKHRoaXMuc2Nyb2xsQ29udGFpbmVyRGltZW5zaW9uU2VudD0hMCk7dmFyIGk9e3R5cGU6TXIuUkVTSVpFLHg6cj9lLmNsaWVudFdpZHRoOnRlLndpbmRvd1dpZHRoKCkseTpyP2UuY2xpZW50SGVpZ2h0OnRlLndpbmRvd0hlaWdodCgpfTt0JiYoaS50YXJnZXQ9dCksdGhpcy5vbkV2ZW50Q2FsbGJhY2soaSl9LHQucHJvdG90eXBlLnNjcm9sbExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7dmFyIHI9Y2kuaXNFdmVudE9uU2Nyb2xsQ29udGFpbmVyKGUpOyF0aGlzLnNjcm9sbENvbnRhaW5lckRpbWVuc2lvblNlbnQmJnImJnRoaXMucmVzaXplTGlzdGVuZXIoKTt2YXIgaT10aGlzLmJ1aWxkQW5hbHlzaXNFdmVudChlLHt0eXBlOk1yLlNDUk9MTCx4OnI/ZS50YXJnZXQuc2Nyb2xsTGVmdDp0ZS53aW5kb3dPZmZzZXRYKCkseTpyP2UudGFyZ2V0LnNjcm9sbFRvcDp0ZS53aW5kb3dPZmZzZXRZKCksdGFyZ2V0OnR9KTt0aGlzLm9uRXZlbnRDYWxsYmFjayhpKX0sdC5wcm90b3R5cGUubW91c2VNb3ZlTGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5idWlsZEFuYWx5c2lzRXZlbnQodCx7dHlwZTpNci5NT1VTRU1PVkUseDp0LnBhZ2VYLHk6dC5wYWdlWX0pO3RoaXMub25FdmVudENhbGxiYWNrKGUpfSx0LnByb3RvdHlwZS5tb3VzZURvd25MaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmJ1aWxkQW5hbHlzaXNFdmVudCh0LHt0eXBlOk1yLk1PVVNFRE9XTix4OnQucGFnZVgseTp0LnBhZ2VZfSk7dGhpcy5vbkV2ZW50Q2FsbGJhY2tJZlZhbGlkVGFyZ2V0KGUpfSx0LnByb3RvdHlwZS5tb3VzZVVwTGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5idWlsZEFuYWx5c2lzRXZlbnQodCx7dHlwZTpNci5NT1VTRVVQLHg6dC5wYWdlWCx5OnQucGFnZVl9KTt0aGlzLm9uRXZlbnRDYWxsYmFja0lmVmFsaWRUYXJnZXQoZSl9LHQucHJvdG90eXBlLmNsaWNrTGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5idWlsZEFuYWx5c2lzRXZlbnQodCx7dHlwZTpNci5DTElDSyx4OnQucGFnZVgseTp0LnBhZ2VZfSk7dGhpcy5vbkV2ZW50Q2FsbGJhY2tJZlZhbGlkVGFyZ2V0KGUpfSx0LnByb3RvdHlwZS5tb3VzZU92ZXJMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmJ1aWxkQW5hbHlzaXNFdmVudCh0LHt0eXBlOk1yLk1PVVNFT1ZFUix4OnQucGFnZVgseTp0LnBhZ2VZfSk7dGhpcy5vbkV2ZW50Q2FsbGJhY2tJZlZhbGlkVGFyZ2V0KGUpfSx0LnByb3RvdHlwZS5tb3VzZU91dExpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYnVpbGRBbmFseXNpc0V2ZW50KHQse3R5cGU6TXIuTU9VU0VPVVQseDp0LnBhZ2VYLHk6dC5wYWdlWSx0YXJnZXQ6dGhpcy5wYXRoQ29tcHV0YXRpb24uZ2V0VGFyZ2V0UGF0aCh0KX0pO3RoaXMub25FdmVudENhbGxiYWNrSWZWYWxpZFRhcmdldChlKX0sdC5wcm90b3R5cGUuZm9jdXNJbkxpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYnVpbGRBbmFseXNpc0V2ZW50KHQse3R5cGU6TXIuRk9DVVNJTix0YXJnZXQ6dGhpcy5wYXRoQ29tcHV0YXRpb24uZ2V0VGFyZ2V0UGF0aCh0KX0pO3RoaXMub25FdmVudENhbGxiYWNrSWZWYWxpZFRhcmdldChlKX0sdC5wcm90b3R5cGUuZm9jdXNPdXRMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmJ1aWxkQW5hbHlzaXNFdmVudCh0LHt0eXBlOk1yLkZPQ1VTT1VULHRhcmdldDp0aGlzLnBhdGhDb21wdXRhdGlvbi5nZXRUYXJnZXRQYXRoKHQpfSk7dGhpcy5vbkV2ZW50Q2FsbGJhY2tJZlZhbGlkVGFyZ2V0KGUpfSx0LnByb3RvdHlwZS5jaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmJ1aWxkQW5hbHlzaXNFdmVudCh0LHt0eXBlOk1yLkNIQU5HRSx0YXJnZXQ6dGhpcy5wYXRoQ29tcHV0YXRpb24uZ2V0VGFyZ2V0UGF0aCh0KX0pO3RoaXMub25FdmVudENhbGxiYWNrSWZWYWxpZFRhcmdldChlKX0sdC5wcm90b3R5cGUub25FdmVudENhbGxiYWNrSWZWYWxpZFRhcmdldD1mdW5jdGlvbih0KXt0LnRhcmdldCE9PWsuSU5WQUxJRF9FTEVNRU5UJiZ0aGlzLm9uRXZlbnRDYWxsYmFjayh0KX0sdC5wcm90b3R5cGUuYnVpbGRBbmFseXNpc0V2ZW50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKHRoaXMuYW5hbHlzaXNFdmVudHNFbmhhbmNlcnMsKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzRXZlbnRUeXBlU3VwcG9ydGVkKGUudHlwZSl9KSksKGZ1bmN0aW9uKGUscil7cmV0dXJuIHIuZW5oYW5jZUFuYWx5c2lzRXZlbnQodCxlKX0pLGUpfSx0LnByb3RvdHlwZS5wcmVzZXJ2ZUV2ZW50Rm9yQXN5bmNVc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29tcG9zZWRQYXRoJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19jc09yaWdpbmFsVGFyZ2V0Iix7dmFsdWU6dC5jb21wb3NlZFBhdGgoKVswXSx3cml0YWJsZTohMSxlbnVtZXJhYmxlOiExfSksdH0seWkoW0F0KCJFdmVudCBoYW5kbGVyIHR5cGU6IHJlc2l6ZSIpXSx0LnByb3RvdHlwZSwicmVzaXplTGlzdGVuZXIiLG51bGwpLHlpKFtBdCgiRXZlbnQgaGFuZGxlciB0eXBlOiBzY3JvbGwiKV0sdC5wcm90b3R5cGUsInNjcm9sbExpc3RlbmVyIixudWxsKSx5aShbQXQoIkV2ZW50IGhhbmRsZXIgdHlwZTogbW91c2VNb3ZlIildLHQucHJvdG90eXBlLCJtb3VzZU1vdmVMaXN0ZW5lciIsbnVsbCkseWkoW0F0KCJFdmVudCBoYW5kbGVyIHR5cGU6IG1vdXNlRG93biIpXSx0LnByb3RvdHlwZSwibW91c2VEb3duTGlzdGVuZXIiLG51bGwpLHlpKFtBdCgiRXZlbnQgaGFuZGxlciB0eXBlOiBtb3VzZVVwIildLHQucHJvdG90eXBlLCJtb3VzZVVwTGlzdGVuZXIiLG51bGwpLHlpKFtBdCgiRXZlbnQgaGFuZGxlciB0eXBlOiBjbGljayIpXSx0LnByb3RvdHlwZSwiY2xpY2tMaXN0ZW5lciIsbnVsbCkseWkoW0F0KCJFdmVudCBoYW5kbGVyIHR5cGU6IG1vdXNlT3ZlciIpXSx0LnByb3RvdHlwZSwibW91c2VPdmVyTGlzdGVuZXIiLG51bGwpLHlpKFtBdCgiRXZlbnQgaGFuZGxlciB0eXBlOiBtb3VzZU91dCIpXSx0LnByb3RvdHlwZSwibW91c2VPdXRMaXN0ZW5lciIsbnVsbCkseWkoW0F0KCJFdmVudCBoYW5kbGVyIHR5cGU6IGZvY3VzSW4iKV0sdC5wcm90b3R5cGUsImZvY3VzSW5MaXN0ZW5lciIsbnVsbCkseWkoW0F0KCJFdmVudCBoYW5kbGVyIHR5cGU6IGZvY3VzT3V0IildLHQucHJvdG90eXBlLCJmb2N1c091dExpc3RlbmVyIixudWxsKSx5aShbQXQoIkV2ZW50IGhhbmRsZXIgdHlwZTogY2hhbmdlIildLHQucHJvdG90eXBlLCJjaGFuZ2VMaXN0ZW5lciIsbnVsbCksdH0oKSxnaT1mdW5jdGlvbih0LGUscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLGkpO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKG49dFthXSkmJihzPShvPDM/bihzKTpvPjM/bihlLHIscyk6bihlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSxTaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgdD10aGlzO3RoaXMuTUFYX1NDUk9MTF9SQVRFX1RIUkVTSE9MRD0xMDAsdGhpcy5tYXhTY3JvbGxSYXRlPTAsdGhpcy5tYXhEb2N1bWVudEhlaWdodD10ZS5kb2N1bWVudEhlaWdodCgpLHRoaXMubWF4U2Nyb2xsUmF0ZUhhbmRsZXI9e2JvdW5kRWxlbWVudDpkb2N1bWVudCx0eXBlOiJzY3JvbGwiLGxpc3RlbmVyOmZ1bmN0aW9uKGUpe3JldHVybiB0Lm1heFNjcm9sbFJhdGVMaXN0ZW5lcihlKX19fXJldHVybiB0LnByb3RvdHlwZS5vbkV2ZW50PWZ1bmN0aW9uKHQpe3RoaXMub25FdmVudENhbGxiYWNrPXR9LHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7WnQodGhpcy5tYXhTY3JvbGxSYXRlSGFuZGxlciksdGhpcy5yZXNldCgpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7JHQodGhpcy5tYXhTY3JvbGxSYXRlSGFuZGxlcil9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dmFyIHQ9Y2kuZ2V0U2Nyb2xsQ29udGFpbmVyKCk7aWYobnVsbD09PXQpdGhpcy5tYXhTY3JvbGxSYXRlPXRoaXMuY3VycmVudFNjcm9sbFJhdGUodGUuZG9jdW1lbnRIZWlnaHQoKSk7ZWxzZXt2YXIgZT10aGlzLmNvbXB1dGVQYWRkaW5nVG9wKHQpO3RoaXMubWF4U2Nyb2xsUmF0ZT10aGlzLmN1cnJlbnRTY3JvbGxSYXRlV2l0aFNjcm9sbENvbnRhaW5lcih0LGUpfXRoaXMub25FdmVudENhbGxiYWNrKCl9LHQucHJvdG90eXBlLm1heFNjcm9sbFJhdGVMaXN0ZW5lcj1mdW5jdGlvbih0KXt2YXIgZSxyO2lmKGNpLmlzRXZlbnRPblNjcm9sbENvbnRhaW5lcih0KSl7dmFyIGk9dC50YXJnZXQsbj10aGlzLmNvbXB1dGVQYWRkaW5nVG9wKGkpO2U9dGhpcy5kb2N1bWVudEhlaWdodFdpdGhTY3JvbGxDb250YWluZXIoaSxuKSxyPXRoaXMuY3VycmVudFNjcm9sbFJhdGVXaXRoU2Nyb2xsQ29udGFpbmVyKGksbil9ZWxzZSBlPXRlLmRvY3VtZW50SGVpZ2h0KCkscj10aGlzLmN1cnJlbnRTY3JvbGxSYXRlKGUpOyhyPnRoaXMubWF4U2Nyb2xsUmF0ZXx8ZT50aGlzLm1heERvY3VtZW50SGVpZ2h0KSYmKHRoaXMubWF4U2Nyb2xsUmF0ZT1yLGU+dGhpcy5tYXhEb2N1bWVudEhlaWdodCYmKHRoaXMubWF4RG9jdW1lbnRIZWlnaHQ9ZSksdGhpcy5vbkV2ZW50Q2FsbGJhY2soKSl9LHQucHJvdG90eXBlLmN1cnJlbnRTY3JvbGxSYXRlPWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgucm91bmQodGhpcy5sYXN0UGl4ZWxMaW5lKCkvdCoxMDApO3JldHVybiBNYXRoLm1pbihlLHRoaXMuTUFYX1NDUk9MTF9SQVRFX1RIUkVTSE9MRCl9LHQucHJvdG90eXBlLmxhc3RQaXhlbExpbmU9ZnVuY3Rpb24oKXt2YXIgdD10ZS53aW5kb3dIZWlnaHQoKTtyZXR1cm4gdGUud2luZG93T2Zmc2V0WSgpK3R9LHQucHJvdG90eXBlLmN1cnJlbnRTY3JvbGxSYXRlV2l0aFNjcm9sbENvbnRhaW5lcj1mdW5jdGlvbih0LGUpe3ZhciByPXQuc2Nyb2xsVG9wK3QuY2xpZW50SGVpZ2h0K3QuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wK2UsaT10aGlzLmRvY3VtZW50SGVpZ2h0V2l0aFNjcm9sbENvbnRhaW5lcih0LGUpLG49TWF0aC5yb3VuZChyL2kqMTAwKTtyZXR1cm4gTWF0aC5taW4obix0aGlzLk1BWF9TQ1JPTExfUkFURV9USFJFU0hPTEQpfSx0LnByb3RvdHlwZS5jb21wdXRlUGFkZGluZ1RvcD1mdW5jdGlvbih0KXt2YXIgZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS5wYWRkaW5nVG9wfHwiMHB4IjtyZXR1cm4gcGFyc2VJbnQoZSwxMCl9LHQucHJvdG90eXBlLmRvY3VtZW50SGVpZ2h0V2l0aFNjcm9sbENvbnRhaW5lcj1mdW5jdGlvbih0LGUpe3JldHVybiB0LnNjcm9sbEhlaWdodCt0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCtlfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybntzcjoiIit0aGlzLm1heFNjcm9sbFJhdGUsbWRoOiIiK3RoaXMubWF4RG9jdW1lbnRIZWlnaHR9fSxnaShbQXQoIk1heFNjcm9sbFJhdGUgaGFuZGxlciIpXSx0LnByb3RvdHlwZSwibWF4U2Nyb2xsUmF0ZUxpc3RlbmVyIixudWxsKSx0fSgpLEVpPWZ1bmN0aW9uKCl7cmV0dXJuKEVpPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyPTEsaT1hcmd1bWVudHMubGVuZ3RoO3I8aTtyKyspZm9yKHZhciBuIGluIGU9YXJndW1lbnRzW3JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pJiYodFtuXT1lW25dKTtyZXR1cm4gdH0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sd2k9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyLGksbixvLHMsYSxjLHUscCl7dmFyIGw9dGhpczt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLmFuYWx5c2lzRXZlbnRzVHJhY2tlcj1lLHRoaXMuZ2VzdHVyZVRyYWNrZXI9cix0aGlzLm1heFNjcm9sbFJhdGVUcmFja2VyPWksdGhpcy5wZXJmb3JtYW5jZVRpbWluZ01ldHJpY3M9bix0aGlzLmFuYWx5c2lzRXZlbnRzQmF0Y2g9byx0aGlzLmFuYWx5c2lzRXZlbnRzUmVxdWVzdD1zLHRoaXMuYW5hbHlzaXNMYXN0RXZlbnRzUmVxdWVzdD1hLHRoaXMuYW5hbHlzaXNFdmVudFJlcXVlc3RQYXJhbWV0ZXJzPWMsdGhpcy5zZXNzaW9uUmVuZXdlcj11LHRoaXMucmVjb3ZlcnlTdG9yYWdlPXAsdGhpcy5ldmVudEVtaXR0ZXI9bmV3IGNlLHRoaXMudmlzaWJpbGl0eUNoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKCl7ImhpZGRlbiI9PT1kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUmJmwuc2VuZExhc3RFdmVudHMoKX0sdGhpcy5zZW5kTGFzdEV2ZW50cz1mdW5jdGlvbigpe2wuYW5hbHlzaXNFdmVudHNCYXRjaC5pc0VtcHR5KCl8fGwuYW5hbHlzaXNMYXN0RXZlbnRzUmVxdWVzdC5zZW5kKCl9fXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmFuYWx5c2lzRXZlbnRzVHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9jZXNzRXZlbnQoZSl9KSksdGhpcy5nZXN0dXJlVHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9jZXNzRXZlbnQoZSl9KSksdGhpcy5tYXhTY3JvbGxSYXRlVHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbigpe3QuYW5hbHlzaXNFdmVudHNCYXRjaC5zZXRSZXF1ZXN0UGFyYW1ldGVyc0Zyb21Qcm92aWRlcih0Lm1heFNjcm9sbFJhdGVUcmFja2VyKX0pKSx0aGlzLmJpbmRSZXF1ZXN0cygpfSx0LnByb3RvdHlwZS5iaW5kUmVxdWVzdHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuYW5hbHlzaXNFdmVudHNSZXF1ZXN0LnNldFJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzKHRoaXMuYW5hbHlzaXNFdmVudHNCYXRjaCksdGhpcy5hbmFseXNpc0V2ZW50c1JlcXVlc3QuYmVmb3JlKChmdW5jdGlvbigpe3QuYW5hbHlzaXNFdmVudHNCYXRjaC5zZXRSZXF1ZXN0UGFyYW1ldGVyc0Zyb21Qcm92aWRlcih0LnBlcmZvcm1hbmNlVGltaW5nTWV0cmljcyksdC5hbmFseXNpc0V2ZW50c0JhdGNoLmVuYWJsZUNvbXByZXNzaW9uKCl9KSksdGhpcy5hbmFseXNpc0V2ZW50c1JlcXVlc3QuYWZ0ZXIoKGZ1bmN0aW9uKCl7dC5hbmFseXNpc0V2ZW50c0JhdGNoLmNsZWFyRXZlbnRzKCksdC5hbmFseXNpc0V2ZW50c0JhdGNoLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyKHQuYW5hbHlzaXNFdmVudFJlcXVlc3RQYXJhbWV0ZXJzKX0pKSx0aGlzLmFuYWx5c2lzTGFzdEV2ZW50c1JlcXVlc3Quc2V0UmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnModGhpcy5hbmFseXNpc0V2ZW50c0JhdGNoKSx0aGlzLmFuYWx5c2lzTGFzdEV2ZW50c1JlcXVlc3QuYmVmb3JlKChmdW5jdGlvbigpe3QuYW5hbHlzaXNFdmVudHNCYXRjaC5zZXRSZXF1ZXN0UGFyYW1ldGVyc0Zyb21Qcm92aWRlcih0LnBlcmZvcm1hbmNlVGltaW5nTWV0cmljcyksdC5hbmFseXNpc0V2ZW50c0JhdGNoLmRpc2FibGVDb21wcmVzc2lvbigpfSkpLHRoaXMuYW5hbHlzaXNMYXN0RXZlbnRzUmVxdWVzdC5vbkJlYWNvblN1Y2Nlc3MoKGZ1bmN0aW9uKCl7dC5hbmFseXNpc0V2ZW50c0JhdGNoLmNsZWFyRXZlbnRzKCksdC5hbmFseXNpc0V2ZW50c0JhdGNoLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyKHQuYW5hbHlzaXNFdmVudFJlcXVlc3RQYXJhbWV0ZXJzKX0pKSx0aGlzLmFuYWx5c2lzTGFzdEV2ZW50c1JlcXVlc3Qub25CZWFjb25GYWlsdXJlKChmdW5jdGlvbigpe3Quc2F2ZUxhc3RFdmVudHMoKX0pKX0sdC5wcm90b3R5cGUuaW5pdFN0YXRlcz1mdW5jdGlvbigpe3RoaXMuYW5hbHlzaXNFdmVudHNCYXRjaC5zZXRSZXF1ZXN0UGFyYW1ldGVyc0Zyb21Qcm92aWRlcih0aGlzLmFuYWx5c2lzRXZlbnRSZXF1ZXN0UGFyYW1ldGVycyksdGhpcy5yZXNldFN0YXJ0VGltZSgpfSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuYWRkTGFzdEV2ZW50c0xpc3RlbmVycygpLHRoaXMuYW5hbHlzaXNFdmVudHNUcmFja2VyLnN0YXJ0KCksdGhpcy5tYXhTY3JvbGxSYXRlVHJhY2tlci5zdGFydCgpLHRoaXMuZ2VzdHVyZVRyYWNrZXIuc3RhcnQoKX0sdC5wcm90b3R5cGUub25JZnJhbWVBbmFseXNpc0V2ZW50PWZ1bmN0aW9uKHQpe3RoaXMucHJvY2Vzc0V2ZW50KHQpfSx0LnByb3RvdHlwZS5wcm9jZXNzRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5zZXNzaW9uUmVuZXdlci5pc1Nlc3Npb25WYWxpZCgpJiYodGhpcy5hbmFseXNpc0V2ZW50c0JhdGNoLmFkZEV2ZW50KHRoaXMuc2VyaWFsaXplQW5hbHlzaXNFdmVudCh0KSksdGhpcy5hbmFseXNpc0V2ZW50c0JhdGNoLmlzRnVsbCgpJiZ0aGlzLnNlbmRFdmVudHMoKSx0aGlzLmNvbmZpZ3VyYXRpb24uZW1pdERlYnVnRXZlbnRzJiZ0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCJhbmFseXNpc0V2ZW50IixFaShFaSh7fSx0KSx7dHlwZU5hbWU6TXJbdC50eXBlXX0pKSl9LHQucHJvdG90eXBlLnNlcmlhbGl6ZUFuYWx5c2lzRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9W3QudHlwZSx0aGlzLmdldFJlbGF0aXZlVGltZSgpXTtyZXR1cm4ieCJpbiB0JiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSx0LngpLCJ5ImluIHQmJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChlLHQueSksInRhcmdldCJpbiB0JiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSx0LnRhcmdldCksImlzQmxhbmsiaW4gdCYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKGUsdC5pc0JsYW5rKSx0aGlzLmNvbmZpZ3VyYXRpb24ubW91c2VNb3ZlSGVhdG1hcEVuYWJsZWQmJigidGFyZ2V0SGVhdG1hcCJpbiB0JiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSx0LnRhcmdldEhlYXRtYXApLCJ4UmVsImluIHQmJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChlLHQueFJlbCksInlSZWwiaW4gdCYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKGUsdC55UmVsKSksInRhcmdldExpbmsiaW4gdCYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKGUsdC50YXJnZXRMaW5rKSwiY2xhc3NOYW1lImluIHQmJmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChlLHQuY2xhc3NOYW1lKSwidHlwZUF0dHJpYnV0ZSJpbiB0JiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSx0LnR5cGVBdHRyaWJ1dGUpLGV9LHQucHJvdG90eXBlLnNlbmRFdmVudHM9ZnVuY3Rpb24oKXt0aGlzLmFuYWx5c2lzRXZlbnRzQmF0Y2guaXNFbXB0eSgpfHx0aGlzLmFuYWx5c2lzRXZlbnRzUmVxdWVzdC5zZW5kKCl9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUxhc3RFdmVudHNMaXN0ZW5lcnMoKSx0aGlzLmFuYWx5c2lzRXZlbnRzVHJhY2tlci5zdG9wKCksdGhpcy5tYXhTY3JvbGxSYXRlVHJhY2tlci5zdG9wKCksdGhpcy5nZXN0dXJlVHJhY2tlci5zdG9wKCksdGhpcy5hbmFseXNpc0V2ZW50c0JhdGNoLmVtcHR5KCl9LHQucHJvdG90eXBlLmNsZWFyU3RhdGVzPWZ1bmN0aW9uKCl7dGhpcy5zZW5kRXZlbnRzKCksdGhpcy5tYXhTY3JvbGxSYXRlVHJhY2tlci5yZXNldCgpfSx0LnByb3RvdHlwZS5yZXNldFN0YXJ0VGltZT1mdW5jdGlvbigpe3RoaXMuc3RhcnRUaW1lPXEubm93KCl9LHQucHJvdG90eXBlLmdldFJlbGF0aXZlVGltZT1mdW5jdGlvbigpe3JldHVybiBxLm5vdygpLXRoaXMuc3RhcnRUaW1lfSx0LnByb3RvdHlwZS5hZGRMYXN0RXZlbnRzTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dGhpcy5hZGRWaXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXIoKSx0aGlzLmFkZFBhZ2VIaWRlTGlzdGVuZXIoKSx0aGlzLmFkZEJsdXJMaXN0ZW5lcigpfSx0LnByb3RvdHlwZS5yZW1vdmVMYXN0RXZlbnRzTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVWaXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXIoKSx0aGlzLnJlbW92ZVBhZ2VIaWRlTGlzdGVuZXIoKSx0aGlzLnJlbW92ZUJsdXJMaXN0ZW5lcigpfSx0LnByb3RvdHlwZS5hZGRWaXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXI9ZnVuY3Rpb24oKXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJ2aXNpYmlsaXR5Y2hhbmdlIix0aGlzLnZpc2liaWxpdHlDaGFuZ2VMaXN0ZW5lcil9LHQucHJvdG90eXBlLnJlbW92ZVZpc2liaWxpdHlDaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbigpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInZpc2liaWxpdHljaGFuZ2UiLHRoaXMudmlzaWJpbGl0eUNoYW5nZUxpc3RlbmVyKX0sdC5wcm90b3R5cGUuYWRkUGFnZUhpZGVMaXN0ZW5lcj1mdW5jdGlvbigpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJwYWdlaGlkZSIsdGhpcy5zZW5kTGFzdEV2ZW50cyl9LHQucHJvdG90eXBlLnJlbW92ZVBhZ2VIaWRlTGlzdGVuZXI9ZnVuY3Rpb24oKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicGFnZWhpZGUiLHRoaXMuc2VuZExhc3RFdmVudHMpfSx0LnByb3RvdHlwZS5hZGRCbHVyTGlzdGVuZXI9ZnVuY3Rpb24oKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsdGhpcy5zZW5kTGFzdEV2ZW50cyl9LHQucHJvdG90eXBlLnJlbW92ZUJsdXJMaXN0ZW5lcj1mdW5jdGlvbigpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLnNlbmRMYXN0RXZlbnRzKX0sdC5wcm90b3R5cGUuc2F2ZUxhc3RFdmVudHM9ZnVuY3Rpb24oKXt0cnl7dGhpcy5hbmFseXNpc0V2ZW50c0JhdGNoLmlzRW1wdHkoKXx8dGhpcy5yZWNvdmVyeVN0b3JhZ2Uuc2F2ZSh7ZXZlbnRzOnRoaXMuYW5hbHlzaXNFdmVudHNCYXRjaC5nZXRFdmVudHMoKSxtZXRhZGF0YTp0aGlzLmFuYWx5c2lzRXZlbnRzQmF0Y2guZ2V0TWV0YWRhdGEoKX0pfWNhdGNoKHQpe319LHR9KCksQ2k9YmkudG9TdHJpbmcoKSxSaT1iaSgpO2Z1bmN0aW9uIGJpKCl7dmFyIHQ9e19rZXlTdHI6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89IixfZjpTdHJpbmcuZnJvbUNoYXJDb2RlLGNvbXByZXNzVG9CYXNlNjQ6ZnVuY3Rpb24oZSl7aWYobnVsbD09ZSlyZXR1cm4iIjt2YXIgcixpLG4sbyxzLGEsYyx1PSIiLHA9MDtmb3IoZT10LmNvbXByZXNzKGUpO3A8MiplLmxlbmd0aDspcCUyPT0wPyhyPWUuY2hhckNvZGVBdChwLzIpPj44LGk9MjU1JmUuY2hhckNvZGVBdChwLzIpLG49cC8yKzE8ZS5sZW5ndGg/ZS5jaGFyQ29kZUF0KHAvMisxKT4+ODpOYU4pOihyPTI1NSZlLmNoYXJDb2RlQXQoKHAtMSkvMiksKHArMSkvMjxlLmxlbmd0aD8oaT1lLmNoYXJDb2RlQXQoKHArMSkvMik+Pjgsbj0yNTUmZS5jaGFyQ29kZUF0KChwKzEpLzIpKTppPW49TmFOKSxwKz0zLG89cj4+MixzPSgzJnIpPDw0fGk+PjQsYT0oMTUmaSk8PDJ8bj4+NixjPTYzJm4saXNOYU4oaSk/YT1jPTY0OmlzTmFOKG4pJiYoYz02NCksdT11K3QuX2tleVN0ci5jaGFyQXQobykrdC5fa2V5U3RyLmNoYXJBdChzKSt0Ll9rZXlTdHIuY2hhckF0KGEpK3QuX2tleVN0ci5jaGFyQXQoYyk7cmV0dXJuIHV9LGRlY29tcHJlc3NGcm9tQmFzZTY0OmZ1bmN0aW9uKGUpe2lmKG51bGw9PWUpcmV0dXJuIiI7dmFyIHIsaSxuLG8scyxhLGMsdT0iIixwPTAsbD0wLGg9dC5fZjtmb3IoZT1lLnJlcGxhY2UoL1teQS1aYS16MC05XCtcL1w9XS9nLCIiKTtsPGUubGVuZ3RoOylpPXQuX2tleVN0ci5pbmRleE9mKGUuY2hhckF0KGwrKykpPDwyfChzPXQuX2tleVN0ci5pbmRleE9mKGUuY2hhckF0KGwrKykpKT4+NCxuPSgxNSZzKTw8NHwoYT10Ll9rZXlTdHIuaW5kZXhPZihlLmNoYXJBdChsKyspKSk+PjIsbz0oMyZhKTw8NnwoYz10Ll9rZXlTdHIuaW5kZXhPZihlLmNoYXJBdChsKyspKSkscCUyPT0wPyhyPWk8PDgsNjQhPWEmJih1Kz1oKHJ8bikpLDY0IT1jJiYocj1vPDw4KSk6KHUrPWgocnxpKSw2NCE9YSYmKHI9bjw8OCksNjQhPWMmJih1Kz1oKHJ8bykpKSxwKz0zO3JldHVybiB0LmRlY29tcHJlc3ModSl9LGNvbXByZXNzVG9VVEYxNjpmdW5jdGlvbihlKXtpZihudWxsPT1lKXJldHVybiIiO3ZhciByLGksbixvPSIiLHM9MCxhPXQuX2Y7Zm9yKGU9dC5jb21wcmVzcyhlKSxyPTA7cjxlLmxlbmd0aDtyKyspc3dpdGNoKGk9ZS5jaGFyQ29kZUF0KHIpLHMrKyl7Y2FzZSAwOm8rPWEoMzIrKGk+PjEpKSxuPSgxJmkpPDwxNDticmVhaztjYXNlIDE6bys9YShuKyhpPj4yKSszMiksbj0oMyZpKTw8MTM7YnJlYWs7Y2FzZSAyOm8rPWEobisoaT4+MykrMzIpLG49KDcmaSk8PDEyO2JyZWFrO2Nhc2UgMzpvKz1hKG4rKGk+PjQpKzMyKSxuPSgxNSZpKTw8MTE7YnJlYWs7Y2FzZSA0Om8rPWEobisoaT4+NSkrMzIpLG49KDMxJmkpPDwxMDticmVhaztjYXNlIDU6bys9YShuKyhpPj42KSszMiksbj0oNjMmaSk8PDk7YnJlYWs7Y2FzZSA2Om8rPWEobisoaT4+NykrMzIpLG49KDEyNyZpKTw8ODticmVhaztjYXNlIDc6bys9YShuKyhpPj44KSszMiksbj0oMjU1JmkpPDw3O2JyZWFrO2Nhc2UgODpvKz1hKG4rKGk+PjkpKzMyKSxuPSg1MTEmaSk8PDY7YnJlYWs7Y2FzZSA5Om8rPWEobisoaT4+MTApKzMyKSxuPSgxMDIzJmkpPDw1O2JyZWFrO2Nhc2UgMTA6bys9YShuKyhpPj4xMSkrMzIpLG49KDIwNDcmaSk8PDQ7YnJlYWs7Y2FzZSAxMTpvKz1hKG4rKGk+PjEyKSszMiksbj0oNDA5NSZpKTw8MzticmVhaztjYXNlIDEyOm8rPWEobisoaT4+MTMpKzMyKSxuPSg4MTkxJmkpPDwyO2JyZWFrO2Nhc2UgMTM6bys9YShuKyhpPj4xNCkrMzIpLG49KDE2MzgzJmkpPDwxO2JyZWFrO2Nhc2UgMTQ6bys9YShuKyhpPj4xNSkrMzIsMzIrKDMyNzY3JmkpKSxzPTB9cmV0dXJuIG8rYShuKzMyKX0sZGVjb21wcmVzc0Zyb21VVEYxNjpmdW5jdGlvbihlKXtpZihudWxsPT1lKXJldHVybiIiO2Zvcih2YXIgcixpLG49IiIsbz0wLHM9MCxhPXQuX2Y7czxlLmxlbmd0aDspe3N3aXRjaChpPWUuY2hhckNvZGVBdChzKS0zMixvKyspe2Nhc2UgMDpyPWk8PDE7YnJlYWs7Y2FzZSAxOm4rPWEocnxpPj4xNCkscj0oMTYzODMmaSk8PDI7YnJlYWs7Y2FzZSAyOm4rPWEocnxpPj4xMykscj0oODE5MSZpKTw8MzticmVhaztjYXNlIDM6bis9YShyfGk+PjEyKSxyPSg0MDk1JmkpPDw0O2JyZWFrO2Nhc2UgNDpuKz1hKHJ8aT4+MTEpLHI9KDIwNDcmaSk8PDU7YnJlYWs7Y2FzZSA1Om4rPWEocnxpPj4xMCkscj0oMTAyMyZpKTw8NjticmVhaztjYXNlIDY6bis9YShyfGk+PjkpLHI9KDUxMSZpKTw8NzticmVhaztjYXNlIDc6bis9YShyfGk+PjgpLHI9KDI1NSZpKTw8ODticmVhaztjYXNlIDg6bis9YShyfGk+PjcpLHI9KDEyNyZpKTw8OTticmVhaztjYXNlIDk6bis9YShyfGk+PjYpLHI9KDYzJmkpPDwxMDticmVhaztjYXNlIDEwOm4rPWEocnxpPj41KSxyPSgzMSZpKTw8MTE7YnJlYWs7Y2FzZSAxMTpuKz1hKHJ8aT4+NCkscj0oMTUmaSk8PDEyO2JyZWFrO2Nhc2UgMTI6bis9YShyfGk+PjMpLHI9KDcmaSk8PDEzO2JyZWFrO2Nhc2UgMTM6bis9YShyfGk+PjIpLHI9KDMmaSk8PDE0O2JyZWFrO2Nhc2UgMTQ6bis9YShyfGk+PjEpLHI9KDEmaSk8PDE1O2JyZWFrO2Nhc2UgMTU6bis9YShyfGkpLG89MH1zKyt9cmV0dXJuIHQuZGVjb21wcmVzcyhuKX0sY29tcHJlc3NUb1VpbnQ4QXJyYXk6ZnVuY3Rpb24oZSl7Zm9yKHZhciByPXQuY29tcHJlc3MoZSksaT1uZXcgVWludDhBcnJheSgyKnIubGVuZ3RoKSxuPTAsbz1yLmxlbmd0aDtuPG87bisrKXt2YXIgcz1yLmNoYXJDb2RlQXQobik7aVsyKm5dPXM+Pj44LGlbMipuKzFdPXMlMjU2fXJldHVybiBpfSxkZWNvbXByZXNzRnJvbVVpbnQ4QXJyYXk6ZnVuY3Rpb24oZSl7aWYobnVsbD09ZSlyZXR1cm4gdC5kZWNvbXByZXNzKGUpO2Zvcih2YXIgcj1uZXcgQXJyYXkoZS5sZW5ndGgvMiksaT0wLG49ci5sZW5ndGg7aTxuO2krKylyW2ldPTI1NiplWzIqaV0rZVsyKmkrMV07cmV0dXJuIHQuZGVjb21wcmVzcyhTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwscikpfSxjb21wcmVzc1RvRW5jb2RlZFVSSUNvbXBvbmVudDpmdW5jdGlvbihlKXtyZXR1cm4gdC5jb21wcmVzc1RvQmFzZTY0KGUpLnJlcGxhY2UoIj0iLCIkIikucmVwbGFjZSgiLyIsIi0iKX0sZGVjb21wcmVzc0Zyb21FbmNvZGVkVVJJQ29tcG9uZW50OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYoZT1lLnJlcGxhY2UoIiQiLCI9IikucmVwbGFjZSgiLSIsIi8iKSksdC5kZWNvbXByZXNzRnJvbUJhc2U2NChlKX0sY29tcHJlc3M6ZnVuY3Rpb24oZSl7aWYobnVsbD09ZSlyZXR1cm4iIjt2YXIgcixpLG4sbz17fSxzPXt9LGE9IiIsYz0iIix1PSIiLHA9MixsPTMsaD0yLGY9IiIsZD0wLHk9MCx2PXQuX2Y7Zm9yKG49MDtuPGUubGVuZ3RoO24rPTEpaWYoYT1lLmNoYXJBdChuKSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobyxhKXx8KG9bYV09bCsrLHNbYV09ITApLGM9dSthLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLGMpKXU9YztlbHNle2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLHUpKXtpZih1LmNoYXJDb2RlQXQoMCk8MjU2KXtmb3Iocj0wO3I8aDtyKyspZDw8PTEsMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrO2ZvcihpPXUuY2hhckNvZGVBdCgwKSxyPTA7cjw4O3IrKylkPWQ8PDF8MSZpLDE1PT15Pyh5PTAsZis9dihkKSxkPTApOnkrKyxpPj49MX1lbHNle2ZvcihpPTEscj0wO3I8aDtyKyspZD1kPDwxfGksMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrLGk9MDtmb3IoaT11LmNoYXJDb2RlQXQoMCkscj0wO3I8MTY7cisrKWQ9ZDw8MXwxJmksMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrLGk+Pj0xfTA9PS0tcCYmKHA9TWF0aC5wb3coMixoKSxoKyspLGRlbGV0ZSBzW3VdfWVsc2UgZm9yKGk9b1t1XSxyPTA7cjxoO3IrKylkPWQ8PDF8MSZpLDE1PT15Pyh5PTAsZis9dihkKSxkPTApOnkrKyxpPj49MTswPT0tLXAmJihwPU1hdGgucG93KDIsaCksaCsrKSxvW2NdPWwrKyx1PVN0cmluZyhhKX1pZigiIiE9PXUpe2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLHUpKXtpZih1LmNoYXJDb2RlQXQoMCk8MjU2KXtmb3Iocj0wO3I8aDtyKyspZDw8PTEsMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrO2ZvcihpPXUuY2hhckNvZGVBdCgwKSxyPTA7cjw4O3IrKylkPWQ8PDF8MSZpLDE1PT15Pyh5PTAsZis9dihkKSxkPTApOnkrKyxpPj49MX1lbHNle2ZvcihpPTEscj0wO3I8aDtyKyspZD1kPDwxfGksMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrLGk9MDtmb3IoaT11LmNoYXJDb2RlQXQoMCkscj0wO3I8MTY7cisrKWQ9ZDw8MXwxJmksMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrLGk+Pj0xfTA9PS0tcCYmKHA9TWF0aC5wb3coMixoKSxoKyspLGRlbGV0ZSBzW3VdfWVsc2UgZm9yKGk9b1t1XSxyPTA7cjxoO3IrKylkPWQ8PDF8MSZpLDE1PT15Pyh5PTAsZis9dihkKSxkPTApOnkrKyxpPj49MTswPT0tLXAmJihwPU1hdGgucG93KDIsaCksaCsrKX1mb3IoaT0yLHI9MDtyPGg7cisrKWQ9ZDw8MXwxJmksMTU9PXk/KHk9MCxmKz12KGQpLGQ9MCk6eSsrLGk+Pj0xO2Zvcig7Oyl7aWYoZDw8PTEsMTU9PXkpe2YrPXYoZCk7YnJlYWt9eSsrfXJldHVybiBmfSxkZWNvbXByZXNzOmZ1bmN0aW9uKGUpe2lmKG51bGw9PWUpcmV0dXJuIiI7aWYoIiI9PWUpcmV0dXJuIG51bGw7dmFyIHIsaSxuLG8scyxhLGMsdT1bXSxwPTQsbD00LGg9MyxmPSIiLGQ9IiIseT10Ll9mLHY9e3N0cmluZzplLHZhbDplLmNoYXJDb2RlQXQoMCkscG9zaXRpb246MzI3NjgsaW5kZXg6MX07Zm9yKHI9MDtyPDM7cis9MSl1W3JdPXI7Zm9yKG49MCxzPU1hdGgucG93KDIsMiksYT0xO2EhPXM7KW89di52YWwmdi5wb3NpdGlvbix2LnBvc2l0aW9uPj49MSwwPT12LnBvc2l0aW9uJiYodi5wb3NpdGlvbj0zMjc2OCx2LnZhbD12LnN0cmluZy5jaGFyQ29kZUF0KHYuaW5kZXgrKykpLG58PShvPjA/MTowKSphLGE8PD0xO3N3aXRjaChuKXtjYXNlIDA6Zm9yKG49MCxzPU1hdGgucG93KDIsOCksYT0xO2EhPXM7KW89di52YWwmdi5wb3NpdGlvbix2LnBvc2l0aW9uPj49MSwwPT12LnBvc2l0aW9uJiYodi5wb3NpdGlvbj0zMjc2OCx2LnZhbD12LnN0cmluZy5jaGFyQ29kZUF0KHYuaW5kZXgrKykpLG58PShvPjA/MTowKSphLGE8PD0xO2M9eShuKTticmVhaztjYXNlIDE6Zm9yKG49MCxzPU1hdGgucG93KDIsMTYpLGE9MTthIT1zOylvPXYudmFsJnYucG9zaXRpb24sdi5wb3NpdGlvbj4+PTEsMD09di5wb3NpdGlvbiYmKHYucG9zaXRpb249MzI3Njgsdi52YWw9di5zdHJpbmcuY2hhckNvZGVBdCh2LmluZGV4KyspKSxufD0obz4wPzE6MCkqYSxhPDw9MTtjPXkobik7YnJlYWs7Y2FzZSAyOnJldHVybiIifWZvcih1WzNdPWMsaT1kPWM7Oyl7aWYodi5pbmRleD52LnN0cmluZy5sZW5ndGgpcmV0dXJuIiI7Zm9yKG49MCxzPU1hdGgucG93KDIsaCksYT0xO2EhPXM7KW89di52YWwmdi5wb3NpdGlvbix2LnBvc2l0aW9uPj49MSwwPT12LnBvc2l0aW9uJiYodi5wb3NpdGlvbj0zMjc2OCx2LnZhbD12LnN0cmluZy5jaGFyQ29kZUF0KHYuaW5kZXgrKykpLG58PShvPjA/MTowKSphLGE8PD0xO3N3aXRjaChjPW4pe2Nhc2UgMDpmb3Iobj0wLHM9TWF0aC5wb3coMiw4KSxhPTE7YSE9czspbz12LnZhbCZ2LnBvc2l0aW9uLHYucG9zaXRpb24+Pj0xLDA9PXYucG9zaXRpb24mJih2LnBvc2l0aW9uPTMyNzY4LHYudmFsPXYuc3RyaW5nLmNoYXJDb2RlQXQodi5pbmRleCsrKSksbnw9KG8+MD8xOjApKmEsYTw8PTE7dVtsKytdPXkobiksYz1sLTEscC0tO2JyZWFrO2Nhc2UgMTpmb3Iobj0wLHM9TWF0aC5wb3coMiwxNiksYT0xO2EhPXM7KW89di52YWwmdi5wb3NpdGlvbix2LnBvc2l0aW9uPj49MSwwPT12LnBvc2l0aW9uJiYodi5wb3NpdGlvbj0zMjc2OCx2LnZhbD12LnN0cmluZy5jaGFyQ29kZUF0KHYuaW5kZXgrKykpLG58PShvPjA/MTowKSphLGE8PD0xO3VbbCsrXT15KG4pLGM9bC0xLHAtLTticmVhaztjYXNlIDI6cmV0dXJuIGR9aWYoMD09cCYmKHA9TWF0aC5wb3coMixoKSxoKyspLHVbY10pZj11W2NdO2Vsc2V7aWYoYyE9PWwpcmV0dXJuIG51bGw7Zj1pK2kuY2hhckF0KDApfWQrPWYsdVtsKytdPWkrZi5jaGFyQXQoMCksaT1mLDA9PS0tcCYmKHA9TWF0aC5wb3coMixoKSxoKyspfX19O3JldHVybiB0fXZhciBUaT1mdW5jdGlvbigpe3JldHVybihUaT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbiBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSYmKHRbbl09ZVtuXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LEFpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3ZvaWQgMD09PXQmJih0PVtdKSx2b2lkIDA9PT1lJiYoZT17fSksdGhpcy5ldmVudHM9dCx0aGlzLnJlcXVlc3RQYXJhbWV0ZXJzPWUsdGhpcy5jb21wcmVzc2VkPSEwLHRoaXMuc2l6ZUNvdW50ZXI9bmV3IG9lKDE1MzYwKX1yZXR1cm4gdC5wcm90b3R5cGUuYWRkRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5zaXplQ291bnRlci5hZGQoZW5jb2RlVVJJQ29tcG9uZW50KGNzSlNPTi5zdHJpbmdpZnkodCkpKSxjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5ldmVudHMsdCl9LHQucHJvdG90eXBlLnNldFJlcXVlc3RQYXJhbWV0ZXJzRnJvbVByb3ZpZGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0UmVxdWVzdFBhcmFtZXRlcnMoKTtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodGhpcy5yZXF1ZXN0UGFyYW1ldGVyc1tyXT1lW3JdKX0sdC5wcm90b3R5cGUuZXZlbnRzQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ldmVudHMubGVuZ3RofSx0LnByb3RvdHlwZS5jbGVhckV2ZW50cz1mdW5jdGlvbigpe3RoaXMuc2l6ZUNvdW50ZXIucmVzZXQoKSx0aGlzLmV2ZW50cz1bXX0sdC5wcm90b3R5cGUuZW1wdHk9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyRXZlbnRzKCl9LHQucHJvdG90eXBlLmlzRnVsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemVDb3VudGVyLmlzVGhyZXNob2xkUmVhY2hlZCgpfHx0aGlzLmV2ZW50c0NvdW50KCk+PTUwfSx0LnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmV2ZW50cy5sZW5ndGh9LHQucHJvdG90eXBlLmdldEV2ZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmV2ZW50c30sdC5wcm90b3R5cGUuZ2V0TWV0YWRhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXF1ZXN0UGFyYW1ldGVyc30sdC5wcm90b3R5cGUuZ2V0UmVxdWVzdFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cuSlNPTi5zdHJpbmdpZnkodGhpcy5ldmVudHMpO3JldHVybiB0aGlzLmNvbXByZXNzZWQ/VGkoVGkoe30sdGhpcy5yZXF1ZXN0UGFyYW1ldGVycykse2U6UmkuY29tcHJlc3NUb0Jhc2U2NCh0KX0pOlRpKFRpKHt9LHRoaXMucmVxdWVzdFBhcmFtZXRlcnMpLHtldTp0fSl9LHQucHJvdG90eXBlLmVuYWJsZUNvbXByZXNzaW9uPWZ1bmN0aW9uKCl7dGhpcy5jb21wcmVzc2VkPSEwfSx0LnByb3RvdHlwZS5kaXNhYmxlQ29tcHJlc3Npb249ZnVuY3Rpb24oKXt0aGlzLmNvbXByZXNzZWQ9ITF9LHR9KCksa2k9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dmFyIHI9dGhpczt0aGlzLmFuYWx5c2lzRXZlbnRzUmVjb3ZlcnlSZXF1ZXN0PXQsdGhpcy5yZWNvdmVyeVN0b3JhZ2U9ZSx0aGlzLnZpc2liaWxpdHlDaGFuZ2VIYW5kbGVyPWZ1bmN0aW9uKCl7InZpc2libGUiPT09ZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlJiZyLnNlbmRQZXJzaXN0ZWRSZWNvcmRpbmdzKCl9fXJldHVybiB0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuc2VuZFBlcnNpc3RlZFJlY29yZGluZ3MoKSx0aGlzLmFkZFZpc2liaWxpdHlDaGFuZ2VMaXN0ZW5lcigpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVWaXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXIoKX0sdC5wcm90b3R5cGUuZ2V0UmVjb3ZlcnlTdG9yYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVjb3ZlcnlTdG9yYWdlfSx0LnByb3RvdHlwZS5zZW5kUGVyc2lzdGVkUmVjb3JkaW5ncz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucmVjb3ZlcnlTdG9yYWdlLnJlY292ZXIoKTtpZihudWxsIT09dCl7dmFyIGU9dCxyPWUubWV0YWRhdGEsaT1lLmV2ZW50cyxuPW5ldyBBaShpLHIpO3RoaXMuYW5hbHlzaXNFdmVudHNSZWNvdmVyeVJlcXVlc3Quc2V0UmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnMobiksdGhpcy5hbmFseXNpc0V2ZW50c1JlY292ZXJ5UmVxdWVzdC5iZWZvcmUoKGZ1bmN0aW9uKCl7bi5lbmFibGVDb21wcmVzc2lvbigpfSkpLHRoaXMuYW5hbHlzaXNFdmVudHNSZWNvdmVyeVJlcXVlc3Quc2VuZCgpfX0sdC5wcm90b3R5cGUuYWRkVmlzaWJpbGl0eUNoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigidmlzaWJpbGl0eWNoYW5nZSIsdGhpcy52aXNpYmlsaXR5Q2hhbmdlSGFuZGxlcil9LHQucHJvdG90eXBlLnJlbW92ZVZpc2liaWxpdHlDaGFuZ2VMaXN0ZW5lcj1mdW5jdGlvbigpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInZpc2liaWxpdHljaGFuZ2UiLHRoaXMudmlzaWJpbGl0eUNoYW5nZUhhbmRsZXIpfSx0fSgpO3ZhciBQaT1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihpLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgaSl9fSgpLE9pPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyKXt2YXIgaT10LmNhbGwodGhpcyxlLHIpfHx0aGlzO3JldHVybiBpLm9uQmVhY29uU3VjY2Vzc0NhbGxiYWNrcz1bXSxpLm9uQmVhY29uRmFpbHVyZUNhbGxiYWNrcz1bXSxpfXJldHVybiBQaShlLHQpLGUucHJvdG90eXBlLnNldFJlcXVlc3RQYXlsb2FkUHJvdmlkZXI9ZnVuY3Rpb24odCl7dGhpcy5yZXF1ZXN0UGF5bG9hZFByb3ZpZGVyPXR9LGUucHJvdG90eXBlLm9uQmVhY29uU3VjY2Vzcz1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5vbkJlYWNvblN1Y2Nlc3NDYWxsYmFja3MsdCl9LGUucHJvdG90eXBlLm9uQmVhY29uRmFpbHVyZT1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5vbkJlYWNvbkZhaWx1cmVDYWxsYmFja3MsdCl9LGUucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oKXtjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5iZWZvcmVSZXF1ZXN0Q2FsbGJhY2tzLChmdW5jdGlvbih0KXtyZXR1cm4gdCgpfSkpO3ZhciB0PXRoaXMucmV0cmlldmVQYXJhbWV0ZXJzKCksZT1WLnRvUXVlcnkodCkscj10aGlzLnJldHJpZXZlUGF5bG9hZCgpO3RoaXMuc2VuZEJlYWNvbihlLHIpP2NzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLm9uQmVhY29uU3VjY2Vzc0NhbGxiYWNrcywoZnVuY3Rpb24odCl7cmV0dXJuIHQoKX0pKTpjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5vbkJlYWNvbkZhaWx1cmVDYWxsYmFja3MsKGZ1bmN0aW9uKHQpe3JldHVybiB0KCl9KSksY3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuYWZ0ZXJSZXF1ZXN0Q2FsbGJhY2tzLChmdW5jdGlvbih0KXtyZXR1cm4gdCgpfSkpfSxlLnByb3RvdHlwZS5yZXRyaWV2ZVBheWxvYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXF1ZXN0UGF5bG9hZFByb3ZpZGVyP3RoaXMucmVxdWVzdFBheWxvYWRQcm92aWRlci5nZXRSZXF1ZXN0UGF5bG9hZCgpOiIifSxlLnByb3RvdHlwZS5zZW5kQmVhY29uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMCE9PW5hdmlnYXRvci5zZW5kQmVhY29uJiZuYXZpZ2F0b3Iuc2VuZEJlYWNvbih0aGlzLmRvbWFpblVyaSsiLyIrdGhpcy5wYXRoKyI/Iit0LGUpfSxlfShGKSxfaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5zdG9yYWdlTmFtZT10fXJldHVybiB0LnByb3RvdHlwZS5zYXZlPWZ1bmN0aW9uKHQpe2xvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuc3RvcmFnZU5hbWUsY3NKU09OLnN0cmluZ2lmeSh0KSl9LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5zdG9yYWdlTmFtZSl9LHQucHJvdG90eXBlLnJlY292ZXI9ZnVuY3Rpb24oKXt2YXIgdD1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnN0b3JhZ2VOYW1lKTtpZihudWxsPT09dClyZXR1cm4gbnVsbDt2YXIgZT1udWxsO3RyeXtlPWNzSlNPTi5wYXJzZSh0KX1jYXRjaChlKXtUdC5lcnJvcigiSW52YWxpZCBpdGVtIGluIGxvY2FsU3RvcmFnZS5cbiAgICAgICAgIChrZXk6Iit0aGlzLnN0b3JhZ2VOYW1lKyI7IHZhbHVlOiIrdCsiKSIpfWZpbmFsbHl7dGhpcy5jbGVhcigpfXJldHVybiBlfSx0fSgpLElpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixpLG4sbyxzLGEpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMudmlzaXRvclNlcnZpY2U9ZSx0aGlzLnNlc3Npb25TZXJ2aWNlPXIsdGhpcy5ldmVudFBhdGhDb21wdXRhdGlvbj1pLHRoaXMuc2VsZWN0b3I9bix0aGlzLmNvbW1hbmRzU2VydmljZT1vLHRoaXMuc2Vzc2lvblJlbmV3ZXI9cyx0aGlzLmlmcmFtZUV2ZW50c0VtaXR0ZXI9YX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpeyFmdW5jdGlvbigpe2xvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJjc0xlZ2FjeVJlY292ZXJlZCIpO2Zvcih2YXIgdD1bXSxlPTA7ZTxsb2NhbFN0b3JhZ2UubGVuZ3RoO2UrPTEpe3ZhciByPWxvY2FsU3RvcmFnZS5rZXkoZSk7MD09PWNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwociwiQ1NTdG9yYWdlRGF0YSIpJiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodCxyKX1jc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodCwoZnVuY3Rpb24odCl7cmV0dXJuIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHQpfSkpfSgpO3ZhciB0PW5ldyBBaTt0aGlzLmFuYWx5c2lzRXZlbnRzUmVjb3Zlcnk9dGhpcy5jcmVhdGVSZWNvdmVyeSgpLHRoaXMuYW5hbHlzaXNFdmVudHNTZXJ2aWNlPXRoaXMuY3JlYXRlU2VydmljZSh0LHRoaXMuYW5hbHlzaXNFdmVudHNSZWNvdmVyeS5nZXRSZWNvdmVyeVN0b3JhZ2UoKSksdGhpcy5hbmFseXNpc0V2ZW50c1NlcnZpY2UuaW5pdCgpLHRoaXMuaWZyYW1lRXZlbnRzRW1pdHRlci5hZGRMaXN0ZW5lcnModGhpcy5hbmFseXNpc0V2ZW50c1NlcnZpY2UpfSx0LnByb3RvdHlwZS5vblN0YXJ0VHJhY2tpbmc9ZnVuY3Rpb24oKXt0aGlzLmFuYWx5c2lzRXZlbnRzUmVjb3Zlcnkuc3RhcnQoKSx0aGlzLmFuYWx5c2lzRXZlbnRzU2VydmljZS5zdGFydCgpfSx0LnByb3RvdHlwZS5vbkFmdGVyTmF0dXJhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy5hbmFseXNpc0V2ZW50c1NlcnZpY2UuaW5pdFN0YXRlcygpfSx0LnByb3RvdHlwZS5vbkFmdGVyQXJ0aWZpY2lhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy5hbmFseXNpc0V2ZW50c1NlcnZpY2UuaW5pdFN0YXRlcygpfSx0LnByb3RvdHlwZS5vbkJlZm9yZUFydGlmaWNpYWxQYWdlVmlldz1mdW5jdGlvbigpe3RoaXMuYW5hbHlzaXNFdmVudHNTZXJ2aWNlLmNsZWFyU3RhdGVzKCl9LHQucHJvdG90eXBlLm9uQmVmb3JlU2Vzc2lvblJlbmV3YWw9ZnVuY3Rpb24oKXt0aGlzLmFuYWx5c2lzRXZlbnRzU2VydmljZS5jbGVhclN0YXRlcygpLHRoaXMuYW5hbHlzaXNFdmVudHNTZXJ2aWNlLnN0b3AoKSx0aGlzLmFuYWx5c2lzRXZlbnRzUmVjb3Zlcnkuc3RvcCgpfSx0LnByb3RvdHlwZS5vbk9wdG91dD1mdW5jdGlvbigpe3RoaXMuYW5hbHlzaXNFdmVudHNTZXJ2aWNlLnN0b3AoKSx0aGlzLmFuYWx5c2lzRXZlbnRzUmVjb3Zlcnkuc3RvcCgpfSx0LnByb3RvdHlwZS5jcmVhdGVTZXJ2aWNlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9bmV3IEpyKHdpbmRvdyksbj1uZXcgU2ksbz1uZXcgbWkodGhpcy5jb25maWd1cmF0aW9uLHRoaXMuZXZlbnRQYXRoQ29tcHV0YXRpb24sdGhpcy5zZWxlY3Rvcikscz1uZXcgcmkodGhpcy5jb25maWd1cmF0aW9uLHRoaXMuZXZlbnRQYXRoQ29tcHV0YXRpb24sbmV3IG9pKFR0KSksYT1uZXcgRyh0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0VHJhY2tlclVyaSgpLCJldmVudHMiKSxjPW5ldyBPaSh0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0VHJhY2tlclVyaSgpLCJldmVudHMiKSx1PW5ldyBJZSh0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy52aXNpdG9yU2VydmljZSx0aGlzLnNlc3Npb25TZXJ2aWNlLG4scixpKTtyZXR1cm4gbmV3IHdpKHRoaXMuY29uZmlndXJhdGlvbixvLHMsbixyLHQsYSxjLHUsdGhpcy5zZXNzaW9uUmVuZXdlcixlKX0sdC5wcm90b3R5cGUuY3JlYXRlUmVjb3Zlcnk9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgRyh0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0VHJhY2tlclVyaSgpLCJldmVudHMiKTtyZXR1cm4gbmV3IGtpKHQsbmV3IF9pKCJjc0FuYWx5c2lzRXZlbnRzUGVyc2lzdGVkIikpfSx0fSgpLE5pPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksTWk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIsaSl7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXI9ZSxuLnBhZ2VWaWV3UmVxdWVzdD1yLG4udXJsU2VydmljZT1pLG59cmV0dXJuIE5pKGUsdCksZS5wcm90b3R5cGUub25TdGFydD1mdW5jdGlvbigpe3RoaXMuc2VuZE5hdHVyYWxQYWdlVmlldygpfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLnRyaWdnZXJBcnRpZmljaWFsUGFnZVZpZXc9ZnVuY3Rpb24odCl7dGhpcy51cmxTZXJ2aWNlLm92ZXJyaWRlUGF0aCh0KSx0aGlzLmlzU3RhcnRlZCYmdGhpcy5zZW5kQXJ0aWZpY2lhbFBhZ2VWaWV3KCl9LGUucHJvdG90eXBlLnNlbmROYXR1cmFsUGFnZVZpZXc9ZnVuY3Rpb24oKXt0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdEJlZm9yZU5hdHVyYWxQYWdlVmlldygpLHRoaXMucGFnZVZpZXdSZXF1ZXN0LnNlbmQoKSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdEFmdGVyTmF0dXJhbFBhZ2VWaWV3KCl9LGUucHJvdG90eXBlLnNlbmRBcnRpZmljaWFsUGFnZVZpZXc9ZnVuY3Rpb24oKXt0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdEJlZm9yZUFydGlmaWNpYWxQYWdlVmlldygpLHRoaXMucGFnZVZpZXdSZXF1ZXN0LnNlbmQoKSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdEFmdGVyQXJ0aWZpY2lhbFBhZ2VWaWV3KCl9LGV9KHVlKSxMaT13aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlfHx3aW5kb3cubmF2aWdhdG9yLnVzZXJMYW5ndWFnZXx8d2luZG93Lm5hdmlnYXRvci5icm93c2VyTGFuZ3VhZ2V8fHdpbmRvdy5uYXZpZ2F0b3Iuc3lzdGVtTGFuZ3VhZ2V8fCJ1bmtub3duIjtmdW5jdGlvbiBEaSgpe3JldHVybntsYTpMaX19dmFyIHhpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnBpaT10fXJldHVybiB0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybntkcjp0aGlzLmdldCgpfX0sdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGlpLmFub255bWl6ZSh0aGlzLmdldFJlZmVycmVyKCkpfSx0LnByb3RvdHlwZS5nZXRSZWZlcnJlcj1mdW5jdGlvbigpe3ZhciB0PSIiO3RyeXt0PXdpbmRvdy50b3AuZG9jdW1lbnQucmVmZXJyZXJ9Y2F0Y2goZSl7aWYod2luZG93LnBhcmVudCl0cnl7dD13aW5kb3cucGFyZW50LmRvY3VtZW50LnJlZmVycmVyfWNhdGNoKGUpe3Q9IiJ9fXJldHVybiIiPT09dCYmKHQ9ZG9jdW1lbnQucmVmZXJyZXIpLHR9LHR9KCksVmk9WyJ0cmFja1BhZ2V2aWV3Il0scWk9WyJzZXRQYXRoIl0sVWk9WyJzZXRRdWVyeSJdLGppPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixpLG4sbyxzLGEsYyl7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy5jb21tYW5kc1NlcnZpY2U9ZSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXI9cix0aGlzLnZpc2l0b3JTZXJ2aWNlPWksdGhpcy5zZXNzaW9uU2VydmljZT1uLHRoaXMuY29uc2VudFNlcnZpY2U9byx0aGlzLmN1c3RvbVZhcmlhYmxlc1NlcnZpY2U9cyx0aGlzLnBpaT1hLHRoaXMudXJsU2VydmljZT1jfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPW5ldyBHKHRoaXMuY29uZmlndXJhdGlvbi5nZXRUcmFja2VyVXJpKCksInBhZ2V2aWV3Iik7dGhpcy5wYWdlVmlld1NlcnZpY2U9bmV3IE1pKHRoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlcixlLHRoaXMudXJsU2VydmljZSksZS5zZXRSZXF1ZXN0UGFyYW1ldGVyc1Byb3ZpZGVycyh0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy52aXNpdG9yU2VydmljZSx0aGlzLnNlc3Npb25TZXJ2aWNlLHRlLG5ldyB4aSh0aGlzLnBpaSksdGhpcy51cmxTZXJ2aWNlLHRoaXMuY29uc2VudFNlcnZpY2Usbix0aGlzLmN1c3RvbVZhcmlhYmxlc1NlcnZpY2UsaSksdGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoVmksKGZ1bmN0aW9uKGUpe3JldHVybiB0LnBhZ2VWaWV3U2VydmljZS50cmlnZ2VyQXJ0aWZpY2lhbFBhZ2VWaWV3KGUpfSkpLHRoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKHFpLChmdW5jdGlvbihlKXtyZXR1cm4gdC51cmxTZXJ2aWNlLm92ZXJyaWRlUGF0aChlKX0pKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihVaSwoZnVuY3Rpb24oZSl7cmV0dXJuIHQudXJsU2VydmljZS5vdmVycmlkZVF1ZXJ5KGUpfSkpfSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMucGFnZVZpZXdTZXJ2aWNlLnN0YXJ0KCl9LHQucHJvdG90eXBlLm9uQmVmb3JlU2Vzc2lvblJlbmV3YWw9ZnVuY3Rpb24oKXt0aGlzLnBhZ2VWaWV3U2VydmljZS5zdG9wKCl9LHR9KCksemk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5wYXRoQ29tcHV0YXRpb249dCx0aGlzLmNvbmZpZ3VyYXRpb249ZX1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0VGFyZ2V0UGF0aD1mdW5jdGlvbih0KXt2YXIgZSxyPSRyKHQpO3JldHVybiB0aGlzLnBhdGhDb21wdXRhdGlvbi5nZXRFbGVtZW50UGF0aChyLHtkeW5hbWljSWRSZWdleDp0aGlzLmNvbmZpZ3VyYXRpb24uZHluYW1pY0lkUmVnZXgscmVsaWFibGVTZWxlY3RvcnM6bnVsbD09PShlPXRoaXMuY29uZmlndXJhdGlvbi5leHBlcmltZW50YWwucGF0aENvbXB1dGF0aW9uKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5yZWxpYWJsZVNlbGVjdG9yc30pfSx0LnByb3RvdHlwZS5nZXRUYXJnZXRQYXRoQW5kVGFyZ2V0TGluaz1mdW5jdGlvbih0KXt2YXIgZSxyPSRyKHQpLGk9dGhpcy5wYXRoQ29tcHV0YXRpb24uZ2V0RWxlbWVudFBhdGhBbmRGaXJzdEFuY2hvclBhcmVudChyLHtkeW5hbWljSWRSZWdleDp0aGlzLmNvbmZpZ3VyYXRpb24uZHluYW1pY0lkUmVnZXgscmVsaWFibGVTZWxlY3RvcnM6bnVsbD09PShlPXRoaXMuY29uZmlndXJhdGlvbi5leHBlcmltZW50YWwucGF0aENvbXB1dGF0aW9uKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5yZWxpYWJsZVNlbGVjdG9yc30pLG49aS5wYXRoLG89aS5maXJzdEFuY2hvclBhcmVudDtyZXR1cm57cGF0aDpuLHRhcmdldExpbms6dGhpcy5oYXNWYWxpZFRhcmdldExpbmsobyk/by5ocmVmOiIifX0sdC5wcm90b3R5cGUuaGFzVmFsaWRUYXJnZXQ9ZnVuY3Rpb24odCl7dmFyIGU9JHIodCk7cmV0dXJuIHRoaXMucGF0aENvbXB1dGF0aW9uLmlzVmFsaWRFbGVtZW50KGUpfSx0LnByb3RvdHlwZS5oYXNWYWxpZFRhcmdldExpbms9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPT10JiZ0Lmhhc0F0dHJpYnV0ZSgiaHJlZiIpJiYhTih0LmdldEF0dHJpYnV0ZSgiaHJlZiIpLCIjIil9LHR9KCksQmk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMucGF0aENvbXB1dGF0aW9uPXR9cmV0dXJuIHQucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcztyZXR1cm4gZnVuY3Rpb24oaSl7ci5wYXRoQ29tcHV0YXRpb24uaGFzVmFsaWRUYXJnZXQoaSkmJnIudGFyZ2V0TWF0Y2hlc1NlbGVjdG9yKGksdCkmJmUoaSl9fSx0LnByb3RvdHlwZS50YXJnZXRNYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24odCxlKXt2YXIgcj0kcih0KTtyZXR1cm4gRSgpLmNhbGwocixlKX0sdC5wcm90b3R5cGUuaXNNYXRjaGVzU2VsZWN0b3JTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hIUUoKX0sdH0oKSxGaT1bInZpc2l0IiwyXSxIaT1bInBhZ2UiLDNdLEdpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7dGhpcy5waWk9dCx0aGlzLmNvb2tpZVNlcnZpY2U9ZSx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZT1yLHRoaXMuY3VzdG9tVmFyaWFibGVzUGFnZT17fX1yZXR1cm4gdC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSxyLGkpe3ZhciBuLG87aWYodD4wJiZtdChlKSYmbXQocikpe3ZhciBzPXRoaXMucGlpLmFub255bWl6ZSgiIisoZHQoZSk/ZTpjc1N0cmluZyhlKSkpLGE9dGhpcy5waWkuYW5vbnltaXplKCIiKyhkdChyKT9yOmNzU3RyaW5nKHIpKSk7aWYobj1bcy5zbGljZSgwLDIwKSxhLnNsaWNlKDAsMjU1KV0sbz0iIiE9PXIsIXZ0KGkpfHxjc0FycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoRmksaSk+PTApe3ZhciBjPXRoaXMuZ2V0Q3VzdG9tVmFyaWFibGVzU2Vzc2lvbigpO28/Y1t0XT1uOmRlbGV0ZSBjW3RdLE90LnNldFJhdyh3aW5kb3cuSlNPTi5zdHJpbmdpZnkoYyksdGhpcy5jb29raWVTZXJ2aWNlLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlKX0oIXZ0KGkpfHxjc0FycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoSGksaSk+PTApJiYobz90aGlzLmN1c3RvbVZhcmlhYmxlc1BhZ2VbdF09bjpkZWxldGUgdGhpcy5jdXN0b21WYXJpYWJsZXNQYWdlW3RdKX19LHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRDdXN0b21WYXJpYWJsZXNTZXNzaW9uKCk7Zm9yKHZhciBlIGluIHRoaXMuY3VzdG9tVmFyaWFibGVzUGFnZSl0aGlzLmN1c3RvbVZhcmlhYmxlc1BhZ2UuaGFzT3duUHJvcGVydHkoZSkmJih0W2VdPXRoaXMuY3VzdG9tVmFyaWFibGVzUGFnZVtlXSk7aWYod2luZG93LkpTT04uc3RyaW5naWZ5KHQpLmxlbmd0aDw9MilyZXR1cm57fTt2YXIgcj17Y3ZhcnM6dGhpcy5nZXRWYWxpZEN1c3RvbVZhcnModCl9O3JldHVybiB0aGlzLmN1c3RvbVZhcmlhYmxlc1BhZ2UmJndpbmRvdy5KU09OLnN0cmluZ2lmeSh0aGlzLmN1c3RvbVZhcmlhYmxlc1BhZ2UpLmxlbmd0aD4yJiYoci5jdmFycD10aGlzLmdldFZhbGlkQ3VzdG9tVmFycyh0aGlzLmN1c3RvbVZhcmlhYmxlc1BhZ2UpKSxyfSx0LnByb3RvdHlwZS5nZXRDdXN0b21WYXJpYWJsZXNTZXNzaW9uPWZ1bmN0aW9uKCl7dmFyIHQ9T3QuZ2V0KHRoaXMuY29va2llU2VydmljZSk7cmV0dXJuIG51bGwhPT10JiZ5dCh0KT90Ont9fSx0LnByb3RvdHlwZS5nZXRWYWxpZEN1c3RvbVZhcnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHI9cGFyc2VJbnQoZSwxMCksaT10W2VdLG49aVswXSxvPWlbMV07YT0xLGM9MjAsKCEoZnQocz1yKSYmcz49YSYmczw9Yyl8fG4ubGVuZ3RoPjIwfHxvLmxlbmd0aD4yNTUpJiZkZWxldGUgdFtlXX12YXIgcyxhLGMsdT1mdW5jdGlvbih0KXt2YXIgZTtmb3IoZSBpbiB0KXJldHVybiExO3JldHVybiEwfSh0KT9bXTp0O3JldHVybiB3aW5kb3cuSlNPTi5zdHJpbmdpZnkodSl9LHR9KCksV2k9WyJzZXRDdXN0b21WYXJpYWJsZSJdLFhpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixpKXt0aGlzLmNvbW1hbmRzU2VydmljZT10LHRoaXMuY3VzdG9tVmFyaWFibGVzU2VydmljZT1lLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlPXIsdGhpcy5jb29raWVTZXJ2aWNlPWl9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKFdpLChmdW5jdGlvbihlLHIsaSxuKXt0LmN1c3RvbVZhcmlhYmxlc1NlcnZpY2Uuc2V0KGUscixpLG4pfSkpfSx0LnByb3RvdHlwZS5vbk9wdG91dD1mdW5jdGlvbigpe090LnJlbW92ZSh0aGlzLmNvb2tpZVNlcnZpY2UsdGhpcy5jcm9zc0RvbWFpblNpbmdsZUlmcmFtZVNlcnZpY2UpfSx0fSgpLFlpPWZ1bmN0aW9uKHQsZSxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz9lOm51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUodCxlLHIsaSk7ZWxzZSBmb3IodmFyIGE9dC5sZW5ndGgtMTthPj0wO2EtLSkobj10W2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKGUscixzKTpuKGUscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHMpLHN9LEppPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUub25Mb2FkPWZ1bmN0aW9uKHQpe3RoaXMub25Mb2FkQ2FsbGJhY2s9dH0sdC5wcm90b3R5cGUub25Mb2FkQ2FsbGJhY2tFeGVjdXRlPWZ1bmN0aW9uKCl7dGhpcy5vbkxvYWRDYWxsYmFjaygpfSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3ZhciB0PXRoaXMub25Mb2FkQ2FsbGJhY2tFeGVjdXRlLmJpbmQodGhpcyk7dGhpcy5vbkRvY3VtZW50TG9hZGVkKHQpfSx0LnByb3RvdHlwZS5vbkRvY3VtZW50TG9hZGVkPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixlKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsZSksdCgpfSJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHwibG9hZGluZyIhPT1kb2N1bWVudC5yZWFkeVN0YXRlJiYhZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsP3NldFRpbWVvdXQodCk6KGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixlKSl9LFlpKFtBdCgib25Mb2FkIildLHQucHJvdG90eXBlLCJvbkxvYWRDYWxsYmFja0V4ZWN1dGUiLG51bGwpLHR9KCksS2k9WyJjbGVhclNlc3Npb24iXSxRaT1bImV4dGVuZFNlc3Npb24iXSxaaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsaSl7dGhpcy5jb29raWVEb21haW49dCx0aGlzLnZpc2l0b3JTZXJ2aWNlPWUsdGhpcy5zZXNzaW9uU2VydmljZT1yLHRoaXMuY29tbWFuZHNTZXJ2aWNlPWl9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKEtpLChmdW5jdGlvbigpe3JldHVybiB0LnNlc3Npb25TZXJ2aWNlLnJlbW92ZVNlc3Npb24odC5jb29raWVEb21haW4pfSkpLHRoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKFFpLChmdW5jdGlvbigpe3JldHVybiB0LnNlc3Npb25TZXJ2aWNlLmV4dGVuZFNlc3Npb25QZXJpb2RpY2FsbHkoKX0pKX0sdC5wcm90b3R5cGUub25CZWZvcmVOYXR1cmFsUGFnZVZpZXc9ZnVuY3Rpb24oKXt0aGlzLnZpc2l0b3JTZXJ2aWNlLmNyZWF0ZU9yVXBkYXRlVmlzaXRvcigpLHRoaXMuc2Vzc2lvblNlcnZpY2UuY3JlYXRlT3JVcGRhdGVTZXNzaW9uKCl9LHQucHJvdG90eXBlLm9uQmVmb3JlQXJ0aWZpY2lhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy52aXNpdG9yU2VydmljZS5jcmVhdGVPclVwZGF0ZVZpc2l0b3IoKSx0aGlzLnNlc3Npb25TZXJ2aWNlLmNyZWF0ZU9yVXBkYXRlU2Vzc2lvbigpfSx0LnByb3RvdHlwZS5vbk9wdG91dD1mdW5jdGlvbigpe3RoaXMudmlzaXRvclNlcnZpY2UucmVtb3ZlQ3VycmVudFZpc2l0b3IoKSx0aGlzLnNlc3Npb25TZXJ2aWNlLnJlbW92ZUN1cnJlbnRTZXNzaW9uKCl9LHQucHJvdG90eXBlLm9uUmVjb3JkaW5nU3RhdGVDaGFuZ2U9ZnVuY3Rpb24odCxlKXt0aGlzLnNlc3Npb25TZXJ2aWNlLnVwZGF0ZVJlY29yZGluZ1N0YXRlKHQsZSl9LHR9KCksJGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuc2Vzc2lvblNlcnZpY2U9dH1yZXR1cm4gdC5wcm90b3R5cGUub25TZXNzaW9uRXhwaXJlZD1mdW5jdGlvbih0KXt0aGlzLm9uU2Vzc2lvbkV4cGlyZWRDYWxsYmFjaz10fSx0LnByb3RvdHlwZS5pc1Nlc3Npb25WYWxpZD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuc2Vzc2lvblNlcnZpY2UuaGFzVmFsaWRTZXNzaW9uKCk7cmV0dXJuIXQmJnRoaXMuY2FuUmVuZXdTZXNzaW9uKCk/KHRoaXMubGFzdFNlc3Npb25SZW5ld2FsVGltZT1xLm5vdygpLHRoaXMub25TZXNzaW9uRXhwaXJlZENhbGxiYWNrKCksdGhpcy5zZXNzaW9uU2VydmljZS5oYXNWYWxpZFNlc3Npb24oKSk6dH0sdC5wcm90b3R5cGUuY2FuUmVuZXdTZXNzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIXZ0KHRoaXMubGFzdFNlc3Npb25SZW5ld2FsVGltZSl8fHEubm93KCktdGhpcy5sYXN0U2Vzc2lvblJlbmV3YWxUaW1lPjZlNH0sdH0oKSx0bj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMuZU1lcmNoYW5kaXNpbmdSZXF1ZXN0PXQsdGhpcy51cmxTZXJ2aWNlPWUsdGhpcy5lTWVyY2hhbmRpc2luZ1RyYWNrZXI9cix0aGlzLnJlcXVlc3RQYXlsb2FkPXt0YXJnZXRVcmw6IiIsd2luZG93V2lkdGg6MCx3aW5kb3dIZWlnaHQ6MCxwcm9kdWN0czpbXX19cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuZU1lcmNoYW5kaXNpbmdSZXF1ZXN0LmFmdGVyUHJvdmlkZXJzQ2FsbGVkKChmdW5jdGlvbigpe3QucmVxdWVzdFBheWxvYWQucHJvZHVjdHM9W119KSksdGhpcy5lTWVyY2hhbmRpc2luZ1JlcXVlc3Quc2V0UmVxdWVzdFBheWxvYWRQcm92aWRlcih7Z2V0UmVxdWVzdFBheWxvYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gY3NKU09OLnN0cmluZ2lmeSh0LnJlcXVlc3RQYXlsb2FkKX19KX0sdC5wcm90b3R5cGUuY29sbGVjdD1mdW5jdGlvbigpe3RoaXMucmVxdWVzdFBheWxvYWQ9e3RhcmdldFVybDp0aGlzLnVybFNlcnZpY2UuZ2V0VXJsKCksd2luZG93V2lkdGg6dGUud2luZG93V2lkdGgoKSx3aW5kb3dIZWlnaHQ6dGUud2luZG93SGVpZ2h0KCkscHJvZHVjdHM6dGhpcy5lTWVyY2hhbmRpc2luZ1RyYWNrZXIuY29sbGVjdFByb2R1Y3RzKCl9LHRoaXMuc2VuZEVNZXJjaGFuZGlzaW5nRGF0YSgpfSx0LnByb3RvdHlwZS5vbklmcmFtZUVtZXJjaGFuZGlzaW5nTWVzc2FnZT1mdW5jdGlvbih0KXt0aGlzLnJlcXVlc3RQYXlsb2FkPXQsdGhpcy5zZW5kRU1lcmNoYW5kaXNpbmdEYXRhKCl9LHQucHJvdG90eXBlLnNlbmRFTWVyY2hhbmRpc2luZ0RhdGE9ZnVuY3Rpb24oKXt0aGlzLmVNZXJjaGFuZGlzaW5nUmVxdWVzdC5zZW5kKCl9LHR9KCksZW49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuY29uZmlndXJhdGlvbj10fXJldHVybiB0LnByb3RvdHlwZS5jb2xsZWN0UHJvZHVjdHM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wLHI9dGhpcy5nZXRBbGxWYWxpZEFuY2hvcnModGhpcy5jb25maWd1cmF0aW9uLmhvc3RuYW1lcyk7ZTxyLmxlbmd0aDtlKyspe3ZhciBpPXJbZV0sbj1rLmdldEVsZW1lbnRQYXRoKGkse2R5bmFtaWNJZFJlZ2V4OnRoaXMuY29uZmlndXJhdGlvbi5keW5hbWljSWRSZWdleH0pO2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0LHt0YXJnZXRQYXRoOm4saHJlZjppLmhyZWZ9KX1yZXR1cm4gdH0sdC5wcm90b3R5cGUuZ2V0QWxsVmFsaWRBbmNob3JzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKG1yLmZpbmRBbGxFbGVtZW50cygiYSIpLChmdW5jdGlvbihyKXtyZXR1cm4gZS5pc0FuY2hvclZhbGlkKHIsdCl9KSl9LHQucHJvdG90eXBlLmlzQW5jaG9yVmFsaWQ9ZnVuY3Rpb24odCxlKXt2YXIgcj1udCh0LmhyZWYpO3JldHVybiB0Lm9mZnNldFdpZHRoPjAmJnQub2Zmc2V0SGVpZ2h0PjAmJiIiIT09ciYmb3QocixlKX0sdH0oKSxybj1bImVtZXJjaDpjb2xsZWN0Il0sbm49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyLGksbixvLHMpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMuY29tcHJlc3Nvcj1lLHRoaXMuYmFzaWNSZXF1ZXN0UGFyYW1ldGVycz1yLHRoaXMuY3VzdG9tVmFyaWFibGVzU2VydmljZT1pLHRoaXMudXJsU2VydmljZT1uLHRoaXMuaWZyYW1lRXZlbnRzRW1pdHRlcj1vLHRoaXMuY29tbWFuZHNTZXJ2aWNlPXN9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNyZWF0ZUVNZXJjaGFuZGlzaW5nUG9zdFJlcXVlc3QodGhpcy5jb21wcmVzc29yKSxlPW5ldyBlbih0aGlzLmNvbmZpZ3VyYXRpb24pO3RoaXMuZU1lcmNoYW5kaXNpbmdTZXJ2aWNlPW5ldyB0bih0LHRoaXMudXJsU2VydmljZSxlKSx0aGlzLmVNZXJjaGFuZGlzaW5nU2VydmljZS5pbml0KCksdGhpcy5pZnJhbWVFdmVudHNFbWl0dGVyLmFkZExpc3RlbmVycyh0aGlzLmVNZXJjaGFuZGlzaW5nU2VydmljZSl9LHQucHJvdG90eXBlLnJlZ2lzdGVyQ29tbWFuZHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKHJuLChmdW5jdGlvbigpe3QuZU1lcmNoYW5kaXNpbmdTZXJ2aWNlLmNvbGxlY3QoKX0pKX0sdC5wcm90b3R5cGUub25TdGFydFRyYWNraW5nPWZ1bmN0aW9uKCl7dGhpcy5lTWVyY2hhbmRpc2luZ1NlcnZpY2UuY29sbGVjdCgpLHRoaXMucmVnaXN0ZXJDb21tYW5kcygpfSx0LnByb3RvdHlwZS5vbkFmdGVyQXJ0aWZpY2lhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7dGhpcy5lTWVyY2hhbmRpc2luZ1NlcnZpY2UuY29sbGVjdCgpfSx0LnByb3RvdHlwZS5jcmVhdGVFTWVyY2hhbmRpc2luZ1Bvc3RSZXF1ZXN0PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBRdCh0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0VHJhY2tlclVyaSgpLCJkaXNwbGF5Iik7cmV0dXJuIGUuc2V0Q29tcHJlc3Npb25PcHRpb25zKHQsImJhc2U2NCIpLGUuc2V0UmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnModGhpcy5iYXNpY1JlcXVlc3RQYXJhbWV0ZXJzLHRoaXMuY3VzdG9tVmFyaWFibGVzU2VydmljZSksZS5zZXRSZXF1ZXN0SGVhZGVyKHtuYW1lOiJBY2Nlc3MtQ29udHJvbC1FeHBvc2UtSGVhZGVycyIsdmFsdWU6IkNvbnRlbnQtY29tcHJlc3Npb24ifSksZS5zZXRSZXF1ZXN0SGVhZGVyKHtuYW1lOiJDb250ZW50LXR5cGUiLHZhbHVlOiJ0ZXh0L3BsYWluOyBjaGFyc2V0PVVURi04In0pLGUuc2V0UmVxdWVzdEhlYWRlcih7bmFtZToiQ29udGVudC1jb21wcmVzc2lvbiIsdmFsdWU6IkxaU3RyaW5nIn0pLGV9LHR9KCksb249cigwKTtmdW5jdGlvbiBzbih0KXtyZXR1cm4gdC50YWdEZXBsb3ltZW50TW9kZT09PW9uLlRhZ0RlcGxveW1lbnRNb2RlLkR1YWxDb2xsZWN0aW9uUmV2aWV3fHx0LnRhZ0RlcGxveW1lbnRNb2RlPT09b24uVGFnRGVwbG95bWVudE1vZGUuRHVhbENvbGxlY3Rpb259dmFyIGFuLGNuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixpKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLnZpc2l0b3JTZXJ2aWNlPWUsdGhpcy5zZXNzaW9uU2VydmljZT1yLHRoaXMucGlpTWFza2luZ1NlcnZpY2U9aX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuaXNDbGlja3RhbGVQdGNMb2FkZWQ9ITEsdGhpcy5pc0NvbnRlbnRTcXVhcmVEYXRhQ29sbGVjdGlvblN0YXJ0ZWQ9ITF9LHQucHJvdG90eXBlLmxvYWRDbGlja3RhbGVQdGM9ZnVuY3Rpb24oKXshdGhpcy5pc0NsaWNrdGFsZVB0Y0xvYWRlZCYmdGhpcy5jb25maWd1cmF0aW9uLnB0Y0RvbWFpbiYmdGhpcy5jb25maWd1cmF0aW9uLnB0Y0d1aWQmJnRoaXMuZG9Mb2FkQ2xpY2t0YWxlUHRjKCl9LHQucHJvdG90eXBlLmdldFNlc3Npb25EYXRhPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb25maWd1cmF0aW9uLnByb2plY3RJZCxlPXRoaXMudmlzaXRvclNlcnZpY2UuZ2V0VmlzaXRvcigpO3JldHVybntwcm9qZWN0SWQ6dCx1c2VySWQ6ZS5pZCxzZXNzaW9uTnVtYmVyOmUudmlzaXRzQ291bnQscGFnZU51bWJlcjp0aGlzLnNlc3Npb25TZXJ2aWNlLmdldFNlc3Npb24oKS5wYWdlTnVtYmVyfX0sdC5wcm90b3R5cGUuc3RhcnREYXRhQ29sbGVjdGlvbj1mdW5jdGlvbih0KXt0aGlzLmlzQ29udGVudFNxdWFyZURhdGFDb2xsZWN0aW9uU3RhcnRlZHx8c24odGhpcy5jb25maWd1cmF0aW9uKSYmKHRoaXMucGlpTWFza2luZ1NlcnZpY2UuaW5pdENUUElJKCksdCgpLHRoaXMuaXNDb250ZW50U3F1YXJlRGF0YUNvbGxlY3Rpb25TdGFydGVkPSEwKX0sdC5wcm90b3R5cGUuZG9Mb2FkQ2xpY2t0YWxlUHRjPWZ1bmN0aW9uKCl7dGhpcy5pc0NsaWNrdGFsZVB0Y0xvYWRlZD0hMDt2YXIgdD10aGlzLmJ1aWxkU2NyaXB0RWxlbWVudCgpO2RvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQodCl9LHQucHJvdG90eXBlLmJ1aWxkU2NyaXB0RWxlbWVudD1mdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIsInNjcmlwdCIpO3JldHVybiB0LmFzeW5jPSEwLHQuY3Jvc3NPcmlnaW49ImFub255bW91cyIsdC50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiLHRoaXMuY29uZmlndXJhdGlvbi5wdGNTaGE1MTImJnRoaXMuY29uZmlndXJhdGlvbi5wdGNTbmFwc2hvdFBhdGg/KHQuaW50ZWdyaXR5PSJzaGE1MTItIit0aGlzLmNvbmZpZ3VyYXRpb24ucHRjU2hhNTEyLHQuc3JjPSJodHRwczovLyIrdGhpcy5jb25maWd1cmF0aW9uLnB0Y0RvbWFpbisiLyIrdGhpcy5jb25maWd1cmF0aW9uLnB0Y1NuYXBzaG90UGF0aCsiL3B0Yy5qcyIpOnQuc3JjPSJodHRwczovLyIrdGhpcy5jb25maWd1cmF0aW9uLnB0Y0RvbWFpbisiL3B0Yy8iK3RoaXMuY29uZmlndXJhdGlvbi5wdGNHdWlkKyIuanMiLHR9LHR9KCk7IWZ1bmN0aW9uKHQpe3QuaXNSZWNvcmRpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LkNsaWNrVGFsZUlzUmVjb3JkaW5nJiZ3aW5kb3cuQ2xpY2tUYWxlSXNSZWNvcmRpbmcoKX0sdC5zdG9wUmVjb3JkaW5nPWZ1bmN0aW9uKCl7d2luZG93LkNsaWNrVGFsZVN0b3AmJndpbmRvdy5DbGlja1RhbGVTdG9wKCl9LHQudHJpZ2dlckxvZ2ljYWxQYWdlVmlldz1mdW5jdGlvbih0KXt3aW5kb3cuQ2xpY2tUYWxlTG9naWNhbFdpdGhVcGxvYWRQYWdlJiZ3aW5kb3cuQ2xpY2tUYWxlTG9naWNhbFdpdGhVcGxvYWRQYWdlKHQpfSx0LnNlbmRQYWdlRXZlbnQ9ZnVuY3Rpb24odCl7d2luZG93LkNsaWNrVGFsZUV2ZW50JiZ3aW5kb3cuQ2xpY2tUYWxlRXZlbnQodCl9LHQuc2VuZEV2ZW50VHJpZ2dlclJlY29yZGluZz1mdW5jdGlvbih0KXt3aW5kb3cuQ2xpY2tUYWxlRXZlbnRUcmlnZ2VyJiZ3aW5kb3cuQ2xpY2tUYWxlRXZlbnRUcmlnZ2VyKHQpfX0oYW58fChhbj17fSkpO3ZhciB1bixwbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsaSxuLG8scyl7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy52aXNpdG9yU2VydmljZT1lLHRoaXMuc2Vzc2lvblNlcnZpY2U9cix0aGlzLnVybFNlcnZpY2U9aSx0aGlzLmNvbW1hbmRzU2VydmljZT1uLHRoaXMuc3RhcnREYXRhQ29sbGVjdGlvbkNhbGxiYWNrPW8sdGhpcy5waWlNYXNraW5nU2VydmljZT1zfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNsaWNrdGFsZUludGVncmF0aW9uU2VydmljZT1uZXcgY24odGhpcy5jb25maWd1cmF0aW9uLHRoaXMudmlzaXRvclNlcnZpY2UsdGhpcy5zZXNzaW9uU2VydmljZSx0aGlzLnBpaU1hc2tpbmdTZXJ2aWNlKSx0aGlzLmNsaWNrdGFsZUludGVncmF0aW9uU2VydmljZS5pbml0KCksdGhpcy5sb2FkUHRjRm9yRHVhbENvbGxlY3Rpb24oKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihbImdldFNlc3Npb25EYXRhIl0sKGZ1bmN0aW9uKCl7cmV0dXJuIHQuY2xpY2t0YWxlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNlc3Npb25EYXRhKCl9KSksdGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoWyJzdGFydERhdGFDb2xsZWN0aW9uIl0sKGZ1bmN0aW9uKCl7dC5jbGlja3RhbGVJbnRlZ3JhdGlvblNlcnZpY2Uuc3RhcnREYXRhQ29sbGVjdGlvbih0LnN0YXJ0RGF0YUNvbGxlY3Rpb25DYWxsYmFjayl9KSl9LHQucHJvdG90eXBlLmxvYWRQdGNGb3JEdWFsQ29sbGVjdGlvbj1mdW5jdGlvbigpe3NuKHRoaXMuY29uZmlndXJhdGlvbikmJnRoaXMuY2xpY2t0YWxlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDbGlja3RhbGVQdGMoKX0sdC5wcm90b3R5cGUub25BZnRlck5hdHVyYWxQYWdlVmlldz1mdW5jdGlvbigpe3RoaXMuY29uZmlndXJhdGlvbi50YWdEZXBsb3ltZW50TW9kZSE9PW9uLlRhZ0RlcGxveW1lbnRNb2RlLkxvYWRDbGlja3RhbGVQdGN8fHRoaXMuc2Vzc2lvblNlcnZpY2UuaXNSZXBsYXlSZWNvcmRlZCgpfHx0aGlzLmNsaWNrdGFsZUludGVncmF0aW9uU2VydmljZS5sb2FkQ2xpY2t0YWxlUHRjKCl9LHQucHJvdG90eXBlLm9uQWZ0ZXJBcnRpZmljaWFsUGFnZVZpZXc9ZnVuY3Rpb24oKXshdGhpcy5zZXNzaW9uU2VydmljZS5pc1JlcGxheVJlY29yZGVkKCkmJmFuLmlzUmVjb3JkaW5nKCkmJnRoaXMuY29uZmlndXJhdGlvbi50YWdEZXBsb3ltZW50TW9kZT09PW9uLlRhZ0RlcGxveW1lbnRNb2RlLkxvYWRDbGlja3RhbGVQdGMmJmFuLnRyaWdnZXJMb2dpY2FsUGFnZVZpZXcodGhpcy51cmxTZXJ2aWNlLmdldFVybCgpKX0sdC5wcm90b3R5cGUub25BZnRlclNlc3Npb25SZW5ld2FsPWZ1bmN0aW9uKCl7IXRoaXMuc2Vzc2lvblNlcnZpY2UuaXNSZXBsYXlSZWNvcmRlZCgpJiZhbi5pc1JlY29yZGluZygpJiZhbi50cmlnZ2VyTG9naWNhbFBhZ2VWaWV3KHRoaXMudXJsU2VydmljZS5nZXRVcmwoKSl9LHQucHJvdG90eXBlLm9uT3B0b3V0PWZ1bmN0aW9uKCl7YW4uaXNSZWNvcmRpbmcoKSYmYW4uc3RvcFJlY29yZGluZygpfSx0fSgpLGxuPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksaG49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIsaSxuKXt2YXIgbz10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG8uY29uZmlndXJhdGlvbj1lLG8ucGFnZUV2ZW50UmVxdWVzdD1yLG8uY29tcHJlc3Nvcj1pLG8uY3VzdG9tRXZlbnRzRW1pdHRlcj1uLG8ucGFnZUV2ZW50c1F1ZXVlPVtdLG8uZXRyUXVldWU9W10sb31yZXR1cm4gbG4oZSx0KSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztjc0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5wYWdlRXZlbnRzUXVldWUsKGZ1bmN0aW9uKGUpe3JldHVybiB0LnRyYWNrUGFnZUV2ZW50KGUpfSkpLHRoaXMucGFnZUV2ZW50c1F1ZXVlPVtdLGNzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmV0clF1ZXVlLChmdW5jdGlvbihlKXtyZXR1cm4gdC50cmFja0V2ZW50VHJpZ2dlclJlY29yZGluZyhlKX0pKSx0aGlzLmV0clF1ZXVlPVtdfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLnRyYWNrUGFnZUV2ZW50PWZ1bmN0aW9uKHQpe3RoaXMuaXNTdGFydGVkP2UuaXNWYWxpZEV2ZW50TmFtZSh0KSYmKHRoaXMuY3VzdG9tRXZlbnRzRW1pdHRlci5lbWl0UGFnZUV2ZW50KHQpLHRoaXMucGFnZUV2ZW50UmVxdWVzdFBhcmFtZXRlcj17ZXZlbnROYW1lOnQsaXNFVFI6ITF9LHRoaXMuc2VuZFBhZ2VFdmVudCgpLHRoaXMuY29uZmlndXJhdGlvbi50YWdEZXBsb3ltZW50TW9kZT09PW9uLlRhZ0RlcGxveW1lbnRNb2RlLkxvYWRDbGlja3RhbGVQdGMmJmFuLnNlbmRQYWdlRXZlbnQodCkpOmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLnBhZ2VFdmVudHNRdWV1ZSx0KX0sZS5wcm90b3R5cGUudHJhY2tFdmVudFRyaWdnZXJSZWNvcmRpbmc9ZnVuY3Rpb24odCl7dGhpcy5pc1N0YXJ0ZWQ/ZS5pc1ZhbGlkRXZlbnROYW1lKHQpJiYodGhpcy5jb25maWd1cmF0aW9uLnVzZU1hbGthUGlwZWxpbmUmJnRoaXMuY29uZmlndXJhdGlvbi5tYWxrYUV0ckVuYWJsZWQ/dGhpcy50cmFja01hbGthRXZlbnRUcmlnZ2VyUmVjb3JkaW5nKHQpOnRoaXMudHJhY2tMZWdhY3lFdmVudFRyaWdnZXJSZWNvcmRpbmcodCkpOmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmV0clF1ZXVlLHQpfSxlLnByb3RvdHlwZS50cmFja01hbGthRXZlbnRUcmlnZ2VyUmVjb3JkaW5nPWZ1bmN0aW9uKHQpe04odCwiQEVUUEAiKT90aGlzLmN1c3RvbUV2ZW50c0VtaXR0ZXIuZW1pdEV2ZW50VHJpZ2dlclJlY29yZGluZyh0LHh0LkVUUl9QQUdFKTp0aGlzLmN1c3RvbUV2ZW50c0VtaXR0ZXIuZW1pdEV2ZW50VHJpZ2dlclJlY29yZGluZyh0LHh0LkVUUl9TRVNTSU9OKSx0aGlzLnBhZ2VFdmVudFJlcXVlc3RQYXJhbWV0ZXI9e2V2ZW50TmFtZTp0LGlzRVRSOiEwfSx0aGlzLnNlbmRQYWdlRXZlbnQoKX0sZS5wcm90b3R5cGUudHJhY2tMZWdhY3lFdmVudFRyaWdnZXJSZWNvcmRpbmc9ZnVuY3Rpb24odCl7dmFyIGU7KHNuKGU9dGhpcy5jb25maWd1cmF0aW9uKXx8ZS50YWdEZXBsb3ltZW50TW9kZT09PW9uLlRhZ0RlcGxveW1lbnRNb2RlLkxvYWRDbGlja3RhbGVQdGMpJiYodGhpcy5jdXN0b21FdmVudHNFbWl0dGVyLmVtaXRFdmVudFRyaWdnZXJSZWNvcmRpbmcodCx4dC5FVFJfTEVHQUNZKSx0aGlzLnBhZ2VFdmVudFJlcXVlc3RQYXJhbWV0ZXI9e2V2ZW50TmFtZTp0LGlzRVRSOiEwfSx0aGlzLnNlbmRQYWdlRXZlbnQoKSx0aGlzLmNvbmZpZ3VyYXRpb24udGFnRGVwbG95bWVudE1vZGU9PT1vbi5UYWdEZXBsb3ltZW50TW9kZS5Mb2FkQ2xpY2t0YWxlUHRjJiZhbi5zZW5kRXZlbnRUcmlnZ2VyUmVjb3JkaW5nKHQpKX0sZS5wcm90b3R5cGUuZ2V0UmVxdWVzdFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXtyZXR1cm57dmFsdWU6dGhpcy5jb21wcmVzc29yLmNvbXByZXNzU3luYyh0aGlzLnBhZ2VFdmVudFJlcXVlc3RQYXJhbWV0ZXIuZXZlbnROYW1lKSxpc0VUUjoiIishIXRoaXMucGFnZUV2ZW50UmVxdWVzdFBhcmFtZXRlci5pc0VUUn19LGUucHJvdG90eXBlLnNlbmRQYWdlRXZlbnQ9ZnVuY3Rpb24oKXt0aGlzLnBhZ2VFdmVudFJlcXVlc3Quc2VuZCgpfSxlLmlzVmFsaWRFdmVudE5hbWU9ZnVuY3Rpb24odCl7cmV0dXJuIGR0KHQpJiYhIWNzU3RyaW5nLnByb3RvdHlwZS50cmltLmNhbGwodCl9LGV9KHVlKSxmbj1bInRyYWNrUGFnZUV2ZW50Il0sZG49WyJ0cmFja0V2ZW50VHJpZ2dlclJlY29yZGluZyJdLHluPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixpLG4pe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMuY29tbWFuZHNTZXJ2aWNlPWUsdGhpcy5jb21wcmVzc29yPXIsdGhpcy5iYXNpY1BhcmFtZXRlcnM9aSx0aGlzLmN1c3RvbUV2ZW50c0VtaXR0ZXI9bn1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1uZXcgRyh0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0VHJhY2tlclVyaSgpLCJwYWdlRXZlbnQiKTt0aGlzLnBhZ2VFdmVudFNlcnZpY2U9bmV3IGhuKHRoaXMuY29uZmlndXJhdGlvbixlLHRoaXMuY29tcHJlc3Nvcix0aGlzLmN1c3RvbUV2ZW50c0VtaXR0ZXIpLGUuc2V0UmVxdWVzdFBhcmFtZXRlcnNQcm92aWRlcnModGhpcy5wYWdlRXZlbnRTZXJ2aWNlLHRoaXMuYmFzaWNQYXJhbWV0ZXJzKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihmbiwoZnVuY3Rpb24oZSl7dC5wYWdlRXZlbnRTZXJ2aWNlLnRyYWNrUGFnZUV2ZW50KGUpfSkpLHRoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKGRuLChmdW5jdGlvbihlKXt0LnBhZ2VFdmVudFNlcnZpY2UudHJhY2tFdmVudFRyaWdnZXJSZWNvcmRpbmcoZSl9KSl9LHQucHJvdG90eXBlLm9uU3RhcnRUcmFja2luZz1mdW5jdGlvbigpe3RoaXMucGFnZUV2ZW50U2VydmljZS5zdGFydCgpfSx0fSgpLHZuPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wLHI9YXJndW1lbnRzLmxlbmd0aDtlPHI7ZSsrKXQrPWFyZ3VtZW50c1tlXS5sZW5ndGg7dmFyIGk9QXJyYXkodCksbj0wO2ZvcihlPTA7ZTxyO2UrKylmb3IodmFyIG89YXJndW1lbnRzW2VdLHM9MCxhPW8ubGVuZ3RoO3M8YTtzKyssbisrKWlbbl09b1tzXTtyZXR1cm4gaX0sbW49WyIuY3RIaWRkZW4sIHRleHRhcmVhIl0sZ249ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMucGlpTWFza1NlbGVjdG9ycz17UElJU2VsZWN0b3JzOltdLEF0dHJpYnV0ZXM6W119LHNuKHRoaXMuY29uZmlndXJhdGlvbil8fGNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLnBpaU1hc2tTZWxlY3RvcnMuUElJU2VsZWN0b3JzLCJbZGF0YS1jcy1tYXNrXSIpfXJldHVybiB0LnByb3RvdHlwZS5zZXRQSUlTZWxlY3RvcnM9ZnVuY3Rpb24odCl7dmFyIGU7IXNuKHRoaXMuY29uZmlndXJhdGlvbikmJnQmJigobnVsbD09PShlPXQuUElJU2VsZWN0b3JzKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5sZW5ndGgpJiYodGhpcy5waWlNYXNrU2VsZWN0b3JzLlBJSVNlbGVjdG9ycz12bih0aGlzLnBpaU1hc2tTZWxlY3RvcnMuUElJU2VsZWN0b3JzLHQuUElJU2VsZWN0b3JzKSksdGhpcy5waWlNYXNrU2VsZWN0b3JzLkF0dHJpYnV0ZXM9dC5BdHRyaWJ1dGVzIGluc3RhbmNlb2YgQXJyYXk/dm4odC5BdHRyaWJ1dGVzKTpbXSl9LHQucHJvdG90eXBlLmluaXRDVFBJST1mdW5jdGlvbigpe3ZhciB0LGUscj10aGlzOyhudWxsPT09KGU9bnVsbD09PSh0PW51bGw9PT13aW5kb3d8fHZvaWQgMD09PXdpbmRvdz92b2lkIDA6d2luZG93LkNsaWNrVGFsZVNldHRpbmdzKXx8dm9pZCAwPT09dD92b2lkIDA6dC5ET00pfHx2b2lkIDA9PT1lP3ZvaWQgMDplLlBJSSkmJih0aGlzLnBpaU1hc2tTZWxlY3RvcnMuUElJU2VsZWN0b3JzPXZuKG1uLHdpbmRvdy5DbGlja1RhbGVTZXR0aW5ncy5ET00uUElJLlRleHQpLGNzQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHdpbmRvdy5DbGlja1RhbGVTZXR0aW5ncy5ET00uUElJLkF0dHJpYnV0ZXMsKGZ1bmN0aW9uKHQpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChyLnBpaU1hc2tTZWxlY3RvcnMuQXR0cmlidXRlcyx7c2VsZWN0b3I6dC5ydWxlLGF0dHJOYW1lOnQuYXR0cn0pfSkpKX0sdC5wcm90b3R5cGUuaXNFbGVtZW50TWF0Y2hpbmdTZWxlY3RvcnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGUsKGZ1bmN0aW9uKGUpe3JldHVybiB3LmNhbGwodCxlKX0pKX0sdC5wcm90b3R5cGUuaXNFbGVtZW50TWF0Y2hpbmdBdHRyaWJ1dGVzPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKHIsKGZ1bmN0aW9uKHIpe3JldHVybiB0Lmhhc0F0dHJpYnV0ZShlKSYmY3NTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbChyLmF0dHJOYW1lLGUpPi0xJiZ3LmNhbGwodCxyLnNlbGVjdG9yKX0pKX0sdC5wcm90b3R5cGUuY2hlY2tBdHRyaWJ1dGVNYXRjaD1mdW5jdGlvbih0LGUpe3JldHVybiAwIT09dGhpcy5waWlNYXNrU2VsZWN0b3JzLkF0dHJpYnV0ZXMubGVuZ3RoJiZ0aGlzLmlzRWxlbWVudE1hdGNoaW5nQXR0cmlidXRlcyh0LGUsdGhpcy5waWlNYXNrU2VsZWN0b3JzLkF0dHJpYnV0ZXMpfSx0LnByb3RvdHlwZS5jaGVja05vZGVNYXRjaD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pc0VsZW1lbnRNYXRjaGluZ1NlbGVjdG9ycyh0LHRoaXMucGlpTWFza1NlbGVjdG9ycy5QSUlTZWxlY3RvcnMpfSx0fSgpLFNuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmNvbW1hbmRzU2VydmljZT10fXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoWyJsb2dTbmlwcGV0RXJyb3IiXSwoZnVuY3Rpb24odCxlKXtkdCh0KSYmZHQoZSkmJlR0LmVycm9yKGUsInNuaXBwZXQtIit0KX0pKX0sdH0oKSxFbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMuaWZyYW1lUGFyZW50VG9DaGlsZHJlbkNvbW11bmljYXRpb25TZXJ2aWNlPWUsdGhpcy5pZnJhbWVFdmVudHNFbWl0dGVyPXJ9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuaWZyYW1lUGFyZW50VG9DaGlsZHJlbkNvbW11bmljYXRpb25TZXJ2aWNlLm9uQ2hpbGRNZXNzYWdlKChmdW5jdGlvbihlLHIsaSxuKXtyZXR1cm4gdC5pZnJhbWVFdmVudHNFbWl0dGVyLmVtaXRJZnJhbWVFdmVudChlLHIsaSxuKX0pKX0sdC5wcm90b3R5cGUub25TdGFydFRyYWNraW5nPWZ1bmN0aW9uKCl7dGhpcy5jb25maWd1cmF0aW9uLmlmcmFtZXNUcmFja2luZyYmdGhpcy5pZnJhbWVQYXJlbnRUb0NoaWxkcmVuQ29tbXVuaWNhdGlvblNlcnZpY2Uuc3RhcnQoKX0sdC5wcm90b3R5cGUub25PcHRvdXQ9ZnVuY3Rpb24oKXt0aGlzLmNvbmZpZ3VyYXRpb24uaWZyYW1lc1RyYWNraW5nJiZ0aGlzLmlmcmFtZVBhcmVudFRvQ2hpbGRyZW5Db21tdW5pY2F0aW9uU2VydmljZS5zdG9wKCl9LHR9KCksd249ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKTooaS5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IGkpfX0oKSxDbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5jb25maWd1cmF0aW9uPWUsci5pZnJhbWVzPVtdLHIubWVzc2FnZUhhbmRsZXI9e2JvdW5kRWxlbWVudDp3aW5kb3csdHlwZToibWVzc2FnZSIsbGlzdGVuZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHIubWVzc2FnZXNMaXN0ZW5lcih0KX19LHJ9cmV0dXJuIHduKGUsdCksZS5wcm90b3R5cGUub25DaGlsZE1lc3NhZ2U9ZnVuY3Rpb24odCl7dGhpcy5vbkNoaWxkTWVzc2FnZUNhbGxiYWNrPXR9LGUucHJvdG90eXBlLm9uU3RhcnQ9ZnVuY3Rpb24oKXtadCh0aGlzLm1lc3NhZ2VIYW5kbGVyLCExKSx0aGlzLmRpc2NvdmVyVmFsaWRJZnJhbWVzKCl9LGUucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbigpe3RoaXMuc2VuZFN0b3BNZXNzYWdlcygpLCR0KHRoaXMubWVzc2FnZUhhbmRsZXIsITEpfSxlLnByb3RvdHlwZS5kaXNjb3ZlclZhbGlkSWZyYW1lcz1mdW5jdGlvbigpe3RoaXMuaWZyYW1lcz10aGlzLmdldEFsbFZhbGlkSWZyYW1lcygpLHRoaXMuc2VuZERpc2NvdmVyeU1lc3NhZ2VzKCl9LGUucHJvdG90eXBlLmdldEFsbFZhbGlkSWZyYW1lcz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKG1yLmZpbmRBbGxFbGVtZW50cygiaWZyYW1lIiksKGZ1bmN0aW9uKGUpe3JldHVybiB0LmlzSWZyYW1lVmFsaWQoZSl9KSl9LGUucHJvdG90eXBlLmlzSWZyYW1lVmFsaWQ9ZnVuY3Rpb24odCl7cmV0dXJuImNzLW5hdGl2ZS1mcmFtZSIhPT10LmlkJiYoIXQuc3JjfHxvdChudCh0LnNyYyksdGhpcy5jb25maWd1cmF0aW9uLmhvc3RuYW1lcykpfSxlLnByb3RvdHlwZS5zZW5kRGlzY292ZXJ5TWVzc2FnZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2NzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmlmcmFtZXMsKGZ1bmN0aW9uKGUscil7ZS5jb250ZW50V2luZG93JiZjdC5zZW5kTWVzc2FnZShlLmNvbnRlbnRXaW5kb3csIioiLHQuYnVpbGREaXNjb3ZlcnlNZXNzYWdlKHIpKX0pKX0sZS5wcm90b3R5cGUuc2VuZFN0b3BNZXNzYWdlcz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7Y3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuaWZyYW1lcywoZnVuY3Rpb24oZSl7ZS5jb250ZW50V2luZG93JiZjdC5zZW5kTWVzc2FnZShlLmNvbnRlbnRXaW5kb3csIioiLHQuYnVpbGRTdG9wTWVzc2FnZSgpKX0pKX0sZS5wcm90b3R5cGUuYnVpbGREaXNjb3ZlcnlNZXNzYWdlPWZ1bmN0aW9uKHQpe3JldHVybiBjdC5idWlsZEJhc2VNZXNzYWdlKGF0LkRpc2NvdmVyeSxzdC5QYXJlbnQsdGhpcy5jb25maWd1cmF0aW9uLnByb2plY3RJZCx0KX0sZS5wcm90b3R5cGUuYnVpbGRTdG9wTWVzc2FnZT1mdW5jdGlvbigpe3JldHVybiBjdC5idWlsZEJhc2VNZXNzYWdlKGF0LlN0b3Asc3QuUGFyZW50LHRoaXMuY29uZmlndXJhdGlvbi5wcm9qZWN0SWQpfSxlLnByb3RvdHlwZS5tZXNzYWdlc0xpc3RlbmVyPWZ1bmN0aW9uKHQpe2lmKGN0LmlzTWVzc2FnZVZhbGlkKHQsc3QuQ2hpbGQsdGhpcy5jb25maWd1cmF0aW9uLnByb2plY3RJZCx0aGlzLmNvbmZpZ3VyYXRpb24uaG9zdG5hbWVzKSlpZih2b2lkIDAhPT10LmRhdGEuaWR8fHQuZGF0YS50eXBlIT09YXQuRGlzY292ZXJ5KWlmKGZ0KHQuZGF0YS5pZCkmJnZvaWQgMCE9PXRoaXMuaWZyYW1lc1t0LmRhdGEuaWRdfHx0LmRhdGEudHlwZT09PWF0LkNoaWxkTG9nTWVzc2FnZSl7dmFyIGU9dGhpcy5pZnJhbWVzW3QuZGF0YS5pZF0scj1rLmdldEVsZW1lbnRQYXRoKGUse2R5bmFtaWNJZFJlZ2V4OnRoaXMuY29uZmlndXJhdGlvbi5keW5hbWljSWRSZWdleH0pLGk9dC5kYXRhLnR5cGUsbj10LmRhdGEuY29udGVudDt0aGlzLm9uQ2hpbGRNZXNzYWdlQ2FsbGJhY2soZSxyLGksbil9ZWxzZSBUdC5lcnJvcigiUGFyZW50IHJlY2VpdmVkIGRhdGEgZnJvbSB1bmtub3duIGlmcmFtZSA6ICIrY3NKU09OLnN0cmluZ2lmeSh0LmRhdGEpKTtlbHNlIHRoaXMuZGlzY292ZXJWYWxpZElmcmFtZXMoKX0sZX0odWUpLFJuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixpLG4sbyxzLGEsYyx1LHAsbCxoLGYsZCx5LHYsbSxnLFMsRSx3LEMsUil7dmFyIGI9dGhpczt0aGlzLmJhc2ljUmVxdWVzdFBhcmFtZXRlcnM9dCx0aGlzLmNvbXByZXNzb3I9ZSx0aGlzLnZpc2l0b3JTZXJ2aWNlPXIsdGhpcy5zZXNzaW9uU2VydmljZT1pLHRoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlcj1uLHRoaXMuY29tbWFuZHNTZXJ2aWNlPW8sdGhpcy5jb21tYW5kc01vZHVsZT1zLHRoaXMuY29uZmlndXJhdGlvbj1hLHRoaXMub3B0b3V0TW9kdWxlPWMsdGhpcy5vcHRvdXRTZXJ2aWNlPXUsdGhpcy5jb25zZW50TW9kdWxlPXAsdGhpcy5jb25zZW50U2VydmljZT1sLHRoaXMucGlpPWgsdGhpcy5jb29raWVTZXJ2aWNlPWYsdGhpcy5jcm9zc0RvbWFpblNpbmdsZUlmcmFtZVNlcnZpY2U9ZCx0aGlzLnVybFNlcnZpY2U9eSx0aGlzLnByb2plY3RDb25maWd1cmF0aW9uTW9kdWxlPXYsdGhpcy5jdXN0b21FdmVudHNFbWl0dGVyPW0sdGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlcj1nLHRoaXMuamF2YVNjcmlwdEVycm9yc0Fub255bWl6ZXI9Uyx0aGlzLmFwaUVycm9yc1RyYWNrZXI9RSx0aGlzLmFwaUVycm9yc0Fub255bWl6ZXI9dyx0aGlzLmlmcmFtZUV2ZW50c0VtaXR0ZXI9Qyx0aGlzLmRlYnVnU2VydmljZT1SLHRoaXMuc3RhcnREYXRhQ29sbGVjdGlvbj1mdW5jdGlvbigpe2IucGFnZVZpZXdNb2R1bGUuc3RhcnQoKSxiLmxvYWRUcmFja2VyLnN0YXJ0KCl9fXJldHVybiB0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5vcHRvdXRNb2R1bGUuaW5pdCgpLHRoaXMub3B0b3V0U2VydmljZS5pbml0KCksIXRoaXMub3B0b3V0U2VydmljZS5pc0FjdGl2ZSgpKXt2YXIgZT1uZXcgJGkodGhpcy5zZXNzaW9uU2VydmljZSkscj1uZXcgemkoayx0aGlzLmNvbmZpZ3VyYXRpb24pLGk9bmV3IEJpKHIpLG49bmV3IElpKHRoaXMuY29uZmlndXJhdGlvbix0aGlzLnZpc2l0b3JTZXJ2aWNlLHRoaXMuc2Vzc2lvblNlcnZpY2UscixpLHRoaXMuY29tbWFuZHNTZXJ2aWNlLGUsdGhpcy5pZnJhbWVFdmVudHNFbWl0dGVyKSxvPW5ldyBxcih0aGlzLmNvbW1hbmRzU2VydmljZSx0aGlzLnNlc3Npb25TZXJ2aWNlLHRoaXMuY29uZmlndXJhdGlvbix0aGlzLmJhc2ljUmVxdWVzdFBhcmFtZXRlcnMsdGhpcy5jb21wcmVzc29yLHRoaXMucGlpKSxzPW5ldyBBcih0aGlzLnZpc2l0b3JTZXJ2aWNlLHRoaXMuc2Vzc2lvblNlcnZpY2UsdGhpcy5jb21tYW5kc1NlcnZpY2UpLGE9bmV3IFlyKHRoaXMuY29uZmlndXJhdGlvbix0aGlzLnZpc2l0b3JTZXJ2aWNlLHRoaXMuc2Vzc2lvblNlcnZpY2UsdGhpcy5jb21tYW5kc1NlcnZpY2UsdGhpcy5waWksZSx0aGlzLnVybFNlcnZpY2UpLGM9bmV3IEdpKHRoaXMucGlpLHRoaXMuY29va2llU2VydmljZSx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZSksdT1uZXcgWGkodGhpcy5jb21tYW5kc1NlcnZpY2UsYyx0aGlzLmNyb3NzRG9tYWluU2luZ2xlSWZyYW1lU2VydmljZSx0aGlzLmNvb2tpZVNlcnZpY2UpO3RoaXMucGFnZVZpZXdNb2R1bGU9bmV3IGppKHRoaXMuY29uZmlndXJhdGlvbix0aGlzLmNvbW1hbmRzU2VydmljZSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIsdGhpcy52aXNpdG9yU2VydmljZSx0aGlzLnNlc3Npb25TZXJ2aWNlLHRoaXMuY29uc2VudFNlcnZpY2UsYyx0aGlzLnBpaSx0aGlzLnVybFNlcnZpY2UpO3ZhciBwPW5ldyBaaSh0aGlzLmNvb2tpZVNlcnZpY2UuZ2V0RG9tYWluKCksdGhpcy52aXNpdG9yU2VydmljZSx0aGlzLnNlc3Npb25TZXJ2aWNlLHRoaXMuY29tbWFuZHNTZXJ2aWNlKSxsPW5ldyBnbih0aGlzLmNvbmZpZ3VyYXRpb24pLGg9bmV3IHBuKHRoaXMuY29uZmlndXJhdGlvbix0aGlzLnZpc2l0b3JTZXJ2aWNlLHRoaXMuc2Vzc2lvblNlcnZpY2UsdGhpcy51cmxTZXJ2aWNlLHRoaXMuY29tbWFuZHNTZXJ2aWNlLHRoaXMuc3RhcnREYXRhQ29sbGVjdGlvbixsKSxmPW5ldyB5bih0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy5jb21tYW5kc1NlcnZpY2UsdGhpcy5jb21wcmVzc29yLHRoaXMuYmFzaWNSZXF1ZXN0UGFyYW1ldGVycyx0aGlzLmN1c3RvbUV2ZW50c0VtaXR0ZXIpLGQ9bmV3IFNuKHRoaXMuY29tbWFuZHNTZXJ2aWNlKSx5PW5ldyBDbih0aGlzLmNvbmZpZ3VyYXRpb24pLHY9bmV3IEVuKHRoaXMuY29uZmlndXJhdGlvbix5LHRoaXMuaWZyYW1lRXZlbnRzRW1pdHRlcik7aWYodi5pbml0KCksdGhpcy5sb2FkVHJhY2tlcj1uZXcgSmksdGhpcy5jb25zZW50TW9kdWxlLmluaXQoKSxzLmluaXQoKSxvLmluaXQoKSxhLmluaXQoKSx1LmluaXQoKSx0aGlzLnBhZ2VWaWV3TW9kdWxlLmluaXQoKSxwLmluaXQoKSxoLmluaXQoKSxmLmluaXQoKSx0aGlzLnByb2plY3RDb25maWd1cmF0aW9uTW9kdWxlLmluaXQoKSxkLmluaXQoKSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuYWRkTGlzdGVuZXJzKHAsdGhpcy5jb21tYW5kc01vZHVsZSxuLHRoaXMuY29uc2VudE1vZHVsZSxzLHUsdGhpcy5wYWdlVmlld01vZHVsZSxoLGYsbyx2KSxDci5pc1N1cHBvcnRlZCgpJiZ0aGlzLmNvbXByZXNzb3IuaXNTdXBwb3J0ZWQoKSl7dmFyIG09bmV3IENyKHRoaXMuc2Vzc2lvblNlcnZpY2UsdGhpcy5jb25maWd1cmF0aW9uLHRoaXMuY29tcHJlc3NvcixpLHRoaXMuY29uc2VudFNlcnZpY2UsdGhpcy5iYXNpY1JlcXVlc3RQYXJhbWV0ZXJzLHRoaXMuY29tbWFuZHNTZXJ2aWNlLHRoaXMucGlpLGUsdGhpcy51cmxTZXJ2aWNlLGwsdGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlcix0aGlzLmphdmFTY3JpcHRFcnJvcnNBbm9ueW1pemVyLHRoaXMuYXBpRXJyb3JzVHJhY2tlcix0aGlzLmFwaUVycm9yc0Fub255bWl6ZXIsdGhpcy5kZWJ1Z1NlcnZpY2UsdGhpcy5jdXN0b21FdmVudHNFbWl0dGVyKTttLmluaXQoKSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuYWRkTGlzdGVuZXJzKG0pfWlmKHRoaXMuY29uZmlndXJhdGlvbi5lTWVyY2hhbmRpc2luZ0VuYWJsZWQpe3ZhciBnPW5ldyBubih0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy5jb21wcmVzc29yLHRoaXMuYmFzaWNSZXF1ZXN0UGFyYW1ldGVycyxjLHRoaXMudXJsU2VydmljZSx0aGlzLmlmcmFtZUV2ZW50c0VtaXR0ZXIsdGhpcy5jb21tYW5kc1NlcnZpY2UpO2cuaW5pdCgpLHRoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlci5hZGRMaXN0ZW5lcnMoZyl9bi5pbml0KCksZS5vblNlc3Npb25FeHBpcmVkKChmdW5jdGlvbigpe3QubGlmZUN5Y2xlRXZlbnRzRW1pdHRlci5lbWl0QmVmb3JlU2Vzc2lvblJlbmV3YWwoKSx0LmRvU3RhcnQoITApLHQubGlmZUN5Y2xlRXZlbnRzRW1pdHRlci5lbWl0QWZ0ZXJTZXNzaW9uUmVuZXdhbCgpfSkpLHRoaXMuZG9TdGFydCgpfX0sdC5wcm90b3R5cGUuZG9TdGFydD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3ZvaWQgMD09PXQmJih0PSExKSx0aGlzLmNvbW1hbmRzU2VydmljZS5zdGFydCgpLHRoaXMubG9hZFRyYWNrZXIub25Mb2FkKChmdW5jdGlvbigpe2UubGlmZUN5Y2xlRXZlbnRzRW1pdHRlci5lbWl0U3RhcnRUcmFja2luZygpfSkpLHNuKHRoaXMuY29uZmlndXJhdGlvbikmJiF0fHx0aGlzLnN0YXJ0RGF0YUNvbGxlY3Rpb24oKX0sdH0oKSxibj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsaSxuLG8scyxhKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLnZpc2l0b3JTZXJ2aWNlPWUsdGhpcy5leGNsdXNpb25TZXJ2aWNlPXIsdGhpcy5vdXRkYXRlZFN0YXRlPWksdGhpcy5hbGxvd1N1YmRvbWFpbnNDaGFuZ2U9bix0aGlzLmNyb3NzRG9tYWluU2VydmljZT1vLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlPXMsdGhpcy5mb3JjZUluY2x1c2lvblNlcnZpY2U9YX1yZXR1cm4gdC5wcm90b3R5cGUuY29tcHV0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuY29uZmlndXJhdGlvbi5jcm9zc0RvbWFpblRyYWNraW5nP3RoaXMuY29uZmlndXJhdGlvbi5jcm9zc0RvbWFpblNpbmdsZUlmcmFtZVRyYWNraW5nP3RoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlLnN0YXJ0KChmdW5jdGlvbigpe3JldHVybiBlLmNvbXB1dGVTdGF0ZSh0KX0pKTp0aGlzLmNyb3NzRG9tYWluU2VydmljZS5hcHBseVVwVG9EYXRlKChmdW5jdGlvbigpe3JldHVybiBlLmNvbXB1dGVTdGF0ZSh0KX0pKTp0aGlzLmNvbXB1dGVTdGF0ZSh0KX0sdC5wcm90b3R5cGUuY29tcHV0ZVN0YXRlPWZ1bmN0aW9uKHQpe3RoaXMuYWxsb3dTdWJkb21haW5zQ2hhbmdlLmhhbmRsZSgpLHRoaXMub3V0ZGF0ZWRTdGF0ZS5jbGVhcigpLHRoaXMuaXNJbmNsdWRlZCgpPyh0aGlzLm91dGRhdGVkU3RhdGUucmVzdG9yZUNsZWFyZWRWaXNpdG9yKCksdCghMCkpOih0aGlzLmV4Y2x1c2lvblNlcnZpY2UuZXhjbHVkZSh0aGlzLmNvbmZpZ3VyYXRpb24pLHQoITEpKX0sdC5wcm90b3R5cGUuaXNJbmNsdWRlZD1mdW5jdGlvbigpe3ZhciB0PUwodGhpcy5jb25maWd1cmF0aW9uLnNhbXBsZVJhdGUpO3JldHVybiB0aGlzLmZvcmNlSW5jbHVzaW9uU2VydmljZS5pc0ZvcmNlSW5jbHVkZWQoKXx8IXRoaXMuZXhjbHVzaW9uU2VydmljZS5pc0V4Y2x1ZGVkKCkmJnRoaXMudmlzaXRvclNlcnZpY2UuZG9lc1Zpc2l0b3JFeGlzdCgpfHwhdGhpcy5leGNsdXNpb25TZXJ2aWNlLmlzRXhjbHVkZWQoKSYmdH0sdH0oKTshZnVuY3Rpb24odCl7dC5nZW5lcmF0ZT1mdW5jdGlvbigpe3ZhciB0PW5hdmlnYXRvci51c2VyQWdlbnQrbmF2aWdhdG9yLmxhbmd1YWdlK25hdmlnYXRvci5wbGF0Zm9ybSxlPWNzU3RyaW5nLnByb3RvdHlwZS5zbGljZS5jYWxsKGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLHI9MDtyPHQubGVuZ3RoO3IrPTEpZT1jc1N0cmluZy5wcm90b3R5cGUuY2hhckNvZGVBdC5jYWxsKHQscikrKGU8PDYpKyhlPDwxNiktZTtyZXR1cm4gTWF0aC5hYnMoZSl9KHQpLnRvU3RyaW5nKDE2KSwtNCkscj0obmV3IGNzRGF0ZSkuZ2V0VGltZSgpLGk9Y3NTdHJpbmcucHJvdG90eXBlLnJlcGxhY2UuY2FsbCgieHh4eHh4eHgtaGhoaC1heHh4LXl4eHgteHh4eHh4eHh4eHh4IiwvW3h5XS9nLChmdW5jdGlvbih0KXt2YXIgZT0ocisxNipNYXRoLnJhbmRvbSgpKSUxNnwwO3JldHVybiByPU1hdGguZmxvb3Ioci8xNiksKCJ4Ij09PXQ/ZTo3JmV8OCkudG9TdHJpbmcoMTYpfSkpO3JldHVybiBjc1N0cmluZy5wcm90b3R5cGUucmVwbGFjZS5jYWxsKGksImhoaGgiLGUpfX0odW58fCh1bj17fSkpO3ZhciBUbixBbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsaSl7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy5zZXNzaW9uU2VydmljZT1lLHRoaXMuY29va2llU2VydmljZT1yLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlPWl9cmV0dXJuIHQucHJvdG90eXBlLmNyZWF0ZU9yVXBkYXRlVmlzaXRvcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0VmlzaXRvcigpO251bGw9PT10Pyh0PXRoaXMuY3JlYXRlVmlzaXRvcigpLHRoaXMuc2Vzc2lvblNlcnZpY2UucmVtb3ZlQ3VycmVudFNlc3Npb24oKSk6dD10aGlzLm1hbmFnZVNhbWVTaXRlRm9yVmlzaXRvcih0KSx0aGlzLnVwZGF0ZVZpc2l0b3IodCksdGhpcy5zZXRWaXNpdG9yKHQpfSx0LnByb3RvdHlwZS5jcmVhdGVWaXNpdG9yPWZ1bmN0aW9uKCl7cmV0dXJue2lkOnVuLmdlbmVyYXRlKCksdmlzaXRzQ291bnQ6MCxhcHBsaWVkVHJhY2tpbmdEcmF3OnRoaXMuY29uZmlndXJhdGlvbi5sYXN0VHJhY2tpbmdEcmF3LGNyZWF0aW9uVGltZXN0YW1wOl8oKSxsYXN0VmlzaXRUaW1lc3RhbXA6MCxoaXRUaW1lc3RhbXA6MCxleHBpcmVzOnEubm93KCkrdGhpcy5jb25maWd1cmF0aW9uLnZpc2l0b3JDb29raWVUaW1lb3V0LHNhbWVTaXRlOnRoaXMuY29va2llU2VydmljZS5nZXRTYW1lU2l0ZUZsYWcoKSxzZWN1cmVkOnRoaXMuY29va2llU2VydmljZS5nZXRTZWN1cmVGbGFnKCl9fSx0LnByb3RvdHlwZS51cGRhdGVWaXNpdG9yPWZ1bmN0aW9uKHQpe3ZhciBlPV8oKTt0aGlzLnNlc3Npb25TZXJ2aWNlLmRvZXNTZXNzaW9uRXhpc3QoKXx8KHQudmlzaXRzQ291bnQrPTEsdC5sYXN0VmlzaXRUaW1lc3RhbXA9ZSksdC5oaXRUaW1lc3RhbXA9ZSx0LmFwcGxpZWRUcmFja2luZ0RyYXc9dGhpcy5jb25maWd1cmF0aW9uLmxhc3RUcmFja2luZ0RyYXd9LHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRWaXNpdG9yKCk7cmV0dXJuIHQ/e3V1OnQuaWQsc246IiIrdC52aXNpdHNDb3VudCxsdjoiIit0Lmxhc3RWaXNpdFRpbWVzdGFtcCxsaGQ6IiIrdC5sYXN0VmlzaXRUaW1lc3RhbXAsaGQ6IiIrdC5oaXRUaW1lc3RhbXB9Ont9fSx0LnByb3RvdHlwZS5nZXRWaXNpdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIE50LmdldCh0aGlzLmNvb2tpZVNlcnZpY2UpfSx0LnByb3RvdHlwZS5zZXRWaXNpdG9yPWZ1bmN0aW9uKHQpe3RoaXMuc2V0Q29va2llRmxhZ3NGcm9tQ29va2llU2VydmljZSh0KSxOdC5zZXQodCx0aGlzLmNvb2tpZVNlcnZpY2UsdGhpcy5jcm9zc0RvbWFpblNpbmdsZUlmcmFtZVNlcnZpY2UpfSx0LnByb3RvdHlwZS5kb2VzVmlzaXRvckV4aXN0PWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT1OdC5nZXQodGhpcy5jb29raWVTZXJ2aWNlKX0sdC5wcm90b3R5cGUucmVtb3ZlQ3VycmVudFZpc2l0b3I9ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZVZpc2l0b3IodGhpcy5jb29raWVTZXJ2aWNlLmdldERvbWFpbigpKX0sdC5wcm90b3R5cGUucmVtb3ZlVmlzaXRvcj1mdW5jdGlvbih0KXt2YXIgZT10fHx0aGlzLmNvb2tpZVNlcnZpY2UuZ2V0RG9tYWluKCk7TnQucmVtb3ZlKGUsdGhpcy5jb29raWVTZXJ2aWNlLHRoaXMuY3Jvc3NEb21haW5TaW5nbGVJZnJhbWVTZXJ2aWNlKX0sdC5wcm90b3R5cGUudmlzaXRvckhhc1NhbWVTaXRlRGVmaW5lZD1mdW5jdGlvbih0KXtyZXR1cm4gdnQodC5zYW1lU2l0ZSkmJnZ0KHQuc2VjdXJlZCl9LHQucHJvdG90eXBlLnNldENvb2tpZUZsYWdzRnJvbUNvb2tpZVNlcnZpY2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQuc2FtZVNpdGU9dGhpcy5jb29raWVTZXJ2aWNlLmdldFNhbWVTaXRlRmxhZygpLHQuc2VjdXJlZD10aGlzLmNvb2tpZVNlcnZpY2UuZ2V0U2VjdXJlRmxhZygpLHR9LHQucHJvdG90eXBlLm1hbmFnZVNhbWVTaXRlRm9yVmlzaXRvcj1mdW5jdGlvbih0KXtpZih0aGlzLmNvbmZpZ3VyYXRpb24uY3Jvc3NEb21haW5UcmFja2luZyYmIXRoaXMudmlzaXRvckhhc1NhbWVTaXRlRGVmaW5lZCh0KSl7dmFyIGU9dGhpcy5jcmVhdGVWaXNpdG9yKCk7cmV0dXJuIHRoaXMuc2Vzc2lvblNlcnZpY2UucmVtb3ZlQ3VycmVudFNlc3Npb24oKSxlfXJldHVybiB0fSx0fSgpLGtuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMuY29tcHJlc3Nvcj1lfXJldHVybiB0LnByb3RvdHlwZS5pc0NvbXByZXNzaW9uU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29tcHJlc3Nvci5pc1N1cHBvcnRlZCgpfSx0fSgpLFBuPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksT249ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIsaSxuKXt2YXIgbz10LmNhbGwodGhpcyxlLHIpfHx0aGlzO3JldHVybiBvLmNvbmZpZ3VyYXRpb249ZSxvLmNvbXByZXNzb3I9cixvLmZvcmNlSW5jbHVzaW9uU2VydmljZT1pLG8udXJsU2VydmljZT1uLG99cmV0dXJuIFBuKGUsdCksZS5wcm90b3R5cGUuc2FuaXRpemVTZXNzaW9uUmVjb3JkaW5nU3RhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHR9LGUucHJvdG90eXBlLmNvbXB1dGVJbml0aWFsUmVjb3JkaW5nU3RhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaXNDb21wcmVzc2lvblN1cHBvcnRlZCgpJiYodGhpcy5mb3JjZUluY2x1c2lvblNlcnZpY2UuaXNGb3JjZUxlZ2FjeVJlcGxheVJlY29yZGVkKCl8fEQoKTx0aGlzLmNvbmZpZ3VyYXRpb24ucmVwbGF5UmVjb3JkaW5nUmF0ZSYmQ3IuaXNTdXBwb3J0ZWQoKSk/TXQuUkVQTEFZX1JFQ09SRElOR19FTkFCTEVEOk10LlJFUExBWV9SRUNPUkRJTkdfRElTQUJMRUR9LGUucHJvdG90eXBlLnVwZGF0ZVJlY29yZGluZ1N0YXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlY29yZGluZ1N0YXRlfSxlLnByb3RvdHlwZS5pc1JlcGxheVJlY29yZGVkPWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlY29yZGluZ1N0YXRlPT09TXQuUkVQTEFZX1JFQ09SRElOR19FTkFCTEVEfHx0aGlzLmNvbXB1dGVUcmlnZ2VyU2Vzc2lvblJlcGxheVN0YXR1cyh0KX0sZS5wcm90b3R5cGUuY29tcHV0ZVRyaWdnZXJTZXNzaW9uUmVwbGF5U3RhdHVzPWZ1bmN0aW9uKHQpe2lmKHRoaXMuY29uZmlndXJhdGlvbi50cmlnZ2VyU2Vzc2lvblJlcGxheUVuYWJsZWQmJnRoaXMuY29uZmlndXJhdGlvbi50cmlnZ2VyU2Vzc2lvblJlcGxheVJlZ2V4JiZ0LnJlY29yZGluZ1N0YXRlIT09TXQuUkVQTEFZX1JFQ09SRElOR19FTkFCTEVEKXt2YXIgZT10aGlzLnVybFNlcnZpY2UuZ2V0VXJsKCk7cmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi50cmlnZ2VyU2Vzc2lvblJlcGxheVJlZ2V4LnRlc3QoZSl9cmV0dXJuITF9LGUucHJvdG90eXBlLmdldERpc2FibGVkUmVjb3JkaW5nU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gTXQuUkVQTEFZX1JFQ09SRElOR19ESVNBQkxFRH0sZS5wcm90b3R5cGUuc2V0VmlzaXRvclNlcnZpY2U9ZnVuY3Rpb24odCl7fSxlfShrbiksX249ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt0aGlzLnNlc3Npb25TdG9yYWdlPXQsdGhpcy5jb29raWVTZXJ2aWNlPWUsdGhpcy5yZWNvcmRpbmdTdGF0ZVN0cmF0ZWd5PXIsdGhpcy50cmlnZ2VyU2Vzc2lvblJlcGxheU9uZ29pbmc9ITEsdGhpcy5leHRlbmRlZFNlc3Npb25UaW1lb3V0SWQ9bnVsbCx0aGlzLnNlc3Npb25FeHRlbnNpb25Db3VudD0wfXJldHVybiB0LnByb3RvdHlwZS5zZXREeW5hbWljVmFyaWFibGVzU2VydmljZT1mdW5jdGlvbih0KXt0aGlzLmR5bmFtaWNWYXJpYWJsZXNTZXJ2aWNlPXR9LHQucHJvdG90eXBlLmNyZWF0ZU9yVXBkYXRlU2Vzc2lvbj1mdW5jdGlvbigpe3RoaXMuc3RvcFNlc3Npb25FeHRlbnNpb24oKSx0aGlzLmJlZ2luU2Vzc2lvbj1xLm5vdygpLHRoaXMuc2Vzc2lvbkV4dGVuc2lvbkNvdW50PTA7dmFyIHQ9dGhpcy5nZXRTZXNzaW9uV2l0aG91dENhY2hlKCk7bnVsbD09PXQ/KHQ9dGhpcy5idWlsZFNlc3Npb25PYmplY3QoKSx0aGlzLmluY3JlbWVudFNlc3Npb25QYWdlTnVtYmVyKHQpLHQucmVjb3JkaW5nU3RhdGU9dGhpcy5yZWNvcmRpbmdTdGF0ZVN0cmF0ZWd5LmNvbXB1dGVJbml0aWFsUmVjb3JkaW5nU3RhdGUodCkpOih0PXRoaXMucmVjb3JkaW5nU3RhdGVTdHJhdGVneS5zYW5pdGl6ZVNlc3Npb25SZWNvcmRpbmdTdGF0ZSh0KSx0aGlzLmluY3JlbWVudFNlc3Npb25QYWdlTnVtYmVyKHQpLHQucmVjb3JkaW5nU3RhdGU9dGhpcy5yZWNvcmRpbmdTdGF0ZVN0cmF0ZWd5LnVwZGF0ZVJlY29yZGluZ1N0YXRlKHQpKSx0aGlzLnNldFNlc3Npb24odCksdGhpcy5zZXRUcmlnZ2VyU2Vzc2lvblJlcGxheVN0YXR1cyh0KX0sdC5wcm90b3R5cGUuYnVpbGRTZXNzaW9uT2JqZWN0PWZ1bmN0aW9uKCl7cmV0dXJue3BhZ2VOdW1iZXI6MCxyZWNvcmRpbmdTdGF0ZTp0aGlzLnJlY29yZGluZ1N0YXRlU3RyYXRlZ3kuZ2V0RGlzYWJsZWRSZWNvcmRpbmdTdGF0ZSgpLGV0clN0YXRlOkR0LkVUUl9PRkZ9fSx0LnByb3RvdHlwZS5zZXRUcmlnZ2VyU2Vzc2lvblJlcGxheVN0YXR1cz1mdW5jdGlvbih0KXt0aGlzLnJlY29yZGluZ1N0YXRlU3RyYXRlZ3kgaW5zdGFuY2VvZiBPbj90aGlzLnRyaWdnZXJTZXNzaW9uUmVwbGF5T25nb2luZz10aGlzLnJlY29yZGluZ1N0YXRlU3RyYXRlZ3kuY29tcHV0ZVRyaWdnZXJTZXNzaW9uUmVwbGF5U3RhdHVzKHQpOnRoaXMudHJpZ2dlclNlc3Npb25SZXBsYXlPbmdvaW5nPSExfSx0LnByb3RvdHlwZS5jcmVhdGVFeHRlbmRlZFNlc3Npb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJ1aWxkU2Vzc2lvbk9iamVjdCgpO3JldHVybiB0aGlzLmluY3JlbWVudFNlc3Npb25QYWdlTnVtYmVyKHQpLHQucmVjb3JkaW5nU3RhdGU9dGhpcy5yZWNvcmRpbmdTdGF0ZVN0cmF0ZWd5LmNvbXB1dGVJbml0aWFsUmVjb3JkaW5nU3RhdGUodCksdGhpcy5zZXRUcmlnZ2VyU2Vzc2lvblJlcGxheVN0YXR1cyh0KSx0fSx0LnByb3RvdHlwZS5pbmNyZW1lbnRTZXNzaW9uUGFnZU51bWJlcj1mdW5jdGlvbih0KXt0LnBhZ2VOdW1iZXIrPTF9LHQucHJvdG90eXBlLmlzUmVwbGF5UmVjb3JkZWQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNlc3Npb24oKTtyZXR1cm4hIXQmJnRoaXMucmVjb3JkaW5nU3RhdGVTdHJhdGVneS5pc1JlcGxheVJlY29yZGVkKHQpfSx0LnByb3RvdHlwZS5pc1RlbXBvcmFyaWx5UmVjb3JkZWQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNlc3Npb24oKTtyZXR1cm4obnVsbD09dD92b2lkIDA6dC5yZWNvcmRpbmdTdGF0ZSk9PT1MdC5URU1QT1JBUklMWV9SRUNPUkRFRH0sdC5wcm90b3R5cGUucmVtb3ZlQ3VycmVudFNlc3Npb249ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZVNlc3Npb24odGhpcy5jb29raWVTZXJ2aWNlLmdldERvbWFpbigpKX0sdC5wcm90b3R5cGUuZ2V0UmVxdWVzdFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXt2YXIgdD17fSxlPXRoaXMuZ2V0U2Vzc2lvbigpO3JldHVybiBudWxsIT09ZSYmKHQucG49IiIrZS5wYWdlTnVtYmVyLHRoaXMucmVjb3JkaW5nU3RhdGVTdHJhdGVneSBpbnN0YW5jZW9mIE9uJiYodC5yZT10aGlzLnRyaWdnZXJTZXNzaW9uUmVwbGF5T25nb2luZz9NdC5UUklHR0VSX1JFUExBWV9SRUNPUkRJTkdfRU5BQkxFRDplLnJlY29yZGluZ1N0YXRlKSksdH0sdC5wcm90b3R5cGUuZ2V0U2Vzc2lvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlc3Npb25TdG9yYWdlLmdldCgpfSx0LnByb3RvdHlwZS5nZXRTZXNzaW9uV2l0aG91dENhY2hlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0KCEwKX0sdC5wcm90b3R5cGUuZG9lc1Nlc3Npb25FeGlzdD1mdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5zZXNzaW9uU3RvcmFnZS5nZXQoKX0sdC5wcm90b3R5cGUuc2V0U2Vzc2lvbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPTE4ZTUpLHRoaXMuc2Vzc2lvblN0b3JhZ2Uuc2V0KHQsZSl9LHQucHJvdG90eXBlLnJlbW92ZVNlc3Npb249ZnVuY3Rpb24odCl7dGhpcy5zZXNzaW9uU3RvcmFnZS5yZW1vdmUodCl9LHQucHJvdG90eXBlLmdldFJlY29yZGluZ1N0YXRlcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0U2Vzc2lvbigpLGU9W107cmV0dXJuIHQmJih0LnJlY29yZGluZ1N0YXRlIT09THQuTk9UX1JFQ09SREVEJiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSxwYXJzZUludCh0LnJlY29yZGluZ1N0YXRlLDEwKSksdC5ldHJTdGF0ZT09PUR0LkVUUl9PTiYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKGUscGFyc2VJbnQoTHQuRVRSX1NBTVBMSU5HLDEwKSkpLGV9LHQucHJvdG90eXBlLnVwZGF0ZVJlY29yZGluZ1N0YXRlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5nZXRTZXNzaW9uKCk7bnVsbCE9PXImJihyLnJlY29yZGluZ1N0YXRlPXQsci5ldHJTdGF0ZT1lLHRoaXMuc2V0U2Vzc2lvbihyKSl9LHQucHJvdG90eXBlLmhhc1ZhbGlkU2Vzc2lvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0UmF3U2Vzc2lvbigpO3JldHVybiB0aGlzLnNlc3Npb25TdG9yYWdlLmlzVmFsaWQodCl9LHQucHJvdG90eXBlLmV4dGVuZFNlc3Npb25QZXJpb2RpY2FsbHk9ZnVuY3Rpb24oKXt0aGlzLmV4dGVuZGVkU2Vzc2lvblRpbWVvdXRJZHx8dGhpcy5leHRlbmRTZXNzaW9uKCl9LHQucHJvdG90eXBlLmV4dGVuZFNlc3Npb249ZnVuY3Rpb24oKXtpZih0aGlzLmhhc1JlYWNoZWRNYXhEdXJhdGlvbigpKXRoaXMuc3RvcFNlc3Npb25FeHRlbnNpb24oKTtlbHNle3ZhciB0PXRoaXMuZ2V0U2Vzc2lvbigpO251bGw9PT10JiYodD10aGlzLmNyZWF0ZUV4dGVuZGVkU2Vzc2lvbigpKSx0aGlzLnNldFNlc3Npb24odCwxNzRlNCksdGhpcy5zZW5kRHluYW1pY1ZhcigpLHRoaXMuc2NoZWR1bGVOZXh0U2Vzc2lvblVwZGF0ZSgpfX0sdC5wcm90b3R5cGUuc2NoZWR1bGVOZXh0U2Vzc2lvblVwZGF0ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5leHRlbmRlZFNlc3Npb25UaW1lb3V0SWQ9d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5leHRlbmRTZXNzaW9uKCl9KSwxNzRlNCl9LHQucHJvdG90eXBlLmhhc1JlYWNoZWRNYXhEdXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiAxNDM0ZTQtKHEubm93KCkrMThlNS10aGlzLmJlZ2luU2Vzc2lvbik8MH0sdC5wcm90b3R5cGUuc3RvcFNlc3Npb25FeHRlbnNpb249ZnVuY3Rpb24oKXt0aGlzLmV4dGVuZGVkU2Vzc2lvblRpbWVvdXRJZCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5leHRlbmRlZFNlc3Npb25UaW1lb3V0SWQpLHRoaXMuZXh0ZW5kZWRTZXNzaW9uVGltZW91dElkPW51bGwpfSx0LnByb3RvdHlwZS5zZW5kRHluYW1pY1Zhcj1mdW5jdGlvbigpe3RoaXMuc2Vzc2lvbkV4dGVuc2lvbkNvdW50Kz0xLHRoaXMuZHluYW1pY1ZhcmlhYmxlc1NlcnZpY2UudHJhY2tEeW5hbWljVmFyaWFibGUoInNlc3Npb25fZXhwaXJ5X3VwZGF0ZSIsdGhpcy5zZXNzaW9uRXh0ZW5zaW9uQ291bnQpfSx0fSgpLEluPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy52aXNpdG9yU2VydmljZT1lLHRoaXMuZXhjbHVzaW9uU2VydmljZT1yfXJldHVybiB0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuaXNWaXNpdG9yT3V0ZGF0ZWQoKSYmKHRoaXMuc2F2ZWRWaXNpdG9yPXRoaXMudmlzaXRvclNlcnZpY2UuZ2V0VmlzaXRvcigpLHRoaXMudmlzaXRvclNlcnZpY2UucmVtb3ZlVmlzaXRvcigpKSx0aGlzLmlzRXhjbHVzaW9uT3V0ZGF0ZWQoKSYmdGhpcy5leGNsdXNpb25TZXJ2aWNlLnJlbW92ZUV4Y2x1c2lvbigpfSx0LnByb3RvdHlwZS5pc1Zpc2l0b3JPdXRkYXRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZpc2l0b3JTZXJ2aWNlLmRvZXNWaXNpdG9yRXhpc3QoKSYmdGhpcy52aXNpdG9yU2VydmljZS5nZXRWaXNpdG9yKCkuYXBwbGllZFRyYWNraW5nRHJhdyE9PXRoaXMuY29uZmlndXJhdGlvbi5sYXN0VHJhY2tpbmdEcmF3fSx0LnByb3RvdHlwZS5pc0V4Y2x1c2lvbk91dGRhdGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXhjbHVzaW9uU2VydmljZS5nZXRBcHBsaWVkVHJhY2tpbmdEcmF3KCkhPT10aGlzLmNvbmZpZ3VyYXRpb24ubGFzdFRyYWNraW5nRHJhd30sdC5wcm90b3R5cGUucmVzdG9yZUNsZWFyZWRWaXNpdG9yPWZ1bmN0aW9uKCl7dGhpcy5zYXZlZFZpc2l0b3ImJnRoaXMudmlzaXRvclNlcnZpY2Uuc2V0VmlzaXRvcih0aGlzLnNhdmVkVmlzaXRvcil9LHR9KCksTm49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyLGkpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMuY29va2llU2VydmljZT1lLHRoaXMudmlzaXRvclNlcnZpY2U9cix0aGlzLnNlc3Npb25TZXJ2aWNlPWl9cmV0dXJuIHQucHJvdG90eXBlLmhhbmRsZT1mdW5jdGlvbigpe3RoaXMuaGFuZGxlVmlzaXRvcigpLHRoaXMuaGFuZGxlU2Vzc2lvbigpfSx0LnByb3RvdHlwZS5oYW5kbGVWaXNpdG9yPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52aXNpdG9yU2VydmljZS5nZXRWaXNpdG9yKCk7dCYmKHRoaXMuY29uZmlndXJhdGlvbi5hbGxvd1N1YmRvbWFpbnM/dGhpcy52aXNpdG9yU2VydmljZS5yZW1vdmVWaXNpdG9yKGt0LkNVUlJFTlRfRE9NQUlOKTp0aGlzLnZpc2l0b3JTZXJ2aWNlLnJlbW92ZVZpc2l0b3IodGhpcy5jb29raWVTZXJ2aWNlLmdldFJvb3REb21haW4oKSksdGhpcy52aXNpdG9yU2VydmljZS5zZXRWaXNpdG9yKHQpKX0sdC5wcm90b3R5cGUuaGFuZGxlU2Vzc2lvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0U2Vzc2lvbldpdGhvdXRDYWNoZSgpO3QmJih0aGlzLmNvbmZpZ3VyYXRpb24uYWxsb3dTdWJkb21haW5zP3RoaXMuc2Vzc2lvblNlcnZpY2UucmVtb3ZlU2Vzc2lvbihrdC5DVVJSRU5UX0RPTUFJTik6dGhpcy5zZXNzaW9uU2VydmljZS5yZW1vdmVTZXNzaW9uKHRoaXMuY29va2llU2VydmljZS5nZXRSb290RG9tYWluKCkpLHRoaXMuc2Vzc2lvblNlcnZpY2Uuc2V0U2Vzc2lvbih0KSl9LHR9KCksTW49ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTAscj1hcmd1bWVudHMubGVuZ3RoO2U8cjtlKyspdCs9YXJndW1lbnRzW2VdLmxlbmd0aDt2YXIgaT1BcnJheSh0KSxuPTA7Zm9yKGU9MDtlPHI7ZSsrKWZvcih2YXIgbz1hcmd1bWVudHNbZV0scz0wLGE9by5sZW5ndGg7czxhO3MrKyxuKyspaVtuXT1vW3NdO3JldHVybiBpfSxMbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmxpc3RlbmVycz1bXX1yZXR1cm4gdC5wcm90b3R5cGUuYWRkTGlzdGVuZXJzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0LGU9W10scj0wO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspZVtyXT1hcmd1bWVudHNbcl07KHQ9Y3NBcnJheS5wcm90b3R5cGUucHVzaCkuY2FsbC5hcHBseSh0LE1uKFt0aGlzLmxpc3RlbmVyc10sZSkpfSx0fSgpLERuPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCkseG49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIERuKGUsdCksZS5wcm90b3R5cGUuZW1pdEJlZm9yZU5hdHVyYWxQYWdlVmlldz1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5saXN0ZW5lcnM7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07ci5vbkJlZm9yZU5hdHVyYWxQYWdlVmlldyYmci5vbkJlZm9yZU5hdHVyYWxQYWdlVmlldygpfX0sZS5wcm90b3R5cGUuZW1pdEFmdGVyTmF0dXJhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLmxpc3RlbmVyczt0PGUubGVuZ3RoO3QrKyl7dmFyIHI9ZVt0XTtyLm9uQWZ0ZXJOYXR1cmFsUGFnZVZpZXcmJnIub25BZnRlck5hdHVyYWxQYWdlVmlldygpfX0sZS5wcm90b3R5cGUuZW1pdEluaXRUcmFja2luZz1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5saXN0ZW5lcnM7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07ci5vbkluaXRUcmFja2luZyYmci5vbkluaXRUcmFja2luZygpfX0sZS5wcm90b3R5cGUuZW1pdFN0YXJ0VHJhY2tpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMubGlzdGVuZXJzO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgcj1lW3RdO3Iub25TdGFydFRyYWNraW5nJiZyLm9uU3RhcnRUcmFja2luZygpfX0sZS5wcm90b3R5cGUuZW1pdEJlZm9yZUFydGlmaWNpYWxQYWdlVmlldz1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5saXN0ZW5lcnM7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07ci5vbkJlZm9yZUFydGlmaWNpYWxQYWdlVmlldyYmci5vbkJlZm9yZUFydGlmaWNpYWxQYWdlVmlldygpfX0sZS5wcm90b3R5cGUuZW1pdEFmdGVyQXJ0aWZpY2lhbFBhZ2VWaWV3PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLmxpc3RlbmVyczt0PGUubGVuZ3RoO3QrKyl7dmFyIHI9ZVt0XTtyLm9uQWZ0ZXJBcnRpZmljaWFsUGFnZVZpZXcmJnIub25BZnRlckFydGlmaWNpYWxQYWdlVmlldygpfX0sZS5wcm90b3R5cGUuZW1pdEJlZm9yZVNlc3Npb25SZW5ld2FsPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLmxpc3RlbmVyczt0PGUubGVuZ3RoO3QrKyl7dmFyIHI9ZVt0XTtyLm9uQmVmb3JlU2Vzc2lvblJlbmV3YWwmJnIub25CZWZvcmVTZXNzaW9uUmVuZXdhbCgpfX0sZS5wcm90b3R5cGUuZW1pdEFmdGVyU2Vzc2lvblJlbmV3YWw9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMubGlzdGVuZXJzO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgcj1lW3RdO3Iub25BZnRlclNlc3Npb25SZW5ld2FsJiZyLm9uQWZ0ZXJTZXNzaW9uUmVuZXdhbCgpfX0sZS5wcm90b3R5cGUuZW1pdE9wdG91dD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5saXN0ZW5lcnM7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07ci5vbk9wdG91dCYmci5vbk9wdG91dCgpfX0sZS5wcm90b3R5cGUuZW1pdENvbnNlbnRHcmFudGVkPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLmxpc3RlbmVyczt0PGUubGVuZ3RoO3QrKyl7dmFyIHI9ZVt0XTtyLm9uQ29uc2VudEdyYW50ZWQmJnIub25Db25zZW50R3JhbnRlZCgpfX0sZS5wcm90b3R5cGUuZW1pdENvbnNlbnRXaXRoZHJhd249ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMubGlzdGVuZXJzO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgcj1lW3RdO3Iub25Db25zZW50V2l0aGRyYXduJiZyLm9uQ29uc2VudFdpdGhkcmF3bigpfX0sZS5wcm90b3R5cGUuZW1pdFJlY29yZGluZ1N0YXRlQ2hhbmdlPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTAsaT10aGlzLmxpc3RlbmVycztyPGkubGVuZ3RoO3IrKyl7dmFyIG49aVtyXTtuLm9uUmVjb3JkaW5nU3RhdGVDaGFuZ2UmJm4ub25SZWNvcmRpbmdTdGF0ZUNoYW5nZSh0LGUpfX0sZX0oTG4pOyFmdW5jdGlvbih0KXt0W3QuTk9UX1JFUVVJUkVEPTBdPSJOT1RfUkVRVUlSRUQiLHRbdC5OT1RfRVhQUkVTU0VEPTFdPSJOT1RfRVhQUkVTU0VEIix0W3QuR1JBTlRFRD0yXT0iR1JBTlRFRCIsdFt0LldJVEhEUkFXTj0zXT0iV0lUSERSQVdOIn0oVG58fChUbj17fSkpO3ZhciBWbixxbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5jb29raWVTZXJ2aWNlPXR9cmV0dXJuIHQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29va2llU2VydmljZS5nZXQoIl9jc19jIik7cmV0dXJuIG51bGw9PT10P3Q6TnVtYmVyKHQpfSx0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5jb29raWVTZXJ2aWNlLnNldCgiX2NzX2MiLGNzU3RyaW5nKHQpLDM0MTY0ZTYpfSx0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7dGhpcy5jb29raWVTZXJ2aWNlLmRlbGV0ZSgiX2NzX2MiLHQpfSx0fSgpLFVuPVsidHJhY2tDb25zZW50R3JhbnRlZCJdLGpuPVsidHJhY2tDb25zZW50V2l0aGRyYXduIl0sem49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5jb21tYW5kc1NlcnZpY2U9dCx0aGlzLnNlcnZpY2U9ZX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuc2VydmljZS5oYW5kbGVTdWJkb21haW5DaGFuZ2UoKSx0aGlzLnNlcnZpY2Uuc2V0SW5pdGlhbENvbnNlbnQoKSx0aGlzLnJlZ2lzdGVyQ29tbWFuZHMoKX0sdC5wcm90b3R5cGUucmVnaXN0ZXJDb21tYW5kcz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoVW4sKGZ1bmN0aW9uKCl7dC5zZXJ2aWNlLmdyYW50Q29uc2VudCgpfSkpLHRoaXMuY29tbWFuZHNTZXJ2aWNlLnJlZ2lzdGVyKGpuLChmdW5jdGlvbigpe3Quc2VydmljZS53aXRoZHJhd0NvbnNlbnQoKX0pKX0sdC5wcm90b3R5cGUub25PcHRvdXQ9ZnVuY3Rpb24oKXt0aGlzLnNlcnZpY2UucmVtb3ZlQ3VycmVudENvbnNlbnQoKX0sdH0oKSxCbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsaSl7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy5zdG9yYWdlPWUsdGhpcy5saWZlQ3ljbGVFdmVudHNFbWl0dGVyPXIsdGhpcy5jb29raWVTZXJ2aWNlPWl9cmV0dXJuIHQucHJvdG90eXBlLnNldEluaXRpYWxDb25zZW50PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zdG9yYWdlLmdldCgpOyhudWxsPT09dHx8dGhpcy5oYXNDb25zZW50UmVxdWlyZWRDaGFuZ2VkKHQpKSYmdGhpcy5zZXREZWZhdWx0KCl9LHQucHJvdG90eXBlLmhhc0NvbnNlbnRSZXF1aXJlZENoYW5nZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb25maWd1cmF0aW9uLmNvbnNlbnRSZXF1aXJlZDtyZXR1cm4gZSYmdD09PVRuLk5PVF9SRVFVSVJFRHx8IWUmJnQhPT1Ubi5OT1RfUkVRVUlSRUR9LHQucHJvdG90eXBlLmhhbmRsZVN1YmRvbWFpbkNoYW5nZT1mdW5jdGlvbigpe3RoaXMuY29uZmlndXJhdGlvbi5hbGxvd1N1YmRvbWFpbnM/dGhpcy5zdG9yYWdlLnJlbW92ZShrdC5DVVJSRU5UX0RPTUFJTik6dGhpcy5zdG9yYWdlLnJlbW92ZSh0aGlzLmNvb2tpZVNlcnZpY2UuZ2V0Um9vdERvbWFpbigpKX0sdC5wcm90b3R5cGUuc2V0RGVmYXVsdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29uZmlndXJhdGlvbi5jb25zZW50UmVxdWlyZWQ/VG4uTk9UX0VYUFJFU1NFRDpUbi5OT1RfUkVRVUlSRUQ7dGhpcy5zdG9yYWdlLnNldCh0KX0sdC5wcm90b3R5cGUuZ3JhbnRDb25zZW50PWZ1bmN0aW9uKCl7dGhpcy5jb25maWd1cmF0aW9uLmNvbnNlbnRSZXF1aXJlZCYmKHRoaXMuc3RvcmFnZS5zZXQoVG4uR1JBTlRFRCksdGhpcy5saWZlQ3ljbGVFdmVudHNFbWl0dGVyLmVtaXRDb25zZW50R3JhbnRlZCgpKX0sdC5wcm90b3R5cGUud2l0aGRyYXdDb25zZW50PWZ1bmN0aW9uKCl7dGhpcy5jb25maWd1cmF0aW9uLmNvbnNlbnRSZXF1aXJlZCYmKHRoaXMuc3RvcmFnZS5zZXQoVG4uV0lUSERSQVdOKSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdENvbnNlbnRXaXRoZHJhd24oKSl9LHQucHJvdG90eXBlLnJlbW92ZUN1cnJlbnRDb25zZW50PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb29raWVTZXJ2aWNlLmdldERvbWFpbigpO3RoaXMuc3RvcmFnZS5yZW1vdmUodCl9LHQucHJvdG90eXBlLmlzQWxsb3dlZEJ5Q29uc2VudD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmNvbmZpZ3VyYXRpb24uY29uc2VudFJlcXVpcmVkfHx0aGlzLnN0b3JhZ2UuZ2V0KCk9PT1Ubi5HUkFOVEVEfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybnt1YzoiIit0aGlzLnN0b3JhZ2UuZ2V0KCl9fSx0fSgpLEZuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixpLG4sbyxzKXt0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXI9dCx0aGlzLmNvbW1hbmRzU2VydmljZT1lLHRoaXMuY29tbWFuZHNNb2R1bGU9cix0aGlzLm9wdG91dE1vZHVsZT1pLHRoaXMub3B0b3V0U2VydmljZT1uLHRoaXMuZXhjbHVzaW9uTW9kdWxlPW8sdGhpcy5jb25zZW50TW9kdWxlPXN9cmV0dXJuIHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5saWZlQ3ljbGVFdmVudHNFbWl0dGVyLmFkZExpc3RlbmVycyh0aGlzLmV4Y2x1c2lvbk1vZHVsZSx0aGlzLmNvbnNlbnRNb2R1bGUsdGhpcy5jb21tYW5kc01vZHVsZSksdGhpcy5jb25zZW50TW9kdWxlLmluaXQoKSx0aGlzLm9wdG91dE1vZHVsZS5pbml0KCksdGhpcy5vcHRvdXRTZXJ2aWNlLmluaXQoKSx0aGlzLm9wdG91dFNlcnZpY2UuaXNBY3RpdmUoKXx8dGhpcy5jb21tYW5kc1NlcnZpY2Uuc3RhcnQoKX0sdH0oKSxIbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5zZXJ2aWNlPXR9cmV0dXJuIHQucHJvdG90eXBlLm9uT3B0b3V0PWZ1bmN0aW9uKCl7dGhpcy5zZXJ2aWNlLnJlbW92ZUV4Y2x1c2lvbigpfSx0fSgpLEduPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMubG9jYXRpb249dCx0aGlzLmNvb2tpZVNlcnZpY2U9ZX1yZXR1cm4gdC5wcm90b3R5cGUuaXNGb3JjZUluY2x1ZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzRm9yY2VJbmNsdXNpb25Db29raWUoKXx8dGhpcy5oYXNGb3JjZUluY2x1c2lvbkluVVJMKCl9LHQucHJvdG90eXBlLmlzRm9yY2VMZWdhY3lSZXBsYXlSZWNvcmRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0ZvcmNlSW5jbHVzaW9uQ29va2llVmFsdWUoTXQuUkVQTEFZX1JFQ09SRElOR19FTkFCTEVEKXx8dGhpcy5oYXNGb3JjZUluY2x1c2lvblZhbHVlSW5VUkwoTXQuUkVQTEFZX1JFQ09SRElOR19FTkFCTEVEKX0sdC5wcm90b3R5cGUuaXNGb3JjZU1hbGthUmVwbGF5UmVjb3JkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNGb3JjZUluY2x1c2lvbkNvb2tpZVZhbHVlKEx0LkdMT0JBTF9TQU1QTElORyl9LHQucHJvdG90eXBlLmhhc0ZvcmNlSW5jbHVzaW9uQ29va2llPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLmNvb2tpZVNlcnZpY2UuZ2V0KCJfY3NfaW5jIil9LHQucHJvdG90eXBlLmhhc0ZvcmNlSW5jbHVzaW9uQ29va2llVmFsdWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29va2llU2VydmljZS5nZXQoIl9jc19pbmMiKT09PXR9LHQucHJvdG90eXBlLmhhc0ZvcmNlSW5jbHVzaW9uSW5VUkw9ZnVuY3Rpb24oKXtyZXR1cm4gY3NTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLmxvY2F0aW9uLmhyZWYsIl9jc19pbmMiKT4wfSx0LnByb3RvdHlwZS5oYXNGb3JjZUluY2x1c2lvblZhbHVlSW5VUkw9ZnVuY3Rpb24odCl7cmV0dXJuIGNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcy5sb2NhdGlvbi5ocmVmLCJfY3NfaW5jPSIrdCk+MH0sdH0oKSxXbj1mdW5jdGlvbigpe3JldHVybihXbj1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbiBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSYmKHRbbl09ZVtuXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LFhuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMubWV0cmljcz17fX1yZXR1cm4gdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT1xLm5vdygpKTt2YXIgcj10aGlzLm1ldHJpY3NbdF07dGhpcy5tZXRyaWNzW3RdPXImJnIuc3RhcnRlZEF0P3I6V24oV24oe30scikse3N0YXJ0ZWRBdDplfSl9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT1xLm5vdygpKTt2YXIgcj10aGlzLm1ldHJpY3NbdF07dGhpcy5tZXRyaWNzW3RdPXImJnIuc3RvcHBlZEF0P3I6V24oV24oe30scikse3N0b3BwZWRBdDplfSksdGhpcy5vblN0b3BDYWxsYmFjayh0LHRoaXMubWV0cmljc1t0XSl9LHQucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbih0KXt0aGlzLm9uU3RvcENhbGxiYWNrPXR9LHR9KCksWW49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5sb2NhdGlvbjtyZXR1cm57cHI6dC5wcm90b2NvbCxobzp0Lmhvc3RuYW1lLHBhOnQucGF0aG5hbWUscXU6dC5zZWFyY2gsaGE6dC5oYXNofX0sdH0oKSxKbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLnJlcXVlc3Q9ZSx0aGlzLmlzTG9nZ2luZ0FjdGl2ZT0hMX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuaXNMb2dnaW5nQWN0aXZlPUwodGhpcy5jb25maWd1cmF0aW9uLm1ldHJpY1JhdGUpfSx0LnByb3RvdHlwZS5nZXRSZXF1ZXN0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybnthOiJ1eGFtIixtazp0aGlzLm1ldHJpY0tleSxtdjoiIit0aGlzLm1ldHJpY1ZhbHVlfX0sdC5wcm90b3R5cGUubG9nTWV0cmljPWZ1bmN0aW9uKHQsZSl7dGhpcy5tZXRyaWNLZXk9dCx0aGlzLm1ldHJpY1ZhbHVlPWUuc3RvcHBlZEF0LWUuc3RhcnRlZEF0LHRoaXMuc2VuZExvZygpfSx0LnByb3RvdHlwZS5zZW5kTG9nPWZ1bmN0aW9uKCl7dGhpcy5pc0xvZ2dpbmdBY3RpdmUmJnRoaXMucmVxdWVzdC5zZW5kKCl9LHR9KCk7IWZ1bmN0aW9uKHQpe3QuVElNRV9CRUZPUkVfRVhFQ1VUSU9OPSJUaW1lQmVmb3JlRXhlY3V0aW9uIix0LlBBR0VfTE9BRD0iUGFnZUxvYWQifShWbnx8KFZuPXt9KSk7dmFyIEtuLFFuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7dGhpcy5zZXJ2aWNlPWUsdGhpcy5waWk9cix0aGlzLmxvY2F0aW9uUmVxdWVzdFBhcmFtZXRlcnM9bmV3IFluLHRoaXMuYmFzaWNMb2dSZXF1ZXN0UGFyYW1ldGVycz1uZXcgdHQodCx0aGlzLnBpaSksdGhpcy5yZXF1ZXN0PW5ldyBHKHQuZ2V0TG9nZ2VyVXJpKCkpLHRoaXMubG9nZ2VyPW5ldyBKbih0LHRoaXMucmVxdWVzdCl9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMucmVxdWVzdC5zZXRSZXF1ZXN0UGFyYW1ldGVyc1Byb3ZpZGVycyh0aGlzLmJhc2ljTG9nUmVxdWVzdFBhcmFtZXRlcnMsdGhpcy5sb2NhdGlvblJlcXVlc3RQYXJhbWV0ZXJzKSx0aGlzLmxvZ2dlci5pbml0KCksdGhpcy5zZXJ2aWNlLm9uU3RvcCgoZnVuY3Rpb24oZSxyKXt0LmxvZ2dlci5sb2dNZXRyaWMoZSxyKX0pKSx0aGlzLnJlY29yZEluaXRpYWxNZXRyaWNzKCl9LHQucHJvdG90eXBlLnJlY29yZEluaXRpYWxNZXRyaWNzPWZ1bmN0aW9uKCl7dGhpcy5pc1N1cHBvcnRlZCgpJiYodGhpcy5zZXJ2aWNlLnN0YXJ0KFZuLlBBR0VfTE9BRCx3aW5kb3cucGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCksdGhpcy5zZXJ2aWNlLnN0b3AoVm4uUEFHRV9MT0FELHdpbmRvdy5wZXJmb3JtYW5jZS50aW1pbmcuZG9tQ29udGVudExvYWRlZEV2ZW50RW5kKSx0aGlzLnNlcnZpY2Uuc3RhcnQoVm4uVElNRV9CRUZPUkVfRVhFQ1VUSU9OLHdpbmRvdy5wZXJmb3JtYW5jZS50aW1pbmcuZG9tQ29udGVudExvYWRlZEV2ZW50RW5kKSx0aGlzLnNlcnZpY2Uuc3RvcChWbi5USU1FX0JFRk9SRV9FWEVDVVRJT04pKX0sdC5wcm90b3R5cGUuaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LnBlcmZvcm1hbmNlJiZ3aW5kb3cucGVyZm9ybWFuY2UudGltaW5nfSx0fSgpLFpuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7dGhpcy5saWZlQ3ljbGVFdmVudHNFbWl0dGVyPXQsdGhpcy5sb2NhdGlvbj1lLHRoaXMuY29va2llU2VydmljZT1yfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7IXRoaXMuaXNBY3RpdmUoKSYmdGhpcy5oYXNPcHRvdXRJblVSTCgpJiZ0aGlzLmFjdGl2YXRlKCl9LHQucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIjEiPT09dGhpcy5jb29raWVTZXJ2aWNlLmdldCgiX2NzX29wdG91dCIpfSx0LnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlci5lbWl0T3B0b3V0KCksdGhpcy5jb29raWVTZXJ2aWNlLnNldCgiX2NzX29wdG91dCIsIjEiLDM0MTY0ZTYpfSx0LnByb3RvdHlwZS5oYXNPcHRvdXRJblVSTD1mdW5jdGlvbigpe3JldHVybiBjc1N0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMubG9jYXRpb24uaHJlZiwiX2NzX29wdG91dCIpPjB9LHR9KCksJG49WyJvcHRvdXQiXSx0bz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmNvbW1hbmRzU2VydmljZT10LHRoaXMub3B0b3V0U2VydmljZT1lfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcigkbiwoZnVuY3Rpb24oKXt0Lm9wdG91dFNlcnZpY2UuYWN0aXZhdGUoKX0pKX0sdH0oKTtmdW5jdGlvbiBlbyh0LGUpe3JldHVybiBlLnZpc2l0b3IudmlzaXRzQ291bnQhPT10LnZpc2l0b3IudmlzaXRzQ291bnQ/ZS52aXNpdG9yLnZpc2l0c0NvdW50LXQudmlzaXRvci52aXNpdHNDb3VudDp0LnNlc3Npb24/ZS5zZXNzaW9uP2Uuc2Vzc2lvbi5wYWdlTnVtYmVyLXQuc2Vzc2lvbi5wYWdlTnVtYmVyOi0xOjF9IWZ1bmN0aW9uKHQpe3Quc2VsZWN0PWZ1bmN0aW9uKHQsZSl7dmFyIHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodCwoZnVuY3Rpb24odCl7cmV0dXJuIHQuZXhjbHVzaW9uPT09ZX0pKVswXX0odCxlKSxpPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLnNvcnQuY2FsbChjc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0LChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gdC52aXNpdG9yJiZ0LnZpc2l0b3IuYXBwbGllZFRyYWNraW5nRHJhdz09PWV9KHQsZSl9KSksZW8pWzBdfSh0LGUpO3JldHVybiByfHxpfX0oS258fChLbj17fSkpO3ZhciBybz1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MCxyPWFyZ3VtZW50cy5sZW5ndGg7ZTxyO2UrKyl0Kz1hcmd1bWVudHNbZV0ubGVuZ3RoO3ZhciBpPUFycmF5KHQpLG49MDtmb3IoZT0wO2U8cjtlKyspZm9yKHZhciBvPWFyZ3VtZW50c1tlXSxzPTAsYT1vLmxlbmd0aDtzPGE7cysrLG4rKylpW25dPW9bc107cmV0dXJuIGl9LGlvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7dGhpcy5jb25maWd1cmF0aW9uPXQsdGhpcy5jdXJyZW50RG9tYWluU3RhdGU9ZSx0aGlzLm90aGVyRG9tYWluU3RhdGVzPXJ9cmV0dXJuIHQucHJvdG90eXBlLmFwcGx5VXBUb0RhdGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLm90aGVyRG9tYWluU3RhdGVzLnJldHJpZXZlKHRoaXMuY29uZmlndXJhdGlvbi5ob3N0bmFtZXMsKGZ1bmN0aW9uKHIpe3ZhciBpPXJvKFtlLmN1cnJlbnREb21haW5TdGF0ZS5nZXQoKV0sciksbj1Lbi5zZWxlY3QoaSxlLmNvbmZpZ3VyYXRpb24ubGFzdFRyYWNraW5nRHJhdyk7ZS5jdXJyZW50RG9tYWluU3RhdGUuYXBwbHkobiksdCgpfSkpfSx0fSgpLG5vPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuY29tbWFuZHNTZXJ2aWNlPXQsdGhpcy5pZnJhbWVFdmVudHNFbWl0dGVyPWV9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLmlmcmFtZUV2ZW50c0VtaXR0ZXIuYWRkTGlzdGVuZXJzKHRoaXMuY29tbWFuZHNTZXJ2aWNlKX0sdC5wcm90b3R5cGUub25PcHRvdXQ9ZnVuY3Rpb24oKXt0aGlzLmNvbW1hbmRzU2VydmljZS5zdG9wKCl9LHQucHJvdG90eXBlLm9uQmVmb3JlU2Vzc2lvblJlbmV3YWw9ZnVuY3Rpb24oKXt0aGlzLmNvbW1hbmRzU2VydmljZS5zdG9wKCl9LHR9KCk7dmFyIG9vLHNvPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksYW89ZnVuY3Rpb24odCxlLHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP2U6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZSh0LGUscixpKTtlbHNlIGZvcih2YXIgYT10Lmxlbmd0aC0xO2E+PTA7YS0tKShuPXRbYV0pJiYocz0obzwzP24ocyk6bz4zP24oZSxyLHMpOm4oZSxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIscyksc30sY289ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS5yZWdpc3RyeT17fSxlfXJldHVybiBzbyhlLHQpLGUucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTAsaT10O3I8aS5sZW5ndGg7cisrKXt2YXIgbj1pW3JdO3RoaXMucmVnaXN0cnlbbl09ZSx0aGlzLnJlZ2lzdHJ5fX0sZS5wcm90b3R5cGUub25TdGFydD1mdW5jdGlvbigpe3RoaXMuYXBwbHlQZW5kaW5nKCksdGhpcy5lbmFibGVJbW1lZGlhdGVBcHBsaWNhdGlvbigpfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXt3aW5kb3cuX3V4YT1bXX0sZS5wcm90b3R5cGUub25JZnJhbWVDb21tYW5kcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxyPXQuY29tbWFuZHM7ZTxyLmxlbmd0aDtlKyspe3ZhciBpPXJbZV07dGhpcy5hcHBseUZyb21JZnJhbWUoaS5uYW1lLGkucGFyYW1zLHQuaWZyYW1lUGF0aCl9fSxlLnByb3RvdHlwZS5hcHBseUZyb21JZnJhbWU9ZnVuY3Rpb24odCxlLHIpe3ZhciBpPXRoaXM7VHQudHJ5VG9FeGVjdXRlKCJDb21tYW5kcy5hcHBseS5mcm9tLmlmcmFtZTogIityLChmdW5jdGlvbigpe3ZhciByO2lmKGkucmVnaXN0cnlbdF0pcmV0dXJuKHI9aS5yZWdpc3RyeSlbdF0uYXBwbHkocixlKX0pKSgpfSxlLnByb3RvdHlwZS5hcHBseVBlbmRpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3dpbmRvdy5fdXhhLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciByPWVbMF0saT1lLnNsaWNlKDEpO3JldHVybiB0LmFwcGx5KHIsaSl9KSl9LGUucHJvdG90eXBlLmVuYWJsZUltbWVkaWF0ZUFwcGxpY2F0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt3aW5kb3cuX3V4YT17cHVzaDpmdW5jdGlvbihlKXt2YXIgcj1lWzBdLGk9ZS5zbGljZSgxKTtyZXR1cm4gdC5hcHBseShyLGkpfX19LGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQsZSl7dmFyIHI7aWYodGhpcy5yZWdpc3RyeVt0XSlyZXR1cm4ocj10aGlzLnJlZ2lzdHJ5KVt0XS5hcHBseShyLGUpfSxhbyhbQXQoIkNvbW1hbmRzLmFwcGx5IildLGUucHJvdG90eXBlLCJhcHBseSIsbnVsbCksZX0odWUpLHVvPWZ1bmN0aW9uKHQsZSxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz9lOm51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUodCxlLHIsaSk7ZWxzZSBmb3IodmFyIGE9dC5sZW5ndGgtMTthPj0wO2EtLSkobj10W2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKGUscixzKTpuKGUscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHMpLHN9LHBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciB0PXRoaXM7dGhpcy5ldmVudEhhbmRsZXI9e2JvdW5kRWxlbWVudDpkb2N1bWVudCx0eXBlOiJzZWN1cml0eXBvbGljeXZpb2xhdGlvbiIsbGlzdGVuZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHQuc2VjdXJpdHlQb2xpY3lWaW9sYXRpb25MaXN0ZW5lcihlKX19fXJldHVybiB0LnByb3RvdHlwZS5vbkV2ZW50PWZ1bmN0aW9uKHQpe3RoaXMub25FdmVudENhbGxiYWNrPXR9LHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7WnQodGhpcy5ldmVudEhhbmRsZXIpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7JHQodGhpcy5ldmVudEhhbmRsZXIpfSx0LnByb3RvdHlwZS5pc1NlY3VyaXR5RXJyb3JSZWxldmFudD1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4hMTt2YXIgcj1lLmRpc3Bvc2l0aW9uO3JldHVybiBkdChlLnNvdXJjZUZpbGUpJiZjc0FycmF5LnByb3RvdHlwZS5zb21lLmNhbGwodC53aGlsZWxpc3REb21haW5zLChmdW5jdGlvbih0KXtyZXR1cm4gY3NTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbChlLnNvdXJjZUZpbGUsdCk+MH0pKSYmInJlcG9ydCIhPT1yfSx0LnByb3RvdHlwZS5zZWN1cml0eVBvbGljeVZpb2xhdGlvbkxpc3RlbmVyPWZ1bmN0aW9uKHQpe3RoaXMuaXNTZWN1cml0eUVycm9yUmVsZXZhbnQodCkmJnRoaXMub25FdmVudENhbGxiYWNrKHt2aW9sYXRlZERpcmVjdGl2ZTp0LnZpb2xhdGVkRGlyZWN0aXZlLHNvdXJjZUZpbGU6dC5zb3VyY2VGaWxlfSl9LHQud2hpbGVsaXN0RG9tYWlucz1bImNvbnRlbnRzcXVhcmUiLCJsb2NhbGhvc3QiLCJ3ZWJzaXRlLmNvbS9idWlsZC9lMmUiXSx1byhbQXQoIkV2ZW50IGhhbmRsZXIgdHlwZTogc2VjdXJpdHlwb2xpY3l2aW9sYXRpb24iKV0sdC5wcm90b3R5cGUsInNlY3VyaXR5UG9saWN5VmlvbGF0aW9uTGlzdGVuZXIiLG51bGwpLHR9KCksbG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuY29udGVudFNlY3VyaXR5UG9saWN5RXJyb3JzVHJhY2tlcj10fXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNvbnRlbnRTZWN1cml0eVBvbGljeUVycm9yc1RyYWNrZXIub25FdmVudCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvY2Vzc0V2ZW50KGUpfSkpfSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuY29udGVudFNlY3VyaXR5UG9saWN5RXJyb3JzVHJhY2tlci5zdGFydCgpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5jb250ZW50U2VjdXJpdHlQb2xpY3lFcnJvcnNUcmFja2VyLnN0b3AoKX0sdC5wcm90b3R5cGUucHJvY2Vzc0V2ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPSJDb250ZW50IFNlY3VyaXR5IFBvbGljeSBlcnJvci4gVmlvbGF0ZWQgZGlyZWN0aXZlOiAiK3QudmlvbGF0ZWREaXJlY3RpdmUrIiAtIFNvdXJjZSBmaWxlOiAiK3Quc291cmNlRmlsZTtUdC53YXJuKGUpfSx0fSgpLGhvPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksZm89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIsaSxuLG8pe3ZhciBzPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlcj1lLHMuamF2YVNjcmlwdEVycm9yc1JlcXVlc3Q9cixzLmJhc2ljUmVxdWVzdFBhcmFtZXRlcnM9aSxzLmphdmFTY3JpcHRFcnJvcnNBbm9ueW1pemVyPW4scy5jdXN0b21FdmVudEVtaXR0ZXI9byxzLmphdmFTY3JpcHRFcnJvcnNCYXRjaD1bXSxzLmphdmFTY3JpcHRFcnJvcnNDb3VudD0wLHMuY3VzdG9tRXJyb3JzQnVmZmVyPVtdLHN9cmV0dXJuIGhvKGUsdCksZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9jZXNzRXZlbnQoZSl9KSksdGhpcy5iaW5kUmVxdWVzdCgpfSxlLnByb3RvdHlwZS5pbml0U3RhdGVzPWZ1bmN0aW9uKCl7dGhpcy5zdGFydFRpbWU9cS5ub3coKSx0aGlzLmphdmFTY3JpcHRFcnJvcnNCYXRjaD1bXSx0aGlzLmphdmFTY3JpcHRFcnJvcnNDb3VudD0wfSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlci5zdGFydCgpLHRoaXMucHJvY2Vzc0N1c3RvbUVycm9yc0luQnVmZmVyKCl9LGUucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbigpe3RoaXMuamF2YVNjcmlwdEVycm9yc1RyYWNrZXIuc3RvcCgpfSxlLnByb3RvdHlwZS5nZXRSZXF1ZXN0UGF5bG9hZD1mdW5jdGlvbigpe3JldHVybiBjc0pTT04uc3RyaW5naWZ5KHtlcnJvcnM6dGhpcy5qYXZhU2NyaXB0RXJyb3JzQmF0Y2h9KX0sZS5wcm90b3R5cGUub25JZnJhbWVKYXZhc2NyaXB0RXJyb3I9ZnVuY3Rpb24odCl7dGhpcy5wcm9jZXNzRXZlbnQodCl9LGUucHJvdG90eXBlLnRyYWNrQ3VzdG9tRXJyb3I9ZnVuY3Rpb24odCl7dmFyIGU9e2Vycm9yVHlwZToianNFcnJvciIsbWVzc2FnZToiQ3VzdG9tIEVycm9yOiAiK3QsbGluZW5vOjEsY29sbm86MSxmaWxlbmFtZToiaHR0cHM6Ly9jc2Vycm9yLmNvbS90ZXh0ZXJyb3IuanMifTt0aGlzLnByb2Nlc3NDdXN0b21FcnJvckV2ZW50KGUpfSxlLnByb3RvdHlwZS5wcm9jZXNzQ3VzdG9tRXJyb3JFdmVudD1mdW5jdGlvbih0KXt0aGlzLmlzU3RhcnRlZD8odGhpcy5wcm9jZXNzRXZlbnQodCksdGhpcy5jdXN0b21FdmVudEVtaXR0ZXIuZW1pdEN1c3RvbUVycm9yRXZlbnQodCkpOmNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmN1c3RvbUVycm9yc0J1ZmZlcix0KX0sZS5wcm90b3R5cGUucHJvY2Vzc0N1c3RvbUVycm9yc0luQnVmZmVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmlzU3RhcnRlZCYmKGNzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmN1c3RvbUVycm9yc0J1ZmZlciwoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvY2Vzc0N1c3RvbUVycm9yRXZlbnQoZSl9KSksdGhpcy5jdXN0b21FcnJvcnNCdWZmZXI9W10pfSxlLnByb3RvdHlwZS5wcm9jZXNzRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5pc1N0YXJ0ZWQmJnRoaXMuamF2YVNjcmlwdEVycm9yc0NvdW50PDIwJiYodGhpcy5qYXZhU2NyaXB0RXJyb3JzQW5vbnltaXplci5hbm9ueW1pemUodCksdC5ydD10aGlzLmdldFJlbGF0aXZlVGltZSgpLGNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmphdmFTY3JpcHRFcnJvcnNCYXRjaCx0KSx0aGlzLnNlbmRFcnJvcnMoKSl9LGUucHJvdG90eXBlLmJpbmRSZXF1ZXN0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmphdmFTY3JpcHRFcnJvcnNSZXF1ZXN0LnNldFJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzKHRoaXMuYmFzaWNSZXF1ZXN0UGFyYW1ldGVycyksdGhpcy5qYXZhU2NyaXB0RXJyb3JzUmVxdWVzdC5zZXRSZXF1ZXN0UGF5bG9hZFByb3ZpZGVyKHRoaXMpLHRoaXMuamF2YVNjcmlwdEVycm9yc1JlcXVlc3QuYWZ0ZXIoKGZ1bmN0aW9uKCl7dC5qYXZhU2NyaXB0RXJyb3JzQmF0Y2g9W10sdC5qYXZhU2NyaXB0RXJyb3JzQ291bnQrPTF9KSl9LGUucHJvdG90eXBlLmdldFJlbGF0aXZlVGltZT1mdW5jdGlvbigpe3JldHVybiBxLm5vdygpLXRoaXMuc3RhcnRUaW1lfSxlLnByb3RvdHlwZS5zZW5kRXJyb3JzPWZ1bmN0aW9uKCl7dGhpcy5qYXZhU2NyaXB0RXJyb3JzUmVxdWVzdC5zZW5kKCl9LGV9KHVlKSx5bz1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihpLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgaSl9fSgpLHZvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyLGksbil7dmFyIG89dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLmFwaUVycm9yc1RyYWNrZXI9ZSxvLmFwaUVycm9yc1JlcXVlc3Q9cixvLmJhc2ljUmVxdWVzdFBhcmFtZXRlcnM9aSxvLmFwaUVycm9yc0Fub255bWl6ZXI9bixvLmFwaUVycm9yc0JhdGNoPVtdLG8uYXBpRXJyb3JzQ291bnQ9MCxvfXJldHVybiB5byhlLHQpLGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuYXBpRXJyb3JzVHJhY2tlci5pbml0KCksdGhpcy5hcGlFcnJvcnNUcmFja2VyLm9uRXZlbnQoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2Nlc3NFdmVudChlKX0pKSx0aGlzLmJpbmRSZXF1ZXN0KCl9LGUucHJvdG90eXBlLmluaXRTdGF0ZXM9ZnVuY3Rpb24oKXt0aGlzLmFwaUVycm9yc0JhdGNoPVtdLHRoaXMuYXBpRXJyb3JzQ291bnQ9MH0sZS5wcm90b3R5cGUub25TdGFydD1mdW5jdGlvbigpe3RoaXMuYXBpRXJyb3JzVHJhY2tlci5zdGFydCgpfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXt0aGlzLmFwaUVycm9yc1RyYWNrZXIuc3RvcCgpfSxlLnByb3RvdHlwZS5nZXRSZXF1ZXN0UGF5bG9hZD1mdW5jdGlvbigpe3JldHVybiBjc0pTT04uc3RyaW5naWZ5KHtlcnJvcnM6dGhpcy5hcGlFcnJvcnNCYXRjaH0pfSxlLnByb3RvdHlwZS5vbklmcmFtZUFwaUVycm9yPWZ1bmN0aW9uKHQpe3RoaXMucHJvY2Vzc0V2ZW50KHQpfSxlLnByb3RvdHlwZS5wcm9jZXNzRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5pc1N0YXJ0ZWQmJnRoaXMuYXBpRXJyb3JzQ291bnQ8ZS5NQVhfRVJST1JTJiYoY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMuYXBpRXJyb3JzQmF0Y2gsdGhpcy5hcGlFcnJvcnNBbm9ueW1pemVyLmFub255bWl6ZSh0KSksdGhpcy5zZW5kRXJyb3JzKCkpfSxlLnByb3RvdHlwZS5iaW5kUmVxdWVzdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5hcGlFcnJvcnNSZXF1ZXN0LnNldFJlcXVlc3RQYXJhbWV0ZXJzUHJvdmlkZXJzKHRoaXMuYmFzaWNSZXF1ZXN0UGFyYW1ldGVycyksdGhpcy5hcGlFcnJvcnNSZXF1ZXN0LnNldFJlcXVlc3RQYXlsb2FkUHJvdmlkZXIodGhpcyksdGhpcy5hcGlFcnJvcnNSZXF1ZXN0LmFmdGVyKChmdW5jdGlvbigpe3QuYXBpRXJyb3JzQmF0Y2g9W10sdC5hcGlFcnJvcnNDb3VudCs9MX0pKX0sZS5wcm90b3R5cGUuc2VuZEVycm9ycz1mdW5jdGlvbigpe3RoaXMuYXBpRXJyb3JzUmVxdWVzdC5zZW5kKCl9LGUuTUFYX0VSUk9SUz0yMCxlfSh1ZSk7IWZ1bmN0aW9uKHQpe3QuQ09OVEVOVFNRVUFSRT0iY29udGVudHNxdWFyZS5uZXQiLHQuQ0xJQ0tUQUxFPSJjbGlja3RhbGUubmV0Iix0LkZBS0VfVFJBQ0tFUj0iZmFrZS10cmFja2VyLmNvbnRlbnQtc3F1YXJlLmZyIn0ob298fChvbz17fSkpO3ZhciBtbyxnbz1bInRyYWNrRXJyb3IiXSxTbz1bImFwaS1lcnJvcnM6bWFza1VybCJdLEVvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixpLG4sbyxzLGEsYyl7dGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlcj10LHRoaXMuamF2YVNjcmlwdEVycm9yc0Fub255bWl6ZXI9ZSx0aGlzLmFwaUVycm9yc1RyYWNrZXI9cix0aGlzLmFwaUVycm9yc0Fub255bWl6ZXI9aSx0aGlzLmNvbmZpZ3VyYXRpb249bix0aGlzLmJhc2ljUmVxdWVzdFBhcmFtZXRlcnM9byx0aGlzLmlmcmFtZUV2ZW50c0VtaXR0ZXI9cyx0aGlzLmNvbW1hbmRzU2VydmljZT1hLHRoaXMuY3VzdG9tRXZlbnRFbWl0dGVyPWN9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnRTZWN1cml0eVBvbGljeUVycm9yc1NlcnZpY2U9bmV3IGxvKG5ldyBwbyksdGhpcy5jb250ZW50U2VjdXJpdHlQb2xpY3lFcnJvcnNTZXJ2aWNlLmluaXQoKTt2YXIgdD1uZXcgUXQodGhpcy5jb25maWd1cmF0aW9uLmdldFRyYWNrZXJVcmkoKSwiZXJyb3JzIik7dGhpcy5qYXZhU2NyaXB0RXJyb3JzU2VydmljZT1uZXcgZm8odGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlcix0LHRoaXMuYmFzaWNSZXF1ZXN0UGFyYW1ldGVycyx0aGlzLmphdmFTY3JpcHRFcnJvcnNBbm9ueW1pemVyLHRoaXMuY3VzdG9tRXZlbnRFbWl0dGVyKSx0aGlzLmphdmFTY3JpcHRFcnJvcnNTZXJ2aWNlLmluaXQoKSx0aGlzLmlmcmFtZUV2ZW50c0VtaXR0ZXIuYWRkTGlzdGVuZXJzKHRoaXMuamF2YVNjcmlwdEVycm9yc1NlcnZpY2UpO3ZhciBlPW5ldyBRdCh0aGlzLmNvbmZpZ3VyYXRpb24uZ2V0VHJhY2tlclVyaSgpLCJhcGktZXJyb3JzIik7dGhpcy5hcGlFcnJvcnNUcmFja2VyLmV4Y2x1ZGVEb21haW5zKFtvby5DT05URU5UU1FVQVJFLG9vLkNMSUNLVEFMRSxvby5GQUtFX1RSQUNLRVJdKSx0aGlzLmFwaUVycm9yc1NlcnZpY2U9bmV3IHZvKHRoaXMuYXBpRXJyb3JzVHJhY2tlcixlLHRoaXMuYmFzaWNSZXF1ZXN0UGFyYW1ldGVycyx0aGlzLmFwaUVycm9yc0Fub255bWl6ZXIpLHRoaXMuYXBpRXJyb3JzU2VydmljZS5pbml0KCksdGhpcy5pZnJhbWVFdmVudHNFbWl0dGVyLmFkZExpc3RlbmVycyh0aGlzLmFwaUVycm9yc1NlcnZpY2UpLHRoaXMucmVnaXN0ZXJDb21tYW5kcygpfSx0LnByb3RvdHlwZS5yZWdpc3RlckNvbW1hbmRzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihTbywoZnVuY3Rpb24oZSl7cmV0dXJuIHQuYXBpRXJyb3JzQW5vbnltaXplci5hZGRVcmxNYXNraW5nUGF0dGVybihlKX0pKSx0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihnbywoZnVuY3Rpb24oZSl7cmV0dXJuIHQuamF2YVNjcmlwdEVycm9yc1NlcnZpY2UudHJhY2tDdXN0b21FcnJvcihlKX0pKX0sdC5wcm90b3R5cGUub25Jbml0VHJhY2tpbmc9ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnRTZWN1cml0eVBvbGljeUVycm9yc1NlcnZpY2Uuc3RhcnQoKX0sdC5wcm90b3R5cGUub25TdGFydFRyYWNraW5nPWZ1bmN0aW9uKCl7dGhpcy5jb25maWd1cmF0aW9uLmpzRXJyb3JzRW5hYmxlZCYmdGhpcy5qYXZhU2NyaXB0RXJyb3JzU2VydmljZS5zdGFydCgpLHRoaXMuY29uZmlndXJhdGlvbi5hcGlFcnJvcnNFbmFibGVkJiZ0aGlzLmFwaUVycm9yc1NlcnZpY2Uuc3RhcnQoKX0sdC5wcm90b3R5cGUub25BZnRlck5hdHVyYWxQYWdlVmlldz1mdW5jdGlvbigpe3RoaXMuamF2YVNjcmlwdEVycm9yc1NlcnZpY2UuaW5pdFN0YXRlcygpLHRoaXMuYXBpRXJyb3JzU2VydmljZS5pbml0U3RhdGVzKCl9LHQucHJvdG90eXBlLm9uQWZ0ZXJBcnRpZmljaWFsUGFnZVZpZXc9ZnVuY3Rpb24oKXt0aGlzLmphdmFTY3JpcHRFcnJvcnNTZXJ2aWNlLmluaXRTdGF0ZXMoKSx0aGlzLmFwaUVycm9yc1NlcnZpY2UuaW5pdFN0YXRlcygpfSx0LnByb3RvdHlwZS5vbkJlZm9yZVNlc3Npb25SZW5ld2FsPWZ1bmN0aW9uKCl7dGhpcy5qYXZhU2NyaXB0RXJyb3JzU2VydmljZS5zdG9wKCksdGhpcy5hcGlFcnJvcnNTZXJ2aWNlLnN0b3AoKX0sdC5wcm90b3R5cGUub25PcHRvdXQ9ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnRTZWN1cml0eVBvbGljeUVycm9yc1NlcnZpY2Uuc3RvcCgpLHRoaXMuamF2YVNjcmlwdEVycm9yc1NlcnZpY2Uuc3RvcCgpLHRoaXMuYXBpRXJyb3JzU2VydmljZS5zdG9wKCl9LHR9KCksd289ZnVuY3Rpb24odCxlLHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP2U6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZSh0LGUscixpKTtlbHNlIGZvcih2YXIgYT10Lmxlbmd0aC0xO2E+PTA7YS0tKShuPXRbYV0pJiYocz0obzwzP24ocyk6bz4zP24oZSxyLHMpOm4oZSxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIscyksc307IWZ1bmN0aW9uKHQpe3QuU2V0PSJzZXQiLHQuUmVtb3ZlPSJyZW1vdmUifShtb3x8KG1vPXt9KSk7dmFyIENvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMuY29va2llU2VydmljZT1lLHRoaXMuc2FtZVNpdGU9Q3QuTm9uZSx0aGlzLmlzQWN0aXZhdGVkPSExLHRoaXMuc2V0Q29va2llQmF0Y2g9W10sdGhpcy5yZW1vdmVDb29raWVCYXRjaD1bXX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuc2FtZVNpdGU9dGhpcy5jb29raWVTZXJ2aWNlLmlzU2FtZVNpdGVTdXBwb3J0ZWQoKT9DdC5Ob25lOkN0Lk5vdFNldH0sdC5wcm90b3R5cGUuc2V0U3RhdGVzPWZ1bmN0aW9uKHQsZSl7dGhpcy5jdXJyZW50RG9tYWluU3RhdGU9dCx0aGlzLmlmcmFtZURvbWFpblN0YXRlPWV9LHQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5pZnJhbWVEb21haW5TdGF0ZS5pbml0KHRoaXMuZ2V0SWZyYW1lRG9tYWluKCksKGZ1bmN0aW9uKHIsaSl7dmFyIG49W2UuY3VycmVudERvbWFpblN0YXRlLmdldCgpXTtpJiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwobixyKTt2YXIgbz1Lbi5zZWxlY3QobixlLmNvbmZpZ3VyYXRpb24ubGFzdFRyYWNraW5nRHJhdyk7ZS5pc0FjdGl2YXRlZD0hMCxlLmN1cnJlbnREb21haW5TdGF0ZS5hcHBseShvKSx0KCl9KSksdGhpcy5pZnJhbWU9dGhpcy5pZnJhbWVEb21haW5TdGF0ZS5vcGVuSWZyYW1lKCl9LHQucHJvdG90eXBlLnNldENvb2tpZT1mdW5jdGlvbih0LGUscil7aWYodGhpcy5pc0FjdGl2YXRlZCl7dmFyIGk9e25hbWU6dCx2YWx1ZTplLHNhbWVzaXRlOnRoaXMuc2FtZVNpdGUsc2VjdXJlOlJ0Llllc307ciYmKGkuZXhwaXJlcz1FdC50b0V4cGlyZURhdGUocikuZ2V0VGltZSgpKSx0aGlzLmFkZFRvU2V0Q29va2llQmF0Y2goaSl9fSx0LnByb3RvdHlwZS5yZW1vdmVDb29raWU9ZnVuY3Rpb24odCl7dGhpcy5pc0FjdGl2YXRlZCYmdGhpcy5hZGRUb1JlbW92ZUNvb2tpZUJhdGNoKHQpfSx0LnByb3RvdHlwZS5hZGRUb1JlbW92ZUNvb2tpZUJhdGNoPWZ1bmN0aW9uKHQpe3RoaXMucmVtb3ZlQ29va2llQmF0Y2g9Y3NBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodGhpcy5yZW1vdmVDb29raWVCYXRjaCwoZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT10fSkpLHRoaXMuc2V0Q29va2llQmF0Y2g9Y3NBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodGhpcy5zZXRDb29raWVCYXRjaCwoZnVuY3Rpb24oZSl7cmV0dXJuIGUubmFtZSE9PXR9KSksY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMucmVtb3ZlQ29va2llQmF0Y2gsdCksdGhpcy5zZXRCYXRjaFJlYWR5Q2FsbCgpfSx0LnByb3RvdHlwZS5hZGRUb1NldENvb2tpZUJhdGNoPWZ1bmN0aW9uKHQpe3RoaXMucmVtb3ZlQ29va2llQmF0Y2g9Y3NBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodGhpcy5yZW1vdmVDb29raWVCYXRjaCwoZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT10Lm5hbWV9KSksdGhpcy5zZXRDb29raWVCYXRjaD1jc0FycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0aGlzLnNldENvb2tpZUJhdGNoLChmdW5jdGlvbihlKXtyZXR1cm4gZS5uYW1lIT09dC5uYW1lfSkpLGNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLnNldENvb2tpZUJhdGNoLHQpLHRoaXMuc2V0QmF0Y2hSZWFkeUNhbGwoKX0sdC5wcm90b3R5cGUuc2V0QmF0Y2hSZWFkeUNhbGw9ZnVuY3Rpb24oKXt0aGlzLnNlbmRNZXNzYWdlc0JhdGNocygpfSx0LnByb3RvdHlwZS5zZW5kTWVzc2FnZXNCYXRjaHM9ZnVuY3Rpb24oKXtpZih0aGlzLnNldENvb2tpZUJhdGNoLmxlbmd0aD4wKXt2YXIgdD10aGlzLmJ1aWxkTWVzc2FnZShtby5TZXQsdGhpcy5zZXRDb29raWVCYXRjaCk7dGhpcy5zZW5kTWVzc2FnZSh0KSx0aGlzLnNldENvb2tpZUJhdGNoPVtdfWlmKHRoaXMucmVtb3ZlQ29va2llQmF0Y2gubGVuZ3RoPjApe3ZhciBlPXRoaXMuYnVpbGRNZXNzYWdlKG1vLlJlbW92ZSx0aGlzLnJlbW92ZUNvb2tpZUJhdGNoKTt0aGlzLnNlbmRNZXNzYWdlKGUpLHRoaXMucmVtb3ZlQ29va2llQmF0Y2g9W119fSx0LnByb3RvdHlwZS5idWlsZE1lc3NhZ2U9ZnVuY3Rpb24odCxlKXtyZXR1cm57Y29tbWFuZDp0LGNvb2tpZXM6ZSxkb21haW46bnVsbCxwaWQ6dGhpcy5jb25maWd1cmF0aW9uLnByb2plY3RJZH19LHQucHJvdG90eXBlLnNlbmRNZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciBlPSJodHRwczovLyIrdGhpcy5nZXRJZnJhbWVEb21haW4oKTt0aGlzLmlmcmFtZS5jb250ZW50V2luZG93JiZ0aGlzLmlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKHQsZSl9LHQucHJvdG90eXBlLmdldElmcmFtZURvbWFpbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmZpZ3VyYXRpb24uZHVhbENvbGxlY3Rpb25UYWdEb21haW4mJiJjb250ZW50c3F1YXJlLm5ldCIhPT10aGlzLmNvbmZpZ3VyYXRpb24uZHVhbENvbGxlY3Rpb25UYWdEb21haW4/ImNkbnNzbC4iK3RoaXMuY29uZmlndXJhdGlvbi5kdWFsQ29sbGVjdGlvblRhZ0RvbWFpbjoiY3N4ZC5jb250ZW50c3F1YXJlLm5ldCJ9LHdvKFtMcigpLEF0KCJzZW5kIHhkZnJhbWUtc2luZ2xlLWlmcmFtZSBiYXRjaCIpXSx0LnByb3RvdHlwZSwic2V0QmF0Y2hSZWFkeUNhbGwiLG51bGwpLHR9KCksUm89WyJfY3NfaWQiLCJfY3NfcyIsIl9jc19jdmFycyIsIl9jc19leCJdLGJvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMueGRmcmFtZU9wZW5lcj1lfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKHQsZSl7dGhpcy54ZGZyYW1lT3JpZ2luPSJodHRwczovLyIrdCx0aGlzLmNhbGxiYWNrPWV9LHQucHJvdG90eXBlLm9wZW5JZnJhbWU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMueGRmcmFtZU9wZW5lci5vbk1lc3NhZ2UoKGZ1bmN0aW9uKGUpe3QuaGFuZGxlWGRmcmFtZU1lc3NhZ2UoZSl9KSksdGhpcy54ZGZyYW1lT3BlbmVyLm9uVGltZW91dCgoZnVuY3Rpb24oKXt0LmhhbmRsZVRpbWVvdXQoKX0pKSx0aGlzLnhkZnJhbWVPcGVuZXIuc3RhcnQoKTt2YXIgZT10aGlzLmdldFhkZnJhbWVVcmwodGhpcy54ZGZyYW1lT3JpZ2luKTtyZXR1cm4gdGhpcy54ZGZyYW1lT3BlbmVyLm9wZW4oZSl9LHQucHJvdG90eXBlLmhhbmRsZVhkZnJhbWVNZXNzYWdlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuaXNYZGZyYW1lTWVzc2FnZSh0KSl7dmFyIGU9dC5kYXRhLHI9ITA7aWYodGhpcy5pc1hkZnJhbWVFcnJvck1lc3NhZ2UodCkpcmV0dXJuIHZvaWQgVHQud2FybigiRXJyb3IgeGRmcmFtZSBzaW5nbGUgZG9tYWluOiAiK2NzSlNPTi5zdHJpbmdpZnkodC5kYXRhKSsiIGZyb20gIit0Lm9yaWdpbik7aWYoIUJ0LmlzUmF3RG9tYWluU3RhdGUoZSkpcmV0dXJuIHZvaWQgVHQud2FybigiVW5rbm93biBtZXNzYWdlIGZvcm1hdCBmcm9tIHhkZnJhbWUgc2luZ2xlIGRvbWFpbjogIitjc0pTT04uc3RyaW5naWZ5KHQuZGF0YSkrIiBmcm9tICIrdC5vcmlnaW4pO0J0LmlzVmFsaWQoZSl8fChUdC53YXJuKCJJbnZhbGlkIHhkZnJhbWUgc2luZ2xlIGRvbWFpbiBzdGF0ZTogIitjc0pTT04uc3RyaW5naWZ5KHQuZGF0YSkrIiBmcm9tICIrdC5vcmlnaW4pLHI9ITEpLHRoaXMueGRmcmFtZU9wZW5lci5zdG9wKCksdGhpcy5jYWxsYmFjayhVdC5mcm9tUmF3KGUpLHIpfX0sdC5wcm90b3R5cGUuaGFuZGxlVGltZW91dD1mdW5jdGlvbigpe1R0Lndhcm4oInhkZnJhbWUgc2luZ2xlIGRvbWFpbjogYWxsIG1lc3NhZ2VzIG5vdCByZWNlaXZlZCIpfSx0LnByb3RvdHlwZS5pc1hkZnJhbWVNZXNzYWdlPWZ1bmN0aW9uKHQpe3JldHVybiB0Lm9yaWdpbj09PXRoaXMueGRmcmFtZU9yaWdpbiYmeXQodC5kYXRhKX0sdC5wcm90b3R5cGUuaXNYZGZyYW1lRXJyb3JNZXNzYWdlPWZ1bmN0aW9uKHQpe3JldHVybiEhdC5kYXRhLmVycm9yfSx0LnByb3RvdHlwZS5nZXRYZGZyYW1lVXJsPWZ1bmN0aW9uKHQpe3ZhciBlPWNzQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbChSbywiLCIpO3JldHVybiB0KyIvdXhhL3hkZnJhbWUtc2luZ2xlLWRvbWFpbi0xLjEuMC5odG1sP3BpZD0iK3RoaXMuY29uZmlndXJhdGlvbi5wcm9qZWN0SWQrIiZjb29raWVOYW1lcz0iK2V9LHR9KCksVG89ZnVuY3Rpb24oKXtyZXR1cm4oVG89T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHI9MSxpPWFyZ3VtZW50cy5sZW5ndGg7cjxpO3IrKylmb3IodmFyIG4gaW4gZT1hcmd1bWVudHNbcl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbikmJih0W25dPWVbbl0pO3JldHVybiB0fSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxBbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMudmlzaXRvclNlcnZpY2U9ZSx0aGlzLnNlc3Npb25TZXJ2aWNlPXJ9cmV0dXJuIHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7aWYoIXRoaXMudmlzaXRvclNlcnZpY2UuZG9lc1Zpc2l0b3JFeGlzdCgpfHwhdGhpcy5zZXNzaW9uU2VydmljZS5kb2VzU2Vzc2lvbkV4aXN0KCkpcmV0dXJue307dmFyIHQ9dGhpcy52aXNpdG9yU2VydmljZS5nZXRWaXNpdG9yKCk7cmV0dXJuIFRvKFRvKFRvKHt9LHt2OiIxMC4xNC4yIn0pLHRoaXMuY29uZmlndXJhdGlvbi5nZXRSZXF1ZXN0UGFyYW1ldGVycygpKSx7dXU6dC5pZCxzbjoiIit0LnZpc2l0c0NvdW50LHBuOiIiK3RoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0U2Vzc2lvbigpLnBhZ2VOdW1iZXJ9KX0sdH0oKSxrbz1mdW5jdGlvbih0LGUscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLGkpO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKG49dFthXSkmJihzPShvPDM/bihzKTpvPjM/bihlLHIscyk6bihlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSxQbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgdD10aGlzO3RoaXMuaXNTdGFydGVkPSExLHRoaXMub25FdmVudENhbGxiYWNrcz1bXSx0aGlzLnVzZUNhcHR1cmU9ITEsdGhpcy5ldmVudEhhbmRsZXI9e2JvdW5kRWxlbWVudDp3aW5kb3csdHlwZToiZXJyb3IiLGxpc3RlbmVyOmZ1bmN0aW9uKGUpe3JldHVybiB0LmVycm9yTGlzdGVuZXIoZSl9fX1yZXR1cm4gdC5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5vbkV2ZW50Q2FsbGJhY2tzLHQpfSx0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuaXNTdGFydGVkfHwoWnQodGhpcy5ldmVudEhhbmRsZXIsdGhpcy51c2VDYXB0dXJlKSx0aGlzLmlzU3RhcnRlZD0hMCl9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLmlzU3RhcnRlZCYmKCR0KHRoaXMuZXZlbnRIYW5kbGVyLHRoaXMudXNlQ2FwdHVyZSksdGhpcy5pc1N0YXJ0ZWQ9ITEpfSx0LnByb3RvdHlwZS5lcnJvckxpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYnVpbGRKYXZhU2NyaXB0RXJyb3IodCk7Y3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMub25FdmVudENhbGxiYWNrcywoZnVuY3Rpb24odCl7cmV0dXJuIHQoZSl9KSl9LHQucHJvdG90eXBlLmRlY29yYXRlRXJyb3JNZXNzYWdlPWZ1bmN0aW9uKGUpe3JldHVybiBlLmxlbmd0aDw9dC5NQVhfRVJST1JfTUVTU0FHRV9MRU5HVEg/ZTpjc1N0cmluZy5wcm90b3R5cGUuc2xpY2UuY2FsbChlLDAsdC5NQVhfRVJST1JfTUVTU0FHRV9MRU5HVEgtdC50cnVuY2F0ZWRFcnJvck1lc3NhZ2VNYXJrZXIubGVuZ3RoKSt0LnRydW5jYXRlZEVycm9yTWVzc2FnZU1hcmtlcn0sdC5wcm90b3R5cGUuYnVpbGRKYXZhU2NyaXB0RXJyb3I9ZnVuY3Rpb24odCl7cmV0dXJue2Vycm9yVHlwZToianNFcnJvciIsbWVzc2FnZTp0aGlzLmRlY29yYXRlRXJyb3JNZXNzYWdlKHQubWVzc2FnZSksZmlsZW5hbWU6dC5maWxlbmFtZSxsaW5lbm86dC5saW5lbm8sY29sbm86dC5jb2xub319LHQudHJ1bmNhdGVkRXJyb3JNZXNzYWdlTWFya2VyPSLigKYiLHQuTUFYX0VSUk9SX01FU1NBR0VfTEVOR1RIPTEwMjQsa28oW0F0KCJFdmVudCBoYW5kbGVyIHR5cGU6IGVycm9yIildLHQucHJvdG90eXBlLCJlcnJvckxpc3RlbmVyIixudWxsKSx0fSgpLE9vPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuY29tbWFuZHNTZXJ2aWNlPXQsdGhpcy5wcm9qZWN0Q29uZmlndXJhdGlvbj1lfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNvbW1hbmRzU2VydmljZS5yZWdpc3RlcihbImRlYnVnRXZlbnRzIl0sKGZ1bmN0aW9uKGUpeyJib29sZWFuIj09dHlwZW9mIGUmJnQucHJvamVjdENvbmZpZ3VyYXRpb24udXBkYXRlRHluYW1pY0ZpZWxkcygiZW1pdERlYnVnRXZlbnRzIixlKX0pKX0sdH0oKTtmdW5jdGlvbiBfbyh0LGUscil7aWYoIXZ0KGUpJiYhdnQocikpcmV0dXJuIHQuaHJlZjt2YXIgaT12dChlKT9mdW5jdGlvbih0KXtyZXR1cm4gTih0LCIvIik/dDoiLyIrdH0oZSk6dC5wYXRobmFtZSxuPXZ0KHIpP2Z1bmN0aW9uKHQpe3JldHVybiBOKHQsIj8iKXx8IiI9PT10P3Q6Ij8iK3R9KHIpOnQuc2VhcmNoO3JldHVybiB0LnByb3RvY29sKyIvLyIrdC5ob3N0K2krbn12YXIgSW8sTm8sTW8sTG8sRG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5sb2NhdGlvbj10LHRoaXMucGlpPWV9cmV0dXJuIHQucHJvdG90eXBlLm92ZXJyaWRlUGF0aD1mdW5jdGlvbih0KXt2dCh0KSYmZHQodCkmJih0aGlzLnBhdGg9IiI9PT10P3ZvaWQgMDp0KX0sdC5wcm90b3R5cGUub3ZlcnJpZGVRdWVyeT1mdW5jdGlvbih0KXt2dCh0KSYmZHQodCkmJih0aGlzLnF1ZXJ5PXQpfSx0LnByb3RvdHlwZS5jb21wdXRlT3ZlcnJpZGRlblVybD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pc0N1cnJlbnRQYWdlVXJsKHQpP3RoaXMuZ2V0VXJsKCk6dH0sdC5wcm90b3R5cGUuaXNDdXJyZW50UGFnZVVybD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vcm1hbGl6ZVVybCh0aGlzLmxvY2F0aW9uLmhyZWYpO3JldHVybiB0aGlzLm5vcm1hbGl6ZVVybCh0KT09PWV9LHQucHJvdG90eXBlLm5vcm1hbGl6ZVVybD1mdW5jdGlvbih0KXtyZXR1cm4gTSh0LCIvIik/Y3NTdHJpbmcucHJvdG90eXBlLnNsaWNlLmNhbGwodCwwLC0xKTp0fSx0LnByb3RvdHlwZS5nZXRVcmw9ZnVuY3Rpb24oKXtyZXR1cm4gX28odGhpcy5sb2NhdGlvbix0aGlzLnBhdGgsdGhpcy5xdWVyeSl9LHQucHJvdG90eXBlLmdldFVybFByb3RvY29sPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYXRpb24ucHJvdG9jb2x9LHQucHJvdG90eXBlLmdldFJlcXVlc3RQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRVcmwoKTtyZXR1cm57dXJsOnRoaXMucGlpLmFub255bWl6ZSh0KX19LHR9KCkseG89ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKTooaS5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IGkpfX0oKSxWbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4geG8oZSx0KSxlLnByb3RvdHlwZS5lbWl0UGFnZUV2ZW50PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLHI9dGhpcy5saXN0ZW5lcnM7ZTxyLmxlbmd0aDtlKyspe3ZhciBpPXJbZV07aS5vblBhZ2VFdmVudCYmaS5vblBhZ2VFdmVudCh0KX19LGUucHJvdG90eXBlLmVtaXRFdmVudFRyaWdnZXJSZWNvcmRpbmc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9MCxpPXRoaXMubGlzdGVuZXJzO3I8aS5sZW5ndGg7cisrKXt2YXIgbj1pW3JdO24ub25FdmVudFRyaWdnZXJSZWNvcmRpbmcmJm4ub25FdmVudFRyaWdnZXJSZWNvcmRpbmcodCxlKX19LGUucHJvdG90eXBlLmVtaXRDdXN0b21FcnJvckV2ZW50PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLHI9dGhpcy5saXN0ZW5lcnM7ZTxyLmxlbmd0aDtlKyspe3ZhciBpPXJbZV07aS5vbkN1c3RvbUVycm9yRXZlbnQmJmkub25DdXN0b21FcnJvckV2ZW50KHQpfX0sZX0oTG4pLHFvPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksVW89ZnVuY3Rpb24odCxlLHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP2U6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZSh0LGUscixpKTtlbHNlIGZvcih2YXIgYT10Lmxlbmd0aC0xO2E+PTA7YS0tKShuPXRbYV0pJiYocz0obzwzP24ocyk6bz4zP24oZSxyLHMpOm4oZSxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIscyksc30sam89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIsaSxuLG8scyl7dmFyIGE9dC5jYWxsKHRoaXMsZSxyKXx8dGhpcztyZXR1cm4gYS5jb25maWd1cmF0aW9uPWUsYS5jb21wcmVzc29yPXIsYS5xdW90YVNlcnZpY2VSZXF1ZXN0PWksYS5saWZlQ3ljbGVFdmVudHNFbWl0dGVyPW4sYS5mb3JjZUluY2x1c2lvblNlcnZpY2U9byxhLnVybFNlcnZpY2U9cyxhfXJldHVybiBxbyhlLHQpLGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLmJpbmRRdW90YVNlcnZpY2VSZXF1ZXN0KCl9LGUucHJvdG90eXBlLnNhbml0aXplU2Vzc2lvblJlY29yZGluZ1N0YXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlY29yZGluZ1N0YXRlPT09THQuVEVNUE9SQVJJTFlfUkVDT1JERUQmJih0LnJlY29yZGluZ1N0YXRlPUx0Lk5PVF9SRUNPUkRFRCksdH0sZS5wcm90b3R5cGUuY29tcHV0ZUluaXRpYWxSZWNvcmRpbmdTdGF0ZT1mdW5jdGlvbih0KXtpZighdGhpcy5pc0NvbXByZXNzaW9uU3VwcG9ydGVkKCl8fCFDci5pc1N1cHBvcnRlZCgpKXJldHVybiBMdC5OT1RfUkVDT1JERUQ7dmFyIGU9W107cmV0dXJuIEQoKTx0aGlzLmNvbmZpZ3VyYXRpb24ucmVwbGF5UmVjb3JkaW5nUmF0ZXx8dGhpcy5mb3JjZUluY2x1c2lvblNlcnZpY2UuaXNGb3JjZU1hbGthUmVwbGF5UmVjb3JkZWQoKT9jc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSxwYXJzZUludChMdC5HTE9CQUxfU0FNUExJTkcsMTApKTp0aGlzLmNvbmZpZ3VyYXRpb24ubWFsa2FVcmxFbmFibGVkJiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSxwYXJzZUludChMdC5VUkxfU0FNUExJTkcsMTApKSx0aGlzLmNvbmZpZ3VyYXRpb24ubWFsa2FFdHJFbmFibGVkJiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoZSxwYXJzZUludChMdC5FVFJfU0FNUExJTkcsMTApKSxlLmxlbmd0aD4wPyh0aGlzLnNlbmRTYW1wbGluZ1JlcXVlc3QoZSx0KSxMdC5URU1QT1JBUklMWV9SRUNPUkRFRCk6THQuTk9UX1JFQ09SREVEfSxlLnByb3RvdHlwZS51cGRhdGVSZWNvcmRpbmdTdGF0ZT1mdW5jdGlvbih0KXtpZighdGhpcy5pc0NvbXByZXNzaW9uU3VwcG9ydGVkKCl8fCFDci5pc1N1cHBvcnRlZCgpKXJldHVybiBMdC5OT1RfUkVDT1JERUQ7aWYodC5yZWNvcmRpbmdTdGF0ZT09PUx0LkdMT0JBTF9TQU1QTElORylyZXR1cm4gTHQuR0xPQkFMX1NBTVBMSU5HO3ZhciBlPVtdO3JldHVybiB0aGlzLmNvbmZpZ3VyYXRpb24ubWFsa2FVcmxFbmFibGVkJiYoY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKGUscGFyc2VJbnQoTHQuVVJMX1NBTVBMSU5HLDEwKSksdGhpcy5jb25maWd1cmF0aW9uLm1hbGthRXRyRW5hYmxlZCYmY3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKGUscGFyc2VJbnQoTHQuRVRSX1NBTVBMSU5HLDEwKSkpLGUubGVuZ3RoPjA/KHRoaXMuc2VuZFNhbXBsaW5nUmVxdWVzdChlLHQpLEx0LlRFTVBPUkFSSUxZX1JFQ09SREVEKTpMdC5OT1RfUkVDT1JERUR9LGUucHJvdG90eXBlLnNlbmRTYW1wbGluZ1JlcXVlc3Q9ZnVuY3Rpb24odCxlKXt2YXIgcixpPXRoaXMsbj1udWxsPT09KHI9dGhpcy52aXNpdG9yU2VydmljZSl8fHZvaWQgMD09PXI/dm9pZCAwOnIuZ2V0VmlzaXRvcigpO3RoaXMucXVvdGFTZXJ2aWNlUmVxdWVzdC5zZXRSZXF1ZXN0UGF5bG9hZFByb3ZpZGVyKHtnZXRSZXF1ZXN0UGF5bG9hZDpmdW5jdGlvbigpe3JldHVybiBjc0pTT04uc3RyaW5naWZ5KHtyZWNvcmRpbmdUeXBlczp0LHVybDppLnVybFNlcnZpY2UuZ2V0VXJsKCkscHJvamVjdElkOmkuY29uZmlndXJhdGlvbi5wcm9qZWN0SWQsdXU6KG51bGw9PW4/dm9pZCAwOm4uaWQpfHwiIixzbjoobnVsbD09bj92b2lkIDA6bi52aXNpdHNDb3VudCl8fCIiLHBuOihudWxsPT1lP3ZvaWQgMDplLnBhZ2VOdW1iZXIpfHwiIn0pfX0pLHRoaXMucXVvdGFTZXJ2aWNlUmVxdWVzdC5zZW5kKCl9LGUucHJvdG90eXBlLmlzUmVwbGF5UmVjb3JkZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVjb3JkaW5nU3RhdGU9PT1MdC5URU1QT1JBUklMWV9SRUNPUkRFRHx8dC5yZWNvcmRpbmdTdGF0ZT09PUx0LkdMT0JBTF9TQU1QTElOR3x8dC5yZWNvcmRpbmdTdGF0ZT09PUx0LlVSTF9TQU1QTElOR3x8dC5ldHJTdGF0ZT09PUR0LkVUUl9PTn0sZS5wcm90b3R5cGUuYmluZFF1b3RhU2VydmljZVJlcXVlc3Q9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMucXVvdGFTZXJ2aWNlUmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKHtuYW1lOiJDb250ZW50LVR5cGUiLHZhbHVlOiJhcHBsaWNhdGlvbi9qc29uIn0pLHRoaXMucXVvdGFTZXJ2aWNlUmVxdWVzdC5vbkVycm9yKChmdW5jdGlvbigpe3JldHVybiB0LnF1b3RhU2VydmljZUVycm9ySGFuZGxlcigiTmV0d29ya0Vycm9yIil9KSksdGhpcy5xdW90YVNlcnZpY2VSZXF1ZXN0Lm9uVGltZW91dCgzZTMsKGZ1bmN0aW9uKCl7cmV0dXJuIHQucXVvdGFTZXJ2aWNlVGltZW91dEhhbmRsZXIoKX0pKSx0aGlzLnF1b3RhU2VydmljZVJlcXVlc3Qub25Mb2FkKChmdW5jdGlvbihlKXtyZXR1cm4gdC5xdW90YVNlcnZpY2VMb2FkSGFuZGxlcihlKX0pKX0sZS5wcm90b3R5cGUucXVvdGFTZXJ2aWNlRXJyb3JIYW5kbGVyPWZ1bmN0aW9uKHQpe3RoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlci5lbWl0UmVjb3JkaW5nU3RhdGVDaGFuZ2UoTHQuTk9UX1JFQ09SREVELER0LkVUUl9PRkYpLFR0Lndhcm4oIlF1b3RhIFNlcnZpY2U6IHJlcXVlc3QgZXJyb3IgLSAiK3QpfSxlLnByb3RvdHlwZS5xdW90YVNlcnZpY2VUaW1lb3V0SGFuZGxlcj1mdW5jdGlvbigpe3RoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlci5lbWl0UmVjb3JkaW5nU3RhdGVDaGFuZ2UoTHQuTk9UX1JFQ09SREVELER0LkVUUl9PRkYpLFR0Lndhcm4oIlF1b3RhIFNlcnZpY2U6IHJlcXVlc3QgdGltZW91dCIpfSxlLnByb3RvdHlwZS5xdW90YVNlcnZpY2VMb2FkSGFuZGxlcj1mdW5jdGlvbih0KXtpZigyMDA9PT10LnN0YXR1cyl7dmFyIGU7dHJ5e2U9Y3NKU09OLnBhcnNlKHQucmVzcG9uc2VUZXh0KX1jYXRjaChlKXtyZXR1cm4gdm9pZCB0aGlzLnF1b3RhU2VydmljZUVycm9ySGFuZGxlcigiVW5hYmxlIHRvIHBhcnNlIHRoZSBxdW90YSBzZXJ2aWNlIHJlc3BvbnNlOiAiK3QucmVzcG9uc2VUZXh0KX12YXIgcj1lLmFsbG93ZWRSZWNvcmRpbmdUeXBlcztpZihyKXt2YXIgaT1EdC5FVFJfT0ZGLG49THQuTk9UX1JFQ09SREVEO3RoaXMuaXNHbG9iYWxTYW1wbGluZ0FsbG93ZWQocik/bj1MdC5HTE9CQUxfU0FNUExJTkc6dGhpcy5pc1VybFNhbXBsaW5nQWxsb3dlZChyKSYmKG49THQuVVJMX1NBTVBMSU5HKSx0aGlzLmlzRXRyU2FtcGxpbmdBbGxvd2VkKHIpJiYoaT1EdC5FVFJfT04pLHRoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlci5lbWl0UmVjb3JkaW5nU3RhdGVDaGFuZ2UobixpKX1lbHNlIHRoaXMucXVvdGFTZXJ2aWNlRXJyb3JIYW5kbGVyKCJyZWNvcmRpbmcgdHlwZXMgbWlzc2luZyBmcm9tIHF1b3RhIHNlcnZpY2UgcmVzcG9uc2UiKX1lbHNlIHRoaXMucXVvdGFTZXJ2aWNlRXJyb3JIYW5kbGVyKCJTdGF0dXMgY29kZTogIit0LnN0YXR1cyl9LGUucHJvdG90eXBlLmlzR2xvYmFsU2FtcGxpbmdBbGxvd2VkPWZ1bmN0aW9uKHQpe3JldHVybiBjc0FycmF5LnByb3RvdHlwZS5zb21lLmNhbGwodCwoZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1wYXJzZUludChMdC5HTE9CQUxfU0FNUExJTkcsMTApfSkpfSxlLnByb3RvdHlwZS5pc1VybFNhbXBsaW5nQWxsb3dlZD1mdW5jdGlvbih0KXtyZXR1cm4gY3NBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB0PT09cGFyc2VJbnQoTHQuVVJMX1NBTVBMSU5HLDEwKX0pKX0sZS5wcm90b3R5cGUuaXNFdHJTYW1wbGluZ0FsbG93ZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbCh0LChmdW5jdGlvbih0KXtyZXR1cm4gdD09PXBhcnNlSW50KEx0LkVUUl9TQU1QTElORywxMCl9KSl9LGUucHJvdG90eXBlLnNldFZpc2l0b3JTZXJ2aWNlPWZ1bmN0aW9uKHQpe3RoaXMudmlzaXRvclNlcnZpY2U9dH0sZS5wcm90b3R5cGUuZ2V0RGlzYWJsZWRSZWNvcmRpbmdTdGF0ZT1mdW5jdGlvbigpe3JldHVybiBMdC5OT1RfUkVDT1JERUR9LFVvKFtBdCgiUXVvdGEgU2VydmljZTogb25lcnJvciIpXSxlLnByb3RvdHlwZSwicXVvdGFTZXJ2aWNlRXJyb3JIYW5kbGVyIixudWxsKSxVbyhbQXQoIlF1b3RhIFNlcnZpY2U6IG9udGltZW91dCIpXSxlLnByb3RvdHlwZSwicXVvdGFTZXJ2aWNlVGltZW91dEhhbmRsZXIiLG51bGwpLFVvKFtBdCgiUXVvdGEgU2VydmljZTogb25sb2FkIildLGUucHJvdG90eXBlLCJxdW90YVNlcnZpY2VMb2FkSGFuZGxlciIsbnVsbCksZX0oa24pLHpvPWZ1bmN0aW9uKCl7dGhpcy5pc1N0YXJ0ZWQ9ITF9LEJvPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksRm89ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTAscj1hcmd1bWVudHMubGVuZ3RoO2U8cjtlKyspdCs9YXJndW1lbnRzW2VdLmxlbmd0aDt2YXIgaT1BcnJheSh0KSxuPTA7Zm9yKGU9MDtlPHI7ZSsrKWZvcih2YXIgbz1hcmd1bWVudHNbZV0scz0wLGE9by5sZW5ndGg7czxhO3MrKyxuKyspaVtuXT1vW3NdO3JldHVybiBpfSxIbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscil7dmFyIGk9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLnhoclJlcXVlc3RUcmFja2VyPWUsaS5mZXRjaFJlcXVlc3RUcmFja2VyPXIsaS5vbkV2ZW50Q2FsbGJhY2tzPVtdLGkuZXhjbHVkZWREb21haW5zPVtdLGl9cmV0dXJuIEJvKGUsdCksZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy54aHJSZXF1ZXN0VHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbihlKXtyZXR1cm4gdC5hcGlFcnJvckxpc3RlbmVyKGUpfSkpLHRoaXMuZmV0Y2hSZXF1ZXN0VHJhY2tlci5vbkV2ZW50KChmdW5jdGlvbihlKXtyZXR1cm4gdC5hcGlFcnJvckxpc3RlbmVyKGUpfSkpfSxlLnByb3RvdHlwZS5vbkV2ZW50PWZ1bmN0aW9uKHQpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLm9uRXZlbnRDYWxsYmFja3MsdCl9LGUucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5pc1N0YXJ0ZWR8fCh0aGlzLnhoclJlcXVlc3RUcmFja2VyLnN0YXJ0KCksdGhpcy5mZXRjaFJlcXVlc3RUcmFja2VyLnN0YXJ0KCksdGhpcy5pc1N0YXJ0ZWQ9ITApfSxlLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5pc1N0YXJ0ZWQmJih0aGlzLnhoclJlcXVlc3RUcmFja2VyLnN0b3AoKSx0aGlzLmZldGNoUmVxdWVzdFRyYWNrZXIuc3RvcCgpLHRoaXMuaXNTdGFydGVkPSExKX0sZS5wcm90b3R5cGUuYXBpRXJyb3JMaXN0ZW5lcj1mdW5jdGlvbih0KXtpZih0LnVybCYmdC5zdGF0dXNDb2RlKXtpZih0LnVybD1pdCh0LnVybCksY3NBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKHRoaXMuZXhjbHVkZWREb21haW5zLChmdW5jdGlvbihlKXtyZXR1cm4tMSE9PWNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodC51cmwsZSl9KSkpcmV0dXJuO2lmKHQuc3RhdHVzQ29kZT49NDAwKXt2YXIgZT10aGlzLmJ1aWxkQXBpRXJyb3IodCk7Y3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMub25FdmVudENhbGxiYWNrcywoZnVuY3Rpb24odCl7cmV0dXJuIHQoZSl9KSl9fX0sZS5wcm90b3R5cGUuYnVpbGRBcGlFcnJvcj1mdW5jdGlvbih0KXtyZXR1cm57ZXJyb3JUeXBlOiJhcGlFcnJvciIsdXJsOnQudXJsLG1ldGhvZDp0Lm1ldGhvZCxyZXF1ZXN0VGltZTp0LnJlcXVlc3RUaW1lLHJlc3BvbnNlVGltZTp0LnJlc3BvbnNlVGltZSxzdGF0dXNDb2RlOnQuc3RhdHVzQ29kZSxsaWJyYXJ5OnQubGlicmFyeX19LGUucHJvdG90eXBlLmV4Y2x1ZGVEb21haW5zPWZ1bmN0aW9uKHQpe3ZhciBlOyhlPWNzQXJyYXkucHJvdG90eXBlLnB1c2gpLmNhbGwuYXBwbHkoZSxGbyhbdGhpcy5leGNsdWRlZERvbWFpbnNdLHQpKX0sZS50cnVuY2F0ZWRFcnJvck1lc3NhZ2VNYXJrZXI9IuKApiIsZX0oem8pLEdvPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksV289ZnVuY3Rpb24odCxlLHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP2U6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZSh0LGUscixpKTtlbHNlIGZvcih2YXIgYT10Lmxlbmd0aC0xO2E+PTA7YS0tKShuPXRbYV0pJiYocz0obzwzP24ocyk6bz4zP24oZSxyLHMpOm4oZSxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIscyksc30sWG89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgcj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIubW9ua2V5UGF0Y2hlcj1lLHIuY2FsbGJhY2tzPVtdLHIub3Blbkhvb2s9ZnVuY3Rpb24odCl7dmFyIGU9dC5jb250ZXh0LGk9dC5hcmdzLG49dC5jYWxsZXJOYW1lO3JldHVybiByLmludGVyY2VwdE9wZW4oZSxpLG4pfSxyfXJldHVybiBHbyhlLHQpLGUucHJvdG90eXBlLm9uRXZlbnQ9ZnVuY3Rpb24odCl7Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMuY2FsbGJhY2tzLHQpfSxlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuaXNTdGFydGVkfHwodGhpcy5jcmVhdGVJbnRlcmNlcHRvcnMoKSx0aGlzLm9wZW5JbnRlcmNlcHRvciYmdGhpcy5vcGVuSW50ZXJjZXB0b3IuYWN0aXZhdGUoKSx0aGlzLmlzU3RhcnRlZD0hMCl9LGUucHJvdG90eXBlLmNyZWF0ZUludGVyY2VwdG9ycz1mdW5jdGlvbigpe3RoaXMub3BlbkludGVyY2VwdG9yfHwodGhpcy5vcGVuSW50ZXJjZXB0b3I9dGhpcy5tb25rZXlQYXRjaGVyLmNyZWF0ZVN5bmNGdW5jdGlvbkludGVyY2VwdG9yKHt0YXJnZXQ6WE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLG1ldGhvZE5hbWU6Im9wZW4iLGhvb2s6dGhpcy5vcGVuSG9vayxvcHRpb25zOnt3aXRoQ2FsbGVyTmFtZTohMH19KSl9LGUucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLmlzU3RhcnRlZCYmKHRoaXMub3BlbkludGVyY2VwdG9yJiZ0aGlzLm9wZW5JbnRlcmNlcHRvci5kZWFjdGl2YXRlKCksdGhpcy5pc1N0YXJ0ZWQ9ITEpfSxlLnByb3RvdHlwZS5pbnRlcmNlcHRPcGVuPWZ1bmN0aW9uKHQsZSxyKXt2YXIgaT10aGlzO3QuYXBpQ2FsbD17dXJsOmVbMV0sbWV0aG9kOmVbMF0scmVxdWVzdFRpbWU6cS5ub3coKSxyZXNwb25zZVRpbWU6MCxzdGF0dXNDb2RlOjB9LHQuYXBpQ2FsbC5saWJyYXJ5PXIsdC5hZGRFdmVudExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIiwoZnVuY3Rpb24odCl7cmV0dXJuIGkucmVhZHlTdGF0ZUNoYW5nZUxpc3RlbmVyKHQudGFyZ2V0KX0pKX0sZS5wcm90b3R5cGUucmVhZHlTdGF0ZUNoYW5nZUxpc3RlbmVyPWZ1bmN0aW9uKHQpe3QucmVhZHlTdGF0ZT09PVhNTEh0dHBSZXF1ZXN0LkRPTkUmJih0LmFwaUNhbGwucmVzcG9uc2VUaW1lPXEubm93KCksdC5hcGlDYWxsLnN0YXR1c0NvZGU9dC5zdGF0dXMsY3NBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuY2FsbGJhY2tzLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LmFwaUNhbGwpfSkpKX0sV28oW0F0KCJYaHJSZXF1ZXN0VHJhY2tlci5pbnRlcmNlcHRPcGVuIildLGUucHJvdG90eXBlLCJpbnRlcmNlcHRPcGVuIixudWxsKSxXbyhbQXQoIlhoclJlcXVlc3RUcmFja2VyLnJlYWR5U3RhdGVDaGFuZ2VMaXN0ZW5lciIpXSxlLnByb3RvdHlwZSwicmVhZHlTdGF0ZUNoYW5nZUxpc3RlbmVyIixudWxsKSxlfSh6byksWW89ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKTooaS5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IGkpfX0oKSxKbz1mdW5jdGlvbih0LGUscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKHQsZSxyLGkpO2Vsc2UgZm9yKHZhciBhPXQubGVuZ3RoLTE7YT49MDthLS0pKG49dFthXSkmJihzPShvPDM/bihzKTpvPjM/bihlLHIscyk6bihlLHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixzKSxzfSxLbz1mdW5jdGlvbih0LGUscixpKXtyZXR1cm4gbmV3KHJ8fChyPVByb21pc2UpKSgoZnVuY3Rpb24obixvKXtmdW5jdGlvbiBzKHQpe3RyeXtjKGkubmV4dCh0KSl9Y2F0Y2godCl7byh0KX19ZnVuY3Rpb24gYSh0KXt0cnl7YyhpLnRocm93KHQpKX1jYXRjaCh0KXtvKHQpfX1mdW5jdGlvbiBjKHQpe3ZhciBlO3QuZG9uZT9uKHQudmFsdWUpOihlPXQudmFsdWUsZSBpbnN0YW5jZW9mIHI/ZTpuZXcgcigoZnVuY3Rpb24odCl7dChlKX0pKSkudGhlbihzLGEpfWMoKGk9aS5hcHBseSh0LGV8fFtdKSkubmV4dCgpKX0pKX0sUW89ZnVuY3Rpb24odCxlKXt2YXIgcixpLG4sbyxzPXtsYWJlbDowLHNlbnQ6ZnVuY3Rpb24oKXtpZigxJm5bMF0pdGhyb3cgblsxXTtyZXR1cm4gblsxXX0sdHJ5czpbXSxvcHM6W119O3JldHVybiBvPXtuZXh0OmEoMCksdGhyb3c6YSgxKSxyZXR1cm46YSgyKX0sImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmKG9bU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSksbztmdW5jdGlvbiBhKG8pe3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24obyl7aWYocil0aHJvdyBuZXcgVHlwZUVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuIik7Zm9yKDtzOyl0cnl7aWYocj0xLGkmJihuPTImb1swXT9pLnJldHVybjpvWzBdP2kudGhyb3d8fCgobj1pLnJldHVybikmJm4uY2FsbChpKSwwKTppLm5leHQpJiYhKG49bi5jYWxsKGksb1sxXSkpLmRvbmUpcmV0dXJuIG47c3dpdGNoKGk9MCxuJiYobz1bMiZvWzBdLG4udmFsdWVdKSxvWzBdKXtjYXNlIDA6Y2FzZSAxOm49bzticmVhaztjYXNlIDQ6cmV0dXJuIHMubGFiZWwrKyx7dmFsdWU6b1sxXSxkb25lOiExfTtjYXNlIDU6cy5sYWJlbCsrLGk9b1sxXSxvPVswXTtjb250aW51ZTtjYXNlIDc6bz1zLm9wcy5wb3AoKSxzLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKG49cy50cnlzLChuPW4ubGVuZ3RoPjAmJm5bbi5sZW5ndGgtMV0pfHw2IT09b1swXSYmMiE9PW9bMF0pKXtzPTA7Y29udGludWV9aWYoMz09PW9bMF0mJighbnx8b1sxXT5uWzBdJiZvWzFdPG5bM10pKXtzLmxhYmVsPW9bMV07YnJlYWt9aWYoNj09PW9bMF0mJnMubGFiZWw8blsxXSl7cy5sYWJlbD1uWzFdLG49bzticmVha31pZihuJiZzLmxhYmVsPG5bMl0pe3MubGFiZWw9blsyXSxzLm9wcy5wdXNoKG8pO2JyZWFrfW5bMl0mJnMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZX1vPWUuY2FsbCh0LHMpfWNhdGNoKHQpe289WzYsdF0saT0wfWZpbmFsbHl7cj1uPTB9aWYoNSZvWzBdKXRocm93IG9bMV07cmV0dXJue3ZhbHVlOm9bMF0/b1sxXTp2b2lkIDAsZG9uZTohMH19KFtvLGFdKX19fSxabz1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MCxyPWFyZ3VtZW50cy5sZW5ndGg7ZTxyO2UrKyl0Kz1hcmd1bWVudHNbZV0ubGVuZ3RoO3ZhciBpPUFycmF5KHQpLG49MDtmb3IoZT0wO2U8cjtlKyspZm9yKHZhciBvPWFyZ3VtZW50c1tlXSxzPTAsYT1vLmxlbmd0aDtzPGE7cysrLG4rKylpW25dPW9bc107cmV0dXJuIGl9LCRvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIHI9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLm1vbmtleVBhdGNoZXI9ZSxyLmNhbGxiYWNrcz1bXSxyLmhvb2s9ZnVuY3Rpb24odCl7dmFyIGU9dC5yZXN1bHQsaT10LmFyZ3Msbj10LmNhbGxlck5hbWU7ci5pbnRlcmNlcHRGZXRjaChlLGksbil9LHJ9cmV0dXJuIFlvKGUsdCksZS5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbih0KXtjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5jYWxsYmFja3MsdCl9LGUucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5jYW5UcmFja0ZldGNoKCkmJiF0aGlzLmlzU3RhcnRlZCYmKHRoaXMuY3JlYXRlRmV0Y2hJbnRlcmNlcHRvcigpLHRoaXMuZmV0Y2hJbnRlcmNlcHRvciYmdGhpcy5mZXRjaEludGVyY2VwdG9yLmFjdGl2YXRlKCksdGhpcy5pc1N0YXJ0ZWQ9ITApfSxlLnByb3RvdHlwZS5jYW5UcmFja0ZldGNoPWZ1bmN0aW9uKCl7cmV0dXJuISF3aW5kb3cuZmV0Y2gmJiJmdW5jdGlvbiI9PXR5cGVvZiB3aW5kb3cuZmV0Y2h9LGUucHJvdG90eXBlLnByZXBhcmVBcmdzPWZ1bmN0aW9uKHQsZSl7dmFyIHI9Wm8oZSk7cmV0dXJuIHJbMF0mJiJmdW5jdGlvbiI9PXR5cGVvZiByWzBdLmNsb25lJiYoclswXT1lWzBdLmNsb25lKCkpLHtjb250ZXh0OnQsYXJnczpyfX0sZS5wcm90b3R5cGUuY3JlYXRlRmV0Y2hJbnRlcmNlcHRvcj1mdW5jdGlvbigpe3RoaXMuZmV0Y2hJbnRlcmNlcHRvcnx8KHRoaXMuZmV0Y2hJbnRlcmNlcHRvcj10aGlzLm1vbmtleVBhdGNoZXIuY3JlYXRlQXN5bmNGdW5jdGlvbkludGVyY2VwdG9yKHt0YXJnZXQ6d2luZG93LG1ldGhvZE5hbWU6ImZldGNoIixob29rOnRoaXMuaG9vayxob29rUHJlcGFyZUFyZ3M6dGhpcy5wcmVwYXJlQXJncyxvcHRpb25zOnt3aXRoQ2FsbGVyTmFtZTohMH19KSl9LGUucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLmlzU3RhcnRlZCYmKHRoaXMuZmV0Y2hJbnRlcmNlcHRvciYmdGhpcy5mZXRjaEludGVyY2VwdG9yLmRlYWN0aXZhdGUoKSx0aGlzLmlzU3RhcnRlZD0hMSl9LGUucHJvdG90eXBlLmludGVyY2VwdEZldGNoPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gS28odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLG4sbyxzLGE7cmV0dXJuIFFvKHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuIGk9ZVswXSxuPWVbMV0sbz1uZXcgUmVxdWVzdChpLG4pLChzPXt1cmw6by51cmwsbWV0aG9kOm8ubWV0aG9kLHJlcXVlc3RUaW1lOnEubm93KCkscmVzcG9uc2VUaW1lOjAsc3RhdHVzQ29kZTowfSkubGlicmFyeT1yLFs0LHRdO2Nhc2UgMTpyZXR1cm4gYT1jLnNlbnQoKSxzLnJlc3BvbnNlVGltZT1xLm5vdygpLGEudHlwZS5pbmRleE9mKCJvcGFxdWUiKT4tMT9zLnN0YXR1c0NvZGU9LTE6cy5zdGF0dXNDb2RlPWEuc3RhdHVzLGNzQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLmNhbGxiYWNrcywoZnVuY3Rpb24odCl7cmV0dXJuIHQocyl9KSksWzJdfX0pKX0pKX0sSm8oW0F0KCJGZXRjaFJlcXVlc3RUcmFja2VyLmludGVyY2VwdEZldGNoIildLGUucHJvdG90eXBlLCJpbnRlcmNlcHRGZXRjaCIsbnVsbCksZX0oem8pO05vPUlvfHwoSW89e30pLE1vPVtNci5NT1VTRU1PVkUsTXIuTU9VU0VET1dOLE1yLk1PVVNFVVAsTXIuQ0xJQ0ssTXIuTU9VU0VPVkVSLE1yLk1PVVNFT1VULE1yLlRBUF0sTm8udHJhbnNmb3JtRXZlbnQ9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBmdW5jdGlvbih0LGUpe3JldHVybiBlLnRhcmdldCYmKGUudGFyZ2V0PSIiK3QrbnMrZS50YXJnZXQpLGUudGFyZ2V0SGVhdG1hcCYmKGUudGFyZ2V0SGVhdG1hcD0iIit0K25zK2UudGFyZ2V0SGVhdG1hcCksZS50YXJnZXRMaW5rJiYoZS50YXJnZXRMaW5rPSIiK3QrbnMrZS50YXJnZXRMaW5rKSxlfShlLGZ1bmN0aW9uKHQsZSl7aWYoaT1lLnR5cGUsLTEhPT1jc0FycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoTW8saSkpe3ZhciByPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ZS54JiYoZS54PU1hdGgucm91bmQoci5sZWZ0K2UueCt0ZS53aW5kb3dPZmZzZXRYKCkpKSxlLnkmJihlLnk9TWF0aC5yb3VuZChyLnRvcCtlLnkrdGUud2luZG93T2Zmc2V0WSgpKSl9dmFyIGk7cmV0dXJuIGV9KHQscikpfSwoTG98fChMbz17fSkpLnRyYW5zZm9ybUNvbW1hbmRzQmF0Y2g9ZnVuY3Rpb24odCxlKXtyZXR1cm57aWZyYW1lUGF0aDplLmlmcmFtZVBhdGg/IiIrdCtucytlLmlmcmFtZVBhdGg6dCxjb21tYW5kczplLmNvbW1hbmRzfX07dmFyIHRzLGVzPWZ1bmN0aW9uKCl7cmV0dXJuKGVzPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyPTEsaT1hcmd1bWVudHMubGVuZ3RoO3I8aTtyKyspZm9yKHZhciBuIGluIGU9YXJndW1lbnRzW3JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pJiYodFtuXT1lW25dKTtyZXR1cm4gdH0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07KHRzfHwodHM9e30pKS50cmFuc2Zvcm1FbWVyY2hhbmRpc2luZ01lc3NhZ2U9ZnVuY3Rpb24odCxlKXtpZigwPT09ZS5wcm9kdWN0cy5sZW5ndGgpcmV0dXJuIGU7dmFyIHI9Y3NBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZS5wcm9kdWN0cywoZnVuY3Rpb24oZSl7cmV0dXJuIGVzKGVzKHt9LGUpLHt0YXJnZXRQYXRoOiIiK3QrbnMrZS50YXJnZXRQYXRofSl9KSk7cmV0dXJuIGVzKGVzKHt9LGUpLHtwcm9kdWN0czpyfSl9O3ZhciBycyxpcz1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihpLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgaSl9fSgpLG5zPSJ8aWZyYW1lfCIsb3M9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIGlzKGUsdCksZS5wcm90b3R5cGUuZW1pdElmcmFtZUV2ZW50PWZ1bmN0aW9uKHQsZSxyLGkpe3N3aXRjaChyKXtjYXNlIGF0LkNoaWxkTG9nTWVzc2FnZTp0aGlzLmxvZ01lc3NhZ2UoaSk7YnJlYWs7Y2FzZSBhdC5BbmFseXNpc0V2ZW50OnZhciBuPUlvLnRyYW5zZm9ybUV2ZW50KHQsZSxpKTt0aGlzLmVtaXRJZnJhbWVBbmFseXNpc0V2ZW50KG4pO2JyZWFrO2Nhc2UgYXQuSmF2YXNjcmlwdEVycm9yOnRoaXMuZW1pdElmcmFtZUphdmFzY3JpcHRFcnJvcihpKTticmVhaztjYXNlIGF0LkFwaUVycm9yOnRoaXMuZW1pdElmcmFtZUFwaUVycm9yKGkpO2JyZWFrO2Nhc2UgYXQuRW1lcmNoYW5kaXNpbmdNZXNzYWdlOnZhciBvPXRzLnRyYW5zZm9ybUVtZXJjaGFuZGlzaW5nTWVzc2FnZShlLGkpO3RoaXMuZW1pdElmcmFtZUVtZXJjaGFuZGlzaW5nTWVzc2FnZShvKTticmVhaztjYXNlIGF0LkNvbW1hbmRzOnZhciBzPUxvLnRyYW5zZm9ybUNvbW1hbmRzQmF0Y2goZSxpKTt0aGlzLmVtaXRJZnJhbWVDb21tYW5kcyhzKTticmVhaztkZWZhdWx0OlR0LmVycm9yKCJQYXJlbnQgcmVjZWl2ZWQgdW5rbm93biBkYXRhIHR5cGUgZnJvbSBpZnJhbWUgOiAiK2NzSlNPTi5zdHJpbmdpZnkoaSkpfX0sZS5wcm90b3R5cGUubG9nTWVzc2FnZT1mdW5jdGlvbih0KXt2YXIgZT10Lm1lc3NhZ2Uscj10LmVycm9yQ29kZTtzd2l0Y2godC5sZXZlbCl7Y2FzZSB4LmRlYnVnOlR0LmRlYnVnKGUscik7YnJlYWs7Y2FzZSB4Lndhcm46VHQud2FybihlLHIpO2JyZWFrO2Nhc2UgeC5lcnJvcjpUdC5lcnJvcihlLHIpO2JyZWFrO2Nhc2UgeC5jcml0aWNhbDpUdC5jcml0aWNhbChlLHIpfX0sZS5wcm90b3R5cGUuZW1pdElmcmFtZUFuYWx5c2lzRXZlbnQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAscj10aGlzLmxpc3RlbmVycztlPHIubGVuZ3RoO2UrKyl7dmFyIGk9cltlXTtpLm9uSWZyYW1lQW5hbHlzaXNFdmVudCYmaS5vbklmcmFtZUFuYWx5c2lzRXZlbnQodCl9fSxlLnByb3RvdHlwZS5lbWl0SWZyYW1lSmF2YXNjcmlwdEVycm9yPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLHI9dGhpcy5saXN0ZW5lcnM7ZTxyLmxlbmd0aDtlKyspe3ZhciBpPXJbZV07aS5vbklmcmFtZUphdmFzY3JpcHRFcnJvciYmaS5vbklmcmFtZUphdmFzY3JpcHRFcnJvcih0KX19LGUucHJvdG90eXBlLmVtaXRJZnJhbWVBcGlFcnJvcj1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxyPXRoaXMubGlzdGVuZXJzO2U8ci5sZW5ndGg7ZSsrKXt2YXIgaT1yW2VdO2kub25JZnJhbWVBcGlFcnJvciYmaS5vbklmcmFtZUFwaUVycm9yKHQpfX0sZS5wcm90b3R5cGUuZW1pdElmcmFtZUVtZXJjaGFuZGlzaW5nTWVzc2FnZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxyPXRoaXMubGlzdGVuZXJzO2U8ci5sZW5ndGg7ZSsrKXt2YXIgaT1yW2VdO2kub25JZnJhbWVFbWVyY2hhbmRpc2luZ01lc3NhZ2UmJmkub25JZnJhbWVFbWVyY2hhbmRpc2luZ01lc3NhZ2UodCl9fSxlLnByb3RvdHlwZS5lbWl0SWZyYW1lQ29tbWFuZHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAscj10aGlzLmxpc3RlbmVycztlPHIubGVuZ3RoO2UrKyl7dmFyIGk9cltlXTtpLm9uSWZyYW1lQ29tbWFuZHMmJmkub25JZnJhbWVDb21tYW5kcyh0KX19LGV9KExuKTshZnVuY3Rpb24odCl7dC5DT01QUkVTU0lPTl9ESVNBQkxFRD0iY29tcHJlc3Npb25EaXNhYmxlZCJ9KHJzfHwocnM9e30pKTt2YXIgc3MsYXMsY3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuY29va2llU2VydmljZT10LHRoaXMuY29va2llRmxhZ3M9W119cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvb2tpZVNlcnZpY2UuZ2V0KCJfY3NfZGVidWciKTt0JiYodGhpcy5jb29raWVGbGFncz1jc1N0cmluZy5wcm90b3R5cGUuc3BsaXQuY2FsbCh0LCIuIikpfSx0LnByb3RvdHlwZS5pc0NvbXByZXNzaW9uRGlzYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4tMSE9PWNzQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLmNvb2tpZUZsYWdzLHJzLkNPTVBSRVNTSU9OX0RJU0FCTEVEKX0sdH0oKSx1cz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5vbkVycm9yPXQsdGhpcy53b3JrZXI9dGhpcy50cnlDcmVhdGVDb21wcmVzc2lvbldvcmtlcigpLHRoaXMuY2FsbGJhY2tzPXt9LHRoaXMuY2FsbGJhY2tJZD0wfXJldHVybiB0LnByb3RvdHlwZS5pc1N1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy53b3JrZXJ9LHQucHJvdG90eXBlLmNvbXByZXNzPWZ1bmN0aW9uKHQsZSxyKXtpZih0aGlzLmlzU3VwcG9ydGVkKCkpe3ZhciBpPXRoaXMuZ2V0TmV3Q2FsbGJhY2tJZCgpO3RoaXMuY2FsbGJhY2tzW2ldPXIsdGhpcy53b3JrZXIucG9zdE1lc3NhZ2UoW3QsZSxpXSl9fSx0LnByb3RvdHlwZS5jb21wcmVzc1N5bmM9ZnVuY3Rpb24odCl7cmV0dXJuIFJpLmNvbXByZXNzVG9CYXNlNjQodCl9LHQucHJvdG90eXBlLnRlcm1pbmF0ZVdvcmtlcj1mdW5jdGlvbigpe251bGwhPT10aGlzLndvcmtlciYmdGhpcy53b3JrZXIudGVybWluYXRlKCl9LHQucHJvdG90eXBlLnRyeUNyZWF0ZUNvbXByZXNzaW9uV29ya2VyPWZ1bmN0aW9uKCl7dHJ5e3ZhciB0PWNzU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlLmNhbGwodGhpcy5jb21wcmVzc2lvblNjcmlwdC50b1N0cmluZygpLCJHRVRfTFpfU1RSSU5HX1NPVVJDRSIsQ2kpO3JldHVybiB0aGlzLmNyZWF0ZVdvcmtlcigiKCIrdCsiKSgpOyIpfWNhdGNoKHQpe3JldHVybiBudWxsfX0sdC5wcm90b3R5cGUuY3JlYXRlV29ya2VyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMscj13aW5kb3cuY3NVUkx8fHdpbmRvdy53ZWJraXRVUkwsaT13aW5kb3cuQmxvYixuPXdpbmRvdy5Xb3JrZXI7aWYoIXJ8fCFpfHwhbilyZXR1cm4gbnVsbDt2YXIgbz1uZXcgaShbdF0se3R5cGU6ImFwcGxpY2F0aW9uL2phdmFzY3JpcHQifSkscz1uZXcgbihyLmNyZWF0ZU9iamVjdFVSTChvKSk7cmV0dXJuIHMub25lcnJvcj1mdW5jdGlvbih0KXtyZXR1cm4gZS5oYW5kbGVXb3JrZXJFcnJvcih0KX0scy5vbm1lc3NhZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIGUuaGFuZGxlV29ya2VyTWVzc2FnZSh0KX0sc30sdC5wcm90b3R5cGUuaGFuZGxlV29ya2VyRXJyb3I9ZnVuY3Rpb24odCl7dmFyIGU9IldvcmtlckVycm9yOiAiKyh0Lm1lc3NhZ2U/dC5tZXNzYWdlOiJObyBtZXNzYWdlIik7cmV0dXJuIHRoaXMub25FcnJvcihlKX0sdC5wcm90b3R5cGUuaGFuZGxlV29ya2VyTWVzc2FnZT1mdW5jdGlvbih0KXt2YXIgZT10LmRhdGEscj1lWzBdLGk9ZVsxXTt0aGlzLmNhbGxiYWNrc1tyXShpKSxkZWxldGUgdGhpcy5jYWxsYmFja3Nbcl19LHQucHJvdG90eXBlLmNvbXByZXNzaW9uU2NyaXB0PWZ1bmN0aW9uKCl7dmFyIHQ9R0VUX0xaX1NUUklOR19TT1VSQ0UoKTtzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLChmdW5jdGlvbihlKXt2YXIgcixpPWUuZGF0YSxuPWlbMF0sbz1pWzFdLHM9aVsyXTtzd2l0Y2gobil7Y2FzZSJiYXNlNjQiOnI9dC5jb21wcmVzc1RvQmFzZTY0KG8pO2JyZWFrO2Nhc2UiYnl0ZUFycmF5IjpyPXQuY29tcHJlc3NUb1VpbnQ4QXJyYXkobykuYnVmZmVyfXNlbGYucG9zdE1lc3NhZ2UoW3Mscl0pfSkpfSx0LnByb3RvdHlwZS5nZXROZXdDYWxsYmFja0lkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FsbGJhY2tJZCs9MX0sdH0oKSxwcz1mdW5jdGlvbigpe3JldHVybihwcz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGUscj0xLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbiBpbiBlPWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSYmKHRbbl09ZVtuXSk7cmV0dXJuIHR9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnBpaT10LHRoaXMudXJsTWFza2luZ1BhdHRlcm5zPVtdfXJldHVybiB0LnByb3RvdHlwZS5hZGRVcmxNYXNraW5nUGF0dGVybj1mdW5jdGlvbihlKXtmb3IodmFyIHI9W10saT0wLG49Y3NTdHJpbmcucHJvdG90eXBlLnNwbGl0LmNhbGwoZSwiLyIpO2k8bi5sZW5ndGg7aSsrKXt2YXIgbz1uW2ldO04obyx0LlJPVVRFX1BBUkFNRVRFUl9TVEFSVCk/Y3NBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHIse2tleTpvLHZhbHVlOiJDU19BTk9OWU1JWkVEXyIrY3NTdHJpbmcucHJvdG90eXBlLnRvVXBwZXJDYXNlLmNhbGwoY3NTdHJpbmcucHJvdG90eXBlLnNsaWNlLmNhbGwobywxKSl9KTpjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwocix7a2V5Om8sdmFsdWU6bnVsbH0pfWNzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLnVybE1hc2tpbmdQYXR0ZXJucyxyKX0sdC5wcm90b3R5cGUuYW5vbnltaXplPWZ1bmN0aW9uKHQpe3JldHVybiBwcyhwcyh7fSx0KSx7dXJsOnRoaXMuYW5vbnltaXplVXJsKHQudXJsKX0pfSx0LnByb3RvdHlwZS5hbm9ueW1pemVVcmw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWFza1VybCh0aGlzLnBpaS5hbm9ueW1pemUodGhpcy5yZW1vdmVRdWVyeVN0cmluZyh0KSkpfSx0LnByb3RvdHlwZS5tYXNrVXJsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1jc1N0cmluZy5wcm90b3R5cGUuc3BsaXQuY2FsbCh0LCIvIikscj0wLGk9dGhpcy51cmxNYXNraW5nUGF0dGVybnM7cjxpLmxlbmd0aDtyKyspe3ZhciBuPWlbcl0sbz10aGlzLmdldEFub255bWl6ZWRVcmwoZSxuKTtpZihudWxsIT09bylyZXR1cm4gb31yZXR1cm4gdH0sdC5wcm90b3R5cGUuZ2V0QW5vbnltaXplZFVybD1mdW5jdGlvbihlLHIpe2lmKGUubGVuZ3RoPHIubGVuZ3RoKXJldHVybiBudWxsO2Zvcih2YXIgaT0iIixuPTA7bjxlLmxlbmd0aDtuKz0xKWlmKG4+PXIubGVuZ3RoKWkrPWVbbl0rIi8iO2Vsc2UgaWYoTihyW25dLmtleSx0LlJPVVRFX1BBUkFNRVRFUl9TVEFSVCkpaSs9cltuXS52YWx1ZSsiLyI7ZWxzZXtpZihlW25dIT09cltuXS5rZXkpcmV0dXJuIG51bGw7aSs9ZVtuXSsiLyJ9cmV0dXJuIGNzU3RyaW5nLnByb3RvdHlwZS5zbGljZS5jYWxsKGksMCwtMSl9LHQucHJvdG90eXBlLnJlbW92ZVF1ZXJ5U3RyaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPWNzU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodCwiPyIpO3JldHVybi0xIT09ZT9jc1N0cmluZy5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LDAsZSsxKTp0fSx0LlJPVVRFX1BBUkFNRVRFUl9TVEFSVD0iOiIsdH0oKSxocz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLnBpaT10LHRoaXMudXJsU2VydmljZT1lfXJldHVybiB0LnByb3RvdHlwZS5hbm9ueW1pemU9ZnVuY3Rpb24odCl7cmV0dXJuIHZ0KHQubWVzc2FnZSkmJih0Lm1lc3NhZ2U9dGhpcy5waWkuYW5vbnltaXplKHQubWVzc2FnZSkpLHZ0KHQuZmlsZW5hbWUpJiYodC5maWxlbmFtZT10aGlzLnBpaS5hbm9ueW1pemUodGhpcy51cmxTZXJ2aWNlLmNvbXB1dGVPdmVycmlkZGVuVXJsKHQuZmlsZW5hbWUpKSksdH0sdH0oKSxmcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMuY29va2llQ2hlY2tlcj1lLHRoaXMucGFyZW50TG9nQ29udGV4dD1yfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztwZXJmb3JtYW5jZS5tYXJrKCJjcy1zdGFydC1ib290Iik7dmFyIGU9bmV3IHhuLHI9bmV3IEosaT1uZXcgWG4sbj1uZXcgUW4odGhpcy5jb25maWd1cmF0aW9uLGksciksbz1uZXcgRG8od2luZG93LmxvY2F0aW9uLHIpLHM9bmV3IGt0KHRoaXMuY29uZmlndXJhdGlvbixvLHRoaXMuY29va2llQ2hlY2tlcik7cy5pbml0KCk7dmFyIGE9bmV3IEduKHdpbmRvdy5sb2NhdGlvbixzKSxjPW5ldyBjcyhzKTtjLmluaXQoKTt2YXIgdT1uZXcgQ28odGhpcy5jb25maWd1cmF0aW9uLHMpO3UuaW5pdCgpO3ZhciBwLGw9bmV3IHVzKChmdW5jdGlvbih0KXtUdC53YXJuKHQpfSkpO2lmKHRoaXMuY29uZmlndXJhdGlvbi51c2VNYWxrYVBpcGVsaW5lKXt2YXIgaD1uZXcgUXQodGhpcy5jb25maWd1cmF0aW9uLmdldFF1b3RhU2VydmljZVVyaSgpLCJxdW90YSIpOyhwPW5ldyBqbyh0aGlzLmNvbmZpZ3VyYXRpb24sbCxoLGUsYSxvKSkuaW5pdCgpfWVsc2UgcD1uZXcgT24odGhpcy5jb25maWd1cmF0aW9uLGwsYSxvKTt2YXIgZj1uZXcgenQocyx1KSxkPW5ldyBfbihmLHMscCkseT1uZXcgQW4odGhpcy5jb25maWd1cmF0aW9uLGQscyx1KTt0aGlzLnBhcmVudExvZ0NvbnRleHQuc2V0Q29udGV4dCh5LGQpLHAuc2V0VmlzaXRvclNlcnZpY2UoeSk7dmFyIHY9bmV3IE5uKHRoaXMuY29uZmlndXJhdGlvbixzLHksZCksbT1uZXcgSHQod2luZG93LmxvY2F0aW9uLHMsdSksZz1uZXcgSG4obSksUz1uZXcgSW4odGhpcy5jb25maWd1cmF0aW9uLHksbSksRT1uZXcgVnQoeSxkLG0sdGhpcy5jb25maWd1cmF0aW9uLHMsdSksdz1uZXcgWXQsQz1uZXcgV3Qodyx3aW5kb3cubG9jYXRpb24pLFI9bmV3IGlvKHRoaXMuY29uZmlndXJhdGlvbixFLEMpLGI9bmV3IGJvKHRoaXMuY29uZmlndXJhdGlvbix3KTt1LnNldFN0YXRlcyhFLGIpO3ZhciBUPW5ldyBibih0aGlzLmNvbmZpZ3VyYXRpb24seSxtLFMsdixSLHUsYSk7cmV0dXJuIG4uaW5pdCgpLFQuY29tcHV0ZSgoZnVuY3Rpb24oaSl7dmFyIG49bmV3IG9zLGE9bmV3IGNvLHA9bmV3IG5vKGEsbik7cC5pbml0KCk7dmFyIGg9bmV3IFZvLGY9bmV3IHFuKHMpLHY9bmV3IEJuKHQuY29uZmlndXJhdGlvbixmLGUscyksbT1uZXcgem4oYSx2KSxTPW5ldyBabihlLHdpbmRvdy5sb2NhdGlvbixzKSxFPW5ldyB0byhhLFMpLHc9bmV3IE9vKGEsdC5jb25maWd1cmF0aW9uKSxDPW5ldyBBbyh0LmNvbmZpZ3VyYXRpb24seSxkKSxSPW5ldyBQbyxiPW5ldyBkcixUPW5ldyBYbyhiKSxBPW5ldyAkbyhiKSxrPW5ldyBIbyhULEEpLFA9bmV3IGxzKHIpLE89bmV3IGhzKHIsbyksXz1uZXcgRW8oUixPLGssUCx0LmNvbmZpZ3VyYXRpb24sQyxuLGEsaCk7KF8uaW5pdCgpLHBlcmZvcm1hbmNlLm1hcmsoImNzLXN0ZXAyLWJvb3QiKSxlLmFkZExpc3RlbmVycyhfKSxpKT8oZS5lbWl0SW5pdFRyYWNraW5nKCksbmV3IFJuKEMsbCx5LGQsZSxhLHAsdC5jb25maWd1cmF0aW9uLEUsUyxtLHYscixzLHUsbyx3LGgsUixPLGssUCxuLGMpLnN0YXJ0KCkpOm5ldyBGbihlLGEscCxFLFMsZyxtKS5zdGFydCgpfSkpLHBlcmZvcm1hbmNlLm1hcmsoImNzLWVuZC1ib290IikscGVyZm9ybWFuY2UubWVhc3VyZSgiY3MtbWVhc3VyZS1ib290IiwiY3Mtc3RhcnQtYm9vdCIsImNzLWVuZC1ib290Iikse0xaU3RyaW5nOlJpfX0sdH0oKTshZnVuY3Rpb24odCl7dmFyIGUscj17bG9hZEJ1bmRsZTpmdW5jdGlvbih0KXt2YXIgcz10LnNvdXJjZSxhPXQuZGF0YTtpZihuKGEpKXt2YXIgcD1mdW5jdGlvbigpe3ZhciBlLHIsbixvPWkoIntkb21haW59L3RhZy90YWcuYnVuZGxlLmpzP3Y9e3ZlcnNpb259IixhKTtlPW8scj1mdW5jdGlvbigpe3JldHVybiBzLnBvc3RNZXNzYWdlKCJjc0J1bmRsZUxvYWRlZCIsdC5vcmlnaW4pfSwobj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSkudHlwZT0idGV4dC9qYXZhc2NyaXB0IixuLmFzeW5jPSEwLG4uc3JjPWUsbi5vbmxvYWQ9cixuLmNoYXJzZXQ9InV0Zi04Iixkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKG4pfTtlPWEudG9rZW4sdShyLmxvYWRCdW5kbGUpLG8odC5vcmlnaW4pP3AoKTpmdW5jdGlvbih0LGUpe3ZhciByPWZ1bmN0aW9uKHQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO3JldHVybiBlLnNyYz10LGUuaWQ9ImNvbnRlbnQtc3F1YXJlLWJyaWRnZSIsZS5zZXRBdHRyaWJ1dGUoInN0eWxlIiwiZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB2aXNpYmlsaXR5OiBoaWRkZW4gIWltcG9ydGFudDsiKSxlfShpKCJ7ZG9tYWlufS90YWcvYnJpZGdlLmh0bWw/dj17dmVyc2lvbn0je3Rva2VufSIsdCkpLG49ZnVuY3Rpb24odCl7dC5zb3VyY2U9PT1yLmNvbnRlbnRXaW5kb3cmJiJUT0tFTl9WQUxJRCI9PT10LmRhdGEmJih1KG4pLHIucmVtb3ZlKCksZSgpKX07YyhuKSxkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHIpfShhLHApfX19O2Z1bmN0aW9uIGkodCxlKXtyZXR1cm4gY3NTdHJpbmcucHJvdG90eXBlLnJlcGxhY2UuY2FsbChjc1N0cmluZy5wcm90b3R5cGUucmVwbGFjZS5jYWxsKGNzU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlLmNhbGwodCwie3ZlcnNpb259IixlLnZlcnNpb24pLCJ7dG9rZW59IixlLnRva2VuKSwie2RvbWFpbn0iLGUuZG9tYWluKX1mdW5jdGlvbiBuKHQpe3JldHVybiB0JiYiY3NCdW5kbGVJbmplY3Rpb24iPT09dC50eXBlJiZvKHQuZG9tYWluKSYmYSh0LnZlcnNpb24pJiZzKHQudG9rZW4pfWZ1bmN0aW9uIG8odCl7cmV0dXJuL15odHRwcz86XC9cL1thLXpBLVowLTlcLlwtXStcLihjb250ZW50LXNxdWFyZVwuZnJ8Y29udGVudHNxdWFyZVwuY29tKSQvLnRlc3QodCl9ZnVuY3Rpb24gcyh0KXtyZXR1cm4vXlthLXpBLVowLTldKyQvLnRlc3QodCl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4vXlthLXpBLVowLTlcLl0rJC8udGVzdCh0KX1mdW5jdGlvbiBjKHQpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIix0LCExKX1mdW5jdGlvbiB1KHQpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIix0LCExKX10LmdldFRva2VuPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LHQuaXNBdXRob3JpemVkSW5jb21pbmdNZXNzYWdlPW4sdC5pc0F1dGhvcml6ZWREb21haW49byx0LmlzQXV0aG9yaXplZFRva2VuPXMsdC5pc0F1dGhvcml6ZWRUYWdWZXJzaW9uPWEsdC5pc0FjdGl2YWJsZT1mdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5vcGVuZXJ8fHdpbmRvdy5wYXJlbnQ7cmV0dXJuIHdpbmRvdyE9PXQmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyfSx0LndhaXRGb3JCdW5kbGVJbmplY3Rpb249ZnVuY3Rpb24oKXtjKHIubG9hZEJ1bmRsZSl9LHQubGlzdGVuPWMsdC5yZW1vdmVMaXN0ZW5lcj11fShzc3x8KHNzPXt9KSksZnVuY3Rpb24odCl7dmFyIGUscj13aW5kb3cub3BlbmVyfHx3aW5kb3cucGFyZW50LGk9Wy9eaHR0cHM6XC9cL2FwcFwuY29udGVudHNxdWFyZVwuY29tJC8sL15odHRwczpcL1wvZGV2LWFwcFwuY29udGVudHNxdWFyZVwuY29tJC8sL15odHRwczpcL1wvc3RhZ2luZy1hcHBcLmNvbnRlbnRzcXVhcmVcLmNvbSQvLC9eaHR0cHM6XC9cLy4qXC50ZXN0XC5jb250ZW50c3F1YXJlXC5jb20kL10sbj17cGluZzpmdW5jdGlvbih0KXsicGluZyI9PT10LmRhdGEmJm8odC5vcmlnaW4pJiYoZT10Lm9yaWdpbixjKG4ucGluZyksYShuLmluc2VydE1lc3NhZ2VTY3JpcHQpLHMoInV0aWxzLmpzIisiP2NiPSIrKG5ldyBjc0RhdGUpLmdldFRpbWUoKSkpfSxpbnNlcnRNZXNzYWdlU2NyaXB0OnUoKGZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YTsic3RyaW5nIj09dHlwZW9mIGUmJiJwaW5nIiE9PWUmJihjKG4uaW5zZXJ0TWVzc2FnZVNjcmlwdCkscyhlKSl9KSl9O2Z1bmN0aW9uIG8odCl7cmV0dXJuIGNzQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChpLChmdW5jdGlvbihlKXtyZXR1cm4gZS50ZXN0KHQpfSkpfWZ1bmN0aW9uIHModCxyKXt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtpLnR5cGU9InRleHQvamF2YXNjcmlwdCIsaS5hc3luYz0hMDt2YXIgbj1jc1N0cmluZy5wcm90b3R5cGUucmVwbGFjZS5jYWxsKGUsL15odHRwcz86LywiIik7aS5zcmM9bisiL3RhZy8iK3QsaS5vbmxvYWQ9cixpLmNoYXJzZXQ9InV0Zi04Iixkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKGkpfWZ1bmN0aW9uIGEodCl7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHQsITEpfWZ1bmN0aW9uIGModCl7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHQsITEpfWZ1bmN0aW9uIHUodCl7cmV0dXJuIGZ1bmN0aW9uKHIpe3Iub3JpZ2luPT09ZSYmdChyKX19dC5nZXRUb2tlbj1mdW5jdGlvbigpe3JldHVybiBzcy5nZXRUb2tlbigpfSx0LmlzQWN0aXZhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdyE9PXImJndpbmRvdy5hZGRFdmVudExpc3RlbmVyfSx0LmlzQXV0aG9yaXplZERvbWFpbj1vLHQud2FpdEZvckNvbm5lY3Rpb249ZnVuY3Rpb24oKXthKG4ucGluZyksc3Mud2FpdEZvckJ1bmRsZUluamVjdGlvbigpfSx0Lmxpc3Rlbj1hLHQucmVtb3ZlTGlzdGVuZXI9Yyx0LnNlY3VyZUxpc3RlbmVyPXUsdC5wb3N0PWZ1bmN0aW9uKHQpe2UmJnIucG9zdE1lc3NhZ2UodCxlKX19KGFzfHwoYXM9e30pKTt2YXIgZHM9d2luZG93LkNTRnJhbWVDb21tdW5pY2F0aW9ufHxhcyx5cz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2U9dH1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnJlZ2lzdGVyKFZyKSx0aGlzLmlmcmFtZUNvbW1hbmRzU2VuZGVyU2VydmljZS5yZWdpc3RlcihXaSksdGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2UucmVnaXN0ZXIocWkpLHRoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnJlZ2lzdGVyKFVpKSx0aGlzLmlmcmFtZUNvbW1hbmRzU2VuZGVyU2VydmljZS5yZWdpc3RlcihWaSksdGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2UucmVnaXN0ZXIoSHIpLHRoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnJlZ2lzdGVyKEdyKSx0aGlzLmlmcmFtZUNvbW1hbmRzU2VuZGVyU2VydmljZS5yZWdpc3RlcihXciksdGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2UucmVnaXN0ZXIoWHIpLHRoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnJlZ2lzdGVyKEtpKSx0aGlzLmlmcmFtZUNvbW1hbmRzU2VuZGVyU2VydmljZS5yZWdpc3RlcihRaSksdGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2UucmVnaXN0ZXIoJG4pLHRoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnJlZ2lzdGVyKGZuKSx0aGlzLmlmcmFtZUNvbW1hbmRzU2VuZGVyU2VydmljZS5yZWdpc3RlcihkbiksdGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2UucmVnaXN0ZXIoVW4pLHRoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnJlZ2lzdGVyKGpuKSx0aGlzLmlmcmFtZUNvbW1hbmRzU2VuZGVyU2VydmljZS5yZWdpc3RlcihTbyksdGhpcy5pZnJhbWVDb21tYW5kc1NlbmRlclNlcnZpY2UucmVnaXN0ZXIoZ28pfSx0LnByb3RvdHlwZS5vblN0YXJ0VHJhY2tpbmc9ZnVuY3Rpb24oKXt0aGlzLmlmcmFtZUNvbW1hbmRzU2VuZGVyU2VydmljZS5zdGFydCgpfSx0LnByb3RvdHlwZS5vbk9wdG91dD1mdW5jdGlvbigpe3RoaXMuaWZyYW1lQ29tbWFuZHNTZW5kZXJTZXJ2aWNlLnN0b3AoKX0sdH0oKSx2cz1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUscil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KShlLHIpfTtyZXR1cm4gZnVuY3Rpb24oZSxyKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxyKSxlLnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihpLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgaSl9fSgpLG1zPWZ1bmN0aW9uKHQsZSxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz9lOm51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUodCxlLHIsaSk7ZWxzZSBmb3IodmFyIGE9dC5sZW5ndGgtMTthPj0wO2EtLSkobj10W2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKGUscixzKTpuKGUscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHMpLHN9LGdzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxyKXt2YXIgaT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkuY29tbWFuZHNTZXJ2aWNlPWUsaS5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2U9cixpLmJhdGNoPVtdLGl9cmV0dXJuIHZzKGUsdCksZS5wcm90b3R5cGUub25TdGFydD1mdW5jdGlvbigpe3RoaXMuY29tbWFuZHNCYXRjaFJlYWR5KCl9LGUucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbigpe3RoaXMuYmF0Y2g9W119LGUucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLHI9ZnVuY3Rpb24odCl7aS5jb21tYW5kc1NlcnZpY2UucmVnaXN0ZXIoW3RdLChmdW5jdGlvbigpe2Zvcih2YXIgcj1bXSxpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKylyW2ldPWFyZ3VtZW50c1tpXTtyZXR1cm4gZS5zZW5kKHQscil9KSl9LGk9dGhpcyxuPTAsbz10O248by5sZW5ndGg7bisrKXtyKG9bbl0pfX0sZS5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbih0LGUpe2NzQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLmJhdGNoLHtuYW1lOnQscGFyYW1zOmV9KSx0aGlzLmlzU3RhcnRlZCYmdGhpcy5jb21tYW5kc0JhdGNoUmVhZHkoKX0sZS5wcm90b3R5cGUuY29tbWFuZHNCYXRjaFJlYWR5PWZ1bmN0aW9uKCl7aWYoMCE9PXRoaXMuYmF0Y2gubGVuZ3RoKXt2YXIgdD17Y29tbWFuZHM6dGhpcy5iYXRjaH07dGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2Uuc2VuZFRvUGFyZW50KGF0LkNvbW1hbmRzLHQpLHRoaXMuYmF0Y2g9W119fSxtcyhbQXQoIkNvbW1hbmRzLmlmcmFtZS5jb21tYW5kc0JhdGNoLnNlbmQiKV0sZS5wcm90b3R5cGUsInNlbmQiLG51bGwpLG1zKFtMcigpLEF0KCJzZW5kIGlmcmFtZSBjb21tYW5kcyBiYXRjaCIpXSxlLnByb3RvdHlwZSwiY29tbWFuZHNCYXRjaFJlYWR5IixudWxsKSxlfSh1ZSksU3M9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLHIpe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkoZSxyKX07cmV0dXJuIGZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsciksZS5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKTooaS5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IGkpfX0oKSxFcz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscil7dmFyIGk9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLmNvbmZpZ3VyYXRpb249ZSxpLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXI9cixpLmlkPS0xLGkucGFyZW50T3JpZ2luPSIiLGkubWF4TWVzc2FnZXNCdWZmZXI9MjUsaS5tZXNzYWdlQnVmZmVyPVtdLGkubWVzc2FnZUhhbmRsZXI9e2JvdW5kRWxlbWVudDp3aW5kb3csdHlwZToibWVzc2FnZSIsbGlzdGVuZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGkubWVzc2FnZXNMaXN0ZW5lcih0KX19LGl9cmV0dXJuIFNzKGUsdCksZS5wcm90b3R5cGUub25TdGFydD1mdW5jdGlvbigpe1p0KHRoaXMubWVzc2FnZUhhbmRsZXIsITEpLHRoaXMuc2VuZERpc2NvdmVyeSgpfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXskdCh0aGlzLm1lc3NhZ2VIYW5kbGVyLCExKX0sZS5wcm90b3R5cGUuc2VuZFRvUGFyZW50PWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5idWlsZENoaWxkQmFzZU1lc3NhZ2UodCxlKTt0aGlzLnNlbmRNZXNzYWdlKHIpfSxlLnByb3RvdHlwZS5zZW5kRGlzY292ZXJ5PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5idWlsZENoaWxkQmFzZU1lc3NhZ2UoYXQuRGlzY292ZXJ5KTtjdC5zZW5kTWVzc2FnZSh3aW5kb3cucGFyZW50LCIqIix0KX0sZS5wcm90b3R5cGUuYnVpbGRDaGlsZEJhc2VNZXNzYWdlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9Y3QuYnVpbGRCYXNlTWVzc2FnZSh0LHN0LkNoaWxkLHRoaXMuY29uZmlndXJhdGlvbi5wcm9qZWN0SWQsdGhpcy5pZCk7cmV0dXJuIGUmJihyLmNvbnRlbnQ9ZSkscn0sZS5wcm90b3R5cGUuc2VuZE1lc3NhZ2U9ZnVuY3Rpb24odCl7dm9pZCAwIT09dC5pZD9jdC5zZW5kTWVzc2FnZSh3aW5kb3cucGFyZW50LHRoaXMucGFyZW50T3JpZ2luLHQpOnRoaXMuYWRkTWVzc2FnZVRvQnVmZmVyKHQpfSxlLnByb3RvdHlwZS5tZXNzYWdlc0xpc3RlbmVyPWZ1bmN0aW9uKHQpe2lmKGN0LmlzTWVzc2FnZVZhbGlkKHQsc3QuUGFyZW50LHRoaXMuY29uZmlndXJhdGlvbi5wcm9qZWN0SWQsdGhpcy5jb25maWd1cmF0aW9uLmhvc3RuYW1lcykpc3dpdGNoKHQuZGF0YS50eXBlKXtjYXNlIGF0LkRpc2NvdmVyeTppZighZnQodC5kYXRhLmlkKXx8dC5kYXRhLmlkPDApcmV0dXJuIHZvaWQgVHQud2FybigiSWZyYW1lIGNoaWxkICgiK3RoaXMuaWQrIikgcmVjZWl2ZWQgZGlzY292ZXJ5IHdpdGhvdXQgdmFsaWQgaWQgZnJvbSBwYXJlbnQgKCIrdC5vcmlnaW4rIikgOiAiK2NzSlNPTi5zdHJpbmdpZnkodC5kYXRhKSk7dGhpcy5pZD10LmRhdGEuaWQsdGhpcy5wYXJlbnRPcmlnaW49dC5vcmlnaW4sdGhpcy5zZW5kQWxsQnVmZmVyZWRNZXNzYWdlcygpO2JyZWFrO2Nhc2UgYXQuU3RvcDp0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdE9wdG91dCgpO2JyZWFrO2RlZmF1bHQ6VHQud2FybigiSWZyYW1lIGNoaWxkICgiK3RoaXMuaWQrIikgcmVjZWl2ZWQgdW5rbm93biBkYXRhIHR5cGUgZnJvbSBwYXJlbnQgKCIrdC5vcmlnaW4rIikgOiAiK2NzSlNPTi5zdHJpbmdpZnkodC5kYXRhKSl9fSxlLnByb3RvdHlwZS5hZGRNZXNzYWdlVG9CdWZmZXI9ZnVuY3Rpb24odCl7dGhpcy5tZXNzYWdlQnVmZmVyLmxlbmd0aDx0aGlzLm1heE1lc3NhZ2VzQnVmZmVyJiZjc0FycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcy5tZXNzYWdlQnVmZmVyLHQpfSxlLnByb3RvdHlwZS5zZW5kQWxsQnVmZmVyZWRNZXNzYWdlcz1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5tZXNzYWdlQnVmZmVyO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgcj1lW3RdO3IuaWQ9dGhpcy5pZCxjdC5zZW5kTWVzc2FnZSh3aW5kb3cucGFyZW50LHRoaXMucGFyZW50T3JpZ2luLHIpfXRoaXMubWVzc2FnZUJ1ZmZlcj1bXX0sZX0odWUpLHdzPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksQ3M9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIpe3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5hcGlFcnJvcnNUcmFja2VyPWUsaS5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2U9cixpfXJldHVybiB3cyhlLHQpLGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuYXBpRXJyb3JzVHJhY2tlci5pbml0KCksdGhpcy5hcGlFcnJvcnNUcmFja2VyLm9uRXZlbnQoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2Nlc3NFdmVudChlKX0pKX0sZS5wcm90b3R5cGUub25TdGFydD1mdW5jdGlvbigpe3RoaXMuYXBpRXJyb3JzVHJhY2tlci5zdGFydCgpfSxlLnByb3RvdHlwZS5vblN0b3A9ZnVuY3Rpb24oKXt0aGlzLmFwaUVycm9yc1RyYWNrZXIuc3RvcCgpfSxlLnByb3RvdHlwZS5wcm9jZXNzRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5pc1N0YXJ0ZWQmJnRoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlLnNlbmRUb1BhcmVudChhdC5BcGlFcnJvcix0KX0sZX0odWUpLFJzPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksYnM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIpe3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlcj1lLGkuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlPXIsaX1yZXR1cm4gUnMoZSx0KSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmphdmFTY3JpcHRFcnJvcnNUcmFja2VyLm9uRXZlbnQoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2Nlc3NFdmVudChlKX0pKX0sZS5wcm90b3R5cGUub25TdGFydD1mdW5jdGlvbigpe3RoaXMuamF2YVNjcmlwdEVycm9yc1RyYWNrZXIuc3RhcnQoKX0sZS5wcm90b3R5cGUub25TdG9wPWZ1bmN0aW9uKCl7dGhpcy5qYXZhU2NyaXB0RXJyb3JzVHJhY2tlci5zdG9wKCl9LGUucHJvdG90eXBlLnByb2Nlc3NFdmVudD1mdW5jdGlvbih0KXt0aGlzLmlzU3RhcnRlZCYmdGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2Uuc2VuZFRvUGFyZW50KGF0LkphdmFzY3JpcHRFcnJvcix0KX0sZX0odWUpLFRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixpKXt0aGlzLmphdmFTY3JpcHRFcnJvcnNUcmFja2VyPXQsdGhpcy5hcGlFcnJvcnNUcmFja2VyPWUsdGhpcy5jb25maWd1cmF0aW9uPXIsdGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2U9aX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuaWZyYW1lSmF2YVNjcmlwdEVycm9yc1NlcnZpY2U9bmV3IGJzKHRoaXMuamF2YVNjcmlwdEVycm9yc1RyYWNrZXIsdGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2UpLHRoaXMuaWZyYW1lSmF2YVNjcmlwdEVycm9yc1NlcnZpY2UuaW5pdCgpLHRoaXMuYXBpRXJyb3JzVHJhY2tlci5leGNsdWRlRG9tYWlucyhbb28uQ09OVEVOVFNRVUFSRSxvby5DTElDS1RBTEUsb28uRkFLRV9UUkFDS0VSXSksdGhpcy5pZnJhbWVBcGlFcnJvcnNTZXJ2aWNlPW5ldyBDcyh0aGlzLmFwaUVycm9yc1RyYWNrZXIsdGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2UpLHRoaXMuaWZyYW1lQXBpRXJyb3JzU2VydmljZS5pbml0KCl9LHQucHJvdG90eXBlLm9uU3RhcnRUcmFja2luZz1mdW5jdGlvbigpe3RoaXMuY29uZmlndXJhdGlvbi5qc0Vycm9yc0VuYWJsZWQmJnRoaXMuaWZyYW1lSmF2YVNjcmlwdEVycm9yc1NlcnZpY2Uuc3RhcnQoKSx0aGlzLmNvbmZpZ3VyYXRpb24uYXBpRXJyb3JzRW5hYmxlZCYmdGhpcy5pZnJhbWVBcGlFcnJvcnNTZXJ2aWNlLnN0YXJ0KCl9LHQucHJvdG90eXBlLm9uT3B0b3V0PWZ1bmN0aW9uKCl7dGhpcy5pZnJhbWVKYXZhU2NyaXB0RXJyb3JzU2VydmljZS5zdG9wKCksdGhpcy5pZnJhbWVBcGlFcnJvcnNTZXJ2aWNlLnN0b3AoKX0sdH0oKSxBcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2U9dH1yZXR1cm4gdC5wcm90b3R5cGUub25TdGFydFRyYWNraW5nPWZ1bmN0aW9uKCl7dGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2Uuc3RhcnQoKX0sdC5wcm90b3R5cGUub25PcHRvdXQ9ZnVuY3Rpb24oKXt0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZS5zdG9wKCl9LHR9KCksa3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt0aGlzLmlmcmFtZVBhcmVudFRvQ2hpbGRyZW5Db21tdW5pY2F0aW9uU2VydmljZT10LHRoaXMuaWZyYW1lRXZlbnRzRW1pdHRlcj1lLHRoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlPXJ9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuaWZyYW1lUGFyZW50VG9DaGlsZHJlbkNvbW11bmljYXRpb25TZXJ2aWNlLm9uQ2hpbGRNZXNzYWdlKChmdW5jdGlvbihlLHIsaSxuKXtyZXR1cm4gdC5pZnJhbWVFdmVudHNFbWl0dGVyLmVtaXRJZnJhbWVFdmVudChlLHIsaSxuKX0pKX0sdC5wcm90b3R5cGUub25JZnJhbWVBbmFseXNpc0V2ZW50PWZ1bmN0aW9uKHQpe3RoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlLnNlbmRUb1BhcmVudChhdC5BbmFseXNpc0V2ZW50LHQpfSx0LnByb3RvdHlwZS5vbklmcmFtZUphdmFzY3JpcHRFcnJvcj1mdW5jdGlvbih0KXt0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZS5zZW5kVG9QYXJlbnQoYXQuSmF2YXNjcmlwdEVycm9yLHQpfSx0LnByb3RvdHlwZS5vbklmcmFtZUFwaUVycm9yPWZ1bmN0aW9uKHQpe3RoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlLnNlbmRUb1BhcmVudChhdC5BcGlFcnJvcix0KX0sdC5wcm90b3R5cGUub25JZnJhbWVFbWVyY2hhbmRpc2luZ01lc3NhZ2U9ZnVuY3Rpb24odCl7dGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2Uuc2VuZFRvUGFyZW50KGF0LkVtZXJjaGFuZGlzaW5nTWVzc2FnZSx0KX0sdC5wcm90b3R5cGUub25JZnJhbWVDb21tYW5kcz1mdW5jdGlvbih0KXt0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZS5zZW5kVG9QYXJlbnQoYXQuQ29tbWFuZHMsdCl9LHQucHJvdG90eXBlLm9uU3RhcnRUcmFja2luZz1mdW5jdGlvbigpe3RoaXMuaWZyYW1lUGFyZW50VG9DaGlsZHJlbkNvbW11bmljYXRpb25TZXJ2aWNlLnN0YXJ0KCl9LHQucHJvdG90eXBlLm9uT3B0b3V0PWZ1bmN0aW9uKCl7dGhpcy5pZnJhbWVQYXJlbnRUb0NoaWxkcmVuQ29tbXVuaWNhdGlvblNlcnZpY2Uuc3RvcCgpfSx0fSgpLFBzPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4odD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKGUscil9O3JldHVybiBmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KGkucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBpKX19KCksT3M9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLHIsaSl7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLmFuYWx5c2lzRXZlbnRzVHJhY2tlcj1lLG4uZ2VzdHVyZVRyYWNrZXI9cixuLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZT1pLG59cmV0dXJuIFBzKGUsdCksZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5hbmFseXNpc0V2ZW50c1RyYWNrZXIub25FdmVudCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvY2Vzc0V2ZW50KGUpfSkpLHRoaXMuZ2VzdHVyZVRyYWNrZXIub25FdmVudCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvY2Vzc0V2ZW50KGUpfSkpfSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5hbmFseXNpc0V2ZW50c1RyYWNrZXIuc3RhcnQoKSx0aGlzLmdlc3R1cmVUcmFja2VyLnN0YXJ0KCl9LGUucHJvdG90eXBlLm9uU3RvcD1mdW5jdGlvbigpe3RoaXMuYW5hbHlzaXNFdmVudHNUcmFja2VyLnN0b3AoKSx0aGlzLmdlc3R1cmVUcmFja2VyLnN0b3AoKX0sZS5wcm90b3R5cGUucHJvY2Vzc0V2ZW50PWZ1bmN0aW9uKHQpe3RoaXMuaXNTdGFydGVkJiZ0LnR5cGUhPT1Nci5SRVNJWkUmJnRoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlLnNlbmRUb1BhcmVudChhdC5BbmFseXNpc0V2ZW50LHQpfSxlfSh1ZSksX3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyLGkpe3RoaXMuY29uZmlndXJhdGlvbj10LHRoaXMuZXZlbnRQYXRoQ29tcHV0YXRpb249ZSx0aGlzLnNlbGVjdG9yPXIsdGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2U9aX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PW5ldyBtaSh0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy5ldmVudFBhdGhDb21wdXRhdGlvbix0aGlzLnNlbGVjdG9yKSxlPW5ldyByaSh0aGlzLmNvbmZpZ3VyYXRpb24sdGhpcy5ldmVudFBhdGhDb21wdXRhdGlvbixuZXcgb2koVHQpKTt0aGlzLmlmcmFtZUFuYWx5c2lzRXZlbnRzU2VydmljZT1uZXcgT3ModCxlLHRoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlKSx0aGlzLmlmcmFtZUFuYWx5c2lzRXZlbnRzU2VydmljZS5pbml0KCl9LHQucHJvdG90eXBlLm9uU3RhcnRUcmFja2luZz1mdW5jdGlvbigpe3RoaXMuaWZyYW1lQW5hbHlzaXNFdmVudHNTZXJ2aWNlLnN0YXJ0KCl9LHQucHJvdG90eXBlLm9uT3B0b3V0PWZ1bmN0aW9uKCl7dGhpcy5pZnJhbWVBbmFseXNpc0V2ZW50c1NlcnZpY2Uuc3RvcCgpfSx0fSgpLElzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscil7dGhpcy51cmxTZXJ2aWNlPXQsdGhpcy5lTWVyY2hhbmRpc2luZ1RyYWNrZXI9ZSx0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZT1yLHRoaXMucHJvZHVjdHM9W119cmV0dXJuIHQucHJvdG90eXBlLmNvbGxlY3Q9ZnVuY3Rpb24oKXt0aGlzLnByb2R1Y3RzPXRoaXMuZU1lcmNoYW5kaXNpbmdUcmFja2VyLmNvbGxlY3RQcm9kdWN0cygpLHRoaXMudGFyZ2V0VXJsPXRoaXMudXJsU2VydmljZS5nZXRVcmwoKSx0aGlzLnNlbmRFTWVyY2hhbmRpc2luZ0RhdGEoKX0sdC5wcm90b3R5cGUuY2xlYXJQcm9kdWN0cz1mdW5jdGlvbigpe3RoaXMucHJvZHVjdHM9W119LHQucHJvdG90eXBlLnNlbmRFTWVyY2hhbmRpc2luZ0RhdGE9ZnVuY3Rpb24oKXt2YXIgdD17dGFyZ2V0VXJsOnRoaXMudGFyZ2V0VXJsLHdpbmRvd1dpZHRoOnRlLndpbmRvd1dpZHRoKCksd2luZG93SGVpZ2h0OnRlLndpbmRvd0hlaWdodCgpLHByb2R1Y3RzOnRoaXMucHJvZHVjdHN9O3RoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlLnNlbmRUb1BhcmVudChhdC5FbWVyY2hhbmRpc2luZ01lc3NhZ2UsdCl9LHR9KCksTnM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLnVybFNlcnZpY2U9ZSx0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZT1yfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGVuKHRoaXMuY29uZmlndXJhdGlvbik7dGhpcy5pZnJhbWVFbWVyY2hhbmRpc2luZ1NlcnZpY2U9bmV3IElzKHRoaXMudXJsU2VydmljZSx0LHRoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlKX0sdC5wcm90b3R5cGUub25TdGFydFRyYWNraW5nPWZ1bmN0aW9uKCl7dGhpcy5pZnJhbWVFbWVyY2hhbmRpc2luZ1NlcnZpY2UuY2xlYXJQcm9kdWN0cygpLHRoaXMuaWZyYW1lRW1lcmNoYW5kaXNpbmdTZXJ2aWNlLmNvbGxlY3QoKX0sdH0oKSxNcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIsaSl7dmFyIG49dGhpczt0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXI9dCx0aGlzLmNvbmZpZ3VyYXRpb249ZSx0aGlzLmlmcmFtZUNoaWxkVG9QYXJlbnRDb21tdW5pY2F0aW9uU2VydmljZT1yLHRoaXMuY29tbWFuZHNTZXJ2aWNlPWksdGhpcy5zdGFydERhdGFDb2xsZWN0aW9uPWZ1bmN0aW9uKCl7bi5jb21tYW5kc1NlcnZpY2Uuc3RhcnQoKSxuLmxvYWRUcmFja2VyLnN0YXJ0KCl9fXJldHVybiB0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1uZXcgemkoayx0aGlzLmNvbmZpZ3VyYXRpb24pLHI9bmV3IEJpKGUpLGk9bmV3IF9zKHRoaXMuY29uZmlndXJhdGlvbixlLHIsdGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2UpLG49bmV3IEFzKHRoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlKTtpZih0aGlzLmNvbmZpZ3VyYXRpb24uZU1lcmNoYW5kaXNpbmdFbmFibGVkKXt2YXIgbz1uZXcgSixzPW5ldyBEbyh3aW5kb3cubG9jYXRpb24sbyksYT1uZXcgTnModGhpcy5jb25maWd1cmF0aW9uLHMsdGhpcy5pZnJhbWVDaGlsZFRvUGFyZW50Q29tbXVuaWNhdGlvblNlcnZpY2UpO3RoaXMubGlmZUN5Y2xlRXZlbnRzRW1pdHRlci5hZGRMaXN0ZW5lcnMoYSksYS5pbml0KCl9dmFyIGM9bmV3IENuKHRoaXMuY29uZmlndXJhdGlvbiksdT1uZXcgb3MscD1uZXcga3MoYyx1LHRoaXMuaWZyYW1lQ2hpbGRUb1BhcmVudENvbW11bmljYXRpb25TZXJ2aWNlKTt1LmFkZExpc3RlbmVycyhwKSx0aGlzLmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuYWRkTGlzdGVuZXJzKG4scCxpKSxwLmluaXQoKSxpLmluaXQoKSx0aGlzLmxvYWRUcmFja2VyPW5ldyBKaSx0aGlzLmxvYWRUcmFja2VyLm9uTG9hZCgoZnVuY3Rpb24oKXt0LmxpZmVDeWNsZUV2ZW50c0VtaXR0ZXIuZW1pdFN0YXJ0VHJhY2tpbmcoKX0pKSx0aGlzLnN0YXJ0RGF0YUNvbGxlY3Rpb24oKX0sdH0oKSxMcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5jb25maWd1cmF0aW9uPXR9cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgeG4sZT1uZXcgRXModGhpcy5jb25maWd1cmF0aW9uLHQpLHI9bmV3IGNvLGk9bmV3IGdzKHIsZSksbj1uZXcgeXMoaSk7bi5pbml0KCk7dmFyIG89bmV3IFBvLHM9bmV3IGRyLGE9bmV3IFhvKHMpLGM9bmV3ICRvKHMpLHU9bmV3IEhvKGEsYykscD1uZXcgVHMobyx1LHRoaXMuY29uZmlndXJhdGlvbixlKTtyZXR1cm4gcC5pbml0KCksdC5hZGRMaXN0ZW5lcnMobixwKSx0LmVtaXRJbml0VHJhY2tpbmcoKSxuZXcgTXModCx0aGlzLmNvbmZpZ3VyYXRpb24sZSxyKS5zdGFydCgpLHtMWlN0cmluZzpSaX19LHR9KCksRHM9ZnVuY3Rpb24odCxlLHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP2U6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZSh0LGUscixpKTtlbHNlIGZvcih2YXIgYT10Lmxlbmd0aC0xO2E+PTA7YS0tKShuPXRbYV0pJiYocz0obzwzP24ocyk6bz4zP24oZSxyLHMpOm4oZSxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIscyksc30seHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyKXt0aGlzLmNvbmZpZ3VyYXRpb249dCx0aGlzLmlmcmFtZUNvbnRleHQ9ZSx0aGlzLnBhcmVudExvZ0NvbnRleHQ9cn1yZXR1cm4gdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXtpZighd2luZG93LlVYQW5hbHl0aWNzKXt2YXIgdD1uZXcgUHQodGhpcy5pZnJhbWVDb250ZXh0KTt0LmluaXQoKTt2YXIgZT1uZXcgSXQodGhpcy5jb25maWd1cmF0aW9uLHQpO2lmKHRoaXMuaWZyYW1lQ29udGV4dC5pc1RvcFdpbmRvd1RyYWNrZXIoKSYmZS5jYW5UcmFjaygpKXt3aW5kb3cuQ1NQcm90ZWN0bmF0aXZlRnVuY3Rpb25zRXJyb3JzJiZUdC53YXJuKCJwcm90ZWN0TmF0aXZlRnVuY3Rpb25zIGZhaWxlZDogIit3aW5kb3cuQ1NQcm90ZWN0bmF0aXZlRnVuY3Rpb25zRXJyb3JzKTt2YXIgcj1uZXcgZnModGhpcy5jb25maWd1cmF0aW9uLHQsdGhpcy5wYXJlbnRMb2dDb250ZXh0KTt3aW5kb3cuVVhBbmFseXRpY3M9ci5pbml0KCl9ZWxzZSBpZighdGhpcy5pZnJhbWVDb250ZXh0LmlzVG9wV2luZG93VHJhY2tlcigpJiZlLmNhblRyYWNrSW5JZnJhbWUoKSl7dmFyIGk9bmV3IExzKHRoaXMuY29uZmlndXJhdGlvbik7d2luZG93LlVYQW5hbHl0aWNzPWkuaW5pdCgpfSF3aW5kb3cuQ1NGcmFtZUNvbW11bmljYXRpb24mJmRzLmlzQWN0aXZhYmxlKCkmJih3aW5kb3cuQ1NGcmFtZUNvbW11bmljYXRpb249ZHMsZHMud2FpdEZvckNvbm5lY3Rpb24oKSl9fSxEcyhbQXQoIm1haW4uc3RhcnQiKV0sdC5wcm90b3R5cGUsInN0YXJ0IixudWxsKSx0fSgpO3RyeXtwZXJmb3JtYW5jZS5tYXJrKCJjcy1zdGFydC10YWciKTt2YXIgVnM9bmV3IFUod2luZG93LkNTX0NPTkYpO3dpbmRvdy5fdXhhPXdpbmRvdy5fdXhhfHxbXSxWcy5wcm9jZXNzT3B0aW9uT3ZlcnJpZGVzKHdpbmRvdy5fdXhhKTt2YXIgcXM9bmV3IGood2luZG93LFZzKTtxcy5pbml0KCk7dmFyIFVzPW5ldyBsdDtpZihxcy5pc1RvcFdpbmRvd1RyYWNrZXIoKSl7dmFyIGpzPW5ldyBldChWcyxVcyk7VHQuc2V0U3RyYXRlZ3koanMpfWVsc2V7dmFyIHpzPW5ldyBwdChWcyk7VHQuc2V0U3RyYXRlZ3koenMpfW5ldyB4cyhWcyxxcyxVcykuc3RhcnQoKX1jYXRjaCh0KXt9fV0pOw==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="1512935093" offset="0" length="16384" />
        <PacketInfo time="1512935093" offset="16384" length="16384" />
        <PacketInfo time="1512935109" offset="32768" length="16384" />
        <PacketInfo time="1512935109" offset="49152" length="12210" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>